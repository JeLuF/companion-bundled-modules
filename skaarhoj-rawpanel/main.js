/*! For license information please see main.js.LICENSE.txt */
(()=>{var e={7056:(e,t,n)=>{"use strict";const s=n(4063);s.code='require("ajv/dist/runtime/equal").default',t.Z=s},758:(e,t,n)=>{"use strict";n.d(t,{r:()=>o});var s=n(5659),i=n(6890),r=n(2176);function o(){(0,i.T)(),(0,r.KV)()&&function(){const t=(0,s.cu)();if(!t.__SENTRY__)return;const n={mongodb:()=>new((0,r.l$)(e,"./node/integrations/mongo").Mongo),mongoose:()=>new((0,r.l$)(e,"./node/integrations/mongo").Mongo),mysql:()=>new((0,r.l$)(e,"./node/integrations/mysql").Mysql),pg:()=>new((0,r.l$)(e,"./node/integrations/postgres").Postgres)},i=Object.keys(n).filter((e=>!!(0,r.$y)(e))).map((e=>{try{return n[e]()}catch(e){return}})).filter((e=>e));i.length>0&&(t.__SENTRY__.integrations=[...t.__SENTRY__.integrations||[],...i])}()}e=n.hmd(e)},2716:(e,t,n)=>{"use strict";n.d(t,{_:()=>u});var s=n(4307),i=n(2176),r=n(2343),o=n(535),a=n(2844),c=n(7597),l=n(7990);class u{static __initStatic(){this.id="Apollo"}constructor(e={useNestjs:!1}){this.name=u.id,this._useNest=!!e.useNestjs}loadDependency(){return this._useNest?this._module=this._module||(0,i.$y)("@nestjs/graphql"):this._module=this._module||(0,i.$y)("apollo-server-core"),this._module}setupOnce(e,t){if((0,l.K)(t))("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.kg.log("Apollo Integration is skipped because of instrumenter configuration.");else if(this._useNest){const e=this.loadDependency();if(!e)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.kg.error("Apollo-NestJS Integration was unable to require @nestjs/graphql package."));(0,o.hl)(e.GraphQLFactory.prototype,"mergeWithSchema",(function(e){return function(...n){return(0,o.hl)(this.resolversExplorerService,"explore",(function(e){return function(){return d((0,a.lE)(e.call(this)),t)}})),e.call(this,...n)}}))}else{const e=this.loadDependency();if(!e)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.kg.error("Apollo Integration was unable to require apollo-server-core package."));(0,o.hl)(e.ApolloServerBase.prototype,"constructSchema",(function(e){return function(){if(!this.config.resolvers)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&(this.config.schema?(r.kg.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `schema` property.If you are using NestJS with Apollo, please use `Sentry.Integrations.Apollo({ useNestjs: true })` instead."),r.kg.warn()):this.config.modules&&r.kg.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `modules` property."),r.kg.error("Skipping tracing as no resolvers found on the `ApolloServer` instance.")),e.call(this);const n=(0,a.lE)(this.config.resolvers);return this.config.resolvers=d(n,t),e.call(this)}}))}}}function d(e,t){return e.map((e=>(Object.keys(e).forEach((n=>{Object.keys(e[n]).forEach((i=>{"function"==typeof e[n][i]&&function(e,t,n,i){(0,o.hl)(e[t],n,(function(e){return function(...r){const o=i().getScope(),a=(0,s.x)([o,"optionalAccess",e=>e.getSpan,"call",e=>e()]),l=(0,s.x)([a,"optionalAccess",e=>e.startChild,"call",e=>e({description:`${t}.${n}`,op:"graphql.resolve",origin:"auto.graphql.apollo"})]),u=e.call(this,...r);return(0,c.J8)(u)?u.then((e=>((0,s.x)([l,"optionalAccess",e=>e.finish,"call",e=>e()]),e))):((0,s.x)([l,"optionalAccess",e=>e.finish,"call",e=>e()]),u)}}))}(e,n,i,t)}))})),e)))}u.__initStatic()},8737:(e,t,n)=>{"use strict";n.d(t,{N:()=>l});var s=n(4307),i=n(2343),r=n(6956),o=n(442),a=n(7597),c=n(7990);class l{static __initStatic(){this.id="Express"}constructor(e={}){this.name=l.id,this._router=e.router||e.app,this._methods=(Array.isArray(e.methods)?e.methods:[]).concat("use")}setupOnce(e,t){this._router?(0,c.K)(t)?("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.kg.log("Express Integration is skipped because of instrumenter configuration."):(function(e,t=[]){t.forEach((t=>function(e,t){const n=e[t];return e[t]=function(...e){return n.call(this,...function(e,t){return e.map((e=>"function"==typeof e?u(e,t):Array.isArray(e)?e.map((e=>"function"==typeof e?u(e,t):e)):e))}(e,t))},e}(e,t)))}(this._router,this._methods),function(e){const t="settings"in e;t&&void 0===e._router&&e.lazyrouter&&e.lazyrouter();const n=t?e._router:e;if(!n)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.kg.debug("Cannot instrument router for URL Parameterization (did not find a valid router)."),void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.kg.debug("Routing instrumentation is currently only supported in Express 4."));const c=Object.getPrototypeOf(n),l=c.process_params;c.process_params=function(e,t,n,i,c){n._reconstructedRoute||(n._reconstructedRoute="");const{layerRoutePath:u,isRegex:d,isArray:p,numExtraSegments:h}=function(e){const t=(0,s.x)([e,"access",e=>e.route,"optionalAccess",e=>e.path]),n=(0,a.Kj)(t),i=Array.isArray(t);if(!t)return{isRegex:n,isArray:i,numExtraSegments:0};const o=i?Math.max(t.reduce(((e,t)=>e+(0,r.$A)(t.toString())),0)-(0,r.$A)(e.path||""),0):0,c=function(e,t){return e?t.map((e=>e.toString())).join(","):t&&t.toString()}(i,t);return{layerRoutePath:c,isRegex:n,isArray:i,numExtraSegments:o}}(e);(u||d||p)&&(n._hasParameters=!0);const f=(u||e.path||"").split("/").filter((e=>e.length>0&&(d||p||!e.includes("*")))).join("/");if(f&&f.length>0&&(n._reconstructedRoute+=`/${f}${d?"/":""}`),(0,r.$A)(n.originalUrl||"")+h===(0,r.$A)(n._reconstructedRoute)){n._hasParameters||n._reconstructedRoute!==n.originalUrl&&(n._reconstructedRoute=n.originalUrl?(0,r.rt)(n.originalUrl):n.originalUrl);const e=i.__sentry_transaction;if(e&&"custom"!==e.metadata.source){const t=n._reconstructedRoute||"/";e.setName(...(0,o.oA)(n,{path:!0,method:!0,customRoute:t}))}}return l.call(this,e,t,n,i,c)}}(this._router)):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.kg.error("ExpressIntegration is missing an Express instance")}}function u(e,t){const n=e.length;switch(n){case 2:return function(n,s){const i=s.__sentry_transaction;if(i){const n=i.startChild({description:e.name,op:`middleware.express.${t}`,origin:"auto.middleware.express"});s.once("finish",(()=>{n.finish()}))}return e.call(this,n,s)};case 3:return function(n,i,r){const o=i.__sentry_transaction,a=(0,s.x)([o,"optionalAccess",e=>e.startChild,"call",n=>n({description:e.name,op:`middleware.express.${t}`,origin:"auto.middleware.express"})]);e.call(this,n,i,(function(...e){(0,s.x)([a,"optionalAccess",e=>e.finish,"call",e=>e()]),r.call(this,...e)}))};case 4:return function(n,i,r,o){const a=r.__sentry_transaction,c=(0,s.x)([a,"optionalAccess",e=>e.startChild,"call",n=>n({description:e.name,op:`middleware.express.${t}`,origin:"auto.middleware.express"})]);e.call(this,n,i,r,(function(...e){(0,s.x)([c,"optionalAccess",e=>e.finish,"call",e=>e()]),o.call(this,...e)}))};default:throw new Error(`Express middleware takes 2-4 arguments. Got: ${n}`)}}l.__initStatic()},1791:(e,t,n)=>{"use strict";n.d(t,{k:()=>l});var s=n(4307),i=n(2176),r=n(2343),o=n(535),a=n(7597),c=n(7990);class l{static __initStatic(){this.id="GraphQL"}constructor(){this.name=l.id}loadDependency(){return this._module=this._module||(0,i.$y)("graphql/execution/execute.js")}setupOnce(e,t){if((0,c.K)(t))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.kg.log("GraphQL Integration is skipped because of instrumenter configuration."));const n=this.loadDependency();n?(0,o.hl)(n,"execute",(function(e){return function(...n){const i=t().getScope(),r=(0,s.x)([i,"optionalAccess",e=>e.getSpan,"call",e=>e()]),o=(0,s.x)([r,"optionalAccess",e=>e.startChild,"call",e=>e({description:"execute",op:"graphql.execute",origin:"auto.graphql.graphql"})]);(0,s.x)([i,"optionalAccess",e=>e.setSpan,"call",e=>e(o)]);const c=e.call(this,...n);return(0,a.J8)(c)?c.then((e=>((0,s.x)([o,"optionalAccess",e=>e.finish,"call",e=>e()]),(0,s.x)([i,"optionalAccess",e=>e.setSpan,"call",e=>e(r)]),e))):((0,s.x)([o,"optionalAccess",e=>e.finish,"call",e=>e()]),(0,s.x)([i,"optionalAccess",e=>e.setSpan,"call",e=>e(r)]),c)}})):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.kg.error("GraphQL Integration was unable to require graphql/execution package.")}}l.__initStatic()},6046:(e,t,n)=>{"use strict";n.d(t,{G:()=>i});var s=n(2176);e=n.hmd(e);const i=[()=>new((0,s.l$)(e,"./apollo").Apollo),()=>new((0,s.l$)(e,"./apollo").Apollo)({useNestjs:!0}),()=>new((0,s.l$)(e,"./graphql").GraphQL),()=>new((0,s.l$)(e,"./mongo").Mongo),()=>new((0,s.l$)(e,"./mongo").Mongo)({mongoose:!0}),()=>new((0,s.l$)(e,"./mysql").Mysql),()=>new((0,s.l$)(e,"./postgres").Postgres)]},6169:(e,t,n)=>{"use strict";n.d(t,{_:()=>d});var s=n(4307),i=n(2176),r=n(2343),o=n(535),a=n(7597),c=n(7990);const l=["aggregate","bulkWrite","countDocuments","createIndex","createIndexes","deleteMany","deleteOne","distinct","drop","dropIndex","dropIndexes","estimatedDocumentCount","find","findOne","findOneAndDelete","findOneAndReplace","findOneAndUpdate","indexes","indexExists","indexInformation","initializeOrderedBulkOp","insertMany","insertOne","isCapped","mapReduce","options","parallelCollectionScan","rename","replaceOne","stats","updateMany","updateOne"],u={bulkWrite:["operations"],countDocuments:["query"],createIndex:["fieldOrSpec"],createIndexes:["indexSpecs"],deleteMany:["filter"],deleteOne:["filter"],distinct:["key","query"],dropIndex:["indexName"],find:["query"],findOne:["query"],findOneAndDelete:["filter"],findOneAndReplace:["filter","replacement"],findOneAndUpdate:["filter","update"],indexExists:["indexes"],insertMany:["docs"],insertOne:["doc"],mapReduce:["map","reduce"],rename:["newName"],replaceOne:["filter","doc"],updateMany:["filter","update"],updateOne:["filter","update"]};class d{static __initStatic(){this.id="Mongo"}constructor(e={}){this.name=d.id,this._operations=Array.isArray(e.operations)?e.operations:l,this._describeOperations=!("describeOperations"in e)||e.describeOperations,this._useMongoose=!!e.useMongoose}loadDependency(){const e=this._useMongoose?"mongoose":"mongodb";return this._module=this._module||(0,i.$y)(e)}setupOnce(e,t){if((0,c.K)(t))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.kg.log("Mongo Integration is skipped because of instrumenter configuration."));const n=this.loadDependency();if(n)this._instrumentOperations(n.Collection,this._operations,t);else{const e=this._useMongoose?"mongoose":"mongodb";("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.kg.error(`Mongo Integration was unable to require \`${e}\` package.`)}}_instrumentOperations(e,t,n){t.forEach((t=>this._patchOperation(e,t,n)))}_patchOperation(e,t,n){if(!(t in e.prototype))return;const i=this._getSpanContextFromOperationArguments.bind(this);(0,o.hl)(e.prototype,t,(function(e){return function(...r){const o=r[r.length-1],c=n().getScope(),l=(0,s.x)([c,"optionalAccess",e=>e.getSpan,"call",e=>e()]);if("function"!=typeof o||"mapReduce"===t&&2===r.length){const n=(0,s.x)([l,"optionalAccess",e=>e.startChild,"call",e=>e(i(this,t,r))]),o=e.call(this,...r);if((0,a.J8)(o))return o.then((e=>((0,s.x)([n,"optionalAccess",e=>e.finish,"call",e=>e()]),e)));if((u=o)&&"object"==typeof u&&u.once&&"function"==typeof u.once){const e=o;try{e.once("close",(()=>{(0,s.x)([n,"optionalAccess",e=>e.finish,"call",e=>e()])}))}catch(e){(0,s.x)([n,"optionalAccess",e=>e.finish,"call",e=>e()])}return e}return(0,s.x)([n,"optionalAccess",e=>e.finish,"call",e=>e()]),o}var u;const d=(0,s.x)([l,"optionalAccess",e=>e.startChild,"call",e=>e(i(this,t,r.slice(0,-1)))]);return e.call(this,...r.slice(0,-1),(function(e,t){(0,s.x)([d,"optionalAccess",e=>e.finish,"call",e=>e()]),o(e,t)}))}}))}_getSpanContextFromOperationArguments(e,t,n){const s={"db.system":"mongodb","db.name":e.dbName,"db.operation":t,"db.mongodb.collection":e.collectionName},i={op:"db",origin:"auto.db.mongo",description:t,data:s},r=u[t],o=Array.isArray(this._describeOperations)?this._describeOperations.includes(t):this._describeOperations;if(!r||!o)return i;try{if("mapReduce"===t){const[e,t]=n;s[r[0]]="string"==typeof e?e:e.name||"<anonymous>",s[r[1]]="string"==typeof t?t:t.name||"<anonymous>"}else for(let e=0;e<r.length;e++)s[`db.mongodb.${r[e]}`]=JSON.stringify(n[e])}catch(e){}return i}}d.__initStatic()},24:(e,t,n)=>{"use strict";n.d(t,{m:()=>c});var s=n(4307),i=n(2176),r=n(2343),o=n(535),a=n(7990);class c{static __initStatic(){this.id="Mysql"}constructor(){this.name=c.id}loadDependency(){return this._module=this._module||(0,i.$y)("mysql/lib/Connection.js")}setupOnce(e,t){if((0,a.K)(t))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.kg.log("Mysql Integration is skipped because of instrumenter configuration."));const n=this.loadDependency();if(!n)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.kg.error("Mysql Integration was unable to require `mysql` package."));let i;try{n.prototype.connect=new Proxy(n.prototype.connect,{apply:(e,t,n)=>(i||(i=t.config),e.apply(t,n))})}catch(e){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.kg.error("Mysql Integration was unable to instrument `mysql` config.")}(0,o.hl)(n,"createQuery",(function(e){return function(n,r,o){const a=t().getScope(),c=(0,s.x)([a,"optionalAccess",e=>e.getSpan,"call",e=>e()]),l=(0,s.x)([c,"optionalAccess",e=>e.startChild,"call",e=>e({description:"string"==typeof n?n:n.sql,op:"db",origin:"auto.db.mysql",data:{...i?{"server.address":i.host,"server.port":i.port,"db.user":i.user}:{},"db.system":"mysql"}})]);return"function"==typeof o?e.call(this,n,r,(function(e,t,n){(0,s.x)([l,"optionalAccess",e=>e.finish,"call",e=>e()]),o(e,t,n)})):"function"==typeof r?e.call(this,n,(function(e,t,n){(0,s.x)([l,"optionalAccess",e=>e.finish,"call",e=>e()]),r(e,t,n)})):e.call(this,n,r,o)}}))}}c.__initStatic()},1370:(e,t,n)=>{"use strict";n.d(t,{E:()=>l});var s=n(4307),i=n(2176),r=n(2343),o=n(535),a=n(7597),c=n(7990);class l{static __initStatic(){this.id="Postgres"}constructor(e={}){this.name=l.id,this._usePgNative=!!e.usePgNative}loadDependency(){return this._module=this._module||(0,i.$y)("pg")}setupOnce(e,t){if((0,c.K)(t))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.kg.log("Postgres Integration is skipped because of instrumenter configuration."));const n=this.loadDependency();if(!n)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.kg.error("Postgres Integration was unable to require `pg` package."));if(this._usePgNative&&!(0,s.x)([n,"access",e=>e.native,"optionalAccess",e=>e.Client]))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.kg.error("Postgres Integration was unable to access 'pg-native' bindings."));const{Client:i}=this._usePgNative?n.native:n;(0,o.hl)(i.prototype,"query",(function(e){return function(n,i,r){const o=t().getScope(),c=(0,s.x)([o,"optionalAccess",e=>e.getSpan,"call",e=>e()]),l={"db.system":"postgresql"};try{this.database&&(l["db.name"]=this.database),this.host&&(l["server.address"]=this.host),this.port&&(l["server.port"]=this.port),this.user&&(l["db.user"]=this.user)}catch(e){}const u=(0,s.x)([c,"optionalAccess",e=>e.startChild,"call",e=>e({description:"string"==typeof n?n:n.text,op:"db",origin:"auto.db.postgres",data:l})]);if("function"==typeof r)return e.call(this,n,i,(function(e,t){(0,s.x)([u,"optionalAccess",e=>e.finish,"call",e=>e()]),r(e,t)}));if("function"==typeof i)return e.call(this,n,(function(e,t){(0,s.x)([u,"optionalAccess",e=>e.finish,"call",e=>e()]),i(e,t)}));const d=void 0!==i?e.call(this,n,i):e.call(this,n);return(0,a.J8)(d)?d.then((e=>((0,s.x)([u,"optionalAccess",e=>e.finish,"call",e=>e()]),e))):((0,s.x)([u,"optionalAccess",e=>e.finish,"call",e=>e()]),d)}}))}}l.__initStatic()},9889:(e,t,n)=>{"use strict";n.d(t,{g:()=>c});var s=n(5659),i=n(1250),r=n(535),o=n(2343),a=n(7990);class c{static __initStatic(){this.id="Prisma"}constructor(e={}){if(this.name=c.id,(t=e.client)&&t.$use&&!e.client._sentryInstrumented){(0,r.xp)(e.client,"_sentryInstrumented",!0);const t={};try{const n=e.client._engineConfig;if(n){const{activeProvider:e,clientVersion:s}=n;e&&(t["db.system"]=e),s&&(t["db.prisma.version"]=s)}}catch(e){}e.client.$use(((e,n)=>{if((0,a.K)(s.Gd))return n(e);const r=e.action,o=e.model;return(0,i.g4)({name:o?`${o} ${r}`:r,op:"db.sql.prisma",origin:"auto.db.prisma",data:{...t,"db.operation":r}},(()=>n(e)))}))}else("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.kg.warn("Unsupported Prisma client provided to PrismaIntegration. Provided client:",e.client);var t}setupOnce(){}}c.__initStatic()},7990:(e,t,n)=>{"use strict";n.d(t,{K:()=>i});var s=n(4307);function i(e){const t=(0,s.x)([e,"call",e=>e(),"access",e=>e.getClient,"call",e=>e(),"optionalAccess",e=>e.getOptions,"call",e=>e()]);return"sentry"!==((0,s.x)([t,"optionalAccess",e=>e.instrumenter])||"sentry")}},1131:(e,t,n)=>{"use strict";n.d(t,{J:()=>s});const s="production"},5659:(e,t,n)=>{"use strict";n.d(t,{$b:()=>y,Gd:()=>_,Ok:()=>b,Xb:()=>p,cu:()=>h,j0:()=>S,pj:()=>f,uZ:()=>m,vi:()=>v});var s=n(2844),i=n(1170),r=n(2343),o=n(1235),a=n(1131),c=n(350),l=n(9015);const u=4,d=100;class p{constructor(e,t=new c.s,n=u){this._version=n,this._stack=[{scope:t}],e&&this.bindClient(e)}isOlderThan(e){return this._version<e}bindClient(e){this.getStackTop().client=e,e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){const e=c.s.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return!(this.getStack().length<=1||!this.getStack().pop())}withScope(e){const t=this.pushScope();try{e(t)}finally{this.popScope()}}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,t){const n=this._lastEventId=t&&t.event_id?t.event_id:(0,s.DM)(),i=new Error("Sentry syntheticException");return this._withClient(((s,r)=>{s.captureException(e,{originalException:e,syntheticException:i,...t,event_id:n},r)})),n}captureMessage(e,t,n){const i=this._lastEventId=n&&n.event_id?n.event_id:(0,s.DM)(),r=new Error(e);return this._withClient(((s,o)=>{s.captureMessage(e,t,{originalException:e,syntheticException:r,...n,event_id:i},o)})),i}captureEvent(e,t){const n=t&&t.event_id?t.event_id:(0,s.DM)();return e.type||(this._lastEventId=n),this._withClient(((s,i)=>{s.captureEvent(e,{...t,event_id:n},i)})),n}lastEventId(){return this._lastEventId}addBreadcrumb(e,t){const{scope:n,client:s}=this.getStackTop();if(!s)return;const{beforeBreadcrumb:o=null,maxBreadcrumbs:a=d}=s.getOptions&&s.getOptions()||{};if(a<=0)return;const c={timestamp:(0,i.yW)(),...e},l=o?(0,r.Cf)((()=>o(c,t))):c;null!==l&&(s.emit&&s.emit("beforeAddBreadcrumb",l,t),n.addBreadcrumb(l,a))}setUser(e){this.getScope().setUser(e)}setTags(e){this.getScope().setTags(e)}setExtras(e){this.getScope().setExtras(e)}setTag(e,t){this.getScope().setTag(e,t)}setExtra(e,t){this.getScope().setExtra(e,t)}setContext(e,t){this.getScope().setContext(e,t)}configureScope(e){const{scope:t,client:n}=this.getStackTop();n&&e(t)}run(e){const t=f(this);try{e(this)}finally{f(t)}}getIntegration(e){const t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(t){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.kg.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,t){const n=this._callExtensionMethod("startTransaction",e,t);return"undefined"!=typeof __SENTRY_DEBUG__&&!__SENTRY_DEBUG__||n||(this.getClient()?console.warn("Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':\nSentry.addTracingExtensions();\nSentry.init({...});\n"):console.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")),n}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){const e=this.getStackTop().scope,t=e.getSession();t&&(0,l.RJ)(t),this._sendSessionUpdate(),e.setSession()}startSession(e){const{scope:t,client:n}=this.getStackTop(),{release:s,environment:i=a.J}=n&&n.getOptions()||{},{userAgent:r}=o.n2.navigator||{},c=(0,l.Hv)({release:s,environment:i,user:t.getUser(),...r&&{userAgent:r},...e}),u=t.getSession&&t.getSession();return u&&"ok"===u.status&&(0,l.CT)(u,{status:"exited"}),this.endSession(),t.setSession(c),c}shouldSendDefaultPii(){const e=this.getClient(),t=e&&e.getOptions();return Boolean(t&&t.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:t}=this.getStackTop(),n=e.getSession();n&&t&&t.captureSession&&t.captureSession(n)}_withClient(e){const{scope:t,client:n}=this.getStackTop();n&&e(n,t)}_callExtensionMethod(e,...t){const n=h().__SENTRY__;if(n&&n.extensions&&"function"==typeof n.extensions[e])return n.extensions[e].apply(this,t);("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.kg.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function h(){return o.n2.__SENTRY__=o.n2.__SENTRY__||{extensions:{},hub:void 0},o.n2}function f(e){const t=h(),n=v(t);return S(t,e),n}function _(){const e=h();if(e.__SENTRY__&&e.__SENTRY__.acs){const t=e.__SENTRY__.acs.getCurrentHub();if(t)return t}return g(e)}function g(e=h()){return E(e)&&!v(e).isOlderThan(u)||S(e,new p),v(e)}function m(e,t=g()){if(!E(e)||v(e).isOlderThan(u)){const n=t.getStackTop();S(e,new p(n.client,c.s.clone(n.scope)))}}function y(e){const t=h();t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.acs=e}function b(e,t={}){const n=h();return n.__SENTRY__&&n.__SENTRY__.acs?n.__SENTRY__.acs.runWithAsyncContext(e,t):e()}function E(e){return!!(e&&e.__SENTRY__&&e.__SENTRY__.hub)}function v(e){return(0,o.YO)("hub",(()=>new p),e)}function S(e,t){return!!e&&((e.__SENTRY__=e.__SENTRY__||{}).hub=t,!0)}},350:(e,t,n)=>{"use strict";n.d(t,{c:()=>p,s:()=>u});var s=n(7597),i=n(1170),r=n(6893),o=n(2343),a=n(2844),c=n(1235),l=n(9015);class u{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=h()}static clone(e){const t=new u;return e&&(t._breadcrumbs=[...e._breadcrumbs],t._tags={...e._tags},t._extra={...e._extra},t._contexts={...e._contexts},t._user=e._user,t._level=e._level,t._span=e._span,t._session=e._session,t._transactionName=e._transactionName,t._fingerprint=e._fingerprint,t._eventProcessors=[...e._eventProcessors],t._requestSession=e._requestSession,t._attachments=[...e._attachments],t._sdkProcessingMetadata={...e._sdkProcessingMetadata},t._propagationContext={...e._propagationContext}),t}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{},this._session&&(0,l.CT)(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const e=this.getSpan();return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;if("function"==typeof e){const t=e(this);return t instanceof u?t:this}return e instanceof u?(this._tags={...this._tags,...e._tags},this._extra={...this._extra,...e._extra},this._contexts={...this._contexts,...e._contexts},e._user&&Object.keys(e._user).length&&(this._user=e._user),e._level&&(this._level=e._level),e._fingerprint&&(this._fingerprint=e._fingerprint),e._requestSession&&(this._requestSession=e._requestSession),e._propagationContext&&(this._propagationContext=e._propagationContext)):(0,s.PO)(e)&&(this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint&&(this._fingerprint=e.fingerprint),e.requestSession&&(this._requestSession=e.requestSession),e.propagationContext&&(this._propagationContext=e.propagationContext)),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=h(),this}addBreadcrumb(e,t){const n="number"==typeof t?t:100;if(n<=0)return this;const s={timestamp:(0,i.yW)(),...e};return this._breadcrumbs=[...this._breadcrumbs,s].slice(-n),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this._attachments}clearAttachments(){return this._attachments=[],this}applyToEvent(e,t={}){if(this._extra&&Object.keys(this._extra).length&&(e.extra={...this._extra,...e.extra}),this._tags&&Object.keys(this._tags).length&&(e.tags={...this._tags,...e.tags}),this._user&&Object.keys(this._user).length&&(e.user={...this._user,...e.user}),this._contexts&&Object.keys(this._contexts).length&&(e.contexts={...this._contexts,...e.contexts}),this._level&&(e.level=this._level),this._transactionName&&(e.transaction=this._transactionName),this._span){e.contexts={trace:this._span.getTraceContext(),...e.contexts};const t=this._span.transaction;if(t){e.sdkProcessingMetadata={dynamicSamplingContext:t.getDynamicSamplingContext(),...e.sdkProcessingMetadata};const n=t.name;n&&(e.tags={transaction:n,...e.tags})}}return this._applyFingerprint(e),e.breadcrumbs=[...e.breadcrumbs||[],...this._breadcrumbs],e.breadcrumbs=e.breadcrumbs.length>0?e.breadcrumbs:void 0,e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...this._sdkProcessingMetadata,propagationContext:this._propagationContext},this._notifyEventProcessors([...d(),...this._eventProcessors],e,t)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}_notifyEventProcessors(e,t,n,i=0){return new r.cW(((r,a)=>{const c=e[i];if(null===t||"function"!=typeof c)r(t);else{const l=c({...t},n);("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&c.id&&null===l&&o.kg.log(`Event processor "${c.id}" dropped event`),(0,s.J8)(l)?l.then((t=>this._notifyEventProcessors(e,t,n,i+1).then(r))).then(null,a):this._notifyEventProcessors(e,l,n,i+1).then(r).then(null,a)}}))}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((e=>{e(this)})),this._notifyingListeners=!1)}_applyFingerprint(e){e.fingerprint=e.fingerprint?(0,a.lE)(e.fingerprint):[],this._fingerprint&&(e.fingerprint=e.fingerprint.concat(this._fingerprint)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}}function d(){return(0,c.YO)("globalEventProcessors",(()=>[]))}function p(e){d().push(e)}function h(){return{traceId:(0,a.DM)(),spanId:(0,a.DM)().substring(16)}}},9015:(e,t,n)=>{"use strict";n.d(t,{CT:()=>a,Hv:()=>o,RJ:()=>c});var s=n(1170),i=n(2844),r=n(535);function o(e){const t=(0,s.ph)(),n={sid:(0,i.DM)(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(e){return(0,r.Jr)({sid:`${e.sid}`,init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"==typeof e.did||"string"==typeof e.did?`${e.did}`:void 0,duration:e.duration,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}(n)};return e&&a(n,e),n}function a(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||(0,s.ph)(),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:(0,i.DM)()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}function c(e,t){let n={};t?n={status:t}:"ok"===e.status&&(n={status:"exited"}),a(e,n)}},454:(e,t,n)=>{"use strict";n.d(t,{_:()=>r});var s=n(535),i=n(1131);function r(e,t,n){const r=t.getOptions(),{publicKey:o}=t.getDsn()||{},{segment:a}=n&&n.getUser()||{},c=(0,s.Jr)({environment:r.environment||i.J,release:r.release,user_segment:a,public_key:o,trace_id:e});return t.emit&&t.emit("createDsc",c),c}},6890:(e,t,n)=>{"use strict";n.d(t,{T:()=>m,l:()=>g});var s=n(2343),i=n(7597),r=n(5659),o=n(7522),a=n(1688),c=n(9791);let l=!1;function u(){const e=(0,c.x1)();if(e){const t="internal_error";("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.kg.log(`[Tracing] Transaction: ${t} -> Global error occured`),e.setStatus(t)}}u.tag="sentry_tracingErrorCallback";var d=n(5544),p=n(8069);function h(){const e=this.getScope().getSpan();return e?{"sentry-trace":e.toTraceparent()}:{}}function f(e,t,n){if(!(0,o.z)(t))return e.sampled=!1,e;if(void 0!==e.sampled)return e.setMetadata({sampleRate:Number(e.sampled)}),e;let r;return"function"==typeof t.tracesSampler?(r=t.tracesSampler(n),e.setMetadata({sampleRate:Number(r)})):void 0!==n.parentSampled?r=n.parentSampled:void 0!==t.tracesSampleRate?(r=t.tracesSampleRate,e.setMetadata({sampleRate:Number(r)})):(r=1,e.setMetadata({sampleRate:r})),a=r,((0,i.i2)(a)||"number"!=typeof a&&"boolean"!=typeof a?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.kg.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(a)} of type ${JSON.stringify(typeof a)}.`),0):!(a<0||a>1)||(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.kg.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${a}.`),0))?r?(e.sampled=Math.random()<r,e.sampled?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.kg.log(`[Tracing] starting ${e.op} transaction - ${e.name}`),e):(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.kg.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(r)})`),e)):(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.kg.log("[Tracing] Discarding transaction because "+("function"==typeof t.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),e.sampled=!1,e):(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.kg.warn("[Tracing] Discarding transaction because of invalid sample rate."),e.sampled=!1,e);var a}function _(e,t){const n=this.getClient(),i=n&&n.getOptions()||{},r=i.instrumenter||"sentry",o=e.instrumenter||"sentry";r!==o&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.kg.error(`A transaction was started with instrumenter=\`${o}\`, but the SDK is configured with the \`${r}\` instrumenter.\nThe transaction will not be sampled. Please use the ${r} instrumentation to start transactions.`),e.sampled=!1);let a=new p.Y(e,this);return a=f(a,i,{parentSampled:e.parentSampled,transactionContext:e,...t}),a.sampled&&a.initSpanRecorder(i._experiments&&i._experiments.maxSpans),n&&n.emit&&n.emit("startTransaction",a),a}function g(e,t,n,s,i,r,o){const a=e.getClient(),c=a&&a.getOptions()||{};let l=new d.io(t,e,n,s,o,i);return l=f(l,c,{parentSampled:t.parentSampled,transactionContext:t,...r}),l.sampled&&l.initSpanRecorder(c._experiments&&c._experiments.maxSpans),a&&a.emit&&a.emit("startTransaction",l),l}function m(){const e=(0,r.cu)();e.__SENTRY__&&(e.__SENTRY__.extensions=e.__SENTRY__.extensions||{},e.__SENTRY__.extensions.startTransaction||(e.__SENTRY__.extensions.startTransaction=_),e.__SENTRY__.extensions.traceHeaders||(e.__SENTRY__.extensions.traceHeaders=h),l||(l=!0,(0,a.oq)("error",u),(0,a.oq)("unhandledrejection",u)))}},5544:(e,t,n)=>{"use strict";n.d(t,{AT:()=>a,io:()=>u});var s=n(1170),i=n(2343),r=n(8903),o=n(8069);const a={idleTimeout:1e3,finalTimeout:3e4,heartbeatInterval:5e3},c=["heartbeatFailed","idleTimeout","documentHidden","finalTimeout","externalFinish","cancelled"];class l extends r.gB{constructor(e,t,n,s){super(s),this._pushActivity=e,this._popActivity=t,this.transactionSpanId=n}add(e){e.spanId!==this.transactionSpanId&&(e.finish=t=>{e.endTimestamp="number"==typeof t?t:(0,s.ph)(),this._popActivity(e.spanId)},void 0===e.endTimestamp&&this._pushActivity(e.spanId)),super.add(e)}}class u extends o.Y{constructor(e,t,n=a.idleTimeout,s=a.finalTimeout,r=a.heartbeatInterval,o=!1){super(e,t),this._idleHub=t,this._idleTimeout=n,this._finalTimeout=s,this._heartbeatInterval=r,this._onScope=o,this.activities={},this._heartbeatCounter=0,this._finished=!1,this._idleTimeoutCanceledPermanently=!1,this._beforeFinishCallbacks=[],this._finishReason=c[4],o&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.kg.log(`Setting idle transaction on scope. Span ID: ${this.spanId}`),t.configureScope((e=>e.setSpan(this)))),this._restartIdleTimeout(),setTimeout((()=>{this._finished||(this.setStatus("deadline_exceeded"),this._finishReason=c[3],this.finish())}),this._finalTimeout)}finish(e=(0,s.ph)()){if(this._finished=!0,this.activities={},"ui.action.click"===this.op&&this.setTag("finishReason",this._finishReason),this.spanRecorder){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.kg.log("[Tracing] finishing IdleTransaction",new Date(1e3*e).toISOString(),this.op);for(const t of this._beforeFinishCallbacks)t(this,e);this.spanRecorder.spans=this.spanRecorder.spans.filter((t=>{if(t.spanId===this.spanId)return!0;t.endTimestamp||(t.endTimestamp=e,t.setStatus("cancelled"),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.kg.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(t,void 0,2)));const n=t.startTimestamp<e,s=(this._finalTimeout+this._idleTimeout)/1e3,r=t.endTimestamp-this.startTimestamp<s;if("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__){const e=JSON.stringify(t,void 0,2);n?r||i.kg.log("[Tracing] discarding Span since it finished after Transaction final timeout",e):i.kg.log("[Tracing] discarding Span since it happened after Transaction was finished",e)}return n&&r})),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.kg.log("[Tracing] flushing IdleTransaction")}else("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.kg.log("[Tracing] No active IdleTransaction");if(this._onScope){const e=this._idleHub.getScope();e.getTransaction()===this&&e.setSpan(void 0)}return super.finish(e)}registerBeforeFinishCallback(e){this._beforeFinishCallbacks.push(e)}initSpanRecorder(e){if(!this.spanRecorder){const t=e=>{this._finished||this._pushActivity(e)},n=e=>{this._finished||this._popActivity(e)};this.spanRecorder=new l(t,n,this.spanId,e),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.kg.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)}cancelIdleTimeout(e,{restartOnChildSpanChange:t}={restartOnChildSpanChange:!0}){this._idleTimeoutCanceledPermanently=!1===t,this._idleTimeoutID&&(clearTimeout(this._idleTimeoutID),this._idleTimeoutID=void 0,0===Object.keys(this.activities).length&&this._idleTimeoutCanceledPermanently&&(this._finishReason=c[5],this.finish(e)))}setFinishReason(e){this._finishReason=e}_restartIdleTimeout(e){this.cancelIdleTimeout(),this._idleTimeoutID=setTimeout((()=>{this._finished||0!==Object.keys(this.activities).length||(this._finishReason=c[1],this.finish(e))}),this._idleTimeout)}_pushActivity(e){this.cancelIdleTimeout(void 0,{restartOnChildSpanChange:!this._idleTimeoutCanceledPermanently}),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.kg.log(`[Tracing] pushActivity: ${e}`),this.activities[e]=!0,("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.kg.log("[Tracing] new activities count",Object.keys(this.activities).length)}_popActivity(e){if(this.activities[e]&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.kg.log(`[Tracing] popActivity ${e}`),delete this.activities[e],("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.kg.log("[Tracing] new activities count",Object.keys(this.activities).length)),0===Object.keys(this.activities).length){const e=(0,s.ph)();this._idleTimeoutCanceledPermanently?(this._finishReason=c[5],this.finish(e)):this._restartIdleTimeout(e+this._idleTimeout/1e3)}}_beat(){if(this._finished)return;const e=Object.keys(this.activities).join("");e===this._prevHeartbeatString?this._heartbeatCounter++:this._heartbeatCounter=1,this._prevHeartbeatString=e,this._heartbeatCounter>=3?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.kg.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus("deadline_exceeded"),this._finishReason=c[0],this.finish()):this._pingHeartbeat()}_pingHeartbeat(){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.kg.log(`pinging Heartbeat -> current counter: ${this._heartbeatCounter}`),setTimeout((()=>{this._beat()}),this._heartbeatInterval)}}},8903:(e,t,n)=>{"use strict";n.d(t,{Dr:()=>l,Zd:()=>u,gB:()=>c});var s=n(2844),i=n(1170),r=n(2343),o=n(7638),a=n(535);class c{constructor(e=1e3){this._maxlen=e,this.spans=[]}add(e){this.spans.length>this._maxlen?e.spanRecorder=void 0:this.spans.push(e)}}class l{constructor(e={}){this.traceId=e.traceId||(0,s.DM)(),this.spanId=e.spanId||(0,s.DM)().substring(16),this.startTimestamp=e.startTimestamp||(0,i.ph)(),this.tags=e.tags||{},this.data=e.data||{},this.instrumenter=e.instrumenter||"sentry",this.origin=e.origin||"manual",e.parentSpanId&&(this.parentSpanId=e.parentSpanId),"sampled"in e&&(this.sampled=e.sampled),e.op&&(this.op=e.op),e.description&&(this.description=e.description),e.name&&(this.description=e.name),e.status&&(this.status=e.status),e.endTimestamp&&(this.endTimestamp=e.endTimestamp)}startChild(e){const t=new l({...e,parentSpanId:this.spanId,sampled:this.sampled,traceId:this.traceId});if(t.spanRecorder=this.spanRecorder,t.spanRecorder&&t.spanRecorder.add(t),t.transaction=this.transaction,("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&t.transaction){const n=`[Tracing] Starting '${e&&e.op||"< unknown op >"}' span on transaction '${t.transaction.name||"< unknown name >"}' (${t.transaction.spanId}).`;t.transaction.metadata.spanMetadata[t.spanId]={logMessage:n},r.kg.log(n)}return t}setTag(e,t){return this.tags={...this.tags,[e]:t},this}setData(e,t){return this.data={...this.data,[e]:t},this}setStatus(e){return this.status=e,this}setHttpStatus(e){this.setTag("http.status_code",String(e)),this.setData("http.response.status_code",e);const t=u(e);return"unknown_error"!==t&&this.setStatus(t),this}setName(e){this.description=e}isSuccess(){return"ok"===this.status}finish(e){if(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&this.transaction&&this.transaction.spanId!==this.spanId){const{logMessage:e}=this.transaction.metadata.spanMetadata[this.spanId];e&&r.kg.log(e.replace("Starting","Finishing"))}this.endTimestamp="number"==typeof e?e:(0,i.ph)()}toTraceparent(){return(0,o.$p)(this.traceId,this.spanId,this.sampled)}toContext(){return(0,a.Jr)({data:this.data,description:this.description,endTimestamp:this.endTimestamp,op:this.op,parentSpanId:this.parentSpanId,sampled:this.sampled,spanId:this.spanId,startTimestamp:this.startTimestamp,status:this.status,tags:this.tags,traceId:this.traceId})}updateWithContext(e){return this.data=e.data||{},this.description=e.description,this.endTimestamp=e.endTimestamp,this.op=e.op,this.parentSpanId=e.parentSpanId,this.sampled=e.sampled,this.spanId=e.spanId||this.spanId,this.startTimestamp=e.startTimestamp||this.startTimestamp,this.status=e.status,this.tags=e.tags||{},this.traceId=e.traceId||this.traceId,this}getTraceContext(){return(0,a.Jr)({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,trace_id:this.traceId})}toJSON(){return(0,a.Jr)({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,start_timestamp:this.startTimestamp,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this.endTimestamp,trace_id:this.traceId,origin:this.origin})}}function u(e){if(e<400&&e>=100)return"ok";if(e>=400&&e<500)switch(e){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(e>=500&&e<600)switch(e){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}},1250:(e,t,n)=>{"use strict";n.d(t,{GK:()=>c,HN:()=>l,g4:()=>o,y_:()=>a});var s=n(7597),i=n(5659),r=n(7522);function o(e,t,n=(()=>{})){const o={...e};void 0!==o.name&&void 0===o.description&&(o.description=o.name);const a=(0,i.Gd)(),c=a.getScope(),l=c.getSpan(),u=function(){if((0,r.z)())return l?l.startChild(o):a.startTransaction(o)}();function d(){u&&u.finish(),a.getScope().setSpan(l)}let p;c.setSpan(u);try{p=t(u)}catch(e){throw u&&u.setStatus("internal_error"),n(e),d(),e}return(0,s.J8)(p)?Promise.resolve(p).then((()=>{d()}),(e=>{u&&u.setStatus("internal_error"),n(e),d()})):d(),p}function a(e,t){const n={...e};void 0!==n.name&&void 0===n.description&&(n.description=n.name);const o=(0,i.Gd)(),a=o.getScope(),c=a.getSpan(),l=function(){if((0,r.z)())return c?c.startChild(n):o.startTransaction(n)}();function u(){l&&l.finish(),o.getScope().setSpan(c)}let d;a.setSpan(l);try{d=t(l)}catch(e){throw l&&l.setStatus("internal_error"),u(),e}return(0,s.J8)(d)?Promise.resolve(d).then((()=>{u()}),(()=>{l&&l.setStatus("internal_error"),u()})):u(),d}function c(e){if(!(0,r.z)())return;const t={...e};void 0!==t.name&&void 0===t.description&&(t.description=t.name);const n=(0,i.Gd)(),s=l();return s?s.startChild(t):n.startTransaction(t)}function l(){return(0,i.Gd)().getScope().getSpan()}},8069:(e,t,n)=>{"use strict";n.d(t,{Y:()=>c});var s=n(2343),i=n(535),r=n(5659),o=n(454),a=n(8903);class c extends a.Dr{constructor(e,t){super(e),delete this.description,this._measurements={},this._contexts={},this._hub=t||(0,r.Gd)(),this._name=e.name||"",this.metadata={source:"custom",...e.metadata,spanMetadata:{}},this._trimEnd=e.trimEnd,this.transaction=this;const n=this.metadata.dynamicSamplingContext;n&&(this._frozenDynamicSamplingContext={...n})}get name(){return this._name}set name(e){this.setName(e)}setName(e,t="custom"){this._name=e,this.metadata.source=t}initSpanRecorder(e=1e3){this.spanRecorder||(this.spanRecorder=new a.gB(e)),this.spanRecorder.add(this)}setContext(e,t){null===t?delete this._contexts[e]:this._contexts[e]=t}setMeasurement(e,t,n=""){this._measurements[e]={value:t,unit:n}}setMetadata(e){this.metadata={...this.metadata,...e}}finish(e){if(void 0!==this.endTimestamp)return;this.name||(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.kg.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this.name="<unlabeled transaction>"),super.finish(e);const t=this._hub.getClient();if(t&&t.emit&&t.emit("finishTransaction",this),!0!==this.sampled)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.kg.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),void(t&&t.recordDroppedEvent("sample_rate","transaction"));const n=this.spanRecorder?this.spanRecorder.spans.filter((e=>e!==this&&e.endTimestamp)):[];this._trimEnd&&n.length>0&&(this.endTimestamp=n.reduce(((e,t)=>e.endTimestamp&&t.endTimestamp?e.endTimestamp>t.endTimestamp?e:t:e)).endTimestamp);const i=this.metadata,r={contexts:{...this._contexts,trace:this.getTraceContext()},spans:n,start_timestamp:this.startTimestamp,tags:this.tags,timestamp:this.endTimestamp,transaction:this.name,type:"transaction",sdkProcessingMetadata:{...i,dynamicSamplingContext:this.getDynamicSamplingContext()},...i.source&&{transaction_info:{source:i.source}}};return Object.keys(this._measurements).length>0&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.kg.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),r.measurements=this._measurements),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.kg.log(`[Tracing] Finishing ${this.op} transaction: ${this.name}.`),this._hub.captureEvent(r)}toContext(){const e=super.toContext();return(0,i.Jr)({...e,name:this.name,trimEnd:this._trimEnd})}updateWithContext(e){return super.updateWithContext(e),this.name=e.name||"",this._trimEnd=e.trimEnd,this}getDynamicSamplingContext(){if(this._frozenDynamicSamplingContext)return this._frozenDynamicSamplingContext;const e=this._hub||(0,r.Gd)(),t=e.getClient();if(!t)return{};const n=e.getScope(),s=(0,o._)(this.traceId,t,n),i=this.metadata.sampleRate;void 0!==i&&(s.sample_rate=`${i}`);const a=this.metadata.source;return a&&"url"!==a&&(s.transaction=this.name),void 0!==this.sampled&&(s.sampled=String(this.sampled)),s}setHub(e){this._hub=e}}},9791:(e,t,n)=>{"use strict";n.d(t,{x1:()=>i});var s=n(5659);function i(e){return(e||(0,s.Gd)()).getScope().getTransaction()}},7522:(e,t,n)=>{"use strict";n.d(t,{z:()=>i});var s=n(5659);function i(e){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const t=(0,s.Gd)().getClient(),n=e||t&&t.getOptions();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}},3749:(e,t,n)=>{"use strict";n.r(t),n.d(t,{DEFAULT_USER_INCLUDES:()=>Bt,Handlers:()=>i,Hub:()=>y.Xb,Integrations:()=>yn,NodeClient:()=>Oe,SDK_VERSION:()=>m,Scope:()=>ae.s,addBreadcrumb:()=>k,addGlobalEventProcessor:()=>ae.c,addRequestDataToEvent:()=>Gt,autoDiscoverNodePerformanceMonitoringIntegrations:()=>pe,captureCheckIn:()=>P,captureEvent:()=>v,captureException:()=>b,captureMessage:()=>E,close:()=>N,configureScope:()=>S,createTransport:()=>se,deepReadDirSync:()=>tn,defaultIntegrations:()=>zt,defaultStackParser:()=>en,extractRequestData:()=>$t,extractTraceparentData:()=>ce.qG,flush:()=>O,getActiveSpan:()=>le.HN,getActiveTransaction:()=>re.x1,getCurrentHub:()=>y.Gd,getHubFromCarrier:()=>y.vi,getModuleFromFilename:()=>Jt,getSentryRelease:()=>Xt,init:()=>Zt,lastEventId:()=>U,makeMain:()=>y.pj,makeNodeTransport:()=>Fe,runWithAsyncContext:()=>y.Ok,setContext:()=>I,setExtra:()=>C,setExtras:()=>w,setMeasurement:()=>oe,setTag:()=>T,setTags:()=>x,setUser:()=>D,spanStatusfromHttpCode:()=>ue.Zd,startActiveSpan:()=>le.y_,startSpan:()=>le.GK,startTransaction:()=>A,trace:()=>le.g4,withScope:()=>R});var s={};n.r(s),n.d(s,{FunctionToString:()=>l,InboundFilters:()=>_});var i={};n.r(i),n.d(i,{errorHandler:()=>ln,extractRequestData:()=>sn,parseRequest:()=>rn,requestHandler:()=>an,tracingHandler:()=>on,trpcMiddleware:()=>un});var r={};n.r(r),n.d(r,{Console:()=>et,Context:()=>wt,ContextLines:()=>gt,Http:()=>it,LinkedErrors:()=>yt,LocalVariables:()=>Ht,Modules:()=>vt,OnUncaughtException:()=>ct,OnUnhandledRejection:()=>lt,RequestData:()=>Mt,Undici:()=>Wt.Y});var o={};n.r(o),n.d(o,{Apollo:()=>dn._,Express:()=>pn.N,GraphQL:()=>hn.k,Mongo:()=>fn._,Mysql:()=>_n.m,Postgres:()=>gn.E,Prisma:()=>mn.g});var a=n(535);let c;class l{static __initStatic(){this.id="FunctionToString"}constructor(){this.name=l.id}setupOnce(){c=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=(0,a.HK)(this)||this;return c.apply(t,e)}}catch(e){}}}l.__initStatic();var u=n(2343),d=n(2844),p=n(7321);const h=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],f=[/^.*healthcheck.*$/,/^.*healthy.*$/,/^.*live.*$/,/^.*ready.*$/,/^.*heartbeat.*$/,/^.*\/health$/,/^.*\/healthz$/];class _{static __initStatic(){this.id="InboundFilters"}constructor(e={}){this.name=_.id,this._options=e}setupOnce(e,t){const n=e=>{const n=t();if(n){const t=n.getIntegration(_);if(t){const s=n.getClient(),i=s?s.getOptions():{},r=function(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:h],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[],...e.disableTransactionDefaults?[]:f],ignoreInternal:void 0===e.ignoreInternal||e.ignoreInternal}}(t._options,i);return function(e,t){return t.ignoreInternal&&function(e){try{return"SentryError"===e.exception.values[0].type}catch(e){}return!1}(e)?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.kg.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${(0,d.jH)(e)}`),!0):function(e,t){return!(e.type||!t||!t.length)&&function(e){if(e.message)return[e.message];if(e.exception){const{values:t}=e.exception;try{const{type:e="",value:n=""}=t&&t[t.length-1]||{};return[`${n}`,`${e}: ${n}`]}catch(t){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.kg.error(`Cannot extract message for event ${(0,d.jH)(e)}`),[]}}return[]}(e).some((e=>(0,p.U0)(e,t)))}(e,t.ignoreErrors)?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.kg.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${(0,d.jH)(e)}`),!0):function(e,t){if("transaction"!==e.type||!t||!t.length)return!1;const n=e.transaction;return!!n&&(0,p.U0)(n,t)}(e,t.ignoreTransactions)?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.kg.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${(0,d.jH)(e)}`),!0):function(e,t){if(!t||!t.length)return!1;const n=g(e);return!!n&&(0,p.U0)(n,t)}(e,t.denyUrls)?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.kg.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${(0,d.jH)(e)}.\nUrl: ${g(e)}`),!0):!function(e,t){if(!t||!t.length)return!0;const n=g(e);return!n||(0,p.U0)(n,t)}(e,t.allowUrls)&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.kg.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${(0,d.jH)(e)}.\nUrl: ${g(e)}`),!0)}(e,r)?null:e}}return e};n.id=this.name,e(n)}}function g(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch(e){}return t?function(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null}(t):null}catch(t){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.kg.error(`Cannot extract url for event ${(0,d.jH)(e)}`),null}}_.__initStatic();const m="7.66.0";var y=n(5659);function b(e,t){return(0,y.Gd)().captureException(e,{captureContext:t})}function E(e,t){const n="string"==typeof t?t:void 0,s="string"!=typeof t?{captureContext:t}:void 0;return(0,y.Gd)().captureMessage(e,n,s)}function v(e,t){return(0,y.Gd)().captureEvent(e,t)}function S(e){(0,y.Gd)().configureScope(e)}function k(e){(0,y.Gd)().addBreadcrumb(e)}function I(e,t){(0,y.Gd)().setContext(e,t)}function w(e){(0,y.Gd)().setExtras(e)}function C(e,t){(0,y.Gd)().setExtra(e,t)}function x(e){(0,y.Gd)().setTags(e)}function T(e,t){(0,y.Gd)().setTag(e,t)}function D(e){(0,y.Gd)().setUser(e)}function R(e){(0,y.Gd)().withScope(e)}function A(e,t){return(0,y.Gd)().startTransaction({...e},t)}function P(e,t){const n=(0,y.Gd)(),s=n.getScope(),i=n.getClient();if(i){if(i.captureCheckIn)return i.captureCheckIn(e,t,s);("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.kg.warn("Cannot capture check-in. Client does not support sending check-ins.")}else("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.kg.warn("Cannot capture check-in. No client defined.");return(0,d.DM)()}async function O(e){const t=(0,y.Gd)().getClient();return t?t.flush(e):(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.kg.warn("Cannot flush events. No client defined."),Promise.resolve(!1))}async function N(e){const t=(0,y.Gd)().getClient();return t?t.close(e):(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.kg.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))}function U(){return(0,y.Gd)().lastEventId()}class B extends Error{constructor(e,t="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=t}}var Y=n(6893);const $=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function G(e,t=!1){const{host:n,path:s,pass:i,port:r,projectId:o,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&i?`:${i}`:""}@${n}${r?`:${r}`:""}/${s?`${s}/`:s}${o}`}function j(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}var M=n(7597),F=n(6147);function V(e,t=100,n=1/0){try{return L("",e,t,n)}catch(e){return{ERROR:`**non-serializable** (${e})`}}}function q(e,t=3,n=102400){const s=V(e,t);return function(e){return function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(e))}(s)>n?q(e,t-1,n):s}function L(e,t,n=1/0,s=1/0,i=function(){const e="function"==typeof WeakSet,t=e?new WeakSet:[];return[function(n){if(e)return!!t.has(n)||(t.add(n),!1);for(let e=0;e<t.length;e++)if(t[e]===n)return!0;return t.push(n),!1},function(n){if(e)t.delete(n);else for(let e=0;e<t.length;e++)if(t[e]===n){t.splice(e,1);break}}]}()){const[r,o]=i;if(null==t||["number","boolean","string"].includes(typeof t)&&!(0,M.i2)(t))return t;const c=function(e,t){try{if("domain"===e&&t&&"object"==typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if("undefined"!=typeof global&&t===global)return"[Global]";if("undefined"!=typeof window&&t===window)return"[Window]";if("undefined"!=typeof document&&t===document)return"[Document]";if((0,M.Cy)(t))return"[SyntheticEvent]";if("number"==typeof t&&t!=t)return"[NaN]";if("function"==typeof t)return`[Function: ${(0,F.$P)(t)}]`;if("symbol"==typeof t)return`[${String(t)}]`;if("bigint"==typeof t)return`[BigInt: ${String(t)}]`;const n=function(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(e){return`**non-serializable** (${e})`}}(e,t);if(!c.startsWith("[object "))return c;if(t.__sentry_skip_normalization__)return t;const l="number"==typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:n;if(0===l)return c.replace("object ","");if(r(t))return"[Circular ~]";const u=t;if(u&&"function"==typeof u.toJSON)try{return L("",u.toJSON(),l-1,s,i)}catch(e){}const d=Array.isArray(t)?[]:{};let p=0;const h=(0,a.Sh)(t);for(const e in h){if(!Object.prototype.hasOwnProperty.call(h,e))continue;if(p>=s){d[e]="[MaxProperties ~]";break}const t=h[e];d[e]=L(e,t,l-1,s,i),p++}return o(t),d}function H(e,t=[]){return[e,t]}function W(e,t){const[n,s]=e;return[n,[...s,t]]}function K(e,t){const n=e[1];for(const e of n)if(t(e,e[0].type))return!0;return!1}function J(e,t){return(t||new TextEncoder).encode(e)}function z(e,t){const[n,s]=e;let i=JSON.stringify(n);function r(e){"string"==typeof i?i="string"==typeof e?i+e:[J(i,t),e]:i.push("string"==typeof e?J(e,t):e)}for(const e of s){const[t,n]=e;if(r(`\n${JSON.stringify(t)}\n`),"string"==typeof n||n instanceof Uint8Array)r(n);else{let e;try{e=JSON.stringify(n)}catch(t){e=JSON.stringify(V(n))}r(e)}}return"string"==typeof i?i:function(e){const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);let s=0;for(const t of e)n.set(t,s),s+=t.length;return n}(i)}function Z(e,t){const n="string"==typeof e.data?J(e.data,t):e.data;return[(0,a.Jr)({type:"attachment",length:n.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),n]}const Q={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor"};function X(e){return Q[e]}function ee(e){if(!e||!e.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}const te=6e4;const ne=30;function se(e,t,n=function(e){const t=[];function n(e){return t.splice(t.indexOf(e),1)[0]}return{$:t,add:function(s){if(!(void 0===e||t.length<e))return(0,Y.$2)(new B("Not adding Promise because buffer limit was reached."));const i=s();return-1===t.indexOf(i)&&t.push(i),i.then((()=>n(i))).then(null,(()=>n(i).then(null,(()=>{})))),i},drain:function(e){return new Y.cW(((n,s)=>{let i=t.length;if(!i)return n(!0);const r=setTimeout((()=>{e&&e>0&&n(!1)}),e);t.forEach((e=>{(0,Y.WD)(e).then((()=>{--i||(clearTimeout(r),n(!0))}),s)}))}))}}}(e.bufferSize||ne)){let s={};function i(i){const r=[];if(K(i,((t,n)=>{const i=X(n);if(function(e,t,n=Date.now()){return function(e,t){return e[t]||e.all||0}(e,t)>n}(s,i)){const s=ie(t,n);e.recordDroppedEvent("ratelimit_backoff",i,s)}else r.push(t)})),0===r.length)return(0,Y.WD)();const o=H(i[0],r),a=t=>{K(o,((n,s)=>{const i=ie(n,s);e.recordDroppedEvent(t,X(s),i)}))};return n.add((()=>t({body:z(o,e.textEncoder)}).then((e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.kg.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),s=function(e,{statusCode:t,headers:n},s=Date.now()){const i={...e},r=n&&n["x-sentry-rate-limits"],o=n&&n["retry-after"];if(r)for(const e of r.trim().split(",")){const[t,n]=e.split(":",2),r=parseInt(t,10),o=1e3*(isNaN(r)?60:r);if(n)for(const e of n.split(";"))i[e]=s+o;else i.all=s+o}else o?i.all=s+function(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return 1e3*n;const s=Date.parse(`${e}`);return isNaN(s)?te:s-t}(o,s):429===t&&(i.all=s+6e4);return i}(s,e),e)),(e=>{throw a("network_error"),e})))).then((e=>e),(e=>{if(e instanceof B)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.kg.error("Skipped sending event because buffer is full."),a("queue_overflow"),(0,Y.WD)();throw e}))}return i.__sentry__baseTransport__=!0,{send:i,flush:e=>n.drain(e)}}function ie(e,t){if("event"===t||"transaction"===t)return Array.isArray(e)?e[1]:void 0}var re=n(9791);function oe(e,t,n){const s=(0,re.x1)();s&&s.setMeasurement(e,t,n)}var ae=n(350),ce=n(7638),le=n(1250),ue=n(8903),de=n(6046);function pe(){const e=de.G.map((e=>{try{return e()}catch(e){return}})).filter((e=>!!e));return 0===e.length&&u.kg.warn("Performance monitoring integrations could not be automatically loaded."),e.filter((e=>!!e.loadDependency()))}var he=n(4307);const fe=[];function _e(e){const t=e.defaultIntegrations||[],n=e.integrations;let s;t.forEach((e=>{e.isDefaultInstance=!0})),s=Array.isArray(n)?[...t,...n]:"function"==typeof n?(0,d.lE)(n(t)):t;const i=function(e){const t={};return e.forEach((e=>{const{name:n}=e,s=t[n];s&&!s.isDefaultInstance&&e.isDefaultInstance||(t[n]=e)})),Object.keys(t).map((e=>t[e]))}(s),r=function(e,t){for(let t=0;t<e.length;t++)if(!0==("Debug"===e[t].name))return t;return-1}(i);if(-1!==r){const[e]=i.splice(r,1);i.push(e)}return i}function ge(e,t){t[e.name]=e,-1===fe.indexOf(e.name)&&(e.setupOnce(ae.c,y.Gd),fe.push(e.name),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.kg.log(`Integration installed: ${e.name}`))}var me=n(9015),ye=n(454),be=n(1170),Ee=n(1235),ve=n(1131);const Se=new WeakMap,ke="Not capturing exception because it's already been captured.";class Ie{constructor(e){if(this._options=e,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},e.dsn?this._dsn=function(e){const t="string"==typeof e?function(e){const t=$.exec(e);if(!t)return void console.error(`Invalid Sentry Dsn: ${e}`);const[n,s,i="",r,o="",a]=t.slice(1);let c="",l=a;const u=l.split("/");if(u.length>1&&(c=u.slice(0,-1).join("/"),l=u.pop()),l){const e=l.match(/^\d+/);e&&(l=e[0])}return j({host:r,pass:i,path:c,projectId:l,port:o,protocol:n,publicKey:s})}(e):j(e);if(t&&function(e){if("undefined"!=typeof __SENTRY_DEBUG__&&!__SENTRY_DEBUG__)return!0;const{port:t,projectId:n,protocol:s}=e;return!(["protocol","publicKey","host","projectId"].find((t=>!e[t]&&(u.kg.error(`Invalid Sentry Dsn: ${t} missing`),!0)))||(n.match(/^\d+$/)?function(e){return"http"===e||"https"===e}(s)?t&&isNaN(parseInt(t,10))&&(u.kg.error(`Invalid Sentry Dsn: Invalid port ${t}`),1):(u.kg.error(`Invalid Sentry Dsn: Invalid protocol ${s}`),1):(u.kg.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),1)))}(t))return t}(e.dsn):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.kg.warn("No DSN provided, client will not do anything."),this._dsn){const t=function(e,t={}){const n="string"==typeof t?t:t.tunnel,s="string"!=typeof t&&t._metadata?t._metadata.sdk:void 0;return n||`${function(e){return`${function(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}(e)}${e.projectId}/envelope/`}(e)}?${function(e,t){return(0,a._j)({sentry_key:e.publicKey,sentry_version:"7",...t&&{sentry_client:`${t.name}/${t.version}`}})}(e,s)}`}(this._dsn,e);this._transport=e.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}}captureException(e,t,n){if((0,d.YO)(e))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.kg.log(ke));let s=t&&t.event_id;return this._process(this.eventFromException(e,t).then((e=>this._captureEvent(e,t,n))).then((e=>{s=e}))),s}captureMessage(e,t,n,s){let i=n&&n.event_id;const r=(0,M.pt)(e)?this.eventFromMessage(String(e),t,n):this.eventFromException(e,n);return this._process(r.then((e=>this._captureEvent(e,n,s))).then((e=>{i=e}))),i}captureEvent(e,t,n){if(t&&t.originalException&&(0,d.YO)(t.originalException))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.kg.log(ke));let s=t&&t.event_id;return this._process(this._captureEvent(e,t,n).then((e=>{s=e}))),s}captureSession(e){this._isEnabled()?"string"!=typeof e.release?("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.kg.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),(0,me.CT)(e,{init:!1})):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.kg.warn("SDK not enabled, will not capture session.")}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const t=this._transport;return t?this._isClientDoneProcessing(e).then((n=>t.flush(e).then((e=>n&&e)))):(0,Y.WD)(!0)}close(e){return this.flush(e).then((e=>(this.getOptions().enabled=!1,e)))}setupIntegrations(){this._isEnabled()&&!this._integrationsInitialized&&(this._integrations=function(e){const t={};return e.forEach((e=>{e&&ge(e,t)})),t}(this._options.integrations),this._integrationsInitialized=!0)}getIntegrationById(e){return this._integrations[e]}getIntegration(e){try{return this._integrations[e.id]||null}catch(t){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.kg.warn(`Cannot retrieve integration ${e.id} from the current Client`),null}}addIntegration(e){ge(e,this._integrations)}sendEvent(e,t={}){if(this.emit("beforeSendEvent",e,t),this._dsn){let n=function(e,t,n,s){const i=ee(n),r=e.type&&"replay_event"!==e.type?e.type:"event";!function(e,t){t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]])}(e,n&&n.sdk);const o=function(e,t,n,s){const i=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!n&&{dsn:G(s)},...i&&{trace:(0,a.Jr)({...i})}}}(e,i,s,t);return delete e.sdkProcessingMetadata,H(o,[[{type:r},e]])}(e,this._dsn,this._options._metadata,this._options.tunnel);for(const e of t.attachments||[])n=W(n,Z(e,this._options.transportOptions&&this._options.transportOptions.textEncoder));const s=this._sendEnvelope(n);s&&s.then((t=>this.emit("afterSendEvent",e,t)),null)}}sendSession(e){if(this._dsn){const t=function(e,t,n,s){const i=ee(n);return H({sent_at:(new Date).toISOString(),...i&&{sdk:i},...!!s&&{dsn:G(t)}},["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}}recordDroppedEvent(e,t,n){if(this._options.sendClientReports){const n=`${e}:${t}`;("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.kg.log(`Adding outcome: "${n}"`),this._outcomes[n]=this._outcomes[n]+1||1}}on(e,t){this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(t)}emit(e,...t){this._hooks[e]&&this._hooks[e].forEach((e=>e(...t)))}_updateSessionFromEvent(e,t){let n=!1,s=!1;const i=t.exception&&t.exception.values;if(i){s=!0;for(const e of i){const t=e.mechanism;if(t&&!1===t.handled){n=!0;break}}}const r="ok"===e.status;(r&&0===e.errors||r&&n)&&((0,me.CT)(e,{...n&&{status:"crashed"},errors:e.errors||Number(s||n)}),this.captureSession(e))}_isClientDoneProcessing(e){return new Y.cW((t=>{let n=0;const s=setInterval((()=>{0==this._numProcessing?(clearInterval(s),t(!0)):(n+=1,e&&n>=e&&(clearInterval(s),t(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._dsn}_prepareEvent(e,t,n){const s=this.getOptions(),i=Object.keys(this._integrations);return!t.integrations&&i.length>0&&(t.integrations=i),function(e,t,n,s){const{normalizeDepth:i=3,normalizeMaxBreadth:r=1e3}=e,o={...t,event_id:t.event_id||n.event_id||(0,d.DM)(),timestamp:t.timestamp||(0,be.yW)()},a=n.integrations||e.integrations.map((e=>e.name));!function(e,t){const{environment:n,release:s,dist:i,maxValueLength:r=250}=t;"environment"in e||(e.environment="environment"in t?n:ve.J),void 0===e.release&&void 0!==s&&(e.release=s),void 0===e.dist&&void 0!==i&&(e.dist=i),e.message&&(e.message=(0,p.$G)(e.message,r));const o=e.exception&&e.exception.values&&e.exception.values[0];o&&o.value&&(o.value=(0,p.$G)(o.value,r));const a=e.request;a&&a.url&&(a.url=(0,p.$G)(a.url,r))}(o,e),function(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}(o,a),void 0===t.type&&function(e,t){const n=Ee.n2._sentryDebugIds;if(!n)return;let s;const i=Se.get(t);i?s=i:(s=new Map,Se.set(t,s));const r=Object.keys(n).reduce(((e,i)=>{let r;const o=s.get(i);o?r=o:(r=t(i),s.set(i,r));for(let t=r.length-1;t>=0;t--){const s=r[t];if(s.filename){e[s.filename]=n[i];break}}return e}),{});try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.filename&&(e.debug_id=r[e.filename])}))}))}catch(e){}}(o,e.stackParser);let c=s;n.captureContext&&(c=ae.s.clone(c).update(n.captureContext));let l=(0,Y.WD)(o);if(c){if(c.getAttachments){const e=[...n.attachments||[],...c.getAttachments()];e.length&&(n.attachments=e)}l=c.applyToEvent(o,n)}return l.then((e=>(e&&function(e){const t={};try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)}))}))}catch(e){}if(0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.keys(t).forEach((e=>{n.push({type:"sourcemap",code_file:e,debug_id:t[e]})}))}(e),"number"==typeof i&&i>0?function(e,t,n){if(!e)return null;const s={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((e=>({...e,...e.data&&{data:V(e.data,t,n)}})))},...e.user&&{user:V(e.user,t,n)},...e.contexts&&{contexts:V(e.contexts,t,n)},...e.extra&&{extra:V(e.extra,t,n)}};return e.contexts&&e.contexts.trace&&s.contexts&&(s.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(s.contexts.trace.data=V(e.contexts.trace.data,t,n))),e.spans&&(s.spans=e.spans.map((e=>(e.data&&(e.data=V(e.data,t,n)),e)))),s}(e,i,r):e)))}(s,e,t,n).then((e=>{if(null===e)return e;const{propagationContext:t}=e.sdkProcessingMetadata||{};if((!e.contexts||!e.contexts.trace)&&t){const{traceId:s,spanId:i,parentSpanId:r,dsc:o}=t;e.contexts={trace:{trace_id:s,span_id:i,parent_span_id:r},...e.contexts};const a=o||(0,ye._)(s,this,n);e.sdkProcessingMetadata={dynamicSamplingContext:a,...e.sdkProcessingMetadata}}return e}))}_captureEvent(e,t={},n){return this._processEvent(e,t,n).then((e=>e.event_id),(e=>{if("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__){const t=e;"log"===t.logLevel?u.kg.log(t.message):u.kg.warn(t)}}))}_processEvent(e,t,n){const s=this.getOptions(),{sampleRate:i}=s;if(!this._isEnabled())return(0,Y.$2)(new B("SDK not enabled, will not capture event.","log"));const r=Ce(e),o=we(e),a=e.type||"error",c=`before send for type \`${a}\``;if(o&&"number"==typeof i&&Math.random()>i)return this.recordDroppedEvent("sample_rate","error",e),(0,Y.$2)(new B(`Discarding event because it's not included in the random sample (sampling rate = ${i})`,"log"));const l="replay_event"===a?"replay":a;return this._prepareEvent(e,t,n).then((n=>{if(null===n)throw this.recordDroppedEvent("event_processor",l,e),new B("An event processor returned `null`, will not send event.","log");if(t.data&&!0===t.data.__sentry__)return n;const i=function(e,t,n){const{beforeSend:s,beforeSendTransaction:i}=e;return we(t)&&s?s(t,n):Ce(t)&&i?i(t,n):t}(s,n,t);return function(e,t){const n=`${t} must return \`null\` or a valid event.`;if((0,M.J8)(e))return e.then((e=>{if(!(0,M.PO)(e)&&null!==e)throw new B(n);return e}),(e=>{throw new B(`${t} rejected with ${e}`)}));if(!(0,M.PO)(e)&&null!==e)throw new B(n);return e}(i,c)})).then((s=>{if(null===s)throw this.recordDroppedEvent("before_send",l,e),new B(`${c} returned \`null\`, will not send event.`,"log");const i=n&&n.getSession();!r&&i&&this._updateSessionFromEvent(i,s);const o=s.transaction_info;if(r&&o&&s.transaction!==e.transaction){const e="custom";s.transaction_info={...o,source:e}}return this.sendEvent(s,t),s})).then(null,(e=>{if(e instanceof B)throw e;throw this.captureException(e,{data:{__sentry__:!0},originalException:e}),new B(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${e}`)}))}_process(e){this._numProcessing++,e.then((e=>(this._numProcessing--,e)),(e=>(this._numProcessing--,e)))}_sendEnvelope(e){if(this._transport&&this._dsn)return this.emit("beforeEnvelope",e),this._transport.send(e).then(null,(e=>{("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.kg.error("Error while sending event:",e)}));("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.kg.error("Transport disabled")}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.keys(e).map((t=>{const[n,s]=t.split(":");return{reason:n,category:s,quantity:e[t]}}))}}function we(e){return void 0===e.type}function Ce(e){return"transaction"===e.type}var xe=n(6890);class Te{constructor(e,t){this._client=e,this.flushTimeout=60,this._pendingAggregates={},this._isEnabled=!0,this._intervalId=setInterval((()=>this.flush()),1e3*this.flushTimeout),this._sessionAttrs=t}flush(){const e=this.getSessionAggregates();0!==e.aggregates.length&&(this._pendingAggregates={},this._client.sendSession(e))}getSessionAggregates(){const e=Object.keys(this._pendingAggregates).map((e=>this._pendingAggregates[parseInt(e)])),t={attrs:this._sessionAttrs,aggregates:e};return(0,a.Jr)(t)}close(){clearInterval(this._intervalId),this._isEnabled=!1,this.flush()}incrementSessionStatusCount(){if(!this._isEnabled)return;const e=(0,y.Gd)().getScope(),t=e.getRequestSession();t&&t.status&&(this._incrementSessionStatusCount(t.status,new Date),e.setRequestSession(void 0))}_incrementSessionStatusCount(e,t){const n=new Date(t).setSeconds(0,0);this._pendingAggregates[n]=this._pendingAggregates[n]||{};const s=this._pendingAggregates[n];switch(s.started||(s.started=new Date(n).toISOString()),e){case"errored":return s.errored=(s.errored||0)+1,s.errored;case"ok":return s.exited=(s.exited||0)+1,s.exited;default:return s.crashed=(s.crashed||0)+1,s.crashed}}}var De=n(2037),Re=n(3837);function Ae(e,t){return e(t.stack||"",1)}function Pe(e,t){const n={type:t.name||t.constructor.name,value:t.message},s=Ae(e,t);return s.length&&(n.stacktrace={frames:s}),n}class Oe extends Ie{constructor(e){e._metadata=e._metadata||{},e._metadata.sdk=e._metadata.sdk||{name:"sentry.javascript.node",packages:[{name:"npm:@sentry/node",version:m}],version:m},e.transportOptions={textEncoder:new Re.TextEncoder,...e.transportOptions},(0,xe.T)(),super(e)}captureException(e,t,n){if(this._options.autoSessionTracking&&this._sessionFlusher&&n){const e=n.getRequestSession();e&&"ok"===e.status&&(e.status="errored")}return super.captureException(e,t,n)}captureEvent(e,t,n){if(this._options.autoSessionTracking&&this._sessionFlusher&&n&&"exception"===(e.type||"exception")&&e.exception&&e.exception.values&&e.exception.values.length>0){const e=n.getRequestSession();e&&"ok"===e.status&&(e.status="errored")}return super.captureEvent(e,t,n)}close(e){return(0,he.x)([this,"access",e=>e._sessionFlusher,"optionalAccess",e=>e.close,"call",e=>e()]),super.close(e)}initSessionFlusher(){const{release:e,environment:t}=this._options;e?this._sessionFlusher=new Te(this,{release:e,environment:t}):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.kg.warn("Cannot initialise an instance of SessionFlusher if no release is provided!")}eventFromException(e,t){return(0,Y.WD)(function(e,t,n){let s=t;const i=n&&n.data&&n.data.mechanism||{handled:!0,type:"generic"};if(!(0,M.VZ)(t)){if((0,M.PO)(t)){const e=`Non-Error exception captured with keys: ${(0,a.zf)(t)}`,i=(0,y.Gd)(),r=i.getClient(),o=r&&r.getOptions().normalizeDepth;i.configureScope((e=>{e.setExtra("__serialized__",q(t,o))})),s=n&&n.syntheticException||new Error(e),s.message=e}else s=n&&n.syntheticException||new Error(t),s.message=t;i.synthetic=!0}const r={exception:{values:[Pe(e,s)]}};return(0,d.Db)(r,void 0,void 0),(0,d.EG)(r,i),{...r,event_id:n&&n.event_id}}(this._options.stackParser,e,t))}eventFromMessage(e,t="info",n){return(0,Y.WD)(function(e,t,n="info",s,i){const r={event_id:s&&s.event_id,level:n,message:t};if(i&&s&&s.syntheticException){const n=Ae(e,s.syntheticException);n.length&&(r.exception={values:[{value:t,stacktrace:{frames:n}}]})}return r}(this._options.stackParser,e,t,n,this._options.attachStacktrace))}captureCheckIn(e,t,n){const s="in_progress"!==e.status&&e.checkInId?e.checkInId:(0,d.DM)();if(!this._isEnabled())return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.kg.warn("SDK not enabled, will not capture checkin."),s;const i=this.getOptions(),{release:r,environment:o,tunnel:c}=i,l={check_in_id:s,monitor_slug:e.monitorSlug,status:e.status,release:r,environment:o};"in_progress"!==e.status&&(l.duration=e.duration),t&&(l.monitor_config={schedule:t.schedule,checkin_margin:t.checkinMargin,max_runtime:t.maxRuntime,timezone:t.timezone});const[p,h]=this._getTraceInfoFromScope(n);h&&(l.contexts={trace:h});const f=function(e,t,n,s,i){const r={sent_at:(new Date).toISOString()};n&&n.sdk&&(r.sdk={name:n.sdk.name,version:n.sdk.version}),s&&i&&(r.dsn=G(i)),t&&(r.trace=(0,a.Jr)(t));const o=function(e){return[{type:"check_in"},e]}(e);return H(r,[o])}(l,p,this.getSdkMetadata(),c,this.getDsn());return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.kg.info("Sending checkin:",e.monitorSlug,e.status),this._sendEnvelope(f),s}_prepareEvent(e,t,n){return e.platform=e.platform||"node",e.contexts={...e.contexts,runtime:(0,he.x)([e,"access",e=>e.contexts,"optionalAccess",e=>e.runtime])||{name:"node",version:global.process.version}},e.server_name=e.server_name||this.getOptions().serverName||global.process.env.SENTRY_NAME||De.hostname(),super._prepareEvent(e,t,n)}_captureRequestSession(){this._sessionFlusher?this._sessionFlusher.incrementSessionStatusCount():("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.kg.warn("Discarded request mode session because autoSessionTracking option was disabled")}_getTraceInfoFromScope(e){if(!e)return[void 0,void 0];const t=e.getSpan();if(t)return[(0,he.x)([t,"optionalAccess",e=>e.transaction,"optionalAccess",e=>e.getDynamicSamplingContext,"call",e=>e()]),(0,he.x)([t,"optionalAccess",e=>e.getTraceContext,"call",e=>e()])];const{traceId:n,spanId:s,parentSpanId:i,dsc:r}=e.getPropagationContext(),o={trace_id:n,span_id:s,parent_span_id:i};return r?[r,o]:[(0,ye._)(n,this,e),o]}}function Ne(e,t){return null!=e?e:t()}var Ue=n(3685),Be=n(5687),Ye=n(6018),$e=n(2781),Ge=n(7310);const je=require("zlib"),Me=32768;function Fe(e){let t;try{t=new Ge.URL(e.url)}catch(t){return console.warn("[@sentry/node]: Invalid dsn or tunnel option, will not send any events. The tunnel option must be a full URL when used."),se(e,(()=>Promise.resolve({})))}const n="https:"===t.protocol,s=function(e,t){const{no_proxy:n}=process.env;return n&&n.split(",").some((t=>e.host.endsWith(t)||e.hostname.endsWith(t)))?void 0:t}(t,e.proxy||(n?process.env.https_proxy:void 0)||process.env.http_proxy),i=n?Be:Ue,r=void 0!==e.keepAlive&&e.keepAlive,o=s?new Ye.HttpsProxyAgent(s):new i.Agent({keepAlive:r,maxSockets:30,timeout:2e3}),a=function(e,t,n){const{hostname:s,pathname:i,port:r,protocol:o,search:a}=new Ge.URL(e.url);return function(c){return new Promise(((l,u)=>{let d=function(e){return new $e.Readable({read(){this.push(e),this.push(null)}})}(c.body);const p={...e.headers};c.body.length>Me&&(p["content-encoding"]="gzip",d=d.pipe((0,je.createGzip)()));const h=t.request({method:"POST",agent:n,headers:p,hostname:s,path:`${i}${a}`,port:r,protocol:o,ca:e.caCerts},(e=>{e.on("data",(()=>{})),e.on("end",(()=>{})),e.setEncoding("utf8");const t=Ne(e.headers["retry-after"],(()=>null)),n=Ne(e.headers["x-sentry-rate-limits"],(()=>null));l({statusCode:e.statusCode,headers:{"retry-after":t,"x-sentry-rate-limits":Array.isArray(n)?n[0]:n}})}));h.on("error",u),d.pipe(h)}))}}(e,Ne(e.httpModule,(()=>i)),o);return se(e,a)}var Ve=n(9656);const qe=require("domain");function Le(){return qe.active}function He(){const e=Le();if(e)return(0,y.uZ)(e),(0,y.vi)(e)}function We(e,t){const n=Le();if(n&&(0,he.x)([t,"optionalAccess",e=>e.reuseExisting]))return e();const s=qe.create(),i=function(e){const t={};return(0,y.uZ)(t,e),(0,y.vi)(t)}(n?(0,y.vi)(n):void 0);return(0,y.j0)(s,i),s.bind((()=>e()))()}const Ke=require("async_hooks");let Je;function ze(){Ve.V.major&&Ve.V.major>=14?function(){function e(){return Je.getStore()}Je||(Je=new Ke.AsyncLocalStorage),(0,y.$b)({getCurrentHub:e,runWithAsyncContext:function(t,n){const s=e();if(s&&(0,he.x)([n,"optionalAccess",e=>e.reuseExisting]))return t();const i=function(e){const t={};return(0,y.uZ)(t,e),(0,y.vi)(t)}(s);return Je.run(i,(()=>t()))}})}():(0,y.$b)({getCurrentHub:He,runWithAsyncContext:We})}var Ze=n(1688);const Qe=["fatal","error","warning","log","info","debug"];function Xe(e){return"warn"===e?"warning":Qe.includes(e)?e:"log"}class et{constructor(){et.prototype.__init.call(this)}static __initStatic(){this.id="Console"}__init(){this.name=et.id}setupOnce(){(0,Ze.oq)("console",(({args:e,level:t})=>{const n=(0,y.Gd)();n.getIntegration(et)&&n.addBreadcrumb({category:"console",level:Xe(t),message:Re.format.apply(void 0,e)},{input:[...e],level:t})}))}}et.__initStatic();var tt=n(9181),nt=n(7612),st=n(7578);class it{static __initStatic(){this.id="Http"}__init(){this.name=it.id}constructor(e={}){it.prototype.__init.call(this),this._breadcrumbs=void 0===e.breadcrumbs||e.breadcrumbs,this._tracing=e.tracing?!0===e.tracing?{}:e.tracing:void 0}setupOnce(e,t){if(!this._breadcrumbs&&!this._tracing)return;const s=(0,he.x)([t,"call",e=>e(),"access",e=>e.getClient,"call",e=>e(),"optionalAccess",e=>e.getOptions,"call",e=>e()]);if(s&&"sentry"!==s.instrumenter)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.kg.log("HTTP Integration is skipped because of instrumenter configuration."));const i=(0,he.x)([this,"access",e=>e._tracing,"optionalAccess",e=>e.shouldCreateSpanForRequest])||(0,he.x)([s,"optionalAccess",e=>e.shouldCreateSpanForRequest]),r=(0,he.x)([s,"optionalAccess",e=>e.tracePropagationTargets])||(0,he.x)([this,"access",e=>e._tracing,"optionalAccess",e=>e.tracePropagationTargets]),o=n(3685),c=rt(o,this._breadcrumbs,i,r);if((0,a.hl)(o,"get",c),(0,a.hl)(o,"request",c),Ve.V.major&&Ve.V.major>8){const e=n(5687),t=rt(e,this._breadcrumbs,i,r);(0,a.hl)(e,"get",t),(0,a.hl)(e,"request",t)}}}function rt(e,t,n,s){const i=new nt.LRUMap(100),r=new nt.LRUMap(100);function o(e,t,n,s){(0,y.Gd)().getIntegration(it)&&(0,y.Gd)().addBreadcrumb({category:"http",data:{status_code:s&&s.statusCode,...t},type:"http"},{event:e,request:n,response:s})}return function(a){return function(...c){const l=(0,st.nY)(e,c),d=l[0],h=(0,st.lx)(d),f=(0,st.CA)(d);if((0,st.ZB)(f))return a.apply(e,l);const _=(0,y.Gd)(),g=_.getScope(),m=g.getSpan(),b=function(e,t){const n={url:e,"http.method":t.method||"GET"};return t.hash&&(n["http.fragment"]=t.hash.substring(1)),t.search&&(n["http.query"]=t.search.substring(1)),n}(f,d),E=(e=>{if(void 0===n)return!0;const t=i.get(e);if(void 0!==t)return t;const s=n(e);return i.set(e,s),s})(h)?(0,he.x)([m,"optionalAccess",e=>e.startChild,"call",e=>e({op:"http.client",origin:"auto.http.node.http",description:`${b["http.method"]} ${b.url}`,data:b})]):void 0;if((e=>{if(void 0===s)return!0;const t=r.get(e);if(void 0!==t)return t;const n=(0,p.U0)(e,s);return r.set(e,n),n})(h))if(E){const e=E.toTraceparent(),t=(0,he.x)([E,"optionalAccess",e=>e.transaction,"optionalAccess",e=>e.getDynamicSamplingContext,"call",e=>e()]);ot(d,f,e,t)}else{const e=_.getClient(),{traceId:t,sampled:n,dsc:s}=g.getPropagationContext(),i=(0,ce.$p)(t,void 0,n),r=s||(e?(0,ye._)(t,e,g):void 0);ot(d,f,i,r)}else("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.kg.log(`[Tracing] Not adding sentry-trace header to outgoing request (${f}) due to mismatching tracePropagationTargets option.`);return a.apply(e,l).once("response",(function(e){t&&o("response",b,this,e),E&&(e.statusCode&&E.setHttpStatus(e.statusCode),E.description=(0,st.Dt)(E.description,d,this),E.finish())})).once("error",(function(){t&&o("error",b,this),E&&(E.setHttpStatus(500),E.description=(0,st.Dt)(E.description,d,this),E.finish())}))}}}function ot(e,t,n,s){if((e.headers||{})["sentry-trace"])return;("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.kg.log(`[Tracing] Adding sentry-trace header ${n} to outgoing request to "${t}": `);const i=(0,tt.IQ)(s),r=i&&i.length>0?function(e,t){return e.headers&&e.headers.baggage?t?Array.isArray(e.headers.baggage)?[...e.headers.baggage,t]:[e.headers.baggage,t]:e.headers.baggage:t}(e,i):void 0;e.headers={...e.headers,"sentry-trace":n,...r&&{baggage:r}}}function at(e){console.error(e);const t=(0,y.Gd)().getClient();void 0===t&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.kg.warn("No NodeClient was defined, we are exiting the process now."),global.process.exit(1));const n=t.getOptions(),s=n&&n.shutdownTimeout&&n.shutdownTimeout>0&&n.shutdownTimeout||2e3;t.close(s).then((e=>{e||("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.kg.warn("We reached the timeout for emptying the request buffer, still exiting now!"),global.process.exit(1)}),(e=>{("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.kg.error(e)}))}it.__initStatic();class ct{static __initStatic(){this.id="OnUncaughtException"}__init(){this.name=ct.id}__init2(){this.handler=this._makeErrorHandler()}constructor(e={}){ct.prototype.__init.call(this),ct.prototype.__init2.call(this),this._options={exitEvenIfOtherHandlersAreRegistered:!0,...e}}setupOnce(){global.process.on("uncaughtException",this.handler)}_makeErrorHandler(){let e,t=!1,n=!1,s=!1;return i=>{let r=at;const o=(0,y.Gd)().getClient();this._options.onFatalError?r=this._options.onFatalError:o&&o.getOptions().onFatalError&&(r=o.getOptions().onFatalError);const a=0===global.process.listeners("uncaughtException").reduce(((e,t)=>"domainUncaughtExceptionClear"===t.name||t.tag&&"sentry_tracingErrorCallback"===t.tag||t===this.handler?e:e+1),0),c=this._options.exitEvenIfOtherHandlersAreRegistered||a;if(t)c&&(s?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.kg.warn("uncaught exception after calling fatal error shutdown callback - this is bad! forcing shutdown"),at(i)):n||(n=!0,setTimeout((()=>{s||(s=!0,r(e,i))}),2e3)));else{const n=(0,y.Gd)();e=i,t=!0,n.getIntegration(ct)?n.withScope((e=>{e.setLevel("fatal"),n.captureException(i,{originalException:i,data:{mechanism:{handled:!1,type:"onuncaughtexception"}}}),!s&&c&&(s=!0,r(i))})):!s&&c&&(s=!0,r(i))}}}}ct.__initStatic();class lt{static __initStatic(){this.id="OnUnhandledRejection"}__init(){this.name=lt.id}constructor(e={mode:"warn"}){this._options=e,lt.prototype.__init.call(this)}setupOnce(){global.process.on("unhandledRejection",this.sendUnhandledPromise.bind(this))}sendUnhandledPromise(e,t){const n=(0,y.Gd)();n.getIntegration(lt)&&n.withScope((s=>{s.setExtra("unhandledPromiseRejection",!0),n.captureException(e,{originalException:t,data:{mechanism:{handled:!1,type:"onunhandledrejection"}}})})),this._handleRejection(e)}_handleRejection(e){const t="This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). The promise rejected with the reason:";"warn"===this._options.mode?(0,u.Cf)((()=>{console.warn(t),console.error(e&&e.stack?e.stack:e)})):"strict"===this._options.mode&&((0,u.Cf)((()=>{console.warn(t)})),at(e))}}function ut(e,t,n=250,s,i,r,o){if(!(r.exception&&r.exception.values&&o&&(0,M.V9)(o.originalException,Error)))return;const a=r.exception.values.length>0?r.exception.values[r.exception.values.length-1]:void 0;var c,l;a&&(r.exception.values=(c=dt(e,t,i,o.originalException,s,r.exception.values,a,0),l=n,c.map((e=>(e.value&&(e.value=(0,p.$G)(e.value,l)),e)))))}function dt(e,t,n,s,i,r,o,a){if(r.length>=n+1)return r;let c=[...r];if((0,M.V9)(s[i],Error)){pt(o,a);const r=e(t,s[i]),l=c.length;ht(r,i,l,a),c=dt(e,t,n,s[i],i,[r,...c],r,l)}return Array.isArray(s.errors)&&s.errors.forEach(((s,r)=>{if((0,M.V9)(s,Error)){pt(o,a);const l=e(t,s),u=c.length;ht(l,`errors[${r}]`,u,a),c=dt(e,t,n,s,i,[l,...c],l,u)}})),c}function pt(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,is_exception_group:!0,exception_id:t}}function ht(e,t,n,s){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:s}}lt.__initStatic();const ft=require("fs"),_t=new nt.LRUMap(100);class gt{static __initStatic(){this.id="ContextLines"}__init(){this.name=gt.id}constructor(e={}){this._options=e,gt.prototype.__init.call(this)}get _contextLines(){return void 0!==this._options.frameContextLines?this._options.frameContextLines:7}setupOnce(e,t){e((e=>t().getIntegration(gt)?this.addSourceContext(e):e))}async addSourceContext(e){const t={},n=[];if(this._contextLines>0&&(0,he.x)([e,"access",e=>e.exception,"optionalAccess",e=>e.values]))for(const s of e.exception.values)if((0,he.x)([s,"access",e=>e.stacktrace,"optionalAccess",e=>e.frames]))for(let e=s.stacktrace.frames.length-1;e>=0;e--){const i=s.stacktrace.frames[e];!i.filename||t[i.filename]||_t.get(i.filename)||(n.push(mt(i.filename)),t[i.filename]=1)}if(n.length>0&&await Promise.all(n),this._contextLines>0&&(0,he.x)([e,"access",e=>e.exception,"optionalAccess",e=>e.values]))for(const t of e.exception.values)t.stacktrace&&t.stacktrace.frames&&await this.addSourceContextToFrames(t.stacktrace.frames);return e}addSourceContextToFrames(e){for(const t of e)if(t.filename&&void 0===t.context_line){const e=_t.get(t.filename);if(e)try{(0,d.go)(e,t,this._contextLines)}catch(e){}}}}async function mt(e){const t=_t.get(e);if(null===t)return null;if(void 0!==t)return t;let n=null;try{n=(await(s=e,new Promise(((e,t)=>{(0,ft.readFile)(s,"utf8",((n,s)=>{n?t(n):e(s)}))})))).split("\n")}catch(e){}var s;return _t.set(e,n),n}gt.__initStatic();class yt{static __initStatic(){this.id="LinkedErrors"}__init(){this.name=yt.id}constructor(e={}){yt.prototype.__init.call(this),this._key=e.key||"cause",this._limit=e.limit||5}setupOnce(e,t){e((async(e,n)=>{const s=t(),i=s.getClient(),r=s.getIntegration(yt);if(!i||!r)return e;const o=i.getOptions();ut(Pe,o.stackParser,o.maxValueLength,r._key,r._limit,e,n);const a=t().getIntegration(gt);return a&&await a.addSourceContext(e),e}))}}yt.__initStatic();var bt=n(1017);let Et;class vt{constructor(){vt.prototype.__init.call(this)}static __initStatic(){this.id="Modules"}__init(){this.name=vt.id}setupOnce(e,t){e((e=>t().getIntegration(vt)?{...e,modules:{...e.modules,...this._getModules()}}:e))}_getModules(){return Et||(Et=function(){const e=n.c[n.s]&&n.c[n.s].paths||[],t=function(){try{return n.c?Object.keys(n.c):[]}catch(e){return[]}}(),s={},i={};return t.forEach((t=>{let n=t;const r=()=>{const t=n;if(n=(0,bt.dirname)(t),!n||t===n||i[t])return;if(e.indexOf(n)<0)return r();const o=(0,bt.join)(t,"package.json");if(i[t]=!0,!(0,ft.existsSync)(o))return r();try{const e=JSON.parse((0,ft.readFileSync)(o,"utf8"));s[e.name]=e.version}catch(e){}};r()})),s}()),Et}}vt.__initStatic();const St=require("child_process"),kt=(0,Re.promisify)(ft.readFile),It=(0,Re.promisify)(ft.readdir);class wt{static __initStatic(){this.id="Context"}__init(){this.name=wt.id}constructor(e={app:!0,os:!0,device:!0,culture:!0,cloudResource:!0}){this._options=e,wt.prototype.__init.call(this)}setupOnce(e){e((e=>this.addContext(e)))}async addContext(e){void 0===this._cachedContext&&(this._cachedContext=this._getContexts());const t=this._updateContext(await this._cachedContext);return e.contexts={...e.contexts,app:{...t.app,...(0,he.x)([e,"access",e=>e.contexts,"optionalAccess",e=>e.app])},os:{...t.os,...(0,he.x)([e,"access",e=>e.contexts,"optionalAccess",e=>e.os])},device:{...t.device,...(0,he.x)([e,"access",e=>e.contexts,"optionalAccess",e=>e.device])},culture:{...t.culture,...(0,he.x)([e,"access",e=>e.contexts,"optionalAccess",e=>e.culture])},cloud_resource:{...t.cloud_resource,...(0,he.x)([e,"access",e=>e.contexts,"optionalAccess",e=>e.cloud_resource])}},e}_updateContext(e){return(0,he.x)([e,"optionalAccess",e=>e.app,"optionalAccess",e=>e.app_memory])&&(e.app.app_memory=process.memoryUsage().rss),(0,he.x)([e,"optionalAccess",e=>e.device,"optionalAccess",e=>e.free_memory])&&(e.device.free_memory=De.freemem()),e}async _getContexts(){const e={};if(this._options.os&&(e.os=await async function(){const e=De.platform();switch(e){case"darwin":return async function(){const e={kernel_version:De.release(),name:"Mac OS X",version:"10."+(Number(De.release().split(".")[0])-4)};try{const t=await new Promise(((e,t)=>{(0,St.execFile)("/usr/bin/sw_vers",((n,s)=>{n?t(n):e(s)}))}));e.name=Dt(/^ProductName:\s+(.*)$/m,t),e.version=Dt(/^ProductVersion:\s+(.*)$/m,t),e.build=Dt(/^BuildVersion:\s+(.*)$/m,t)}catch(e){}return e}();case"linux":return async function(){const e={kernel_version:De.release(),name:"Linux"};try{const t=await It("/etc"),n=xt.find((e=>t.includes(e.name)));if(!n)return e;const s=(0,bt.join)("/etc",n.name),i=(await kt(s,{encoding:"utf-8"})).toLowerCase(),{distros:r}=n;e.name=r.find((e=>i.indexOf(Rt(e))>=0))||r[0];const o=Rt(e.name);e.version=Tt[o](i)}catch(e){}return e}();default:return{name:Ct[e]||e,version:De.release()}}}()),this._options.app&&(e.app=function(){const e=process.memoryUsage().rss;return{app_start_time:new Date(Date.now()-1e3*process.uptime()).toISOString(),app_memory:e}}()),this._options.device&&(e.device=function(e){const t={};let n;try{n=De.uptime&&De.uptime()}catch(e){}if("number"==typeof n&&(t.boot_time=new Date(Date.now()-1e3*n).toISOString()),t.arch=De.arch(),(!0===e||e.memory)&&(t.memory_size=De.totalmem(),t.free_memory=De.freemem()),!0===e||e.cpu){const e=De.cpus();if(e&&e.length){const n=e[0];t.processor_count=e.length,t.cpu_description=n.model,t.processor_frequency=n.speed}}return t}(this._options.device)),this._options.culture){const t=function(){try{if("string"!=typeof process.versions.icu)return;const e=new Date(9e8);if("enero"===new Intl.DateTimeFormat("es",{month:"long"}).format(e)){const e=Intl.DateTimeFormat().resolvedOptions();return{locale:e.locale,timezone:e.timeZone}}}catch(e){}}();t&&(e.culture=t)}return this._options.cloudResource&&(e.cloud_resource=process.env.VERCEL?{"cloud.provider":"vercel","cloud.region":process.env.VERCEL_REGION}:process.env.AWS_REGION?{"cloud.provider":"aws","cloud.region":process.env.AWS_REGION,"cloud.platform":process.env.AWS_EXECUTION_ENV}:process.env.GCP_PROJECT?{"cloud.provider":"gcp"}:process.env.ALIYUN_REGION_ID?{"cloud.provider":"alibaba_cloud","cloud.region":process.env.ALIYUN_REGION_ID}:process.env.WEBSITE_SITE_NAME&&process.env.REGION_NAME?{"cloud.provider":"azure","cloud.region":process.env.REGION_NAME}:process.env.IBM_CLOUD_REGION?{"cloud.provider":"ibm_cloud","cloud.region":process.env.IBM_CLOUD_REGION}:process.env.TENCENTCLOUD_REGION?{"cloud.provider":"tencent_cloud","cloud.region":process.env.TENCENTCLOUD_REGION,"cloud.account.id":process.env.TENCENTCLOUD_APPID,"cloud.availability_zone":process.env.TENCENTCLOUD_ZONE}:process.env.NETLIFY?{"cloud.provider":"netlify"}:process.env.FLY_REGION?{"cloud.provider":"fly.io","cloud.region":process.env.FLY_REGION}:process.env.DYNO?{"cloud.provider":"heroku"}:void 0),e}}wt.__initStatic();const Ct={aix:"IBM AIX",freebsd:"FreeBSD",openbsd:"OpenBSD",sunos:"SunOS",win32:"Windows"},xt=[{name:"fedora-release",distros:["Fedora"]},{name:"redhat-release",distros:["Red Hat Linux","Centos"]},{name:"redhat_version",distros:["Red Hat Linux"]},{name:"SuSE-release",distros:["SUSE Linux"]},{name:"lsb-release",distros:["Ubuntu Linux","Arch Linux"]},{name:"debian_version",distros:["Debian"]},{name:"debian_release",distros:["Debian"]},{name:"arch-release",distros:["Arch Linux"]},{name:"gentoo-release",distros:["Gentoo Linux"]},{name:"novell-release",distros:["SUSE Linux"]},{name:"alpine-release",distros:["Alpine Linux"]}],Tt={alpine:e=>e,arch:e=>Dt(/distrib_release=(.*)/,e),centos:e=>Dt(/release ([^ ]+)/,e),debian:e=>e,fedora:e=>Dt(/release (..)/,e),mint:e=>Dt(/distrib_release=(.*)/,e),red:e=>Dt(/release ([^ ]+)/,e),suse:e=>Dt(/VERSION = (.*)\n/,e),ubuntu:e=>Dt(/distrib_release=(.*)/,e)};function Dt(e,t){const n=e.exec(t);return n?n[1]:void 0}function Rt(e){return e.split(" ")[0].toLowerCase()}var At=n(442),Pt=n(6956),Ot=n(6489);const Nt={ip:!1,request:!0,transaction:!0,user:!0},Ut=["cookies","data","headers","method","query_string","url"],Bt=["id","username","email"];function Yt(e,t={}){const n=e.method&&e.method.toUpperCase();let s="",i="url";t.customRoute||e.route?(s=t.customRoute||`${e.baseUrl||""}${e.route&&e.route.path}`,i="route"):(e.originalUrl||e.url)&&(s=(0,Pt.rt)(e.originalUrl||e.url||""));let r="";return t.method&&n&&(r+=n),t.method&&t.path&&(r+=" "),t.path&&s&&(r+=s),[r,i]}function $t(e,t){const{include:n=Ut}=t||{},s={},i=e.headers||{},r=e.method,o=e.hostname||e.host||i.host||"<no host>",a="https"===e.protocol||e.socket&&e.socket.encrypted?"https":"http",c=e.originalUrl||e.url||"",l=c.startsWith(a)?c:`${a}://${o}${c}`;return n.forEach((t=>{switch(t){case"headers":s.headers=i,n.includes("cookies")||delete s.headers.cookie;break;case"method":s.method=r;break;case"url":s.url=l;break;case"cookies":s.cookies=e.cookies||i.cookie&&Ot.Q(i.cookie)||{};break;case"query_string":s.query_string=function(e){let t=e.originalUrl||e.url||"";if(t)return t.startsWith("/")&&(t=`http://dogs.are.great${t}`),e.query||void 0!==typeof URL&&new URL(t).search.replace("?","")||Ge.parse(t).query||void 0}(e);break;case"data":if("GET"===r||"HEAD"===r)break;void 0!==e.body&&(s.data=(0,M.HD)(e.body)?e.body:JSON.stringify(V(e.body)));break;default:({}).hasOwnProperty.call(e,t)&&(s[t]=e[t])}})),s}function Gt(e,t,n){const s={...Nt,...(0,he.x)([n,"optionalAccess",e=>e.include])};if(s.request){const n=Array.isArray(s.request)?$t(t,{include:s.request}):$t(t);e.request={...e.request,...n}}if(s.user){const n=t.user&&(0,M.PO)(t.user)?function(e,t){const n={};return(Array.isArray(t)?t:Bt).forEach((t=>{e&&t in e&&(n[t]=e[t])})),n}(t.user,s.user):{};Object.keys(n).length&&(e.user={...e.user,...n})}if(s.ip){const n=t.ip||t.socket&&t.socket.remoteAddress;n&&(e.user={...e.user,ip_address:n})}return s.transaction&&!e.transaction&&(e.transaction=function(e,t){switch(t){case"path":return Yt(e,{path:!0})[0];case"handler":return e.route&&e.route.stack&&e.route.stack[0]&&e.route.stack[0].name||"<anonymous>";default:return Yt(e,{path:!0,method:!0})[0]}}(t,s.transaction)),e}const jt={include:{cookies:!0,data:!0,headers:!0,ip:!1,query_string:!0,url:!0,user:{id:!0,username:!0,email:!0}},transactionNamingScheme:"methodPath"};class Mt{static __initStatic(){this.id="RequestData"}__init(){this.name=Mt.id}constructor(e={}){Mt.prototype.__init.call(this),this._addRequestData=Gt,this._options={...jt,...e,include:{method:!0,...jt.include,...e.include,user:e.include&&"boolean"==typeof e.include.user?e.include.user:{...jt.include.user,...(e.include||{}).user}}}}setupOnce(e,t){const{transactionNamingScheme:n}=this._options;e((e=>{const s=t(),i=s.getIntegration(Mt),{sdkProcessingMetadata:r={}}=e,o=r.request;if(!i||!o)return e;const a=r.requestDataOptionsFromExpressHandler||r.requestDataOptionsFromGCPWrapper||function(e){const{transactionNamingScheme:t,include:{ip:n,user:s,...i}}=e,r=[];for(const[e,t]of Object.entries(i))t&&r.push(e);let o;if(void 0===s)o=!0;else if("boolean"==typeof s)o=s;else{const e=[];for(const[t,n]of Object.entries(s))n&&e.push(t);o=e}return{include:{ip:n,user:o,request:0!==r.length?r:void 0,transaction:t}}}(this._options),c=this._addRequestData(e,o,a);if("transaction"===e.type||"handler"===n)return c;const l=o._sentryTransaction;if(l){const e="sentry.javascript.nextjs"===function(e){try{return e.getClient().getOptions()._metadata.sdk.name}catch(e){return}}(s)?l.name.startsWith("/api"):"path"!==n,[t]=(0,At.oA)(o,{path:!0,method:e,customRoute:l.name});c.transaction=t}return c}))}}function Ft(e){let t=[],n=!1;function s(s){t=[],n||(n=!0,e(s))}return t.push(s),{add:function(e){t.push(e)},next:function(e){const n=t.pop()||s;try{n(e)}catch(t){s(e)}}}}Mt.__initStatic();class Vt{constructor(){const{Session:e}=n(1405);this._session=new e}configureAndConnect(e,t){this._session.connect(),this._session.on("Debugger.paused",(t=>{e(t,(()=>{this._session.post("Debugger.resume")}))})),this._session.post("Debugger.enable"),this._session.post("Debugger.setPauseOnExceptions",{state:t?"all":"uncaught"})}getLocalVariables(e,t){this._getProperties(e,(e=>{const{add:n,next:s}=Ft(t);for(const t of e)if((0,he.x)([t,"optionalAccess",e=>e.value,"optionalAccess",e=>e.objectId])&&"Array"===(0,he.x)([t,"optionalAccess",e=>e.value,"access",e=>e.className])){const e=t.value.objectId;n((n=>this._unrollArray(e,t.name,n,s)))}else if((0,he.x)([t,"optionalAccess",e=>e.value,"optionalAccess",e=>e.objectId])&&"Object"===(0,he.x)([t,"optionalAccess",e=>e.value,"optionalAccess",e=>e.className])){const e=t.value.objectId;n((n=>this._unrollObject(e,t.name,n,s)))}else((0,he.x)([t,"optionalAccess",e=>e.value,"optionalAccess",e=>e.value])||(0,he.x)([t,"optionalAccess",e=>e.value,"optionalAccess",e=>e.description]))&&n((e=>this._unrollOther(t,e,s)));s({})}))}_getProperties(e,t){this._session.post("Runtime.getProperties",{objectId:e,ownProperties:!0},((e,n)=>{t(e?[]:n.result)}))}_unrollArray(e,t,n,s){this._getProperties(e,(e=>{n[t]=e.filter((e=>"length"!==e.name&&!isNaN(parseInt(e.name,10)))).sort(((e,t)=>parseInt(e.name,10)-parseInt(t.name,10))).map((e=>(0,he.x)([e,"optionalAccess",e=>e.value,"optionalAccess",e=>e.value]))),s(n)}))}_unrollObject(e,t,n,s){this._getProperties(e,(e=>{n[t]=e.map((e=>[e.name,(0,he.x)([e,"optionalAccess",e=>e.value,"optionalAccess",e=>e.value])])).reduce(((e,[t,n])=>(e[t]=n,e)),{}),s(n)}))}_unrollOther(e,t,n){(0,he.x)([e,"optionalAccess",e=>e.value,"optionalAccess",e=>e.value])?t[e.name]=e.value.value:(0,he.x)([e,"optionalAccess",e=>e.value,"optionalAccess",e=>e.description])&&"function"!==(0,he.x)([e,"optionalAccess",e=>e.value,"optionalAccess",e=>e.type])&&(t[e.name]=`<${e.value.description}>`),n(t)}}function qt(e){return void 0!==e&&["","?","<anonymous>"].includes(e)}function Lt(e){if(void 0!==e)return e.slice(-10).reduce(((e,t)=>`${e},${t.function},${t.lineno},${t.colno}`),"")}class Ht{static __initStatic(){this.id="LocalVariables"}__init(){this.name=Ht.id}__init2(){this._cachedFrames=new nt.LRUMap(20)}constructor(e={},t=function(){try{return new Vt}catch(e){return}}()){this._options=e,this._session=t,Ht.prototype.__init.call(this),Ht.prototype.__init2.call(this)}setupOnce(e,t){this._setup(e,(0,he.x)([t,"call",e=>e(),"access",e=>e.getClient,"call",e=>e(),"optionalAccess",e=>e.getOptions,"call",e=>e()]))}_setup(e,t){if(this._session&&(0,he.x)([t,"optionalAccess",e=>e.includeLocalVariables])){if((Ve.V.major||0)<18)return void u.kg.log("The `LocalVariables` integration is only supported on Node >= v18.");this._session.configureAndConnect(((e,n)=>this._handlePaused(t.stackParser,e,n)),!!this._options.captureAllExceptions),e((async e=>this._addLocalVariables(e)))}}_handlePaused(e,{params:{reason:t,data:n,callFrames:s}},i){if("exception"!==t&&"promiseRejection"!==t)return void i();const r=function(e,t){if(void 0!==t)return Lt(e(t,1))}(e,(0,he.x)([n,"optionalAccess",e=>e.description]));if(null==r)return void i();const{add:o,next:a}=Ft((e=>{this._cachedFrames.set(r,e),i()}));for(let e=0;e<Math.min(s.length,5);e++){const{scopeChain:t,functionName:n,this:i}=s[e],r=t.find((e=>"local"===e.type)),c="global"!==i.className&&i.className?`${i.className}.${n}`:n;if(void 0===(0,he.x)([r,"optionalAccess",e=>e.object,"access",e=>e.objectId]))o((t=>{t[e]={function:c},a(t)}));else{const t=r.object.objectId;o((n=>(0,he.x)([this,"access",e=>e._session,"optionalAccess",e=>e.getLocalVariables,"call",s=>s(t,(t=>{n[e]={function:c,vars:t},a(n)}))])))}}a([])}_addLocalVariables(e){for(const t of(0,he.x)([e,"optionalAccess",e=>e.exception,"optionalAccess",e=>e.values])||[])this._addLocalVariablesToException(t);return e}_addLocalVariablesToException(e){const t=Lt((0,he.x)([e,"optionalAccess",e=>e.stacktrace,"optionalAccess",e=>e.frames]));if(void 0===t)return;const n=this._cachedFrames.delete(t);if(void 0===n)return;const s=(0,he.x)([e,"access",e=>e.stacktrace,"optionalAccess",e=>e.frames,"optionalAccess",e=>e.length])||0;for(let t=0;t<s;t++){const o=s-t-1;if(!(0,he.x)([e,"optionalAccess",e=>e.stacktrace,"optionalAccess",e=>e.frames,"optionalAccess",e=>e[o]])||!n[t])break;void 0!==n[t].vars&&!1!==e.stacktrace.frames[o].in_app&&((i=e.stacktrace.frames[o].function)===(r=n[t].function)||qt(i)&&qt(r))&&(e.stacktrace.frames[o].vars=n[t].vars)}var i,r}}Ht.__initStatic();var Wt=n(1249);const Kt="\\"===bt.sep;function Jt(e,t=Kt){if(!e)return;const s=t?e.replace(/^[A-Z]:/,"").replace(/\\/g,"/"):e;let{root:i,dir:r,base:o,ext:a}=bt.posix.parse(s);const c=`${n.c[n.s]&&n.c[n.s].filename&&r||global.process.cwd()}/`;let l=o;".js"===a&&(l=l.slice(0,l.length-3)),i||r||(r=".");let u=r.lastIndexOf("/node_modules/");if(u>-1)return`${r.slice(u+14).replace(/\//g,".")}:${l}`;if(u=`${r}/`.lastIndexOf(c,0),0===u){let e=r.slice(c.length).replace(/\//g,".");return e&&(e+=":"),e+=l,e}return l}const zt=[new _,new l,new et,new it,new Wt.Y,new ct,new lt,new gt,new Ht,new wt,new vt,new Mt,new yt];function Zt(e={}){const t=(0,y.cu)();ze();const n=(0,he.x)([t,"access",e=>e.__SENTRY__,"optionalAccess",e=>e.integrations])||[];e.defaultIntegrations=!1===e.defaultIntegrations?[]:[...Array.isArray(e.defaultIntegrations)?e.defaultIntegrations:zt,...n],void 0===e.dsn&&process.env.SENTRY_DSN&&(e.dsn=process.env.SENTRY_DSN);const s=process.env.SENTRY_TRACES_SAMPLE_RATE;if(void 0===e.tracesSampleRate&&s){const t=parseFloat(s);isFinite(t)&&(e.tracesSampleRate=t)}if(void 0===e.release){const t=Xt();void 0!==t?e.release=t:e.autoSessionTracking=!1}void 0===e.environment&&process.env.SENTRY_ENVIRONMENT&&(e.environment=process.env.SENTRY_ENVIRONMENT),void 0===e.autoSessionTracking&&void 0!==e.dsn&&(e.autoSessionTracking=!0),void 0===e.instrumenter&&(e.instrumenter="sentry");const i={...e,stackParser:(0,F.Sq)(e.stackParser||en),integrations:_e(e),transport:e.transport||Fe};!function(e,t){!0===t.debug&&("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__?u.kg.enable():console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle."));const n=(0,y.Gd)();n.getScope().update(t.initialScope);const s=new e(t);n.bindClient(s)}(e.clientClass||Oe,i),e.autoSessionTracking&&function(){const e=(0,y.Gd)();e.startSession(),process.on("beforeExit",(()=>{const t=e.getScope().getSession();t&&!["exited","crashed"].includes(t.status)&&e.endSession()}))}(),function(){const e=(process.env.SENTRY_USE_ENVIRONMENT||"").toLowerCase();if(!["false","n","no","off","0"].includes(e)){const e=process.env.SENTRY_TRACE,t=process.env.SENTRY_BAGGAGE,{propagationContext:n}=(0,ce.KA)(e,t);(0,y.Gd)().getScope().setPropagationContext(n)}}()}function Qt(e){if(void 0===e)return!1;const t=e&&e.getOptions();return!(!t||void 0===t.autoSessionTracking)&&t.autoSessionTracking}function Xt(e){return process.env.SENTRY_RELEASE?process.env.SENTRY_RELEASE:Ee.n2.SENTRY_RELEASE&&Ee.n2.SENTRY_RELEASE.id?Ee.n2.SENTRY_RELEASE.id:process.env.GITHUB_SHA||process.env.COMMIT_REF||process.env.VERCEL_GIT_COMMIT_SHA||process.env.VERCEL_GITHUB_COMMIT_SHA||process.env.VERCEL_GITLAB_COMMIT_SHA||process.env.VERCEL_BITBUCKET_COMMIT_SHA||process.env.ZEIT_GITHUB_COMMIT_SHA||process.env.ZEIT_GITLAB_COMMIT_SHA||process.env.ZEIT_BITBUCKET_COMMIT_SHA||e}const en=(0,F.pE)((0,F.Ep)(Jt));function tn(e){const t=bt.resolve(e);if(!ft.existsSync(t))throw new Error(`Cannot read contents of ${t}. Directory does not exist.`);if(!ft.statSync(t).isDirectory())throw new Error(`Cannot read contents of ${t}, because it is not a directory.`);const n=e=>ft.readdirSync(e).reduce(((t,s)=>{const i=bt.join(e,s);return ft.statSync(i).isDirectory()?t.concat(n(i)):(t.push(i),t)}),[]);return n(t).map((e=>bt.relative(t,e)))}var nn=n(7522);function sn(e,t){return $t(e,{include:t})}function rn(e,t,n={}){return Gt(e,t,{include:n})}function on(){return function(e,t,n){const s=(0,y.Gd)(),i=(0,he.x)([s,"access",e=>e.getClient,"call",e=>e(),"optionalAccess",e=>e.getOptions,"call",e=>e()]);if(!i||"sentry"!==i.instrumenter||"OPTIONS"===(0,he.x)([e,"access",e=>e.method,"optionalAccess",e=>e.toUpperCase,"call",e=>e()])||"HEAD"===(0,he.x)([e,"access",e=>e.method,"optionalAccess",e=>e.toUpperCase,"call",e=>e()]))return n();const r=e.headers&&(0,M.HD)(e.headers["sentry-trace"])?e.headers["sentry-trace"]:void 0,o=(0,he.x)([e,"access",e=>e.headers,"optionalAccess",e=>e.baggage]),{traceparentData:a,dynamicSamplingContext:c,propagationContext:l}=(0,ce.KA)(r,o);if(s.getScope().setPropagationContext(l),!(0,nn.z)(i))return n();const[u,d]=(0,At.oA)(e,{path:!0,method:!0}),p=A({name:u,op:"http.server",origin:"auto.http.node.tracingHandler",...a,metadata:{dynamicSamplingContext:a&&!c?{}:c,request:e,source:d}},{request:$t(e)});s.configureScope((e=>{e.setSpan(p)})),t.__sentry_transaction=p,t.once("finish",(()=>{setImmediate((()=>{(0,At.dB)(p,e),p.setHttpStatus(t.statusCode),p.finish()}))})),n()}}function an(e){const t=function(e={}){let t;if("include"in e)t={include:e.include};else{const{ip:n,request:s,transaction:i,user:r}=e;(n||s||i||r)&&(t={include:(0,a.Jr)({ip:n,request:s,transaction:i,user:r})})}return t}(e),n=(0,y.Gd)(),s=n.getClient();if(s&&Qt(s)){s.initSessionFlusher();const e=n.getScope();e.getSession()&&e.setSession()}return function(n,s,i){if(e&&e.flushTimeout&&e.flushTimeout>0){const t=s.end;s.end=function(n,s,i){O(e.flushTimeout).then((()=>{t.call(this,n,s,i)})).then(null,(e=>{("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.kg.error(e),t.call(this,n,s,i)}))}}(0,y.Ok)((()=>{const e=(0,y.Gd)();e.configureScope((s=>{if(s.setSDKProcessingMetadata({request:n,requestDataOptionsFromExpressHandler:t}),Qt(e.getClient())){const t=e.getScope();t&&t.setRequestSession({status:"ok"})}})),s.once("finish",(()=>{const t=e.getClient();Qt(t)&&setImmediate((()=>{t&&t._captureRequestSession&&t._captureRequestSession()}))})),i()}))}}function cn(e){const t=function(e){const t=e.status||e.statusCode||e.status_code||e.output&&e.output.statusCode;return t?parseInt(t,10):500}(e);return t>=500}function ln(e){return function(t,n,s,i){(e&&e.shouldHandleError||cn)(t)?R((e=>{e.setSDKProcessingMetadata({request:n});const r=s.__sentry_transaction;r&&void 0===e.getSpan()&&e.setSpan(r);const o=(0,y.Gd)().getClient();if(o&&Qt(o)&&void 0!==o._sessionFlusher){const t=e.getRequestSession();t&&void 0!==t.status&&(t.status="crashed")}e.addEventProcessor((e=>((0,d.EG)(e,{type:"middleware",handled:!1}),e)));const a=b(t);s.sentry=a,i(t)})):i(t)}}function un(e={}){return function({path:t,type:n,next:s,rawInput:i}){const r=(0,y.Gd)(),o=(0,he.x)([r,"access",e=>e.getClient,"call",e=>e(),"optionalAccess",e=>e.getOptions,"call",e=>e()]),a=r.getScope().getTransaction();if(a){a.setName(`trpc/${t}`,"route"),a.op="rpc.server";const s={procedure_type:n};(void 0!==e.attachRpcInput?e.attachRpcInput:(0,he.x)([o,"optionalAccess",e=>e.sendDefaultPii]))&&(s.input=V(i)),a.setContext("trpc",s)}return s()}}var dn=n(2716),pn=n(8737),hn=n(1791),fn=n(6169),_n=n(24),gn=n(1370),mn=n(9889);const yn={...s,...r,...o}},1249:(e,t,n)=>{"use strict";n.d(t,{Y:()=>_});var s,i=n(4307),r=n(5659),o=n(454),a=n(2176),c=n(7321),l=n(9181),u=n(7638),d=n(6956),p=n(7612),h=n(9656),f=n(7578);e=n.hmd(e),function(e){e.RequestCreate="undici:request:create",e.RequestEnd="undici:request:headers",e.RequestError="undici:request:error"}(s||(s={}));class _{static __initStatic(){this.id="Undici"}__init(){this.name=_.id}__init2(){this._createSpanUrlMap=new p.LRUMap(100)}__init3(){this._headersUrlMap=new p.LRUMap(100)}constructor(e={}){_.prototype.__init.call(this),_.prototype.__init2.call(this),_.prototype.__init3.call(this),_.prototype.__init4.call(this),_.prototype.__init5.call(this),_.prototype.__init6.call(this),this._options={breadcrumbs:void 0===e.breadcrumbs||e.breadcrumbs,shouldCreateSpanForRequest:e.shouldCreateSpanForRequest}}setupOnce(t){if(h.V.major&&h.V.major<16)return;let n;try{n=(0,a.l$)(e,"diagnostics_channel")}catch(e){}n&&n.subscribe&&(n.subscribe(s.RequestCreate,this._onRequestCreate),n.subscribe(s.RequestEnd,this._onRequestEnd),n.subscribe(s.RequestError,this._onRequestError))}_shouldCreateSpan(e){if(void 0===this._options.shouldCreateSpanForRequest)return!0;const t=this._createSpanUrlMap.get(e);if(void 0!==t)return t;const n=this._options.shouldCreateSpanForRequest(e);return this._createSpanUrlMap.set(e,n),n}__init4(){this._onRequestCreate=e=>{const t=(0,r.Gd)();if(!t.getIntegration(_))return;const{request:n}=e,s=n.origin?n.origin.toString()+n.path:n.path;if((0,f.ZB)(s)||void 0!==n.__sentry_span__)return;const a=t.getClient();if(!a)return;const p=a.getOptions(),h=t.getScope(),m=h.getSpan(),y=this._shouldCreateSpan(s)?function(e,t,n){const s=(0,d.en)(n),r=t.method||"GET",o={"http.method":r};return s.search&&(o["http.query"]=s.search),s.hash&&(o["http.fragment"]=s.hash),(0,i.x)([e,"optionalAccess",e=>e.startChild,"call",e=>e({op:"http.client",origin:"auto.http.node.undici",description:`${r} ${(0,d.tF)(s)}`,data:o})])}(m,n,s):void 0;if(y&&(n.__sentry_span__=y),(e=>{if(void 0===p.tracePropagationTargets)return!0;const t=this._headersUrlMap.get(e);if(void 0!==t)return t;const n=(0,c.U0)(e,p.tracePropagationTargets);return this._headersUrlMap.set(e,n),n})(s))if(y){const e=(0,i.x)([y,"optionalAccess",e=>e.transaction,"optionalAccess",e=>e.getDynamicSamplingContext,"call",e=>e()]),t=(0,l.IQ)(e);g(n,y.toTraceparent(),t)}else{const{traceId:e,sampled:t,dsc:s}=h.getPropagationContext(),i=(0,u.$p)(e,void 0,t),r=s||(0,o._)(e,a,h);g(n,i,(0,l.IQ)(r))}}}__init5(){this._onRequestEnd=e=>{const t=(0,r.Gd)();if(!t.getIntegration(_))return;const{request:n,response:s}=e,i=n.origin?n.origin.toString()+n.path:n.path;if((0,f.ZB)(i))return;const o=n.__sentry_span__;o&&(o.setHttpStatus(s.statusCode),o.finish()),this._options.breadcrumbs&&t.addBreadcrumb({category:"http",data:{method:n.method,status_code:s.statusCode,url:i},type:"http"},{event:"response",request:n,response:s})}}__init6(){this._onRequestError=e=>{const t=(0,r.Gd)();if(!t.getIntegration(_))return;const{request:n}=e,s=n.origin?n.origin.toString()+n.path:n.path;if((0,f.ZB)(s))return;const i=n.__sentry_span__;i&&(i.setStatus("internal_error"),i.finish()),this._options.breadcrumbs&&t.addBreadcrumb({category:"http",data:{method:n.method,url:s},level:"error",type:"http"},{event:"error",request:n})}}}function g(e,t,n){e.__sentry_has_headers__||(e.addHeader("sentry-trace",t),n&&e.addHeader("baggage",n),e.__sentry_has_headers__=!0)}_.__initStatic()},7578:(e,t,n)=>{"use strict";n.d(t,{CA:()=>l,Dt:()=>u,ZB:()=>a,lx:()=>c,nY:()=>p});var s=n(4307),i=n(5659),r=n(7310),o=n(9656);function a(e){const t=(0,s.x)([i.Gd,"call",e=>e(),"access",e=>e.getClient,"call",e=>e(),"optionalAccess",e=>e.getDsn,"call",e=>e()]);return!!t&&e.includes(t.host)}function c(e){return`${e.protocol||""}//${e.hostname||e.host||""}${e.port&&80!==e.port&&443!==e.port?`:${e.port}`:""}${e.path?e.path:"/"}`}function l(e){const t=e.protocol||"",n=e.hostname||e.host||"",s=e.port&&80!==e.port&&443!==e.port?`:${e.port}`:"",i=e.pathname||"/";return`${t}//${e.auth?function(e){const[t,n]=e.split(":");return`${t?"[Filtered]":""}:${n?"[Filtered]":""}@`}(e.auth):""}${n}${s}${i}`}function u(e,t,n){if(!e)return e;let[i,r]=e.split(" ");return t.host&&!t.protocol&&(t.protocol=(0,s.x)([n,"optionalAccess",e=>e.agent,"optionalAccess",e=>e.protocol]),r=l(t)),(0,s.x)([r,"optionalAccess",e=>e.startsWith,"call",e=>e("///")])&&(r=r.slice(2)),`${i} ${r}`}function d(e){const t={protocol:e.protocol,hostname:"string"==typeof e.hostname&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:`${e.pathname||""}${e.search||""}`,href:e.href};return""!==e.port&&(t.port=Number(e.port)),(e.username||e.password)&&(t.auth=`${e.username}:${e.password}`),t}function p(e,t){let n,i;return"function"==typeof t[t.length-1]&&(n=t.pop()),i="string"==typeof t[0]?d(new r.URL(t[0])):t[0]instanceof r.URL?d(t[0]):t[0],2===t.length&&(i={...i,...t[1]}),void 0===i.protocol&&(o.V.major&&o.V.major>8?i.protocol=(0,s.x)([(0,s.x)([e,"optionalAccess",e=>e.globalAgent]),"optionalAccess",e=>e.protocol])||(0,s.x)([i.agent,"optionalAccess",e=>e.protocol])||(0,s.x)([i._defaultAgent,"optionalAccess",e=>e.protocol]):i.protocol=(0,s.x)([i.agent,"optionalAccess",e=>e.protocol])||(0,s.x)([i._defaultAgent,"optionalAccess",e=>e.protocol])||(0,s.x)([(0,s.x)([e,"optionalAccess",e=>e.globalAgent]),"optionalAccess",e=>e.protocol])),n?[i,n]:[i]}},9656:(e,t,n)=>{"use strict";n.d(t,{V:()=>s});const s=(0,n(2844).J4)(process.versions.node)},5605:(e,t,n)=>{"use strict";n.r(t),n.d(t,{BROWSER_TRACING_INTEGRATION_ID:()=>de,BrowserTracing:()=>ie,IdleTransaction:()=>ge,Integrations:()=>Ee,Span:()=>ue,SpanStatus:()=>be,TRACEPARENT_REGEXP:()=>_e,Transaction:()=>le,addExtensionMethods:()=>re,defaultRequestInstrumentationOptions:()=>pe,extractTraceparentData:()=>ae,getActiveTransaction:()=>oe,hasTracingEnabled:()=>he,instrumentOutgoingRequests:()=>me,spanStatusfromHttpCode:()=>ce,startIdleTransaction:()=>ye,stripUrlQueryAndFragment:()=>fe});var s=n(5544),i=n(6890),r=n(9791),o=n(2343),a=n(7638),c=n(8464);const l=n(1235).n2;var u=n(1170);const d=(e,t,n)=>{let s,i;return r=>{t.value>=0&&(r||n)&&(i=t.value-(s||0),(i||void 0===s)&&(s=t.value,t.delta=i,e(t)))}},p=()=>l.__WEB_VITALS_POLYFILL__?l.performance&&(performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||(()=>{const e=l.performance.timing,t=l.performance.navigation.type,n={entryType:"navigation",startTime:0,type:2==t?"back_forward":1===t?"reload":"navigate"};for(const t in e)"navigationStart"!==t&&"toJSON"!==t&&(n[t]=Math.max(e[t]-e.navigationStart,0));return n})()):l.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],h=()=>{const e=p();return e&&e.activationStart||0},f=(e,t)=>{const n=p();let s="navigate";return n&&(s=l.document.prerendering||h()>0?"prerender":n.type.replace(/_/g,"-")),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:`v3-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:s}},_=(e,t,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const s=new PerformanceObserver((e=>{t(e.getEntries())}));return s.observe(Object.assign({type:e,buffered:!0},n||{})),s}}catch(e){}},g=(e,t)=>{const n=s=>{"pagehide"!==s.type&&"hidden"!==l.document.visibilityState||(e(s),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)};let m=-1;const y=()=>(m<0&&(m="hidden"!==l.document.visibilityState||l.document.prerendering?1/0:0,g((({timeStamp:e})=>{m=e}),!0)),{get firstHiddenTime(){return m}}),b={};function E(e){return"number"==typeof e&&isFinite(e)}function v(e,{startTimestamp:t,...n}){return t&&e.startTimestamp>t&&(e.startTimestamp=t),e.startChild({startTimestamp:t,...n})}function S(e){return e/1e3}function k(){return l&&l.addEventListener&&l.performance}let I,w,C=0,x={};function T(){const e=k();if(e&&u.Z1){e.mark&&l.performance.mark("sentry-tracing-init"),(e=>{const t=y(),n=f("FID");let s;const i=e=>{e.startTime<t.firstHiddenTime&&(n.value=e.processingStart-e.startTime,n.entries.push(e),s(!0))},r=e=>{e.forEach(i)},o=_("first-input",r);s=d(e,n),o&&g((()=>{r(o.takeRecords()),o.disconnect()}),!0)})((e=>{const t=e.entries.pop();if(!t)return;const n=S(u.Z1),s=S(t.startTime);("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.kg.log("[Measurements] Adding FID"),x.fid={value:e.value,unit:"millisecond"},x["mark.fid"]={value:n+s,unit:"second"}}));const t=(e=>{const t=f("CLS",0);let n,s=0,i=[];const r=e=>{e.forEach((e=>{if(!e.hadRecentInput){const r=i[0],o=i[i.length-1];s&&0!==i.length&&e.startTime-o.startTime<1e3&&e.startTime-r.startTime<5e3?(s+=e.value,i.push(e)):(s=e.value,i=[e]),s>t.value&&(t.value=s,t.entries=i,n&&n())}}))},o=_("layout-shift",r);if(o){n=d(e,t);const s=()=>{r(o.takeRecords()),n(!0)};return g(s),s}})((e=>{const t=e.entries.pop();t&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.kg.log("[Measurements] Adding CLS"),x.cls={value:e.value,unit:""},w=t)})),n=(e=>{const t=y(),n=f("LCP");let s;const i=e=>{const i=e[e.length-1];if(i){const e=Math.max(i.startTime-h(),0);e<t.firstHiddenTime&&(n.value=e,n.entries=[i],s())}},r=_("largest-contentful-paint",i);if(r){s=d(e,n);const t=()=>{b[n.id]||(i(r.takeRecords()),r.disconnect(),b[n.id]=!0,s(!0))};return["keydown","click"].forEach((e=>{addEventListener(e,t,{once:!0,capture:!0})})),g(t,!0),t}})((e=>{const t=e.entries.pop();t&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.kg.log("[Measurements] Adding LCP"),x.lcp={value:e.value,unit:"millisecond"},I=t)}));return()=>{t&&t(),n&&n()}}return()=>{}}function D(e,t,n,s,i,r){const o=r?t[r]:t[`${n}End`],a=t[`${n}Start`];a&&o&&v(e,{op:"browser",origin:"auto.browser.browser.metrics",description:i||n,startTimestamp:s+S(a),endTimestamp:s+S(o)})}var R=n(7522),A=n(5659),P=n(454),O=n(1688),N=n(7321),U=n(9181),B=n(7597);const Y=["localhost",/^\/(?!\/)/],$={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,tracingOrigins:Y,tracePropagationTargets:Y};function G(e){const{traceFetch:t,traceXHR:n,tracePropagationTargets:s,tracingOrigins:i,shouldCreateSpanForRequest:r,enableHTTPTimings:o}={traceFetch:$.traceFetch,traceXHR:$.traceXHR,...e},c="function"==typeof r?r:e=>!0,l=e=>function(e,t){return(0,N.U0)(e,t||Y)}(e,s||i),u={};t&&(0,O.oq)("fetch",(e=>{const t=function(e,t,n,s){if(!(0,R.z)()||!e.fetchData)return;const i=t(e.fetchData.url);if(e.endTimestamp&&i){const t=e.fetchData.__span;if(!t)return;const n=s[t];if(n){if(e.response){n.setHttpStatus(e.response.status);const t=e.response&&e.response.headers&&e.response.headers.get("content-length"),s=parseInt(t);s>0&&n.setData("http.response_content_length",s)}else e.error&&n.setStatus("internal_error");n.finish(),delete s[t]}return}const r=(0,A.Gd)(),o=r.getScope(),c=r.getClient(),l=o.getSpan(),{method:u,url:d}=e.fetchData,p=i&&l?l.startChild({data:{url:d,type:"fetch","http.method":u},description:`${u} ${d}`,op:"http.client",origin:"auto.http.browser"}):void 0;if(p&&(e.fetchData.__span=p.spanId,s[p.spanId]=p),n(e.fetchData.url)&&c){const t=e.args[0];e.args[1]=e.args[1]||{};const n=e.args[1];n.headers=function(e,t,n,s,i){const r=i||n.getSpan(),o=r&&r.transaction,{traceId:c,sampled:l,dsc:u}=n.getPropagationContext(),d=r?r.toTraceparent():(0,a.$p)(c,void 0,l),p=o?o.getDynamicSamplingContext():u||(0,P._)(c,t,n),h=(0,U.IQ)(p),f="undefined"!=typeof Request&&(0,B.V9)(e,Request)?e.headers:s.headers;if(f){if("undefined"!=typeof Headers&&(0,B.V9)(f,Headers)){const e=new Headers(f);return e.append("sentry-trace",d),h&&e.append(U.bU,h),e}if(Array.isArray(f)){const e=[...f,["sentry-trace",d]];return h&&e.push([U.bU,h]),e}{const e="baggage"in f?f.baggage:void 0,t=[];return Array.isArray(e)?t.push(...e):e&&t.push(e),h&&t.push(h),{...f,"sentry-trace":d,baggage:t.length>0?t.join(","):void 0}}}return{"sentry-trace":d,baggage:h}}(t,c,o,n,p)}return p}(e,c,l,u);o&&t&&j(t)})),n&&(0,O.oq)("xhr",(e=>{const t=function(e,t,n,s){const i=e.xhr,r=i&&i[O.xU];if(!(0,R.z)()||i&&i.__sentry_own_request__||!i||!r)return;const o=t(r.url);if(e.endTimestamp&&o){const e=i.__sentry_xhr_span_id__;if(!e)return;const t=s[e];return void(t&&(t.setHttpStatus(r.status_code),t.finish(),delete s[e]))}const c=(0,A.Gd)(),l=c.getScope(),u=l.getSpan(),d=o&&u?u.startChild({data:{...r.data,type:"xhr","http.method":r.method,url:r.url},description:`${r.method} ${r.url}`,op:"http.client",origin:"auto.http.browser"}):void 0;if(d&&(i.__sentry_xhr_span_id__=d.spanId,s[i.__sentry_xhr_span_id__]=d),i.setRequestHeader&&n(r.url))if(d){const e=d&&d.transaction,t=e&&e.getDynamicSamplingContext(),n=(0,U.IQ)(t);F(i,d.toTraceparent(),n)}else{const e=c.getClient(),{traceId:t,sampled:n,dsc:s}=l.getPropagationContext(),r=(0,a.$p)(t,void 0,n),o=s||(e?(0,P._)(t,e,l):void 0);F(i,r,(0,U.IQ)(o))}return d}(e,c,l,u);o&&t&&j(t)}))}function j(e){const t=e.data.url,n=new PerformanceObserver((s=>{s.getEntries().forEach((s=>{(function(e){return"resource"===e.entryType&&"initiatorType"in e&&"string"==typeof e.nextHopProtocol&&("fetch"===e.initiatorType||"xmlhttprequest"===e.initiatorType)})(s)&&s.name.endsWith(t)&&(function(e){const{name:t,version:n}=function(e){let t="unknown",n="unknown",s="";for(const i of e){if("/"===i){[t,n]=e.split("/");break}if(!isNaN(Number(i))){t="h"===s?"http":s,n=e.split(s)[1];break}s+=i}return s===e&&(t=s),{name:t,version:n}}(e.nextHopProtocol),s=[];return s.push(["network.protocol.version",n],["network.protocol.name",t]),u.Z1?[...s,["http.request.redirect_start",M(e.redirectStart)],["http.request.fetch_start",M(e.fetchStart)],["http.request.domain_lookup_start",M(e.domainLookupStart)],["http.request.domain_lookup_end",M(e.domainLookupEnd)],["http.request.connect_start",M(e.connectStart)],["http.request.secure_connection_start",M(e.secureConnectionStart)],["http.request.connection_end",M(e.connectEnd)],["http.request.request_start",M(e.requestStart)],["http.request.response_start",M(e.responseStart)],["http.request.response_end",M(e.responseEnd)]]:s}(s).forEach((t=>e.setData(...t))),n.disconnect())}))}));n.observe({entryTypes:["resource"]})}function M(e=0){return((u.Z1||performance.timeOrigin)+e)/1e3}function F(e,t,n){try{e.setRequestHeader("sentry-trace",t),n&&e.setRequestHeader(U.bU,n)}catch(e){}}const V="BrowserTracing",q={...s.AT,markBackgroundTransactions:!0,routingInstrumentation:function(e,t=!0,n=!0){if(!l||!l.location)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.kg.warn("Could not initialize routing instrumentation due to invalid location"));let s,i=l.location.href;t&&(s=e({name:l.location.pathname,startTimestamp:u.Z1?u.Z1/1e3:void 0,op:"pageload",origin:"auto.pageload.browser",metadata:{source:"url"}})),n&&(0,O.oq)("history",(({to:t,from:n})=>{void 0===n&&i&&-1!==i.indexOf(t)?i=void 0:n!==t&&(i=void 0,s&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.kg.log(`[Tracing] Finishing current transaction with op: ${s.op}`),s.finish()),s=e({name:l.location.pathname,op:"navigation",origin:"auto.navigation.browser",metadata:{source:"url"}}))}))},startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0,enableLongTask:!0,_experiments:{},...$};function L(e){const t=(0,c.qT)(`meta[name=${e}]`);return t?t.getAttribute("content"):void 0}var H,W=n(758),K=n(8903),J=n(8069),z=n(6956);!function(e){e.Ok="ok",e.DeadlineExceeded="deadline_exceeded",e.Unauthenticated="unauthenticated",e.PermissionDenied="permission_denied",e.NotFound="not_found",e.ResourceExhausted="resource_exhausted",e.InvalidArgument="invalid_argument",e.Unimplemented="unimplemented",e.Unavailable="unavailable",e.InternalError="internal_error",e.UnknownError="unknown_error",e.Cancelled="cancelled",e.AlreadyExists="already_exists",e.FailedPrecondition="failed_precondition",e.Aborted="aborted",e.OutOfRange="out_of_range",e.DataLoss="data_loss"}(H||(H={}));var Z=n(2716),Q=n(8737),X=n(1791),ee=n(6169),te=n(24),ne=n(1370),se=n(9889);const ie=class{constructor(e){this.name=V,this._hasSetTracePropagationTargets=!1,(0,i.T)(),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&(this._hasSetTracePropagationTargets=!(!e||!e.tracePropagationTargets&&!e.tracingOrigins)),this.options={...q,...e},void 0!==this.options._experiments.enableLongTask&&(this.options.enableLongTask=this.options._experiments.enableLongTask),e&&!e.tracePropagationTargets&&e.tracingOrigins&&(this.options.tracePropagationTargets=e.tracingOrigins),this._collectWebVitals=T(),this.options.enableLongTask&&_("longtask",(e=>{for(const t of e){const e=(0,r.x1)();if(!e)return;const n=S(u.Z1+t.startTime),s=S(t.duration);e.startChild({description:"Main UI thread blocked",op:"ui.long-task",origin:"auto.ui.browser.metrics",startTimestamp:n,endTimestamp:n+s})}})),this.options._experiments.enableInteractions&&_("event",(e=>{for(const t of e){const e=(0,r.x1)();if(!e)return;if("click"===t.name){const n=S(u.Z1+t.startTime),s=S(t.duration);e.startChild({description:(0,c.Rt)(t.target),op:`ui.interaction.${t.name}`,origin:"auto.ui.browser.metrics",startTimestamp:n,endTimestamp:n+s})}}}),{durationThreshold:0})}setupOnce(e,t){this._getCurrentHub=t;const n=t().getClient(),s=n&&n.getOptions(),{routingInstrumentation:i,startTransactionOnLocationChange:a,startTransactionOnPageLoad:c,markBackgroundTransactions:u,traceFetch:d,traceXHR:p,shouldCreateSpanForRequest:h,enableHTTPTimings:f,_experiments:_}=this.options,g=s&&s.tracePropagationTargets,m=g||this.options.tracePropagationTargets;("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&this._hasSetTracePropagationTargets&&g&&o.kg.warn("[Tracing] The `tracePropagationTargets` option was set in the BrowserTracing integration and top level `Sentry.init`. The top level `Sentry.init` value is being used."),i((e=>{const n=this._createRouteTransaction(e);return this.options._experiments.onStartRouteTransaction&&this.options._experiments.onStartRouteTransaction(n,e,t),n}),c,a),u&&(l&&l.document?l.document.addEventListener("visibilitychange",(()=>{const e=(0,r.x1)();if(l.document.hidden&&e){const t="cancelled";("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.kg.log(`[Tracing] Transaction: ${t} -> since tab moved to the background, op: ${e.op}`),e.status||e.setStatus(t),e.setTag("visibilitychange","document.hidden"),e.finish()}})):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.kg.warn("[Tracing] Could not set up background tab detection due to lack of global document")),_.enableInteractions&&this._registerInteractionListener(),G({traceFetch:d,traceXHR:p,tracePropagationTargets:m,shouldCreateSpanForRequest:h,enableHTTPTimings:f})}_createRouteTransaction(e){if(!this._getCurrentHub)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.kg.warn(`[Tracing] Did not create ${e.op} transaction because _getCurrentHub is invalid.`));const t=this._getCurrentHub(),{beforeNavigate:n,idleTimeout:s,finalTimeout:r,heartbeatInterval:d}=this.options,p="pageload"===e.op,h=p?L("sentry-trace"):"",f=p?L("baggage"):"",{traceparentData:_,dynamicSamplingContext:g,propagationContext:m}=(0,a.KA)(h,f),b={...e,..._,metadata:{...e.metadata,dynamicSamplingContext:_&&!g?{}:g},trimEnd:!0},T="function"==typeof n?n(b):b,R=void 0===T?{...b,sampled:!1}:T;R.metadata=R.name!==b.name?{...R.metadata,source:"custom"}:R.metadata,this._latestRouteName=R.name,this._latestRouteSource=R.metadata&&R.metadata.source,!1===R.sampled&&("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.kg.log(`[Tracing] Will not send ${R.op} transaction because of beforeNavigate.`),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.kg.log(`[Tracing] Starting ${R.op} transaction on scope`);const{location:A}=l,P=(0,i.l)(t,R,s,r,!0,{location:A},d),O=t.getScope();return p&&_?O.setPropagationContext(m):O.setPropagationContext({traceId:P.traceId,spanId:P.spanId,parentSpanId:P.parentSpanId,sampled:P.sampled}),P.registerBeforeFinishCallback((e=>{this._collectWebVitals(),function(e){const t=k();if(!t||!l.performance.getEntries||!u.Z1)return;("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.kg.log("[Tracing] Adding & adjusting spans using Performance API");const n=S(u.Z1),s=t.getEntries();let i,r;if(s.slice(C).forEach((t=>{const s=S(t.startTime),a=S(t.duration);if(!("navigation"===e.op&&n+s<e.startTimestamp))switch(t.entryType){case"navigation":!function(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach((s=>{D(e,t,s,n)})),D(e,t,"secureConnection",n,"TLS/SSL","connectEnd"),D(e,t,"fetch",n,"cache","domainLookupStart"),D(e,t,"domainLookup",n,"DNS"),function(e,t,n){v(e,{op:"browser",origin:"auto.browser.browser.metrics",description:"request",startTimestamp:n+S(t.requestStart),endTimestamp:n+S(t.responseEnd)}),v(e,{op:"browser",origin:"auto.browser.browser.metrics",description:"response",startTimestamp:n+S(t.responseStart),endTimestamp:n+S(t.responseEnd)})}(e,t,n)}(e,t,n),i=n+S(t.responseStart),r=n+S(t.requestStart);break;case"mark":case"paint":case"measure":{!function(e,t,n,s,i){const r=i+n,o=r+s;v(e,{description:t.name,endTimestamp:o,op:t.entryType,origin:"auto.resource.browser.metrics",startTimestamp:r})}(e,t,s,a,n);const i=y(),r=t.startTime<i.firstHiddenTime;"first-paint"===t.name&&r&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.kg.log("[Measurements] Adding FP"),x.fp={value:t.startTime,unit:"millisecond"}),"first-contentful-paint"===t.name&&r&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.kg.log("[Measurements] Adding FCP"),x.fcp={value:t.startTime,unit:"millisecond"});break}case"resource":{const i=t.name.replace(l.location.origin,"");!function(e,t,n,s,i,r){if("xmlhttprequest"===t.initiatorType||"fetch"===t.initiatorType)return;const o={};"transferSize"in t&&(o["http.response_transfer_size"]=t.transferSize),"encodedBodySize"in t&&(o["http.response_content_length"]=t.encodedBodySize),"decodedBodySize"in t&&(o["http.decoded_response_content_length"]=t.decodedBodySize),"renderBlockingStatus"in t&&(o["resource.render_blocking_status"]=t.renderBlockingStatus);const a=r+s;v(e,{description:n,endTimestamp:a+i,op:t.initiatorType?`resource.${t.initiatorType}`:"resource.other",origin:"auto.resource.browser.metrics",startTimestamp:a,data:o})}(e,t,i,s,a,n);break}}})),C=Math.max(s.length-1,0),function(e){const t=l.navigator;if(!t)return;const n=t.connection;n&&(n.effectiveType&&e.setTag("effectiveConnectionType",n.effectiveType),n.type&&e.setTag("connectionType",n.type),E(n.rtt)&&(x["connection.rtt"]={value:n.rtt,unit:"millisecond"})),E(t.deviceMemory)&&e.setTag("deviceMemory",`${t.deviceMemory} GB`),E(t.hardwareConcurrency)&&e.setTag("hardwareConcurrency",String(t.hardwareConcurrency))}(e),"pageload"===e.op){"number"==typeof i&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.kg.log("[Measurements] Adding TTFB"),x.ttfb={value:1e3*(i-e.startTimestamp),unit:"millisecond"},"number"==typeof r&&r<=i&&(x["ttfb.requestTime"]={value:1e3*(i-r),unit:"millisecond"})),["fcp","fp","lcp"].forEach((t=>{if(!x[t]||n>=e.startTimestamp)return;const s=x[t].value,i=n+S(s),r=Math.abs(1e3*(i-e.startTimestamp)),a=r-s;("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.kg.log(`[Measurements] Normalized ${t} from ${s} to ${r} (${a})`),x[t].value=r}));const t=x["mark.fid"];t&&x.fid&&(v(e,{description:"first input delay",endTimestamp:t.value+S(x.fid.value),op:"ui.action",origin:"auto.ui.browser.metrics",startTimestamp:t.value}),delete x["mark.fid"]),"fcp"in x||delete x.cls,Object.keys(x).forEach((t=>{e.setMeasurement(t,x[t].value,x[t].unit)})),function(e){I&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.kg.log("[Measurements] Adding LCP Data"),I.element&&e.setTag("lcp.element",(0,c.Rt)(I.element)),I.id&&e.setTag("lcp.id",I.id),I.url&&e.setTag("lcp.url",I.url.trim().slice(0,200)),e.setTag("lcp.size",I.size)),w&&w.sources&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.kg.log("[Measurements] Adding CLS Data"),w.sources.forEach(((t,n)=>e.setTag(`cls.source.${n+1}`,(0,c.Rt)(t.node)))))}(e)}I=void 0,w=void 0,x={}}(e)})),P}_registerInteractionListener(){let e;const t=()=>{const{idleTimeout:t,finalTimeout:n,heartbeatInterval:s}=this.options,a="ui.action.click",c=(0,r.x1)();if(c&&c.op&&["navigation","pageload"].includes(c.op))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.kg.warn(`[Tracing] Did not create ${a} transaction because a pageload or navigation transaction is in progress.`));if(e&&(e.setFinishReason("interactionInterrupted"),e.finish(),e=void 0),!this._getCurrentHub)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.kg.warn(`[Tracing] Did not create ${a} transaction because _getCurrentHub is invalid.`));if(!this._latestRouteName)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.kg.warn(`[Tracing] Did not create ${a} transaction because _latestRouteName is missing.`));const u=this._getCurrentHub(),{location:d}=l,p={name:this._latestRouteName,op:a,trimEnd:!0,metadata:{source:this._latestRouteSource||"url"}};e=(0,i.l)(u,p,t,n,!0,{location:d},s)};["click"].forEach((e=>{addEventListener(e,t,{once:!1,capture:!0})}))}},re=W.r,oe=r.x1,ae=a.qG,ce=K.Zd,le=J.Y,ue=K.Dr,de=V,pe=$,he=R.z,fe=z.rt,_e=a.Ke,ge=s.io,me=G,ye=i.l,be=H,Ee={BrowserTracing:ie,Apollo:Z._,Express:Q.N,GraphQL:X.k,Mongo:ee._,Mysql:te.m,Postgres:ne.E,Prisma:se.g};("undefined"==typeof __SENTRY_TRACING__||__SENTRY_TRACING__)&&(0,W.r)()},9181:(e,t,n)=>{"use strict";n.d(t,{EN:()=>l,IQ:()=>u,bU:()=>r});var s=n(7597),i=n(2343);const r="baggage",o="sentry-",a=/^sentry-/,c=8192;function l(e){if(!(0,s.HD)(e)&&!Array.isArray(e))return;let t={};if(Array.isArray(e))t=e.reduce(((e,t)=>({...e,...d(t)})),{});else{if(!e)return;t=d(e)}const n=Object.entries(t).reduce(((e,[t,n])=>(t.match(a)&&(e[t.slice(o.length)]=n),e)),{});return Object.keys(n).length>0?n:void 0}function u(e){if(e)return function(e){if(0!==Object.keys(e).length)return Object.entries(e).reduce(((e,[t,n],s)=>{const r=`${encodeURIComponent(t)}=${encodeURIComponent(n)}`,o=0===s?r:`${e},${r}`;return o.length>c?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.kg.warn(`Not adding key: ${t} with val: ${n} to baggage header due to exceeding baggage size limits.`),e):o}),"")}(Object.entries(e).reduce(((e,[t,n])=>(n&&(e[`${o}${t}`]=n),e)),{}))}function d(e){return e.split(",").map((e=>e.split("=").map((e=>decodeURIComponent(e.trim()))))).reduce(((e,[t,n])=>(e[t]=n,e)),{})}},8464:(e,t,n)=>{"use strict";n.d(t,{Rt:()=>o,qT:()=>c});var s=n(7597);const i=(0,n(1235).Rf)(),r=80;function o(e,t={}){try{let n=e;const s=5,i=[];let o=0,c=0;const l=" > ",u=l.length;let d;const p=Array.isArray(t)?t:t.keyAttrs,h=!Array.isArray(t)&&t.maxStringLength||r;for(;n&&o++<s&&(d=a(n,p),!("html"===d||o>1&&c+i.length*u+d.length>=h));)i.push(d),c+=d.length,n=n.parentNode;return i.reverse().join(l)}catch(e){return"<unknown>"}}function a(e,t){const n=e,i=[];let r,o,a,c,l;if(!n||!n.tagName)return"";i.push(n.tagName.toLowerCase());const u=t&&t.length?t.filter((e=>n.getAttribute(e))).map((e=>[e,n.getAttribute(e)])):null;if(u&&u.length)u.forEach((e=>{i.push(`[${e[0]}="${e[1]}"]`)}));else if(n.id&&i.push(`#${n.id}`),r=n.className,r&&(0,s.HD)(r))for(o=r.split(/\s+/),l=0;l<o.length;l++)i.push(`.${o[l]}`);const d=["aria-label","type","name","title","alt"];for(l=0;l<d.length;l++)a=d[l],c=n.getAttribute(a),c&&i.push(`[${a}="${c}"]`);return i.join("")}function c(e){return i.document&&i.document.querySelector?i.document.querySelector(e):null}},4307:(e,t,n)=>{"use strict";function s(e){let t,n=e[0],s=1;for(;s<e.length;){const i=e[s],r=e[s+1];if(s+=2,("optionalAccess"===i||"optionalCall"===i)&&null==n)return;"access"===i||"optionalAccess"===i?(t=n,n=r(n)):"call"!==i&&"optionalCall"!==i||(n=r(((...e)=>n.call(t,...e))),t=void 0)}return n}n.d(t,{x:()=>s})},1688:(e,t,n)=>{"use strict";n.d(t,{xU:()=>p,oq:()=>g});var s=n(7597),i=n(2343),r=n(535),o=n(6147),a=n(1235);const c=(0,a.Rf)();function l(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}const u=(0,a.Rf)(),d=(0,a.Rf)(),p="__sentry_xhr_v2__",h={},f={};function _(e){if(!f[e])switch(f[e]=!0,e){case"console":"console"in a.n2&&i.RU.forEach((function(e){e in a.n2.console&&(0,r.hl)(a.n2.console,e,(function(t){return y[e]=t,function(...t){m("console",{args:t,level:e});const n=y[e];n&&n.apply(a.n2.console,t)}}))}));break;case"dom":!function(){if(!("document"in d))return;const e=m.bind(null,"dom"),t=w(e,!0);d.document.addEventListener("click",t,!1),d.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((t=>{const n=d[t]&&d[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&((0,r.hl)(n,"addEventListener",(function(t){return function(n,s,i){if("click"===n||"keypress"==n)try{const s=this,r=s.__sentry_instrumentation_handlers__=s.__sentry_instrumentation_handlers__||{},o=r[n]=r[n]||{refCount:0};if(!o.handler){const s=w(e);o.handler=s,t.call(this,n,s,i)}o.refCount++}catch(e){}return t.call(this,n,s,i)}})),(0,r.hl)(n,"removeEventListener",(function(e){return function(t,n,s){if("click"===t||"keypress"==t)try{const n=this,i=n.__sentry_instrumentation_handlers__||{},r=i[t];r&&(r.refCount--,r.refCount<=0&&(e.call(this,t,r.handler,s),r.handler=void 0,delete i[t]),0===Object.keys(i).length&&delete n.__sentry_instrumentation_handlers__)}catch(e){}return e.call(this,t,n,s)}})))}))}();break;case"xhr":!function(){if(!("XMLHttpRequest"in d))return;const e=XMLHttpRequest.prototype;(0,r.hl)(e,"open",(function(e){return function(...t){const n=t[1],i=this[p]={method:(0,s.HD)(t[0])?t[0].toUpperCase():t[0],url:t[1],request_headers:{}};(0,s.HD)(n)&&"POST"===i.method&&n.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const o=()=>{const e=this[p];if(e&&4===this.readyState){try{e.status_code=this.status}catch(e){}m("xhr",{args:t,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:this})}};return"onreadystatechange"in this&&"function"==typeof this.onreadystatechange?(0,r.hl)(this,"onreadystatechange",(function(e){return function(...t){return o(),e.apply(this,t)}})):this.addEventListener("readystatechange",o),(0,r.hl)(this,"setRequestHeader",(function(e){return function(...t){const[n,s]=t,i=this[p];return i&&(i.request_headers[n.toLowerCase()]=s),e.apply(this,t)}})),e.apply(this,t)}})),(0,r.hl)(e,"send",(function(e){return function(...t){const n=this[p];return n&&void 0!==t[0]&&(n.body=t[0]),m("xhr",{args:t,startTimestamp:Date.now(),xhr:this}),e.apply(this,t)}}))}();break;case"fetch":(function(){if(!function(){if(!("fetch"in c))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}())return!1;if(l(c.fetch))return!0;let e=!1;const t=c.document;if(t&&"function"==typeof t.createElement)try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=l(n.contentWindow.fetch)),t.head.removeChild(n)}catch(e){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.kg.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return e})()&&(0,r.hl)(a.n2,"fetch",(function(e){return function(...t){const{method:n,url:s}=function(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){const[t,n]=e;return{url:E(t),method:b(n,"method")?String(n.method).toUpperCase():"GET"}}const t=e[0];return{url:E(t),method:b(t,"method")?String(t.method).toUpperCase():"GET"}}(t),i={args:t,fetchData:{method:n,url:s},startTimestamp:Date.now()};return m("fetch",{...i}),e.apply(a.n2,t).then((e=>(m("fetch",{...i,endTimestamp:Date.now(),response:e}),e)),(e=>{throw m("fetch",{...i,endTimestamp:Date.now(),error:e}),e}))}}));break;case"history":!function(){if(!function(){const e=u.chrome,t=e&&e.app&&e.app.runtime,n="history"in u&&!!u.history.pushState&&!!u.history.replaceState;return!t&&n}())return;const e=d.onpopstate;function t(e){return function(...t){const n=t.length>2?t[2]:void 0;if(n){const e=v,t=String(n);v=t,m("history",{from:e,to:t})}return e.apply(this,t)}}d.onpopstate=function(...t){const n=d.location.href,s=v;if(v=n,m("history",{from:s,to:n}),e)try{return e.apply(this,t)}catch(e){}},(0,r.hl)(d.history,"pushState",t),(0,r.hl)(d.history,"replaceState",t)}();break;case"error":C=d.onerror,d.onerror=function(e,t,n,s,i){return m("error",{column:s,error:i,line:n,msg:e,url:t}),!(!C||C.__SENTRY_LOADER__)&&C.apply(this,arguments)},d.onerror.__SENTRY_INSTRUMENTED__=!0;break;case"unhandledrejection":x=d.onunhandledrejection,d.onunhandledrejection=function(e){return m("unhandledrejection",e),!(x&&!x.__SENTRY_LOADER__)||x.apply(this,arguments)},d.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0;break;default:return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.kg.warn("unknown instrumentation type:",e))}}function g(e,t){h[e]=h[e]||[],h[e].push(t),_(e)}function m(e,t){if(e&&h[e])for(const n of h[e]||[])try{n(t)}catch(t){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.kg.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${(0,o.$P)(n)}\nError:`,t)}}const y={};function b(e,t){return!!e&&"object"==typeof e&&!!e[t]}function E(e){return"string"==typeof e?e:e?b(e,"url")?e.url:e.toString?e.toString():"":""}let v;const S=1e3;let k,I;function w(e,t=!1){return n=>{if(!n||I===n)return;if(function(e){if("keypress"!==e.type)return!1;try{const t=e.target;if(!t||!t.tagName)return!0;if("INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable)return!1}catch(e){}return!0}(n))return;const s="keypress"===n.type?"input":n.type;(void 0===k||function(e,t){if(!e)return!0;if(e.type!==t.type)return!0;try{if(e.target!==t.target)return!0}catch(e){}return!1}(I,n))&&(e({event:n,name:s,global:t}),I=n),clearTimeout(k),k=d.setTimeout((()=>{k=void 0}),S)}}let C=null,x=null},7597:(e,t,n)=>{"use strict";n.d(t,{Cy:()=>h,HD:()=>o,J8:()=>p,Kj:()=>d,PO:()=>c,V9:()=>_,VZ:()=>i,cO:()=>l,i2:()=>f,kK:()=>u,pt:()=>a});const s=Object.prototype.toString;function i(e){switch(s.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return _(e,Error)}}function r(e,t){return s.call(e)===`[object ${t}]`}function o(e){return r(e,"String")}function a(e){return null===e||"object"!=typeof e&&"function"!=typeof e}function c(e){return r(e,"Object")}function l(e){return"undefined"!=typeof Event&&_(e,Event)}function u(e){return"undefined"!=typeof Element&&_(e,Element)}function d(e){return r(e,"RegExp")}function p(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function h(e){return c(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function f(e){return"number"==typeof e&&e!=e}function _(e,t){try{return e instanceof t}catch(e){return!1}}},2343:(e,t,n)=>{"use strict";n.d(t,{Cf:()=>r,RU:()=>i,kg:()=>a});var s=n(1235);const i=["debug","info","warn","error","log","assert","trace"];function r(e){if(!("console"in s.n2))return e();const t=s.n2.console,n={};i.forEach((e=>{const s=t[e]&&t[e].__sentry_original__;e in t&&s&&(n[e]=t[e],t[e]=s)}));try{return e()}finally{Object.keys(n).forEach((e=>{t[e]=n[e]}))}}function o(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1}};return"undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__?i.forEach((n=>{t[n]=(...t)=>{e&&r((()=>{s.n2.console[n](`Sentry Logger [${n}]:`,...t)}))}})):i.forEach((e=>{t[e]=()=>{}})),t}let a;a="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__?(0,s.YO)("logger",o):o()},2844:(e,t,n)=>{"use strict";n.d(t,{DM:()=>o,Db:()=>l,EG:()=>u,J4:()=>p,YO:()=>f,go:()=>h,jH:()=>c,lE:()=>_});var s=n(535),i=n(7321),r=n(1235);function o(){const e=r.n2,t=e.crypto||e.msCrypto;if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");const n=t&&t.getRandomValues?()=>t.getRandomValues(new Uint8Array(1))[0]:()=>16*Math.random();return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(e=>(e^(15&n())>>e/4).toString(16)))}function a(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function c(e){const{message:t,event_id:n}=e;if(t)return t;const s=a(e);return s?s.type&&s.value?`${s.type}: ${s.value}`:s.type||s.value||n||"<unknown>":n||"<unknown>"}function l(e,t,n){const s=e.exception=e.exception||{},i=s.values=s.values||[],r=i[0]=i[0]||{};r.value||(r.value=t||""),r.type||(r.type=n||"Error")}function u(e,t){const n=a(e);if(!n)return;const s=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...s,...t},t&&"data"in t){const e={...s&&s.data,...t.data};n.mechanism.data=e}}const d=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/;function p(e){const t=e.match(d)||[],n=parseInt(t[1],10),s=parseInt(t[2],10),i=parseInt(t[3],10);return{buildmetadata:t[5],major:isNaN(n)?void 0:n,minor:isNaN(s)?void 0:s,patch:isNaN(i)?void 0:i,prerelease:t[4]}}function h(e,t,n=5){if(void 0===t.lineno)return;const s=e.length,r=Math.max(Math.min(s-1,t.lineno-1),0);t.pre_context=e.slice(Math.max(0,r-n),r).map((e=>(0,i.JM)(e,0))),t.context_line=(0,i.JM)(e[Math.min(s-1,r)],t.colno||0),t.post_context=e.slice(Math.min(r+1,s),r+1+n).map((e=>(0,i.JM)(e,0)))}function f(e){if(e&&e.__sentry_captured__)return!0;try{(0,s.xp)(e,"__sentry_captured__",!0)}catch(e){}return!1}function _(e){return Array.isArray(e)?e:[e]}},2176:(e,t,n)=>{"use strict";function s(){return!("undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&__SENTRY_BROWSER_BUNDLE__)&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}function i(e,t){return e.require(t)}function r(t){let n;try{n=i(e,t)}catch(e){}try{const{cwd:s}=i(e,"process");n=i(e,`${s()}/node_modules/${t}`)}catch(e){}return n}n.d(t,{l$:()=>i,KV:()=>s,$y:()=>r}),e=n.hmd(e)},535:(e,t,n)=>{"use strict";n.d(t,{HK:()=>c,Jr:()=>f,Sh:()=>u,_j:()=>l,hl:()=>o,xp:()=>a,zf:()=>h});var s=n(8464),i=n(7597),r=n(7321);function o(e,t,n){if(!(t in e))return;const s=e[t],i=n(s);if("function"==typeof i)try{!function(e,t){const n=t.prototype||{};e.prototype=t.prototype=n,a(e,"__sentry_original__",t)}(i,s)}catch(e){}e[t]=i}function a(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}function c(e){return e.__sentry_original__}function l(e){return Object.keys(e).map((t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`)).join("&")}function u(e){if((0,i.VZ)(e))return{message:e.message,name:e.name,stack:e.stack,...p(e)};if((0,i.cO)(e)){const t={type:e.type,target:d(e.target),currentTarget:d(e.currentTarget),...p(e)};return"undefined"!=typeof CustomEvent&&(0,i.V9)(e,CustomEvent)&&(t.detail=e.detail),t}return e}function d(e){try{return(0,i.kK)(e)?(0,s.Rt)(e):Object.prototype.toString.call(e)}catch(e){return"<unknown>"}}function p(e){if("object"==typeof e&&null!==e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}return{}}function h(e,t=40){const n=Object.keys(u(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return(0,r.$G)(n[0],t);for(let e=n.length;e>0;e--){const s=n.slice(0,e).join(", ");if(!(s.length>t))return e===n.length?s:(0,r.$G)(s,t)}return""}function f(e){return _(e,new Map)}function _(e,t){if((0,i.PO)(e)){const n=t.get(e);if(void 0!==n)return n;const s={};t.set(e,s);for(const n of Object.keys(e))void 0!==e[n]&&(s[n]=_(e[n],t));return s}if(Array.isArray(e)){const n=t.get(e);if(void 0!==n)return n;const s=[];return t.set(e,s),e.forEach((e=>{s.push(_(e,t))})),s}return e}},442:(e,t,n)=>{"use strict";n.d(t,{dB:()=>i,oA:()=>r});var s=n(6956);function i(e,t,n){e&&(e.metadata.source&&"url"!==e.metadata.source||e.setName(...r(t,{path:!0,method:!0})),e.setData("url",t.originalUrl||t.url),t.baseUrl&&e.setData("baseUrl",t.baseUrl),e.setData("query",function(e,t){let n=e.originalUrl||e.url||"";if(n)return n.startsWith("/")&&(n=`http://dogs.are.great${n}`),e.query||void 0!==typeof URL&&new URL(n).search.replace("?","")||t&&t.url&&t.url.parse(n).query||void 0}(t,n)))}function r(e,t={}){const n=e.method&&e.method.toUpperCase();let i="",r="url";t.customRoute||e.route?(i=t.customRoute||`${e.baseUrl||""}${e.route&&e.route.path}`,r="route"):(e.originalUrl||e.url)&&(i=(0,s.rt)(e.originalUrl||e.url||""));let o="";return t.method&&n&&(o+=n),t.method&&t.path&&(o+=" "),t.path&&i&&(o+=i),[o,r]}},6147:(e,t,n)=>{"use strict";function s(e){const t=/^\s*[-]{4,}$/,n=/at (?:async )?(?:(.+?)\s+\()?(?:(.+):(\d+):(\d+)?|([^)]+))\)?/;return s=>{const i=s.match(n);if(i){let t,n,s,r,o;if(i[1]){s=i[1];let e=s.lastIndexOf(".");if("."===s[e-1]&&e--,e>0){t=s.slice(0,e),n=s.slice(e+1);const i=t.indexOf(".Module");i>0&&(s=s.slice(i+1),t=t.slice(0,i))}r=void 0}n&&(r=t,o=n),"<anonymous>"===n&&(o=void 0,s=void 0),void 0===s&&(o=o||"<anonymous>",s=r?`${r}.${o}`:o);let a=i[2]&&i[2].startsWith("file://")?i[2].slice(7):i[2];const c="native"===i[5];a||!i[5]||c||(a=i[5]);const l=!(c||a&&!a.startsWith("/")&&!a.includes(":\\")&&!a.startsWith(".")&&!a.match(/^[a-zA-Z]([a-zA-Z0-9.\-+])*:\/\//)||void 0===a||a.includes("node_modules/"));return{filename:a,module:e?e(a):void 0,function:s,lineno:parseInt(i[3],10)||void 0,colno:parseInt(i[4],10)||void 0,in_app:l}}if(s.match(t))return{filename:s}}}n.d(t,{pE:()=>a,$P:()=>u,Ep:()=>d,Sq:()=>c});const i=50,r=/\(error: (.*)\)/,o=/captureMessage|captureException/;function a(...e){const t=e.sort(((e,t)=>e[0]-t[0])).map((e=>e[1]));return(e,n=0)=>{const s=[],a=e.split("\n");for(let e=n;e<a.length;e++){const n=a[e];if(n.length>1024)continue;const o=r.test(n)?n.replace(r,"$1"):n;if(!o.match(/\S*Error: /)){for(const e of t){const t=e(o);if(t){s.push(t);break}}if(s.length>=i)break}}return function(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(t[t.length-1].function||"")&&t.pop(),t.reverse(),o.test(t[t.length-1].function||"")&&(t.pop(),o.test(t[t.length-1].function||"")&&t.pop()),t.slice(0,i).map((e=>({...e,filename:e.filename||t[t.length-1].filename,function:e.function||"?"})))}(s)}}function c(e){return Array.isArray(e)?a(...e):e}const l="<anonymous>";function u(e){try{return e&&"function"==typeof e&&e.name||l}catch(e){return l}}function d(e){return[90,s(e)]}},7321:(e,t,n)=>{"use strict";n.d(t,{$G:()=>i,JM:()=>r,U0:()=>o});var s=n(7597);function i(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}function r(e,t){let n=e;const s=n.length;if(s<=150)return n;t>s&&(t=s);let i=Math.max(t-60,0);i<5&&(i=0);let r=Math.min(i+140,s);return r>s-5&&(r=s),r===s&&(i=Math.max(r-140,0)),n=n.slice(i,r),i>0&&(n=`'{snip} ${n}`),r<s&&(n+=" {snip}"),n}function o(e,t=[],n=!1){return t.some((t=>function(e,t,n=!1){return!!(0,s.HD)(e)&&((0,s.Kj)(t)?t.test(e):!!(0,s.HD)(t)&&(n?e===t:e.includes(t)))}(e,t,n)))}},6893:(e,t,n)=>{"use strict";n.d(t,{$2:()=>o,WD:()=>r,cW:()=>a});var s,i=n(7597);function r(e){return new a((t=>{t(e)}))}function o(e){return new a(((t,n)=>{n(e)}))}!function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"}(s||(s={}));class a{constructor(e){a.prototype.__init.call(this),a.prototype.__init2.call(this),a.prototype.__init3.call(this),a.prototype.__init4.call(this),this._state=s.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}then(e,t){return new a(((n,s)=>{this._handlers.push([!1,t=>{if(e)try{n(e(t))}catch(e){s(e)}else n(t)},e=>{if(t)try{n(t(e))}catch(e){s(e)}else s(e)}]),this._executeHandlers()}))}catch(e){return this.then((e=>e),e)}finally(e){return new a(((t,n)=>{let s,i;return this.then((t=>{i=!1,s=t,e&&e()}),(t=>{i=!0,s=t,e&&e()})).then((()=>{i?n(s):t(s)}))}))}__init(){this._resolve=e=>{this._setResult(s.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(s.REJECTED,e)}}__init3(){this._setResult=(e,t)=>{this._state===s.PENDING&&((0,i.J8)(t)?t.then(this._resolve,this._reject):(this._state=e,this._value=t,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===s.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach((e=>{e[0]||(this._state===s.RESOLVED&&e[1](this._value),this._state===s.REJECTED&&e[2](this._value),e[0]=!0)}))}}}},1170:(e,t,n)=>{"use strict";n.d(t,{Z1:()=>p,ph:()=>u,yW:()=>l});var s=n(2176),i=n(1235);e=n.hmd(e);const r=(0,i.Rf)(),o={nowSeconds:()=>Date.now()/1e3},a=(0,s.KV)()?function(){try{return(0,s.l$)(e,"perf_hooks").performance}catch(e){return}}():function(){const{performance:e}=r;if(e&&e.now)return{now:()=>e.now(),timeOrigin:Date.now()-e.now()}}(),c=void 0===a?o:{nowSeconds:()=>(a.timeOrigin+a.now())/1e3},l=o.nowSeconds.bind(o),u=c.nowSeconds.bind(c);let d;const p=(()=>{const{performance:e}=r;if(!e||!e.now)return void(d="none");const t=36e5,n=e.now(),s=Date.now(),i=e.timeOrigin?Math.abs(e.timeOrigin+n-s):t,o=i<t,a=e.timing&&e.timing.navigationStart,c="number"==typeof a?Math.abs(a+n-s):t;return o||c<t?i<=c?(d="timeOrigin",e.timeOrigin):(d="navigationStart",a):(d="dateNow",s)})()},7638:(e,t,n)=>{"use strict";n.d(t,{$p:()=>c,KA:()=>a,Ke:()=>r,qG:()=>o});var s=n(9181),i=n(2844);const r=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function o(e){if(!e)return;const t=e.match(r);if(!t)return;let n;return"1"===t[3]?n=!0:"0"===t[3]&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}function a(e,t){const n=o(e),r=(0,s.EN)(t),{traceId:a,parentSpanId:c,parentSampled:l}=n||{},u={traceId:a||(0,i.DM)(),spanId:(0,i.DM)().substring(16),sampled:l};return c&&(u.parentSpanId=c),r&&(u.dsc=r),{traceparentData:n,dynamicSamplingContext:r,propagationContext:u}}function c(e=(0,i.DM)(),t=(0,i.DM)().substring(16),n){let s="";return void 0!==n&&(s=n?"-1":"-0"),`${e}-${t}${s}`}},6956:(e,t,n)=>{"use strict";function s(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",s=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:s,relative:t[5]+n+s}}function i(e){return e.split(/[\?#]/,1)[0]}function r(e){return e.split(/\\?\//).filter((e=>e.length>0&&","!==e)).length}function o(e){const{protocol:t,host:n,path:s}=e;return`${t?`${t}://`:""}${n&&n.replace(/^.*@/,"[filtered]:[filtered]@").replace(":80","").replace(":443","")||""}${s}`}n.d(t,{$A:()=>r,en:()=>s,rt:()=>i,tF:()=>o})},1235:(e,t,n)=>{"use strict";function s(e){return e&&e.Math==Math?e:void 0}n.d(t,{Rf:()=>r,YO:()=>o,n2:()=>i});const i="object"==typeof globalThis&&s(globalThis)||"object"==typeof window&&s(window)||"object"==typeof self&&s(self)||"object"==typeof global&&s(global)||function(){return this}()||{};function r(){return i}function o(e,t,n){const s=n||i,r=s.__SENTRY__=s.__SENTRY__||{};return r[e]||(r[e]=t())}},8054:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};const i=n(2361),r=s(n(5158)),o=s(n(6304)),a=r.default("agent-base");function c(){const{stack:e}=new Error;return"string"==typeof e&&e.split("\n").some((e=>-1!==e.indexOf("(https.js:")||-1!==e.indexOf("node:https:")))}function l(e,t){return new l.Agent(e,t)}!function(e){class t extends i.EventEmitter{constructor(e,t){super();let n=t;"function"==typeof e?this.callback=e:e&&(n=e),this.timeout=null,n&&"number"==typeof n.timeout&&(this.timeout=n.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return"number"==typeof this.explicitDefaultPort?this.explicitDefaultPort:c()?443:80}set defaultPort(e){this.explicitDefaultPort=e}get protocol(){return"string"==typeof this.explicitProtocol?this.explicitProtocol:c()?"https:":"http:"}set protocol(e){this.explicitProtocol=e}callback(e,t,n){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(e,t){const n=Object.assign({},t);"boolean"!=typeof n.secureEndpoint&&(n.secureEndpoint=c()),null==n.host&&(n.host="localhost"),null==n.port&&(n.port=n.secureEndpoint?443:80),null==n.protocol&&(n.protocol=n.secureEndpoint?"https:":"http:"),n.host&&n.path&&delete n.path,delete n.agent,delete n.hostname,delete n._defaultAgent,delete n.defaultPort,delete n.createConnection,e._last=!0,e.shouldKeepAlive=!1;let s=!1,i=null;const r=n.timeout||this.timeout,l=t=>{e._hadError||(e.emit("error",t),e._hadError=!0)},u=()=>{i=null,s=!0;const e=new Error(`A "socket" was not created for HTTP request before ${r}ms`);e.code="ETIMEOUT",l(e)},d=e=>{s||(null!==i&&(clearTimeout(i),i=null),l(e))},p=t=>{if(s)return;if(null!=i&&(clearTimeout(i),i=null),r=t,Boolean(r)&&"function"==typeof r.addRequest)return a("Callback returned another Agent instance %o",t.constructor.name),void t.addRequest(e,n);var r;if(t)return t.once("free",(()=>{this.freeSocket(t,n)})),void e.onSocket(t);const o=new Error(`no Duplex stream was returned to agent-base for \`${e.method} ${e.path}\``);l(o)};if("function"==typeof this.callback){this.promisifiedCallback||(this.callback.length>=3?(a("Converting legacy callback function to promise"),this.promisifiedCallback=o.default(this.callback)):this.promisifiedCallback=this.callback),"number"==typeof r&&r>0&&(i=setTimeout(u,r)),"port"in n&&"number"!=typeof n.port&&(n.port=Number(n.port));try{a("Resolving socket for %o request: %o",n.protocol,`${e.method} ${e.path}`),Promise.resolve(this.promisifiedCallback(e,n)).then(p,d)}catch(e){Promise.reject(e).catch(d)}}else l(new Error("`callback` is not defined"))}freeSocket(e,t){a("Freeing socket %o %o",e.constructor.name,t),e.destroy()}destroy(){a("Destroying agent %o",this.constructor.name)}}e.Agent=t,e.prototype=e.Agent.prototype}(l||(l={})),e.exports=l},6304:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t,n){return new Promise(((s,i)=>{e.call(this,t,n,((e,t)=>{e?i(e):s(t)}))}))}}},6489:(e,t)=>{"use strict";t.Q=function(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var i={},r=t||{},o=e.split(";"),a=r.decode||n,c=0;c<o.length;c++){var l=o[c],u=l.indexOf("=");if(!(u<0)){var d=l.substring(0,u).trim();if(null==i[d]){var p=l.substring(u+1,l.length).trim();'"'===p[0]&&(p=p.slice(1,-1)),i[d]=s(p,a)}}}return i};var n=decodeURIComponent;encodeURIComponent;function s(e,t){try{return t(e)}catch(t){return e}}},1227:(e,t,n)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let s=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(s++,"%c"===e&&(i=s))})),t.splice(i,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=n(2447)(t);const{formatters:s}=e.exports;s.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},2447:(e,t,n)=>{e.exports=function(e){function t(e){let n,i,r,o=null;function a(...e){if(!a.enabled)return;const s=a,i=Number(new Date),r=i-(n||i);s.diff=r,s.prev=n,s.curr=i,n=i,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let o=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((n,i)=>{if("%%"===n)return"%";o++;const r=t.formatters[i];if("function"==typeof r){const t=e[o];n=r.call(s,t),e.splice(o,1),o--}return n})),t.formatArgs.call(s,e),(s.log||t.log).apply(s,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=s,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(i!==t.namespaces&&(i=t.namespaces,r=t.enabled(e)),r),set:e=>{o=e}}),"function"==typeof t.init&&t.init(a),a}function s(e,n){const s=t(this.namespace+(void 0===n?":":n)+e);return s.log=this.log,s}function i(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(i),...t.skips.map(i).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const s=("string"==typeof e?e:"").split(/[\s,]+/),i=s.length;for(n=0;n<i;n++)s[n]&&("-"===(e=s[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,s;for(n=0,s=t.skips.length;n<s;n++)if(t.skips[n].test(e))return!1;for(n=0,s=t.names.length;n<s;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(7824),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((n=>{t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},5158:(e,t,n)=>{"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=n(1227):e.exports=n(39)},39:(e,t,n)=>{const s=n(6224),i=n(3837);t.init=function(e){e.inspectOpts={};const n=Object.keys(t.inspectOpts);for(let s=0;s<n.length;s++)e.inspectOpts[n[s]]=t.inspectOpts[n[s]]},t.log=function(...e){return process.stderr.write(i.format(...e)+"\n")},t.formatArgs=function(n){const{namespace:s,useColors:i}=this;if(i){const t=this.color,i="[3"+(t<8?t:"8;5;"+t),r=`  ${i};1m${s} [0m`;n[0]=r+n[0].split("\n").join("\n"+r),n.push(i+"m+"+e.exports.humanize(this.diff)+"[0m")}else n[0]=(t.inspectOpts.hideDate?"":(new Date).toISOString()+" ")+s+" "+n[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):s.isatty(process.stderr.fd)},t.destroy=i.deprecate((()=>{}),"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{const e=n(2130);e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter((e=>/^debug_/i.test(e))).reduce(((e,t)=>{const n=t.substring(6).toLowerCase().replace(/_([a-z])/g,((e,t)=>t.toUpperCase()));let s=process.env[t];return s=!!/^(yes|on|true|enabled)$/i.test(s)||!/^(no|off|false|disabled)$/i.test(s)&&("null"===s?null:Number(s)),e[n]=s,e}),{}),e.exports=n(2447)(t);const{formatters:r}=e.exports;r.o=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts).split("\n").map((e=>e.trim())).join(" ")},r.O=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts)}},2559:e=>{!function(){"use strict";var t=[,function(e,t){function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.lengthOf=t.keysOf=t.isObject=t.isInfOrNaN=t.isFunction=t.isArguments=t.hasOwn=t.handleError=t.convertMapToObject=t.checkError=void 0,t.isFunction=function(e){return"function"==typeof e},t.isObject=function(e){return"object"===s(e)},t.keysOf=function(e){return Object.keys(e)},t.lengthOf=function(e){return Object.keys(e).length};var i=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};t.hasOwn=i,t.convertMapToObject=function(e){return Array.from(e).reduce((function(e,t){var s,i,r=(i=2,function(e){if(Array.isArray(e))return e}(s=t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var s,i,r=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(s=n.next()).done)&&(r.push(s.value),!t||r.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return r}}(s,i)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?n(e,t):void 0}}(s,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],a=r[1];return e[o]=a,e}),{})},t.isArguments=function(e){return null!=e&&i(e,"callee")},t.isInfOrNaN=function(e){return Number.isNaN(e)||e===1/0||e===-1/0};var r={maxStack:function(e){return new RegExp("Maximum call stack size exceeded","g").test(e)}};t.checkError=r,t.handleError=function(e){return function(){try{return e.apply(this,arguments)}catch(e){if(r.maxStack(e.message))throw new Error("Converting circular structure to JSON");throw e}}}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Base64=void 0;for(var n=Object.create(null),s=function(e){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e)},i=0;i<64;i++)n[s(i)]=i;var r=function(e){if("undefined"==typeof Uint8Array||"undefined"==typeof ArrayBuffer){for(var t=[],n=0;n<e;n++)t.push(0);return t.$Uint8ArrayPolyfill=!0,t}return new Uint8Array(new ArrayBuffer(e))},o={encode:function(e){if("string"==typeof e){var t=e;e=r(t.length);for(var n=0;n<t.length;n++){var i=t.charCodeAt(n);if(i>255)throw new Error("Not ascii. Base64.encode can only take ascii strings.");e[n]=i}}for(var o=[],a=null,c=null,l=null,u=null,d=0;d<e.length;d++)switch(d%3){case 0:a=e[d]>>2&63,c=(3&e[d])<<4;break;case 1:c|=e[d]>>4&15,l=(15&e[d])<<2;break;case 2:l|=e[d]>>6&3,u=63&e[d],o.push(s(a)),o.push(s(c)),o.push(s(l)),o.push(s(u)),a=null,c=null,l=null,u=null}return null!=a&&(o.push(s(a)),o.push(s(c)),null==l?o.push("="):o.push(s(l)),null==u&&o.push("=")),o.join("")},decode:function(e){var t=Math.floor(3*e.length/4);"="==e.charAt(e.length-1)&&(t--,"="==e.charAt(e.length-2)&&t--);for(var s,i=r(t),o=null,a=null,c=null,l=0,u=0;u<e.length;u++){var d="="===(s=e.charAt(u))?-1:n[s];switch(u%4){case 0:if(d<0)throw new Error("invalid base64 string");o=d<<2;break;case 1:if(d<0)throw new Error("invalid base64 string");o|=d>>4,i[l++]=o,a=(15&d)<<4;break;case 2:d>=0&&(a|=d>>2,i[l++]=a,c=(3&d)<<6);break;case 3:d>=0&&(i[l++]=c|d)}}return i},newBinary:r};t.Base64=o},function(e){e.exports={_noYieldsAllowed:function(e){return e()}}},function(e,t){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function s(e){return JSON.stringify(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function e(t,i,r,o,a){var c=i[t];switch(n(c)){case"string":return s(c);case"number":return isFinite(c)?String(c):"null";case"boolean":return String(c);case"object":if(!c)return"null";var l,u=o+r,d=[];if(Array.isArray(c)||{}.hasOwnProperty.call(c,"callee")){for(var p=c.length,h=0;h<p;h+=1)d[h]=e(h,c,r,u,a)||"null";return l=0===d.length?"[]":u?"[\n"+u+d.join(",\n"+u)+"\n"+o+"]":"["+d.join(",")+"]"}var f=Object.keys(c);return a&&(f=f.sort()),f.forEach((function(t){(l=e(t,c,r,u,a))&&d.push(s(t)+(u?": ":":")+l)})),l=0===d.length?"{}":u?"{\n"+u+d.join(",\n"+u)+"\n"+o+"}":"{"+d.join(",")+"}"}};t.default=function(e,t){var n=Object.assign({indent:"",canonical:!1},t);if(!0===n.indent)n.indent="  ";else if("number"==typeof n.indent){for(var s="",r=0;r<n.indent;r++)s+=" ";n.indent=s}return i("",{"":e},n.indent,"",n.canonical)},e.exports=t.default}],n={};function s(e){var i=n[e];if(void 0!==i)return i.exports;var r=n[e]={exports:{}};return t[e](r,r.exports,s),r.exports}var i={};!function(){var e=i,t=s(2).Base64,n=s(3);Object.defineProperty(e,"__esModule",{value:!0}),e.EJSON=void 0;var r=s(1),o={};e.EJSON=o;var a=new Map;o.addType=function(e,t){if(a.has(e))throw new Error("Type ".concat(e," already present"));a.set(e,t)};var c=[{matchJSONValue:function(e){return(0,r.hasOwn)(e,"$date")&&1===(0,r.lengthOf)(e)},matchObject:function(e){return e instanceof Date},toJSONValue:function(e){return{$date:e.getTime()}},fromJSONValue:function(e){return new Date(e.$date)}},{matchJSONValue:function(e){return(0,r.hasOwn)(e,"$regexp")&&(0,r.hasOwn)(e,"$flags")&&2===(0,r.lengthOf)(e)},matchObject:function(e){return e instanceof RegExp},toJSONValue:function(e){return{$regexp:e.source,$flags:e.flags}},fromJSONValue:function(e){return new RegExp(e.$regexp,e.$flags.slice(0,50).replace(/[^gimuy]/g,"").replace(/(.)(?=.*\1)/g,""))}},{matchJSONValue:function(e){return(0,r.hasOwn)(e,"$InfNaN")&&1===(0,r.lengthOf)(e)},matchObject:r.isInfOrNaN,toJSONValue:function(e){return{$InfNaN:Number.isNaN(e)?0:e===1/0?1:-1}},fromJSONValue:function(e){return e.$InfNaN/0}},{matchJSONValue:function(e){return(0,r.hasOwn)(e,"$binary")&&1===(0,r.lengthOf)(e)},matchObject:function(e){return"undefined"!=typeof Uint8Array&&e instanceof Uint8Array||e&&(0,r.hasOwn)(e,"$Uint8ArrayPolyfill")},toJSONValue:function(e){return{$binary:t.encode(e)}},fromJSONValue:function(e){return t.decode(e.$binary)}},{matchJSONValue:function(e){return(0,r.hasOwn)(e,"$escape")&&1===(0,r.lengthOf)(e)},matchObject:function(e){var t=!1;if(e){var n=(0,r.lengthOf)(e);1!==n&&2!==n||(t=c.some((function(t){return t.matchJSONValue(e)})))}return t},toJSONValue:function(e){var t={};return(0,r.keysOf)(e).forEach((function(n){t[n]=o.toJSONValue(e[n])})),{$escape:t}},fromJSONValue:function(e){var t={};return(0,r.keysOf)(e.$escape).forEach((function(n){t[n]=o.fromJSONValue(e.$escape[n])})),t}},{matchJSONValue:function(e){return(0,r.hasOwn)(e,"$type")&&(0,r.hasOwn)(e,"$value")&&2===(0,r.lengthOf)(e)},matchObject:function(e){return o._isCustomType(e)},toJSONValue:function(e){var t=n._noYieldsAllowed((function(){return e.toJSONValue()}));return{$type:e.typeName(),$value:t}},fromJSONValue:function(e){var t=e.$type;if(!a.has(t))throw new Error("Custom EJSON type ".concat(t," is not defined"));var s=a.get(t);return n._noYieldsAllowed((function(){return s(e.$value)}))}}];o._isCustomType=function(e){return e&&(0,r.isFunction)(e.toJSONValue)&&(0,r.isFunction)(e.typeName)&&a.has(e.typeName())},o._getTypes=function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?a:(0,r.convertMapToObject)(a)},o._getConverters=function(){return c};var l=function(e){for(var t=0;t<c.length;t++){var n=c[t];if(n.matchObject(e))return n.toJSONValue(e)}},u=function e(t){if(null===t)return null;var n=l(t);return void 0!==n?n:(0,r.isObject)(t)?((0,r.keysOf)(t).forEach((function(n){var s=t[n];if((0,r.isObject)(s)||void 0===s||(0,r.isInfOrNaN)(s)){var i=l(s);i?t[n]=i:e(s)}})),t):t};o._adjustTypesToJSONValue=u,o.toJSONValue=function(e){var t=l(e);if(void 0!==t)return t;var n=e;return(0,r.isObject)(e)&&(n=o.clone(e),u(n)),n};var d=function(e){if((0,r.isObject)(e)&&null!==e){var t=(0,r.keysOf)(e);if(t.length<=2&&t.every((function(e){return"string"==typeof e&&"$"===e.substr(0,1)})))for(var n=0;n<c.length;n++){var s=c[n];if(s.matchJSONValue(e))return s.fromJSONValue(e)}}return e},p=function e(t){if(null===t)return null;var n=d(t);return n!==t?n:(0,r.isObject)(t)?((0,r.keysOf)(t).forEach((function(n){var s=t[n];if((0,r.isObject)(s)){var i=d(s);if(s!==i)return void(t[n]=i);e(s)}})),t):t};o._adjustTypesFromJSONValue=p,o.fromJSONValue=function(e){var t=d(e);return t===e&&(0,r.isObject)(e)&&(t=o.clone(e),p(t)),t},o.stringify=(0,r.handleError)((function(e,t){var n=o.toJSONValue(e);return t&&(t.canonical||t.indent)?s(4)(n,t):JSON.stringify(n)})),o.parse=function(e){if("string"!=typeof e)throw new Error("EJSON.parse argument should be a string");return o.fromJSONValue(JSON.parse(e))},o.isBinary=function(e){return!!("undefined"!=typeof Uint8Array&&e instanceof Uint8Array||e&&e.$Uint8ArrayPolyfill)},o.equals=function(e,t,n){var s,i=!(!n||!n.keyOrderSensitive);if(e===t)return!0;if(Number.isNaN(e)&&Number.isNaN(t))return!0;if(!e||!t)return!1;if(!(0,r.isObject)(e)||!(0,r.isObject)(t))return!1;if(e instanceof Date&&t instanceof Date)return e.valueOf()===t.valueOf();if(o.isBinary(e)&&o.isBinary(t)){if(e.length!==t.length)return!1;for(s=0;s<e.length;s++)if(e[s]!==t[s])return!1;return!0}if((0,r.isFunction)(e.equals))return e.equals(t,n);if((0,r.isFunction)(t.equals))return t.equals(e,n);var a,c=Array.isArray(e),l=Array.isArray(t);if(c!==l)return!1;if(c&&l){if(e.length!==t.length)return!1;for(s=0;s<e.length;s++)if(!o.equals(e[s],t[s],n))return!1;return!0}switch(o._isCustomType(e)+o._isCustomType(t)){case 1:return!1;case 2:return o.equals(o.toJSONValue(e),o.toJSONValue(t))}var u=(0,r.keysOf)(e),d=(0,r.keysOf)(t);return i?(s=0,a=u.every((function(i){return!(s>=d.length||i!==d[s]||!o.equals(e[i],t[d[s]],n)||(s++,0))}))):(s=0,a=u.every((function(i){return!!(0,r.hasOwn)(t,i)&&!!o.equals(e[i],t[i],n)&&(s++,!0)}))),a&&s===d.length},o.clone=function(e){var t;if(!(0,r.isObject)(e))return e;if(null===e)return null;if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return e;if(o.isBinary(e)){t=o.newBinary(e.length);for(var n=0;n<e.length;n++)t[n]=e[n];return t}return Array.isArray(e)?e.map(o.clone):(0,r.isArguments)(e)?Array.from(e).map(o.clone):(0,r.isFunction)(e.clone)?e.clone():o._isCustomType(e)?o.fromJSONValue(o.clone(o.toJSONValue(e)),!0):(t={},(0,r.keysOf)(e).forEach((function(n){t[n]=o.clone(e[n])})),t)},o.newBinary=t.newBinary}(),e.exports=i.EJSON}()},6729:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function s(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function r(e,t,s,r,o){if("function"!=typeof s)throw new TypeError("The listener must be a function");var a=new i(s,r||e,o),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new s:delete e._events[t]}function a(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(n=!1)),a.prototype.eventNames=function(){var e,s,i=[];if(0===this._eventsCount)return i;for(s in e=this._events)t.call(e,s)&&i.push(n?s.slice(1):s);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},a.prototype.listeners=function(e){var t=n?n+e:e,s=this._events[t];if(!s)return[];if(s.fn)return[s.fn];for(var i=0,r=s.length,o=new Array(r);i<r;i++)o[i]=s[i].fn;return o},a.prototype.listenerCount=function(e){var t=n?n+e:e,s=this._events[t];return s?s.fn?1:s.length:0},a.prototype.emit=function(e,t,s,i,r,o){var a=n?n+e:e;if(!this._events[a])return!1;var c,l,u=this._events[a],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,s),!0;case 4:return u.fn.call(u.context,t,s,i),!0;case 5:return u.fn.call(u.context,t,s,i,r),!0;case 6:return u.fn.call(u.context,t,s,i,r,o),!0}for(l=1,c=new Array(d-1);l<d;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var p,h=u.length;for(l=0;l<h;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),d){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,s);break;case 4:u[l].fn.call(u[l].context,t,s,i);break;default:if(!c)for(p=1,c=new Array(d-1);p<d;p++)c[p-1]=arguments[p];u[l].fn.apply(u[l].context,c)}}return!0},a.prototype.on=function(e,t,n){return r(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return r(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,s,i){var r=n?n+e:e;if(!this._events[r])return this;if(!t)return o(this,r),this;var a=this._events[r];if(a.fn)a.fn!==t||i&&!a.once||s&&a.context!==s||o(this,r);else{for(var c=0,l=[],u=a.length;c<u;c++)(a[c].fn!==t||i&&!a[c].once||s&&a[c].context!==s)&&l.push(a[c]);l.length?this._events[r]=1===l.length?l[0]:l:o(this,r)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&o(this,t)):(this._events=new s,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a},4063:e=>{"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var s,i,r;if(Array.isArray(t)){if((s=t.length)!=n.length)return!1;for(i=s;0!=i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((s=(r=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=s;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,r[i]))return!1;for(i=s;0!=i--;){var o=r[i];if(!e(t[o],n[o]))return!1}return!0}return t!=t&&n!=n}},6560:e=>{"use strict";e.exports=(e,t=process.argv)=>{const n=e.startsWith("-")?"":1===e.length?"-":"--",s=t.indexOf(n+e),i=t.indexOf("--");return-1!==s&&(-1===i||s<i)}},9146:function(e,t,n){"use strict";var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function o(e){try{c(s.next(e))}catch(e){r(e)}}function a(e){try{c(s.throw(e))}catch(e){r(e)}}function c(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,a)}c((s=s.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(n(1808)),o=i(n(4404)),a=i(n(7310)),c=i(n(9491)),l=i(n(5158)),u=n(8054),d=i(n(9829)),p=l.default("https-proxy-agent:agent");class h extends u.Agent{constructor(e){let t;if(t="string"==typeof e?a.default.parse(e):e,!t)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");p("creating new HttpsProxyAgent instance: %o",t),super(t);const n=Object.assign({},t);var s;this.secureProxy=t.secureProxy||"string"==typeof(s=n.protocol)&&/^https:?$/i.test(s),n.host=n.hostname||n.host,"string"==typeof n.port&&(n.port=parseInt(n.port,10)),!n.port&&n.host&&(n.port=this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in n)&&(n.ALPNProtocols=["http 1.1"]),n.host&&n.path&&(delete n.path,delete n.pathname),this.proxy=n}callback(e,t){return s(this,void 0,void 0,(function*(){const{proxy:n,secureProxy:s}=this;let i;s?(p("Creating `tls.Socket`: %o",n),i=o.default.connect(n)):(p("Creating `net.Socket`: %o",n),i=r.default.connect(n));const a=Object.assign({},n.headers);let l=`CONNECT ${t.host}:${t.port} HTTP/1.1\r\n`;n.auth&&(a["Proxy-Authorization"]=`Basic ${Buffer.from(n.auth).toString("base64")}`);let{host:u,port:h,secureEndpoint:_}=t;(function(e,t){return Boolean(!t&&80===e||t&&443===e)})(h,_)||(u+=`:${h}`),a.Host=u,a.Connection="close";for(const e of Object.keys(a))l+=`${e}: ${a[e]}\r\n`;const g=d.default(i);i.write(`${l}\r\n`);const{statusCode:m,buffered:y}=yield g;if(200===m){if(e.once("socket",f),t.secureEndpoint){p("Upgrading socket connection to TLS");const e=t.servername||t.host;return o.default.connect(Object.assign(Object.assign({},function(e,...t){const n={};let s;for(s in e)t.includes(s)||(n[s]=e[s]);return n}(t,"host","hostname","path","port")),{socket:i,servername:e}))}return i}i.destroy();const b=new r.default.Socket({writable:!1});return b.readable=!0,e.once("socket",(e=>{p("replaying proxy buffer for failed request"),c.default(e.listenerCount("data")>0),e.push(y),e.push(null)})),b}))}}function f(e){e.resume()}t.default=h},6018:function(e,t,n){"use strict";const s=(this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(n(9146));function i(e){return new s.default(e)}!function(e){e.HttpsProxyAgent=s.default,e.prototype=s.default.prototype}(i||(i={})),e.exports=i},9829:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(5158)).default("https-proxy-agent:parse-proxy-response");t.default=function(e){return new Promise(((t,n)=>{let s=0;const r=[];function o(){const n=e.read();n?function(e){r.push(e),s+=e.length;const n=Buffer.concat(r,s);if(-1===n.indexOf("\r\n\r\n"))return i("have not received end of HTTP headers yet..."),void o();const a=n.toString("ascii",0,n.indexOf("\r\n")),c=+a.split(" ")[1];i("got proxy server response: %o",a),t({statusCode:c,buffered:n})}(n):e.once("readable",o)}function a(e){i("onclose had error %o",e)}function c(){i("onend")}e.on("error",(function t(s){e.removeListener("end",c),e.removeListener("error",t),e.removeListener("close",a),e.removeListener("readable",o),i("onerror %o",s),n(s)})),e.on("close",a),e.on("end",c),o()}))}},7612:function(e,t,n){var s,i;!function(r,o){const a=t;!function(e){const t=Symbol("newer"),n=Symbol("older");function s(e,t){"number"!=typeof e&&(t=e,e=0),this.size=0,this.limit=e,this.oldest=this.newest=void 0,this._keymap=new Map,t&&(this.assign(t),e<1&&(this.limit=this.size))}function i(e,s){this.key=e,this.value=s,this[t]=void 0,this[n]=void 0}function r(e){this.entry=e}function o(e){this.entry=e}function a(e){this.entry=e}e.LRUMap=s,s.prototype._markEntryAsUsed=function(e){e!==this.newest&&(e[t]&&(e===this.oldest&&(this.oldest=e[t]),e[t][n]=e[n]),e[n]&&(e[n][t]=e[t]),e[t]=void 0,e[n]=this.newest,this.newest&&(this.newest[t]=e),this.newest=e)},s.prototype.assign=function(e){let s,r=this.limit||Number.MAX_VALUE;this._keymap.clear();let o=e[Symbol.iterator]();for(let e=o.next();!e.done;e=o.next()){let o=new i(e.value[0],e.value[1]);if(this._keymap.set(o.key,o),s?(s[t]=o,o[n]=s):this.oldest=o,s=o,0==r--)throw new Error("overflow")}this.newest=s,this.size=this._keymap.size},s.prototype.get=function(e){var t=this._keymap.get(e);if(t)return this._markEntryAsUsed(t),t.value},s.prototype.set=function(e,s){var r=this._keymap.get(e);return r?(r.value=s,this._markEntryAsUsed(r),this):(this._keymap.set(e,r=new i(e,s)),this.newest?(this.newest[t]=r,r[n]=this.newest):this.oldest=r,this.newest=r,++this.size,this.size>this.limit&&this.shift(),this)},s.prototype.shift=function(){var e=this.oldest;if(e)return this.oldest[t]?(this.oldest=this.oldest[t],this.oldest[n]=void 0):(this.oldest=void 0,this.newest=void 0),e[t]=e[n]=void 0,this._keymap.delete(e.key),--this.size,[e.key,e.value]},s.prototype.find=function(e){let t=this._keymap.get(e);return t?t.value:void 0},s.prototype.has=function(e){return this._keymap.has(e)},s.prototype.delete=function(e){var s=this._keymap.get(e);if(s)return this._keymap.delete(s.key),s[t]&&s[n]?(s[n][t]=s[t],s[t][n]=s[n]):s[t]?(s[t][n]=void 0,this.oldest=s[t]):s[n]?(s[n][t]=void 0,this.newest=s[n]):this.oldest=this.newest=void 0,this.size--,s.value},s.prototype.clear=function(){this.oldest=this.newest=void 0,this.size=0,this._keymap.clear()},r.prototype[Symbol.iterator]=function(){return this},r.prototype.next=function(){let e=this.entry;return e?(this.entry=e[t],{done:!1,value:[e.key,e.value]}):{done:!0,value:void 0}},o.prototype[Symbol.iterator]=function(){return this},o.prototype.next=function(){let e=this.entry;return e?(this.entry=e[t],{done:!1,value:e.key}):{done:!0,value:void 0}},a.prototype[Symbol.iterator]=function(){return this},a.prototype.next=function(){let e=this.entry;return e?(this.entry=e[t],{done:!1,value:e.value}):{done:!0,value:void 0}},s.prototype.keys=function(){return new o(this.oldest)},s.prototype.values=function(){return new a(this.oldest)},s.prototype.entries=function(){return this},s.prototype[Symbol.iterator]=function(){return new r(this.oldest)},s.prototype.forEach=function(e,n){"object"!=typeof n&&(n=this);let s=this.oldest;for(;s;)e.call(n,s.value,s.key,this),s=s[t]},s.prototype.toJSON=function(){for(var e=new Array(this.size),n=0,s=this.oldest;s;)e[n++]={key:s.key,value:s.value},s=s[t];return e},s.prototype.toString=function(){for(var e="",n=this.oldest;n;)e+=String(n.key)+":"+n.value,(n=n[t])&&(e+=" < ");return e}}(a),void 0===(i="function"==typeof(s=a)?s.call(t,n,t,e):s)||(e.exports=i)}()},4341:e=>{"use strict";const t=(e,t,s,i)=>{if("length"===s||"prototype"===s)return;if("arguments"===s||"caller"===s)return;const r=Object.getOwnPropertyDescriptor(e,s),o=Object.getOwnPropertyDescriptor(t,s);!n(r,o)&&i||Object.defineProperty(e,s,o)},n=function(e,t){return void 0===e||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},s=(e,t)=>`/* Wrapped ${e}*/\n${t}`,i=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),r=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name");e.exports=(e,n,{ignoreNonConfigurable:o=!1}={})=>{const{name:a}=e;for(const s of Reflect.ownKeys(n))t(e,n,s,o);return((e,t)=>{const n=Object.getPrototypeOf(t);n!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,n)})(e,n),((e,t,n)=>{const o=""===n?"":`with ${n.trim()}() `,a=s.bind(null,o,t.toString());Object.defineProperty(a,"name",r),Object.defineProperty(e,"toString",{...i,value:a})})(e,n,a),e}},7824:e=>{var t=1e3,n=60*t,s=60*n,i=24*s;function r(e,t,n,s){var i=t>=1.5*n;return Math.round(e/n)+" "+s+(i?"s":"")}e.exports=function(e,o){o=o||{};var a,c,l=typeof e;if("string"===l&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var r=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(r){var o=parseFloat(r[1]);switch((r[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"weeks":case"week":case"w":return 6048e5*o;case"days":case"day":case"d":return o*i;case"hours":case"hour":case"hrs":case"hr":case"h":return o*s;case"minutes":case"minute":case"mins":case"min":case"m":return o*n;case"seconds":case"second":case"secs":case"sec":case"s":return o*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}(e);if("number"===l&&isFinite(e))return o.long?(a=e,(c=Math.abs(a))>=i?r(a,c,i,"day"):c>=s?r(a,c,s,"hour"):c>=n?r(a,c,n,"minute"):c>=t?r(a,c,t,"second"):a+" ms"):function(e){var r=Math.abs(e);return r>=i?Math.round(e/i)+"d":r>=s?Math.round(e/s)+"h":r>=n?Math.round(e/n)+"m":r>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},7345:e=>{"use strict";e.exports=(e,t)=>(t=t||(()=>{}),e.then((e=>new Promise((e=>{e(t())})).then((()=>e))),(e=>new Promise((e=>{e(t())})).then((()=>{throw e})))))},5860:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=n(6729),i=n(6512),r=n(6506),o=()=>{},a=new i.TimeoutError;t.default=class extends s{constructor(e){var t,n,s,i;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=o,this._resolveIdle=o,!("number"==typeof(e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:r.default},e)).intervalCap&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!==(n=null===(t=e.intervalCap)||void 0===t?void 0:t.toString())&&void 0!==n?n:""}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!==(i=null===(s=e.interval)||void 0===s?void 0:s.toString())&&void 0!==i?i:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||0===e.interval,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=!0===e.throwOnTimeout,this._isPaused=!1===e.autoStart}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=o,0===this._pendingCount&&(this._resolveIdle(),this._resolveIdle=o,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const e=Date.now();if(void 0===this._intervalId){const t=this._intervalEnd-e;if(!(t<0))return void 0===this._timeoutId&&(this._timeoutId=setTimeout((()=>{this._onResumeInterval()}),t)),!0;this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0}return!1}_tryToStartAnother(){if(0===this._queue.size)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const t=this._queue.dequeue();return!!t&&(this.emit("active"),t(),e&&this._initializeIntervalIfNeeded(),!0)}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||void 0!==this._intervalId||(this._intervalId=setInterval((()=>{this._onInterval()}),this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){0===this._intervalCount&&0===this._pendingCount&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!("number"==typeof e&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,t={}){return new Promise(((n,s)=>{this._queue.enqueue((async()=>{this._pendingCount++,this._intervalCount++;try{const r=void 0===this._timeout&&void 0===t.timeout?e():i.default(Promise.resolve(e()),void 0===t.timeout?this._timeout:t.timeout,(()=>{(void 0===t.throwOnTimeout?this._throwOnTimeout:t.throwOnTimeout)&&s(a)}));n(await r)}catch(e){s(e)}this._next()}),t),this._tryToStartAnother(),this.emit("add")}))}async addAll(e,t){return Promise.all(e.map((async e=>this.add(e,t))))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(0!==this._queue.size)return new Promise((e=>{const t=this._resolveEmpty;this._resolveEmpty=()=>{t(),e()}}))}async onIdle(){if(0!==this._pendingCount||0!==this._queue.size)return new Promise((e=>{const t=this._resolveIdle;this._resolveIdle=()=>{t(),e()}}))}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}}},7489:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){let s=0,i=e.length;for(;i>0;){const r=i/2|0;let o=s+r;n(e[o],t)<=0?(s=++o,i-=r+1):i=r}return s}},6506:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=n(7489);t.default=class{constructor(){this._queue=[]}enqueue(e,t){const n={priority:(t=Object.assign({priority:0},t)).priority,run:e};if(this.size&&this._queue[this.size-1].priority>=t.priority)return void this._queue.push(n);const i=s.default(this._queue,n,((e,t)=>t.priority-e.priority));this._queue.splice(i,0,n)}dequeue(){const e=this._queue.shift();return null==e?void 0:e.run}filter(e){return this._queue.filter((t=>t.priority===e.priority)).map((e=>e.run))}get size(){return this._queue.length}}},6512:(e,t,n)=>{"use strict";const s=n(7345);class i extends Error{constructor(e){super(e),this.name="TimeoutError"}}const r=(e,t,n)=>new Promise(((r,o)=>{if("number"!=typeof t||t<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(t===1/0)return void r(e);const a=setTimeout((()=>{if("function"==typeof n){try{r(n())}catch(e){o(e)}return}const s=n instanceof Error?n:new i("string"==typeof n?n:`Promise timed out after ${t} milliseconds`);"function"==typeof e.cancel&&e.cancel(),o(s)}),t);s(e.then(r,o),(()=>{clearTimeout(a)}))}));e.exports=r,e.exports.default=r,e.exports.TimeoutError=i},2130:(e,t,n)=>{"use strict";const s=n(2037),i=n(6224),r=n(6560),{env:o}=process;let a;function c(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function l(e,t){if(0===a)return 0;if(r("color=16m")||r("color=full")||r("color=truecolor"))return 3;if(r("color=256"))return 2;if(e&&!t&&void 0===a)return 0;const n=a||0;if("dumb"===o.TERM)return n;if("win32"===process.platform){const e=s.release().split(".");return Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in o)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some((e=>e in o))||"codeship"===o.CI_NAME?1:n;if("TEAMCITY_VERSION"in o)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(o.TEAMCITY_VERSION)?1:0;if("truecolor"===o.COLORTERM)return 3;if("TERM_PROGRAM"in o){const e=parseInt((o.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(o.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(o.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(o.TERM)||"COLORTERM"in o?1:n}r("no-color")||r("no-colors")||r("color=false")||r("color=never")?a=0:(r("color")||r("colors")||r("color=true")||r("color=always"))&&(a=1),"FORCE_COLOR"in o&&(a="true"===o.FORCE_COLOR?1:"false"===o.FORCE_COLOR?0:0===o.FORCE_COLOR.length?1:Math.min(parseInt(o.FORCE_COLOR,10),3)),e.exports={supportsColor:function(e){return c(l(e,e&&e.isTTY))},stdout:c(l(!0,i.isatty(1))),stderr:c(l(!0,i.isatty(2)))}},6146:(e,t)=>{t.UpdateActions=function(e){const t={type:"number",label:"HWC on the panel",id:"hwc",default:1,min:1,max:254};e.setActionDefinitions({SetButtonState:{name:"Set Button LED Status On/Off/Dimmed",options:[t,{type:"dropdown",label:"LED Setting",id:"val",default:"36",choices:[{id:"0",label:"OFF"},{id:"5",label:"Dimmed"},{id:"36",label:"ON / Color (default white)"},{id:"34",label:"ON RED"},{id:"35",label:"ON Green"}]}],callback:async t=>{e.executeAction(t)}},SetButtonColor:{name:"Set Button LED Color",options:[t,{type:"dropdown",label:"Extended LED Color",id:"color",default:"128",choices:[{id:"128",label:"Default Color"},{id:"129",label:"OFF"},{id:"130",label:"White"},{id:"131",label:"Warm White"},{id:"132",label:"Red"},{id:"133",label:"Rose"},{id:"134",label:"Pink"},{id:"135",label:"Purple"},{id:"136",label:"Amber"},{id:"137",label:"Yellow"},{id:"138",label:"Dark blue"},{id:"139",label:"Blue"},{id:"140",label:"Ice"},{id:"141",label:"Cyan"},{id:"142",label:"Spring"},{id:"143",label:"Green"},{id:"144",label:"Mint"}]}],callback:async t=>{e.executeAction(t)}},DisplayText:{name:"Diplay Text on LCD",options:[t,{type:"textinput",id:"title",label:"Title Text",width:4,default:""},{type:"checkbox",id:"isLabel",label:"Title is a Label",default:!1},{type:"textinput",id:"label1",label:"Label 1",default:""},{type:"textinput",id:"label2",label:"Label 2",default:""}],callback:async t=>{e.executeAction(t)}},Clear:{name:"Clear LED/Display/Both",options:[{type:"dropdown",label:"Command",id:"cmd",default:"Clear",choices:[{id:"Clear",label:"Clear All"},{id:"ClearLEDs",label:"Clear All LEDs"},{id:"ClearDisplays",label:"Clear All Displays"},{id:"onlyDisplay",label:"Clear Only this Displays"}]},t],callback:async t=>{e.executeAction(t)}},PanelBrightness:{name:"Panel Brightness",options:[{type:"number",label:"LED (1-8)",id:"led",default:5,min:1,max:8},{type:"number",label:"LCD/OLED (1-8)",id:"lcd",default:5,min:1,max:8}],callback:async t=>{e.executeAction(t)}},Webserver:{name:"Webserver ON/OFF",options:[{type:"dropdown",label:"Command",id:"cmd",default:"Webserver=1",choices:[{id:"Webserver=1",label:"ON"},{id:"Webserver=0",label:"OFF"}]}],callback:async t=>{e.executeAction(t)}},Reboot:{name:"Reboot Panel",options:[],callback:async t=>{e.executeAction(t)}},Refresh:{name:"Refresh/Check Feedbacks",description:"Refresh Feedbacks, Optional to clead Displays and Leds First",options:[{type:"checkbox",id:"clear",label:"Clear Panel Firts?",default:!0}],callback:async t=>{e.executeAction(t)}},CustomCommand:{name:"Custom Command",options:[{type:"textinput",id:"cmd",label:"Command:",tooltip:"Custom rawpanel commands in string form",default:""}],callback:async t=>{e.executeAction(t)}}})},t.executeAction=function(e){var t=e.options;switch(e.action){case"SetButtonState":this.sendCommand("HWC#"+t.hwc+"="+t.val);break;case"SetButtonColor":this.sendCommand("HWCc#"+t.hwc+"="+t.color);break;case"DisplayText":var n="|0|",s="";1==t.isLabel&&(n="|1|"),""!=t.label2&&(s="|"+t.label2+"|"),this.sendCommand("HWCt#"+t.hwc+"=|||"+t.title+n+t.label1+s);break;case"Clear":"onlyDisplay"==t.cmd?this.sendCommand("HWCt#"+t.hwc+"=||||||"):this.sendCommand(t.cmd);break;case"PanelBrightness":this.sendCommand("PanelBrightness="+t.led+","+t.lcd);break;case"Reboot":this.sendCommand("Reboot");break;case"Refresh":t.clear&&this.sendCommand("Clear");for(let e=0;e<this.sdData.keys.length;e++){let t=e+1,n=String(this.config["btn_"+t]),s=n,i=n,r=this.sdData.keys[e];if(0!=n&&""!=n){if(n.includes(",")&&(n=n.split(","),s=n[0],i=n[1]),""!==r.color){let e=r.color;192==e?1==this.config.autoDim?(this.sendCommand("HWCc#"+s+"=128"),this.sendCommand("HWC#"+s+"=5")):this.sendCommand("HWC#"+s+"=0"):(this.sendCommand("HWCc#"+s+"="+e),this.sendCommand("HWC#"+s+"=36"))}""!==r.text&&(cmd=r.text,cmd.length>0?(cmd.length>=25&&(x=cmd.split("\\n"),x.length>=3&&(cmd=cmd.replace(" ","\\n")),x.length<=2&&(y=cmd.match(/.{1,24}/g),y.length<=2?cmd=y[0]+"\\n"+y[1]:y.length>=3&&(cmd=y[0]+"\\n"+y[1]+"\\n"+y[2]))),cmd.includes("\\n")?(x=cmd.split("\\n"),2==x.length?this.sendCommand("HWCt#"+i+"=|||Comp Key: "+t+"|1|"+x[0]+"|"+x[1]+"|"):3==x.length?this.sendCommand("HWCt#"+i+"=|||"+x[0]+"|1|"+x[1]+"|"+x[2]+"|"):(cmd=cmd.split("\\n").join(" "),this.sendCommand("HWCt#"+i+"=|||Comp Key: "+t+"|1|"+cmd+"||"))):this.sendCommand("HWCt#"+i+"=|||Comp Key: "+t+"|1|"+cmd+"||")):this.sendCommand("HWCt#"+i+"=|||Comp Key:|1|"+t+"||"))}}break;default:this.sendCommand(t.cmd)}},t.sendCommand=async function(e){void 0!==e&&(this.config.debug&&this.log("info","Sending: "+e),void 0!==this.tcp?this.tcp.send(e+"\n"):this.log("debug","Socket not connected"),await setTimeout[Object.getOwnPropertySymbols(setTimeout)[0]](50))}},8878:function(e,t){t.ConfigFields=[{type:"textinput",id:"host",label:"Controler IP",width:5},{type:"textinput",id:"tcpPort",label:"TCP Port (Default: 9923)",width:4,default:9923,regex:this.REGEX_PORT},{type:"static-text",id:"dummy1",width:12,label:" ",value:" "},{type:"checkbox",id:"satEnable",width:1,label:"Enable",default:!0},{type:"static-text",id:"satInfo",width:11,label:"Companion Satellite API v2.0",value:"Enabling the satellite API, you will gain access to all 32 buttons, just like with the normal streamdeck. It even supports going to different pages and so on. <b>BUT</b> you will only get 32 buttons in total that work like this. You can still add other buttons manually by attaching the feedbacks to specific controls and giving them the appropriate HWC ID's. But latched buttons will only have appropriate feedback with these 32 API buttons.<br/> To Use these 32 buttons. Please type what <b>HWC ID</b> you want to tie to each button below:"},{type:"static-text",id:"rowInfo",width:12,value:'<b>When filling in you HWC id\'s.</b> Format: "button_HWC, Screen_HWC" -> "1,10" if there is only one number screen will be asumed to be on the same HWC'},{type:"static-text",id:"rowInfo1",width:12,value:"<b>Streamdeck Row 1,</b> Bank 1 - 8"},{type:"textinput",label:"Bank 1",id:"btn_1",width:3},{type:"textinput",label:"Bank 2",id:"btn_2",width:3},{type:"textinput",label:"Bank 3",id:"btn_3",width:3},{type:"textinput",label:"Bank 4",id:"btn_4",width:3},{type:"textinput",label:"Bank 5",id:"btn_5",width:3},{type:"textinput",label:"Bank 6",id:"btn_6",width:3},{type:"textinput",label:"Bank 7",id:"btn_7",width:3},{type:"textinput",label:"Bank 8",id:"btn_8",width:3},{type:"static-text",id:"rowInfo1",width:12,value:"<b>Streamdeck Row 2,</b> Bank 9 - 16"},{type:"textinput",label:"Bank 9",id:"btn_9",width:3},{type:"textinput",label:"Bank 10",id:"btn_10",width:3},{type:"textinput",label:"Bank 11",id:"btn_11",width:3},{type:"textinput",label:"Bank 12",id:"btn_12",width:3},{type:"textinput",label:"Bank 13",id:"btn_13",width:3},{type:"textinput",label:"Bank 14",id:"btn_14",width:3},{type:"textinput",label:"Bank 15",id:"btn_15",width:3},{type:"textinput",label:"Bank 16",id:"btn_16",width:3},{type:"static-text",id:"rowInfo1",width:12,value:"<b>Streamdeck Row 3,</b> Bank 17 - 24"},{type:"textinput",label:"Bank 17",id:"btn_17",width:3},{type:"textinput",label:"Bank 18",id:"btn_18",width:3},{type:"textinput",label:"Bank 19",id:"btn_19",width:3},{type:"textinput",label:"Bank 20",id:"btn_20",width:3},{type:"textinput",label:"Bank 21",id:"btn_21",width:3},{type:"textinput",label:"Bank 22",id:"btn_22",width:3},{type:"textinput",label:"Bank 23",id:"btn_23",width:3},{type:"textinput",label:"Bank 24",id:"btn_24",width:3},{type:"static-text",id:"rowInfo1",width:12,value:"<b>Streamdeck Row 4,</b> Bank 25 - 32"},{type:"textinput",label:"Bank 25",id:"btn_25",width:3},{type:"textinput",label:"Bank 26",id:"btn_26",width:3},{type:"textinput",label:"Bank 27",id:"btn_27",width:3},{type:"textinput",label:"Bank 28",id:"btn_28",width:3},{type:"textinput",label:"Bank 29",id:"btn_29",width:3},{type:"textinput",label:"Bank 30",id:"btn_30",width:3},{type:"textinput",label:"Bank 31",id:"btn_31",width:3},{type:"textinput",label:"Bank 32",id:"btn_32",width:3},{type:"static-text",id:"dummy2",width:12,label:" ",value:" "},{type:"checkbox",id:"autoDim",width:1,label:"Enable",default:!0},{type:"static-text",id:"satInfo",width:11,label:"LED Feedback, Auto dim or off? (Might need Companion or the module to be restarted)",value:"If this is enabled, all HWC's that has an LED will light a dim white when the button is black in companion (mimics normal SKAARHOJ behaviour). Turn this off if you want them to turn completely off. (This would be more in line with how companion does it usually)"},{type:"number",label:"TCP Timeout (1 sec -> 5 min, default 5 sec = 5000)",id:"timeout",width:12,default:5e3,min:1e3,max:3e5},{type:"number",label:"Backup LCD Refresh (5 sec -> 10 min, default 30 sec = 30000)",id:"refresh",width:12,default:3e4,min:5e3,max:6e5},{type:"checkbox",id:"debug",width:1,label:"Enable",default:!1},{type:"static-text",id:"debugInfo",width:11,label:"Enable Debug To Log Window",value:"Requires Companion to be restarted. But this will allow you the see what is being sent from the module and what is being received from the panel."}]},1317:(e,t)=>{t.UpdateFeedbacks=async function(e){const t={type:"number",label:"HWC on the panel",id:"hwc",default:1,min:1,max:254};e.setFeedbackDefinitions({tieToHwc:{name:"Generic - Tie HWC Press To This Button",description:"Currently disabled in the module",options:[t],callback:function(e,t,n){}},tieToHwc4Way:{name:"4-Way/Edge Button - Tie HWC To This Button",description:"Currently disabled in the module",options:[t,{type:"dropdown",label:"Select Click Type",id:"cmd",default:"All",choices:[{id:"All",label:"Any/All (Normal Button)"},{id:"Top",label:"Top Edge"},{id:"Bottom",label:"Bottom Edge"},{id:"Left",label:"Left Edge"},{id:"Right",label:"Right Edge"}]}],callback:function(e,t,n){}},tieToHwcEncoder:{name:"Encoder - Tie HWC To This Button",description:"Currently disabled in the module",options:[t,{type:"dropdown",label:"Select Click Type",id:"cmd",default:"Press",choices:[{id:"Press",label:"Press Down"},{id:"Left",label:"Rotate Left"},{id:"Right",label:"Rotate Right"}]}],callback:function(e,t,n){}},tieToHwcJoystick:{name:"Joystick - Tie HWC To This Button",description:"Currently disabled in the module",options:[t,{type:"dropdown",label:"Select Click Type",id:"cmd",default:"Both",choices:[{id:"Both",label:"Both Up and Down"},{id:"Up",label:"Only on Up/Right"},{id:"Down",label:"Only on Down/Left"}]},{type:"number",label:"Deadzone (1-450, Default 50)",id:"deadzone",default:50,min:1,max:450}],callback:function(e,t,n){}},tieToHwcLed:{name:"Tie HWC LED To This Button",description:"Currently disabled in the module",options:[t,{type:"dropdown",label:"Select Color",id:"color",default:"bg",choices:[{id:"bg",label:"Bagground Color"},{id:"fg",label:"Text Color"}]},{type:"checkbox",id:"autoOnOff",label:"Auto Turn ON/OFF",default:!0},{type:"checkbox",id:"dimmed",label:"Set Dimmed When OFF?",default:!0}],callback:function(e,t,n){}},tieToLcd:{name:"Tie HWC LCD/OLED to this Buttons Display",description:"Currently disabled in the module",options:[t],callback:function(e,t,n){}}})}},2398:(e,t,n)=>{const{InstanceBase:s,InstanceStatus:i,runEntrypoint:r,TCPHelper:o,splitRgb:a}=n(8049),{ConfigFields:c}=n(8878),l=n(3411),{UpdateActions:u,executeAction:d,sendCommand:p}=n(6146),{UpdateFeedbacks:h}=n(1317),{UpdateVariableDefinitions:f}=n(9424),{tcpClient:_}=n(4665),{satelliteAPI:g,sendAPI:m,hwcToSat:y}=n(2266),{storeData:b}=n(7779),{handleJSON:E}=n(7319);r(class extends s{constructor(e){super(e),this.data={startup:!0,startupAPI:!0,satConnected:!1,model:"NaN",serial:"NaN",version:"Nan",sleep:"False",state:{Master:0,P:0,Q:0,R:0,S:0},shift:{Master:0,A:0,B:0,C:0,D:0},mem:{A:0,B:0,C:0,D:0,E:0,F:0,G:0,H:0,I:0,J:0,K:0,L:0},hwc:{id:"",type:"",side:"",press:"",val:""}},this.sdData={keys:[]},this.json_data={hwc:[],types:[]},this.clients=[],this.executeAction=d,this.sendCommand=p,this.storeData=b,this.handleJSON=E,this.satelliteAPI=g,this.sendAPI=m,this.tcpClient=_,this.hwcToSat=y,this.TCPHelper=o,this.UpdateVariableDefinitions=f}async init(e){this.config=e,this.updateStatus(i.Connecting),this.updateActions(),this.updateFeedbacks(),_.bind(this)(),this.updateVariableDefinitions()}async configUpdated(e){this.config=e,this.updateActions(),this.updateFeedbacks(),this.sendAPI("QUIT"),this.data.satConnected=!1,this.data.startupAPI=!0,void 0!==this.api&&(this.api.destroy(),delete this.api),_.bind(this)(),this.updateVariableDefinitions()}async destroy(){this.tcp&&(this.tcp.destroy(),delete this.tcp),this.api&&(this.api.destroy(),delete this.api),this.pollAPI&&clearInterval(this.pollAPI),this.Refresh&&clearInterval(this.Refresh),this.pingSatellite&&clearInterval(this.pingSatellite),this.log("debug","destroy")}getConfigFields(){return c}updateActions(){u(this)}updateFeedbacks(){h(this)}updateVariableDefinitions(){f(this)}normalizeBetweenTwoRanges(e,t,n,s,i){return s+(e-t)*(i-s)/(n-t)}convertIntColorToRawPanelColor(e){var t=a(parseInt(e));return 128+(this.normalizeBetweenTwoRanges(t.r,0,255,0,3)<<4|this.normalizeBetweenTwoRanges(t.g,0,255,0,3)<<2|this.normalizeBetweenTwoRanges(t.b,0,255,0,3))+64}},l)},7319:(e,t)=>{t.handleJSON=function(e){let t=JSON.parse(e.split("_panelTopology_HWC=")[1]);const n={hwc:""!==t.HWc[0]?t.HWc.map((e=>{const n={...e.$};return n.id=e.id,n.txt=e.txt,e.type&&(n.type={},n.type.id=e.type,t.typeIndex[e.type].out&&(n.type.out=t.typeIndex[e.type].out),t.typeIndex[e.type].in&&(n.type.in=t.typeIndex[e.type].in),t.typeIndex[e.type].disp&&(n.type.disp=!0),t.typeIndex[e.type].desc&&(n.type.desc=t.typeIndex[e.type].desc),t.typeIndex[e.type].sub&&(n.type.sub=t.typeIndex[e.type].sub)),n})):[],types:t.typeIndex};new Set([]),this.json_data=n,this.UpdateVariableDefinitions(this)}},2266:(e,t,n)=>{const{storeData:s}=n(7779);t.satelliteAPI=function(){var e=this;return void 0!==e.api&&(e.api.destroy(),e.pingSatellite&&clearInterval(e.pingSatellite),delete e.api),e.config.satEnable&&(e.api=new e.TCPHelper("127.0.0.1",16622),e.api.on("status_change",(function(e,t){})),e.api.on("error",(function(t){e.data.satConnected=!1,e.data.startupAPI=!0,e.log("debug","Network error",t),e.log("error","Network error: "+t.message),e.pingSatellite&&(clearInterval(e.pingSatellite),delete e.pingSatellite)})),e.api.on("connect",(function(){e.data.startupAPI=!1,e.pingSatellite=setInterval((()=>{e.sendAPI("PING")}),3e3)})),e.api.on("data",(function(t){let n=String(t).trim();n=n.split("\n");for(let t=0;t<n.length;t++){let s=n[t];if(1!=s.includes("BEGIN CompanionVersion=")){if(s.includes("ADD-DEVICE OK"))e.data.satConnected=!0;else if(s.includes("PING")||s.includes("ping"))e.sendAPI("PONG"),e.log("debug","Sent Ping");else if(s.includes("BRIGHTNESS")){let t=s.split("VALUE=")[1].split(" ")[0];t=Math.round(e.normalizeBetweenTwoRanges(t,0,100,0,8)),e.sendCommand("PanelBrightness="+t),e.log("debug","Sent Panel Brightnss: "+t)}else if(s.includes("KEY-CLEAR"))e.sendCommand("Clear"),e.log("debug","Sent Key Clear");else if(s.includes("KEY-STATE")){e.log("debug","Sent Key State"),e.log("debug",s),keyData={text:"",color:"",type:"",pressed:!1};let t=1+parseInt(s.split("KEY=")[1].split(" ")[0]),n=String(e.config["btn_"+t]),i=n,r=n;if(0==n||""==n||"undefined"==n)continue;if(n.includes(",")&&(n=n.split(","),i=n[0],r=n[1]),s.includes("COLOR=#")){let t=s.split("COLOR=#")[1].split(" ")[0];color=parseInt(t,16);let n=e.convertIntColorToRawPanelColor(color);keyData.color=n}if(s.includes("TEXT=")){let e=s.split("TEXT=")[1].split(" ")[0],t=new Buffer.from(e,"base64").toString("ascii");keyData.text=t}if(s.includes("PRESSED=")){let e=s.split("PRESSED=")[1].split(" ")[0];keyData.pressed="true"==e}if(s.includes("TYPE=")){let e=s.split("TYPE=")[1].split(" ")[0];keyData.type=e,"PAGEUP"==e&&(keyData.text="Page Up"),"PAGEDOWN"==e&&(keyData.text="Page Down"),"PAGENUM"==e&&(keyData.text="Page Number")}192==keyData.color?(e.sendCommand("HWCc#"+i+"=128"),1==keyData.pressed?e.sendCommand("HWC#"+i+"=36"):1==e.config.autoDim?e.sendCommand("HWC#"+i+"=5"):e.sendCommand("HWC#"+i+"=0")):(e.sendCommand("HWCc#"+i+"="+keyData.color),1==keyData.pressed?e.sendCommand("HWC#"+i+"=36"):e.sendCommand("HWC#"+i+"=5"));let o=keyData.text;o.length>0?(o.length>=25&&(x=o.split("\\n"),x.length>=3&&(o=o.replace(" ","\\n")),x.length<=2&&(y=o.match(/.{1,24}/g),y.length<=2?o=y[0]+"\\n"+y[1]:y.length>=3&&(o=y[0]+"\\n"+y[1]+"\\n"+y[2]))),o.includes("\\n")?(x=o.split("\\n"),2==x.length?e.sendCommand("HWCt#"+r+"=|||Comp Key: "+t+"|1|"+x[0]+"|"+x[1]+"|"):3==x.length?e.sendCommand("HWCt#"+r+"=|||"+x[0]+"|1|"+x[1]+"|"+x[2]+"|"):(o=o.split("\\n").join(" "),e.sendCommand("HWCt#"+r+"=|||Comp Key: "+t+"|1|"+o+"||"))):e.sendCommand("HWCt#"+r+"=|||Comp Key: "+t+"|1|"+o+"||")):e.sendCommand("HWCt#"+r+"=|||Comp Key:|1|"+t+"||"),e.sdData.keys[t-1]=keyData}}else{let t=e.data.model;1==t.includes("SK_")&&(t=t.split("SK_")[1]),e.sendAPI("ADD-DEVICE DEVICEID="+e.data.serial+' PRODUCT_NAME="SKAARHOJ '+t+'" BITMAPS=false COLORS=true TEXT=true')}}}))),e},t.sendAPI=async function(e){void 0!==e&&(void 0!==this.api?(this.api.send(e+"\r\n"),this.log("debug","Sent to Satellite: "+e)):this.log("debug","Socket not connected"),await setTimeout[Object.getOwnPropertySymbols(setTimeout)[0]](100))},t.hwcToSat=function(){self=this;var e=self.data.hwc;if("0"!=e.id){if("Encoder"==e.type)-1!=e.val&&1!=e.val||(e.press="true");else if("Joystick"==e.type){let t=100;e.val>=t||e.val<=-1*t?e.press="true":(e.val>-1*t||e.val<t)&&(e.press="false")}else if("Fader"==e.type){let t=500,n=200,s=e.val-t;s>=n||s<=-1*n?e.press="true":(s>-1*n||s<n)&&(e.press="false")}if(""!=e.press)switch(e.id){case String(self.config.btn_1).split(",")[0]:self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=0 PRESSED="+e.press),"Encoder"==e.type&&self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=0 PRESSED=false");break;case String(self.config.btn_2).split(",")[0]:self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=1 PRESSED="+e.press),"Encoder"==e.type&&self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=1 PRESSED=false");break;case String(self.config.btn_3).split(",")[0]:self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=2 PRESSED="+e.press),"Encoder"==e.type&&self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=2 PRESSED=false");break;case String(self.config.btn_4).split(",")[0]:self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=3 PRESSED="+e.press),"Encoder"==e.type&&self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=3 PRESSED=false");break;case String(self.config.btn_5).split(",")[0]:self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=4 PRESSED="+e.press),"Encoder"==e.type&&self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=4 PRESSED=false");break;case String(self.config.btn_6).split(",")[0]:self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=5 PRESSED="+e.press),"Encoder"==e.type&&self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=5 PRESSED=false");break;case String(self.config.btn_7).split(",")[0]:self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=6 PRESSED="+e.press),"Encoder"==e.type&&self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=6 PRESSED=false");break;case String(self.config.btn_8).split(",")[0]:self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=7 PRESSED="+e.press),"Encoder"==e.type&&self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=7 PRESSED=false");break;case String(self.config.btn_9).split(",")[0]:self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=8 PRESSED="+e.press),"Encoder"==e.type&&self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=8 PRESSED=false");break;case String(self.config.btn_10).split(",")[0]:self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=9 PRESSED="+e.press),"Encoder"==e.type&&self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=9 PRESSED=false");break;case String(self.config.btn_11).split(",")[0]:self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=10 PRESSED="+e.press),"Encoder"==e.type&&self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=10 PRESSED=false");break;case String(self.config.btn_12).split(",")[0]:self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=11 PRESSED="+e.press),"Encoder"==e.type&&self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=11 PRESSED=false");break;case String(self.config.btn_13).split(",")[0]:self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=12 PRESSED="+e.press),"Encoder"==e.type&&self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=12 PRESSED=false");break;case String(self.config.btn_14).split(",")[0]:self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=13 PRESSED="+e.press),"Encoder"==e.type&&self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=13 PRESSED=false");break;case String(self.config.btn_15).split(",")[0]:self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=14 PRESSED="+e.press),"Encoder"==e.type&&self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=14 PRESSED=false");break;case String(self.config.btn_16).split(",")[0]:self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=15 PRESSED="+e.press),"Encoder"==e.type&&self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=15 PRESSED=false");break;case String(self.config.btn_17).split(",")[0]:self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=16 PRESSED="+e.press),"Encoder"==e.type&&self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=16 PRESSED=false");break;case String(self.config.btn_18).split(",")[0]:self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=17 PRESSED="+e.press),"Encoder"==e.type&&self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=17 PRESSED=false");break;case String(self.config.btn_19).split(",")[0]:self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=18 PRESSED="+e.press),"Encoder"==e.type&&self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=18 PRESSED=false");break;case String(self.config.btn_20).split(",")[0]:self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=19 PRESSED="+e.press),"Encoder"==e.type&&self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=19 PRESSED=false");break;case String(self.config.btn_21).split(",")[0]:self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=20 PRESSED="+e.press),"Encoder"==e.type&&self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=20 PRESSED=false");break;case String(self.config.btn_22).split(",")[0]:self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=21 PRESSED="+e.press),"Encoder"==e.type&&self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=21 PRESSED=false");break;case String(self.config.btn_23).split(",")[0]:self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=22 PRESSED="+e.press),"Encoder"==e.type&&self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=22 PRESSED=false");break;case String(self.config.btn_24).split(",")[0]:self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=23 PRESSED="+e.press),"Encoder"==e.type&&self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=23 PRESSED=false");break;case String(self.config.btn_25).split(",")[0]:self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=24 PRESSED="+e.press),"Encoder"==e.type&&self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=24 PRESSED=false");break;case String(self.config.btn_26).split(",")[0]:self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=25 PRESSED="+e.press),"Encoder"==e.type&&self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=25 PRESSED=false");break;case String(self.config.btn_27).split(",")[0]:self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=26 PRESSED="+e.press),"Encoder"==e.type&&self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=26 PRESSED=false");break;case String(self.config.btn_28).split(",")[0]:self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=27 PRESSED="+e.press),"Encoder"==e.type&&self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=27 PRESSED=false");break;case String(self.config.btn_29).split(",")[0]:self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=28 PRESSED="+e.press),"Encoder"==e.type&&self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=28 PRESSED=false");break;case String(self.config.btn_30).split(",")[0]:self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=29 PRESSED="+e.press),"Encoder"==e.type&&self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=29 PRESSED=false");break;case String(self.config.btn_31).split(",")[0]:self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=30 PRESSED="+e.press),"Encoder"==e.type&&self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=30 PRESSED=false");break;case String(self.config.btn_32).split(",")[0]:self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=31 PRESSED="+e.press),"Encoder"==e.type&&self.sendAPI("KEY-PRESS DEVICEID="+self.data.serial+" KEY=31 PRESSED=false")}}}},7779:(e,t)=>{t.storeData=function(e){if(data=this.data,(e.includes("_model")||e.includes("_serial")||e.includes("_version"))&&(str_arr=e.split("\n"),str_arr.forEach((e=>{switch(x=e.split("="),x[0]){case"_model":this.data.model=x[1],this.setVariableValues({model:this.data.model}),this.config.debug&&this.log("warn","Recived: "+x[0]+": "+x[1]);break;case"_serial":this.data.serial=x[1],this.setVariableValues({serial_nr:this.data.serial}),this.config.debug&&this.log("warn","Recived: "+x[0]+": "+x[1]);break;case"_version":this.data.version=x[1],this.setVariableValues({version:this.data.version}),this.config.debug&&this.log("warn","Recived: "+x[0]+": "+x[1]),1==this.data.startupAPI&&this.satelliteAPI.bind(this)()}}))),e.includes("_isSleeping")&&(this.config.debug&&this.log("warn","Recived: "+e),"1"==e.split("_isSleeping=")?data.sleep="True":data.sleep="False",this.data=data),e.includes("_state")||e.includes("State")){if(e.includes("State"))switch(state=String(e.split("State")[1]).split("="),reg=state[0],val=state[1],reg){case"P":data.state.P=val;break;case"Q":data.state.Q=val;break;case"R":data.state.R=val;break;case"S":data.state.S=val;break;default:data.state.Master=val}this.config.debug&&this.log("warn","Recived State: "+e),this.log("debug","Recived State: "+e),this.data=data;for(let e=0;e<this.sdData.keys.length;e++){let t=e+1,n=String(this.config["btn_"+t]),s=n,i=n,r=this.sdData.keys[e];0!=n&&""!=n&&(n.includes(",")&&(n=n.split(","),s=n[0],i=n[1]),""!==r.color&&(192==r.color?(this.sendCommand("HWCc#"+s+"=128"),1==r.pressed?this.sendCommand("HWC#"+s+"=36"):1==this.config.autoDim?this.sendCommand("HWC#"+s+"=5"):this.sendCommand("HWC#"+s+"=0")):(this.sendCommand("HWCc#"+s+"="+r.color),1==r.pressed?this.sendCommand("HWC#"+s+"=36"):this.sendCommand("HWC#"+s+"=5"))),""!==r.text&&(cmd=r.text,cmd.length>0?(cmd.length>=25&&(x=cmd.split("\\n"),x.length>=3&&(cmd=cmd.replace(" ","\\n")),x.length<=2&&(y=cmd.match(/.{1,24}/g),y.length<=2?cmd=y[0]+"\\n"+y[1]:y.length>=3&&(cmd=y[0]+"\\n"+y[1]+"\\n"+y[2]))),cmd.includes("\\n")?(x=cmd.split("\\n"),2==x.length?this.sendCommand("HWCt#"+i+"=|||Comp Key: "+t+"|1|"+x[0]+"|"+x[1]+"|"):3==x.length?this.sendCommand("HWCt#"+i+"=|||"+x[0]+"|1|"+x[1]+"|"+x[2]+"|"):(cmd=cmd.split("\\n").join(" "),this.sendCommand("HWCt#"+i+"=|||Comp Key: "+t+"|1|"+cmd+"||"))):this.sendCommand("HWCt#"+i+"=|||Comp Key: "+t+"|1|"+cmd+"||")):this.sendCommand("HWCt#"+i+"=|||Comp Key:|1|"+t+"||")))}}if(e.includes("_shift")||e.includes("Shift")){this.config.debug&&this.log("warn","Recived: "+e),this.log("debug","Shift: "+e);for(let e=0;e<this.sdData.keys.length;e++){let t=e+1,n=String(this.config["btn_"+t]),s=n,i=n,r=this.sdData.keys[e];0!=n&&""!=n&&(n.includes(",")&&(n=n.split(","),s=n[0],i=n[1]),""!==r.color&&(192==r.color?(this.sendCommand("HWCc#"+s+"=128"),1==r.pressed?this.sendCommand("HWC#"+s+"=36"):1==this.config.autoDim?this.sendCommand("HWC#"+s+"=5"):this.sendCommand("HWC#"+s+"=0")):(this.sendCommand("HWCc#"+s+"="+r.color),1==r.pressed?this.sendCommand("HWC#"+s+"=36"):this.sendCommand("HWC#"+s+"=5"))),""!==r.text&&(cmd=r.text,cmd.length>0?(cmd.length>=25&&(x=cmd.split("\\n"),x.length>=3&&(cmd=cmd.replace(" ","\\n")),x.length<=2&&(y=cmd.match(/.{1,24}/g),y.length<=2?cmd=y[0]+"\\n"+y[1]:y.length>=3&&(cmd=y[0]+"\\n"+y[1]+"\\n"+y[2]))),cmd.includes("\\n")?(x=cmd.split("\\n"),2==x.length?this.sendCommand("HWCt#"+i+"=|||Comp Key: "+t+"|1|"+x[0]+"|"+x[1]+"|"):3==x.length?this.sendCommand("HWCt#"+i+"=|||"+x[0]+"|1|"+x[1]+"|"+x[2]+"|"):(cmd=cmd.split("\\n").join(" "),this.sendCommand("HWCt#"+i+"=|||Comp Key: "+t+"|1|"+cmd+"||"))):this.sendCommand("HWCt#"+i+"=|||Comp Key: "+t+"|1|"+cmd+"||")):this.sendCommand("HWCt#"+i+"=|||Comp Key:|1|"+t+"||")))}}if(e.includes("Mem")&&(this.config.debug&&this.log("warn","Recived: "+e),this.log("debug","Mem: "+e)),e.includes("Flag")&&(this.config.debug&&this.log("warn","Recived: "+e),this.log("debug","Flag: "+e)),"HWC#"===e.substring(0,4)){if(e=e.substring(4),(t=this.data.hwc).id="",t.type="",t.side="",t.press="",t.val="",e.includes("Up")||e.includes("Down")){if(t.id=String(e.split("HWC#")).split("=")[0],t.type="Button",t.press="false",1==e.includes("Down")&&(t.press="true"),e.includes("."))switch(t.id=String(e.split("HWC#")).split(".")[0],t.type="4-way Button",x=String(e.split(".")[1]).split("=")[0],x){case"1":t.side="Top";break;case"2":t.side="Left";break;case"4":t.side="Bottom";break;case"8":t.side="Right"}}else e.includes("Press")?(t.id=String(e.split("HWC#")).split("=")[0],t.type="Encoder",1==e.includes("Press")&&(t.press="true")):e.includes("Enc")?(t.id=String(e.split("HWC#")).split("=")[0],t.type="Encoder",t.val=parseInt(e.split("Enc:")[1])):e.includes("Abs")?(t.id=String(e.split("HWC#")).split("=")[0],t.type="Fader",t.val=parseInt(String(e.split("=")[1]).split(":")[1])):e.includes("Speed")?(t.id=String(e.split("HWC#")).split("=")[0],t.type="Joystick",t.val=parseInt(String(e.split("=")[1]).split(":")[1])):t.type="Button LED Update";let n={};for(let e=0;e<this.json_data.hwc.length;e++)this.json_data.hwc[e].id==t.id&&(n=this.json_data.hwc[e]);if(null!==n.type&&n.type!=={}&&void 0!==n.type){value=0,null!==t.val&&(value=t.val);let e={};e["Hwc_"+t.id]=value,("av"===n.type.in||"ah"===n.type.in||"ar"===n.type.in||"iv"===n.type.in||"ih"===n.type.in||"ir"===n.type.in)&&this.setVariableValues(e)}var t;this.data.hwc=t,this.checkFeedbacks("tieToHwc"),1==this.config.satEnable&&1==this.data.satConnected&&this.hwcToSat(),"Button"!=t.type&&"4-way Button"!=t.type||this.checkFeedbacks("tieToHwc4Way"),"Encoder"!=t.type&&"4-way Button"!=t.type||this.checkFeedbacks("tieToHwcEncoder"),"Joystick"==t.type&&this.checkFeedbacks("tieToHwcJoystick"),this.UpdateVariableDefinitions(this),(t=this.data.hwc).id="",t.type="",t.side="",t.press="",t.val="",this.data.hwc=t}}},4665:(e,t,n)=>{const{InstanceStatus:s}=n(8049);t.tcpClient=function(){var e=this,t=e.config.host,n=e.config.tcpPort,i=e.config.timeout||5e3,r=e.config.refresh||3e4;if(void 0!==e.tcp&&(e.tcp.destroy(),e.pollAPI&&clearInterval(e.pollAPI),e.Refresh&&clearInterval(e.Refresh),delete e.tcp),e.config.host){e.tcp=new e.TCPHelper(t,n),e.tcp.on("status_change",((t,n)=>{e.updateStatus(t,n)})),e.tcp.on("error",(t=>{e.log("debug","Network error",t),e.updateStatus(s.UnknownError,t),e.log("error","Network error: "+t.message),e.pollAPI&&(clearInterval(e.pollAPI),delete e.pollAPI),e.Refresh&&(clearInterval(e.Refresh),delete e.Refresh),e.sendAPI("QUIT"),e.data.satConnected=!1,e.data.startupAPI=!0,void 0!==e.api&&(e.api.destroy(),delete e.api)})),e.tcp.on("connect",(()=>{e.updateStatus(s.Ok),e.data.startup=!1,e.log("debug","Connected to panel: "+t+":"+n),1==e.config.debug&&e.log("warn","Connected to panel: "+t+":"+n),e.sendCommand("PanelTopology?"),e.sendCommand("Clear"),e.pollAPI=setInterval((()=>{e.sendCommand("ping")}),i<100?100:i),e.Refresh=setInterval((()=>{e.checkFeedbacks("tieToHwcLed"),e.checkFeedbacks("tieToLcd");for(let t=0;t<this.sdData.keys.length;t++){let n=t+1,s=String(e.config["btn_"+n]),i=s,r=s;if(0==s||""==s||"undefined"==s)continue;s.includes(",")&&(s=s.split(","),i=s[0],r=s[1]);let o=this.sdData.keys[t];if(0!=s&&""!=s&&null!=o){if(""!==o.color){let t=o.color;192==t?1==e.config.autoDim?(e.sendCommand("HWCc#"+i+"=128"),e.sendCommand("HWC#"+i+"=5")):e.sendCommand("HWC#"+i+"=0"):(e.sendCommand("HWCc#"+i+"="+t),e.sendCommand("HWC#"+i+"=36"))}""!==o.text&&(cmd=o.text,cmd.length>0?(cmd.length>=25&&(x=cmd.split("\\n"),x.length>=3&&(cmd=cmd.replace(" ","\\n")),x.length<=2&&(y=cmd.match(/.{1,24}/g),y.length<=2?cmd=y[0]+"\\n"+y[1]:y.length>=3&&(cmd=y[0]+"\\n"+y[1]+"\\n"+y[2]))),cmd.includes("\\n")?(x=cmd.split("\\n"),2==x.length?e.sendCommand("HWCt#"+r+"=|||Comp Key: "+n+"|1|"+x[0]+"|"+x[1]+"|"):3==x.length?e.sendCommand("HWCt#"+r+"=|||"+x[0]+"|1|"+x[1]+"|"+x[2]+"|"):(cmd=cmd.split("\\n").join(" "),e.sendCommand("HWCt#"+r+"=|||Comp Key: "+n+"|1|"+cmd+"||"))):e.sendCommand("HWCt#"+r+"=|||Comp Key: "+n+"|1|"+cmd+"||")):e.sendCommand("HWCt#"+r+"=|||Comp Key:|1|"+n+"||"))}}}),r<100?100:r),e.sendCommand("list"),e.checkFeedbacks("tieToHwcLed"),e.checkFeedbacks("tieToLcd"),e.sendCommand("encoderPressMode=1")}));let o="";e.tcp.on("data",(t=>{let n=String(t).trim();str_1=n.split("\n");for(let t=0;t<str_1.length;t++)if(o+=str_1[t],o.endsWith("}}}")){let t="";o.split("\n").filter((e=>""!=e)).forEach((n=>{(n.startsWith("_panelTopology_svgbase=")||t.length>0)&&(t+=n,t.includes("_panelTopology_HWC=")&&t.includes("}}}")&&(e.handleJSON.bind(this)(t),t=""))})),o=""}switch(n){case"list":socket.send("\nActivePanel=1\n"),e.log("debug","list - send ActivePanel=1");break;case"ping":socket.send("ack\n"),e.log("debug","ping - send: ack");break;case"ack":e.updateStatus(s.Ok);break;default:str_line=n.split("\n");for(let t=0;t<str_line.length;t++)e.storeData(str_line[t])}}))}return e}},3411:e=>{e.exports=[]},9424:(e,t)=>{t.UpdateVariableDefinitions=async function(e){const t=[];t.push({name:"Device Model",variableId:"model"}),t.push({name:"Serial NR.",variableId:"serial_nr"}),t.push({name:"Firmware Version",variableId:"version"}),e.json_data.hwc.forEach((e=>{null!==e.type.in&&("av"===e.type.in||"ah"===e.type.in||"ar"===e.type.in||"iv"===e.type.in||"ih"===e.type.in||"ir"===e.type.in)&&t.push({name:`Hwc: ${e.id} - ${e.txt}`,variableId:`Hwc_${e.id}`})})),e.setVariableDefinitions(t)}},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},1891:e=>{"use strict";e.exports=require("dgram")},2361:e=>{"use strict";e.exports=require("events")},3292:e=>{"use strict";e.exports=require("fs/promises")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1405:e=>{"use strict";e.exports=require("inspector")},1808:e=>{"use strict";e.exports=require("net")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},2764:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},7359:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.runEntrypoint=void 0;const s=n(7582),i=n(9913),r=s.__importDefault(n(3292)),o=n(2068),a=n(3749);n(5605);const c=n(8221),l=s.__importDefault(n(1017));let u,d=!1;t.runEntrypoint=function(e,t){Promise.resolve().then((async()=>{if(d)throw new Error("runEntrypoint can only be called once");d=!0;const n=process.env.MODULE_MANIFEST;if(!n)throw new Error("Module initialise is missing MODULE_MANIFEST");const s=await r.default.readFile(n),p=JSON.parse(s.toString());if(p.runtime?.api!==i.HostApiNodeJsIpc)throw new Error("Module manifest 'api' mismatch");if(!p.runtime.apiVersion)throw new Error("Module manifest 'apiVersion' missing");let h=p.runtime.apiVersion;if("0.0.0"===h)try{const e=await r.default.readFile(l.default.join(__dirname,"../package.json")),t=JSON.parse(e.toString());"@companion-module/base"===t.name&&(h=t.version)}catch(e){throw new Error("Failed to determine module api version")}if(!process.send)throw new Error("Module is not being run with ipc");console.log(`Starting up module class: ${e.name}`);const f=process.env.CONNECTION_ID;if("string"!=typeof f||!f)throw new Error("Module initialise is missing CONNECTION_ID");const _=process.env.VERIFICATION_TOKEN;if("string"!=typeof _||!_)throw new Error("Module initialise is missing VERIFICATION_TOKEN");const g=process.env.SENTRY_DSN,m=process.env.SENTRY_USERID,y=process.env.SENTRY_COMPANION_VERSION;g&&m&&"https://"==g.substring(0,8)?(console.log("Sentry enabled"),(0,a.init)({dsn:g,release:`${p.name}@${p.version}`,beforeSend:e=>(e.exception&&console.log("sentry","error",e.exception),e)}),(0,a.configureScope)((e=>{e.setUser({id:m}),e.setTag("companion",y)}))):console.log("Sentry disabled");const b=new c.IpcWrapper({},(e=>{process.send(e)}),5e3);process.once("message",(e=>{b.receivedMessage(e)})),u=new e((0,o.literal)({id:f,upgradeScripts:t,_isInstanceBaseProps:!0})),b.sendWithCb("register",{apiVersion:h,connectionId:f,verificationToken:_}).then((()=>{console.log("Module-host accepted registration")}),(e=>{console.error("Module registration failed",e),process.exit(11)}))})).catch((e=>{console.error("Failed to startup module:"),console.error(e.stack||e.message),process.exit(1)}))}},1972:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UDPHelper=t.TelnetHelper=t.TCPHelper=void 0;var s=n(9159);Object.defineProperty(t,"TCPHelper",{enumerable:!0,get:function(){return s.TCPHelper}});var i=n(6226);Object.defineProperty(t,"TelnetHelper",{enumerable:!0,get:function(){return i.TelnetHelper}});var r=n(8473);Object.defineProperty(t,"UDPHelper",{enumerable:!0,get:function(){return r.UDPHelper}})},9159:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TCPHelper=void 0;const s=n(7582).__importDefault(n(1808)),i=n(6729),r=n(609);class o extends i.EventEmitter{#e;#t;_socket;#n;#s=!1;#i=!1;#r=!1;#o;#a;get isConnected(){return this.#s}get isConnecting(){return this.#i}get isDestroyed(){return this.#r}constructor(e,t,n){super(),this.#e=e,this.#t=t,this.#n={reconnect_interval:2e3,reconnect:!0,...n},this._socket=new s.default.Socket,this._socket.setKeepAlive(!0),this._socket.setNoDelay(!0),this._socket.on("error",(e=>{this.#i=!1,this.#s=!1,this.#n.reconnect&&this.#c(),this.#l(r.InstanceStatus.UnknownError,e.message),this.emit("error",e)})),this._socket.on("ready",(()=>{this.#s=!0,this.#i=!1,this.#l(r.InstanceStatus.Ok),this.emit("connect")})),this._socket.on("end",(()=>{this.#s=!1,this.#l(r.InstanceStatus.Disconnected),!this.#i&&this.#n.reconnect&&this.#c(),this.emit("end")})),this._socket.on("data",(e=>this.emit("data",e))),this._socket.on("drain",(()=>this.emit("drain"))),setImmediate((()=>this.connect())),setTimeout((()=>{this.#r||this.listenerCount("error")||console.error(`Danger: TCP client for ${this.#e}:${this.#t} is missing an error handler!`)}),5e3)}connect(){if(this.#r)throw new Error("Cannot connect destroyed socket");return!this.#i&&(this.#i=!0,this._socket.connect(this.#t,this.#e),!0)}async send(e){if(this.#r||this._socket.destroyed)throw new Error("Cannot write to destroyed socket");if(!e||!e.length)throw new Error("No message to send");if(!this.#s)return!1;try{return new Promise(((t,n)=>{this._socket.write(e,(e=>{e?n(e):t(!0)}))}))}catch(e){this.#s=!1;const t=e instanceof Error?e:new Error(`${e}`);throw this.#l(r.InstanceStatus.UnknownError,t.message),this.emit("error",t),t}}destroy(){this.#r=!0,void 0!==this.#a&&clearTimeout(this.#a),this._socket.removeAllListeners(),this.removeAllListeners(),this._socket.destroy()}#c(){void 0!==this.#a&&clearTimeout(this.#a),this.#a=setTimeout((()=>{this.#a=void 0,this.#l(r.InstanceStatus.Connecting),this.connect()}),this.#n.reconnect_interval)}#l(e,t){this.#o!=e&&(this.#o=e,this.emit("status_change",e,t))}}t.TCPHelper=o},6226:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TelnetHelper=void 0;const s=n(7582).__importDefault(n(6729)),i=n(2781),r=n(9159);class o extends s.default{#u;#d;get isConnected(){return this.#u.isConnected}get isConnecting(){return this.#u.isConnecting}get isDestroyed(){return this.#u.isDestroyed}constructor(e,t,n){super(),this.#u=new r.TCPHelper(e,t,n),this.#d=new a,this.#u._socket.pipe(this.#d),this.#u.on("connect",(()=>this.emit("connect"))),this.#u.on("end",(()=>this.emit("end"))),this.#u.on("error",(e=>this.emit("error",e))),this.#u.on("status_change",((e,t)=>this.emit("status_change",e,t))),this.#d.on("iac",((e,t)=>this.emit("iac",e,t))),this.#d.on("sb",(e=>this.emit("sb",e))),this.#d.on("data",(e=>this.emit("data",e))),this.#d.on("drain",(()=>this.emit("drain"))),setTimeout((()=>{this.isDestroyed||this.listenerCount("error")||console.error(`Danger: Telnet client for ${e}:${t} is missing an error handler!`)}),5e3)}connect(){return this.#u.connect()}async send(e){return this.#u.send(e)}destroy(){this.#u.destroy(),this.#d.removeAllListeners(),this.#d.destroy()}}t.TelnetHelper=o;class a extends i.Transform{#p;#h;#f;constructor(e){super(e),this.#p=Buffer.alloc(0),this.#h=Buffer.alloc(0),this.#f=0}_transform(e,t,n){for(let t=0;t<e.length;++t)this.#_(e[t]);const s=this.#g();s.length&&this.push(s),n()}#_(e){if(0===this.#f){if(255===e)return void(this.#f=255);this.#p=Buffer.concat([this.#p,Buffer.from([e])])}else if(255===this.#f)switch(e){case 250:case 251:case 252:case 253:case 254:this.#f=e;break;default:this.#f=0}else{if(this.#f>=251&&this.#f<=254){let t;switch(this.#f){case 251:t="WILL";break;case 252:t="WONT";break;case 253:t="DO";break;case 254:t="DONT";break;default:return}return this.emit("iac",t,e),void(this.#f=0)}if(250===this.#f){if(240===e)return this.emit("sb",this.#h),this.#f=0,void(this.#h=Buffer.alloc(0));this.#h=Buffer.concat([this.#h,Buffer.from([e])])}}}#g(){const e=this.#p;return this.#p=Buffer.alloc(0),e}}},8473:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UDPHelper=void 0;const s=n(7582).__importDefault(n(1891)),i=n(6729),r=n(609);class o extends i.EventEmitter{#e;#t;#m;#n;#r=!1;#o;get isDestroyed(){return this.#r}constructor(e,t,n){super(),this.#e=e,this.#t=t,this.#n={...n},this.#m=s.default.createSocket("udp4");try{this.#m.bind(this.#n.bind_port||0,this.#n.bind_ip)}catch(e){throw new Error(`Unable to bind to ip/port: ${this.#n.bind_ip}:${this.#n.bind_port}`)}this.#n.broadcast&&this.#m.setBroadcast(!0),void 0!==this.#n.ttl&&this.#m.setTTL(this.#n.ttl),void 0!==this.#n.multicast_ttl&&this.#m.setMulticastTTL(this.#n.multicast_ttl),this.#m.on("error",(e=>{this.#l(r.InstanceStatus.UnknownError,e.message),this.emit("error",e)})),this.#m.on("listening",(()=>{this.#n.multicast_interface&&this.#m.setMulticastInterface(this.#n.multicast_interface),this.#l(r.InstanceStatus.Ok),this.emit("listening")})),this.#m.on("message",(e=>this.emit("data",e))),setTimeout((()=>{this.#r||this.listenerCount("error")||console.error(`Danger: UDP socket for ${this.#e}:${this.#t} is missing an error handler!`)}),5e3)}async send(e){if(this.#r)throw new Error("Cannot write to destroyed socket");if(!e||!e.length)throw new Error("No message to send");return new Promise(((t,n)=>{this.#m.send(e,this.#t,this.#e,(e=>{e?n(e):t()}))}))}destroy(){this.#r=!0,this.#m.removeAllListeners(),this.#m.close(),this.removeAllListeners()}#l(e,t){this.#o!=e&&(this.#o=e,this.emit("status_change",e,t))}}t.UDPHelper=o},8221:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IpcWrapper=void 0;const s=n(7582),i=n(4300),r=n(2068),o=s.__importDefault(n(2559));t.IpcWrapper=class{#y;#b;#E;#v={};constructor(e,t,n){this.#y=e,this.#b=t,this.#E=n}async sendWithCb(e,t,n,s=0){s<=0&&(s=this.#E);const r={timeout:void 0,resolve:()=>null,reject:()=>null},a=new Promise(((e,t)=>{r.resolve=e,r.reject=t})),c=(0,i.nanoid)();this.#v[c]=r,this.#b({direction:"call",name:String(e),payload:o.default.stringify(t),callbackId:c});const l=new Error("Call timed out");return r.timeout=setTimeout((()=>{r.reject(n?n():l),delete this.#v[c]}),s),a}sendWithNoCb(e,t){this.#b({direction:"call",name:String(e),payload:o.default.stringify(t),callbackId:void 0})}receivedMessage(e){const t=e;switch(e.direction){case"call":{const t=this.#y[e.name];if(!t)return void(e.callbackId&&this.#b({direction:"response",callbackId:e.callbackId,success:!1,payload:o.default.stringify({message:`Unknown command "${e.name}"`})}));t(e.payload?o.default.parse(e.payload):void 0).then((t=>{e.callbackId&&this.#b({direction:"response",callbackId:e.callbackId,success:!0,payload:o.default.stringify(t)})}),(t=>{e.callbackId&&this.#b({direction:"response",callbackId:e.callbackId,success:!1,payload:t instanceof Error?JSON.stringify(t,Object.getOwnPropertyNames(t)):o.default.stringify(t)})}));break}case"response":{if(!e.callbackId)return void console.error("Ipc: Response message has no callbackId");const t=this.#v[e.callbackId];if(delete this.#v[e.callbackId],!t)return;clearTimeout(t.timeout);const n=e.payload?o.default.parse(e.payload):void 0;if(e.success)t.resolve(n);else{let e=n;n&&"message"in n&&(e=new Error(n.message),n.stack&&(e.stack=n.stack)),t.reject(e)}break}default:(0,r.assertNever)(e),console.error(`Ipc: Message of unknown direction "${t.direction}"`)}}}},9913:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HostApiNodeJsIpc=void 0,t.HostApiNodeJsIpc="nodejs-ipc"},8049:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.runEntrypoint=t.assertNever=t.splitRgb=t.combineRgb=t.literal=void 0;const s=n(7582);s.__exportStar(n(7517),t),s.__exportStar(n(4911),t),s.__exportStar(n(2764),t);var i=n(2068);Object.defineProperty(t,"literal",{enumerable:!0,get:function(){return i.literal}}),Object.defineProperty(t,"combineRgb",{enumerable:!0,get:function(){return i.combineRgb}}),Object.defineProperty(t,"splitRgb",{enumerable:!0,get:function(){return i.splitRgb}}),Object.defineProperty(t,"assertNever",{enumerable:!0,get:function(){return i.assertNever}}),s.__exportStar(n(1972),t);var r=n(7359);Object.defineProperty(t,"runEntrypoint",{enumerable:!0,get:function(){return r.runEntrypoint}})},4391:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionManager=void 0;const s=n(2557);function i(e){return{id:e.id,actionId:e.actionId,controlId:e.controlId,options:e.options}}t.ActionManager=class{#S;#k;#I;#w=new Map;#C=new Map;constructor(e,t,n){this.#S=e,this.#k=t,this.#I=n}async handleExecuteAction(e){const t=this.#w.get(e.action.actionId);if(!t)throw new Error(`Unknown action: ${e.action.actionId}`);const n={parseVariablesInString:async t=>(await this.#S({text:t,controlId:e.action.controlId,actionInstanceId:e.action.id,feedbackInstanceId:void 0})).text};await t.callback({id:e.action.id,actionId:e.action.actionId,controlId:e.action.controlId,options:e.action.options,surfaceId:e.surfaceId??e.deviceId,_deviceId:e.surfaceId??e.deviceId,_page:e.action.page,_bank:e.action.bank},n)}handleUpdateActions(e){for(const[t,n]of Object.entries(e)){const e=this.#C.get(t);if(e){const t=this.#w.get(e.actionId);if(t?.unsubscribe){const n={parseVariablesInString:async t=>(await this.#S({text:t,controlId:e.controlId,actionInstanceId:e.id,feedbackInstanceId:void 0})).text};Promise.resolve(t.unsubscribe(i(e),n)).catch((t=>{this.#I("error",`Action unsubscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}if(!n||n.disabled)this.#C.delete(t);else{this.#C.set(t,n);const e=this.#w.get(n.actionId);if(e?.subscribe){const t={parseVariablesInString:async e=>(await this.#S({text:e,controlId:n.controlId,actionInstanceId:n.id,feedbackInstanceId:void 0})).text};Promise.resolve(e.subscribe(i(n),t)).catch((e=>{this.#I("error",`Action subscribe failed: ${JSON.stringify(n)} - ${e?.message??e} ${e?.stack}`)}))}}}}async handleLearnAction(e){const t=this.#w.get(e.action.actionId);if(t&&t.learn){const n={parseVariablesInString:async t=>(await this.#S({text:t,controlId:e.action.controlId,actionInstanceId:e.action.id,feedbackInstanceId:void 0})).text};return{options:await t.learn({id:e.action.id,actionId:e.action.actionId,controlId:e.action.controlId,options:e.action.options,surfaceId:void 0,_deviceId:void 0,_page:e.action.page,_bank:e.action.bank},n)}}return{options:void 0}}setActionDefinitions(e){const t=[];this.#w.clear();for(const[n,i]of Object.entries(e))i&&(t.push({id:n,name:i.name,description:i.description,options:(0,s.serializeIsVisibleFn)(i.options),hasLearn:!!i.learn}),this.#w.set(n,i));this.#k({actions:t})}_getAllActions(){return Array.from(this.#C.values()).map((e=>({id:e.id,actionId:e.actionId,controlId:e.controlId,options:e.options})))}subscribeActions(e){let t=Array.from(this.#C.values());const n=new Set(e);n.size&&(t=t.filter((e=>n.has(e.actionId))));for(const e of t){const t=this.#w.get(e.actionId);if(t?.subscribe){const n={parseVariablesInString:async t=>(await this.#S({text:t,controlId:e.controlId,actionInstanceId:e.id,feedbackInstanceId:void 0})).text};Promise.resolve(t.subscribe(i(e),n)).catch((t=>{this.#I("error",`Action subscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}}unsubscribeActions(e){let t=Array.from(this.#C.values());const n=new Set(e);n.size&&(t=t.filter((e=>n.has(e.actionId))));for(const e of t){const t=this.#w.get(e.actionId);if(t&&t.unsubscribe){const n={parseVariablesInString:async t=>(await this.#S({text:t,controlId:e.controlId,actionInstanceId:e.id,feedbackInstanceId:void 0})).text};Promise.resolve(t.unsubscribe(i(e),n)).catch((t=>{this.#I("error",`Action unsubscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}}}},2557:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isInstanceBaseProps=t.serializeIsVisibleFn=void 0,t.serializeIsVisibleFn=function(e){return(e??[]).map((e=>"isVisible"in e&&"function"==typeof e.isVisible?{...e,isVisibleFn:e.isVisible.toString(),isVisible:void 0}:{...e,isVisibleFn:void 0}))},t.isInstanceBaseProps=function(e){const t=e;return"object"==typeof t&&"string"==typeof t.id&&!0===t._isInstanceBaseProps}},7550:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FeedbackManager=void 0;const s=n(7582),i=n(2557),r=s.__importDefault(n(3453));function o(e,t){return{type:e,id:t.id,feedbackId:t.feedbackId,controlId:t.controlId,options:t.options}}t.FeedbackManager=class{#S;#x;#T;#I;#D=new Map;#R=new Map;#A=new Map;#P=new Map;#O;get parseVariablesContext(){return this.#O}constructor(e,t,n,s){this.#S=e,this.#x=t,this.#T=n,this.#I=s}getDefinitionIds(){return Array.from(this.#D.keys())}getInstanceIds(){return Array.from(this.#R.keys())}handleUpdateFeedbacks(e){for(const[t,n]of Object.entries(e)){const e=this.#R.get(t);if(e){const t=this.#D.get(e.feedbackId);if(t?.unsubscribe){const n={parseVariablesInString:async t=>(await this.#S({text:t,controlId:e.controlId,actionInstanceId:void 0,feedbackInstanceId:e.id})).text};Promise.resolve(t.unsubscribe(o(t.type,e),n)).catch((t=>{this.#I("error",`Feedback unsubscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}if(!n||n.disabled)this.#R.delete(t);else{this.#R.set(t,{...n,referencedVariables:null});const e=this.#D.get(n.feedbackId);if(e?.subscribe){const t={parseVariablesInString:async e=>(await this.#S({text:e,controlId:n.controlId,actionInstanceId:void 0,feedbackInstanceId:n.id})).text};Promise.resolve(e.subscribe(o(e.type,n),t)).catch((e=>{this.#I("error",`Feedback subscribe failed: ${JSON.stringify(n)} - ${e?.message??e} ${e?.stack}`)}))}this.#N(t)}}}async handleLearnFeedback(e){const t=this.#D.get(e.feedback.feedbackId);if(t&&t.learn){const n={parseVariablesInString:async t=>(await this.#S({text:t,controlId:e.feedback.controlId,actionInstanceId:void 0,feedbackInstanceId:e.feedback.id})).text};return{options:await t.learn({id:e.feedback.id,feedbackId:e.feedback.feedbackId,controlId:e.feedback.controlId,options:e.feedback.options,type:t.type},n)}}return{options:void 0}}handleVariablesChanged(e){if(!e.variablesIds.length)return;const t=new Set(e.variablesIds);for(const t of this.#P.values())for(const n of e.variablesIds)t.changedVariables.add(n);const n=new Set;for(const e of this.#R.values())if(!this.#P.has(e.id)&&e.referencedVariables)for(const s of e.referencedVariables)if(t.has(s)){n.add(e.id);break}for(const e of n)setImmediate((()=>{this.#N(e)}))}#N(e){const t=this.#P.get(e);if(t)return void(t.needsRecheck=!0);const n=this.#R.get(e);if(!n)return;const s=n,i={needsRecheck:!1,changedVariables:new Set};this.#P.set(e,i),Promise.resolve().then((async()=>{const t=this.#D.get(s.feedbackId);let n;const i=new Set;if(t){this.#O=`Feedback ${s.feedbackId} (${e})`;const r={parseVariablesInString:async t=>{const n=await this.#S({text:t,controlId:s.controlId,actionInstanceId:void 0,feedbackInstanceId:e});if(n.variableIds&&n.variableIds.length)for(const e of n.variableIds)i.add(e);return n.text}};n="boolean"===t.type?t.callback({...o("boolean",s),type:"boolean",_rawBank:s.rawBank},r):t.callback({...o("advanced",s),type:"advanced",image:s.image,_page:s.page,_bank:s.bank,_rawBank:s.rawBank},r),this.#O=void 0}const r=await n;this.#A.set(e,{id:e,controlId:s.controlId,value:r}),this.#U(),s.referencedVariables=i.size>0?Array.from(i):null})).catch((e=>{console.error(`Feedback check failed: ${JSON.stringify(s)} - ${e?.message??e} ${e?.stack}`)})).finally((()=>{this.#O=void 0,this.#P.delete(e);let t=!1;if(s.referencedVariables)for(const e of s.referencedVariables)if(i.changedVariables.has(e)){t=!0;break}(t||i.needsRecheck)&&setImmediate((()=>{this.#N(e)}))}))}#U=(0,r.default)((()=>{const e=this.#A;this.#A=new Map,e.size>0&&this.#x({values:Array.from(e.values())})}),{wait:5,maxWait:25});setFeedbackDefinitions(e){const t=[];this.#D.clear();for(const[n,s]of Object.entries(e))s&&(t.push({id:n,name:s.name,description:s.description,options:(0,i.serializeIsVisibleFn)(s.options),type:s.type,defaultStyle:"defaultStyle"in s?s.defaultStyle:void 0,hasLearn:!!s.learn}),this.#D.set(n,s));this.#T({feedbacks:t})}checkFeedbacks(e){const t=new Set(e);for(const[e,n]of this.#R.entries())this.#D.get(n.feedbackId)&&(0===t.size||t.has(n.feedbackId))&&this.#N(e)}checkFeedbacksById(e){for(const t of e)this.#N(t)}_getAllFeedbacks(){return Array.from(this.#R.values()).map((e=>({id:e.id,feedbackId:e.feedbackId,controlId:e.controlId,options:e.options})))}subscribeFeedbacks(e){let t=Array.from(this.#R.values());const n=new Set(e);n.size&&(t=t.filter((e=>n.has(e.feedbackId))));for(const e of t){const t=this.#D.get(e.feedbackId);if(t?.subscribe){const n={parseVariablesInString:async t=>(await this.#S({text:t,controlId:e.controlId,actionInstanceId:void 0,feedbackInstanceId:e.id})).text};Promise.resolve(t.subscribe(o(t.type,e),n)).catch((t=>{this.#I("error",`Feedback subscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}}unsubscribeFeedbacks(e){let t=Array.from(this.#R.values());const n=new Set(e);n.size&&(t=t.filter((e=>n.has(e.feedbackId))));for(const e of t){const t=this.#D.get(e.feedbackId);if(t&&t.unsubscribe){const n={parseVariablesInString:async t=>(await this.#S({text:t,controlId:e.controlId,actionInstanceId:void 0,feedbackInstanceId:e.id})).text};Promise.resolve(t.unsubscribe(o(t.type,e),n)).catch((t=>{this.#I("error",`Feedback unsubscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}}}},1806:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.runThroughUpgradeScripts=void 0;const s=n(2068);function i(e){return JSON.parse(JSON.stringify(e))}t.runThroughUpgradeScripts=function(e,t,n,r,o,a){const c=new Map,l=e=>{let t=c.get(e);return t||(t={actions:[],feedbacks:[],config:!1},c.set(e,t)),t};for(const t of Object.values(e)){const e=t?.upgradeIndex??n;t&&"number"==typeof e&&l(e).actions.push(t.id)}for(const e of Object.values(t)){const t=e?.upgradeIndex??n;e&&"number"==typeof t&&l(t).feedbacks.push(e.id)}if(!a)for(let e=n??-1;e<r.length;e++)l(e).config=!0;const u={},d={};let p;if(c.size>0){const a=Array.from(c.keys()).sort(),l=Math.min(...a,n??-1)+1,h=[],f=[],_=r.length;for(let n=l;n<_;n++){const a=c.get(n-1);a&&(h.push(...a.actions),f.push(...a.feedbacks));const l=!!a?.config;if(!l&&0===h.length&&0===f.length)continue;const _=p??o,g=(0,r[n])({currentConfig:i(_)},{config:l?_:null,actions:h.map((t=>{const n=e[t];if(n)return(0,s.literal)({id:n.id,controlId:n.controlId,actionId:n.actionId,options:void 0!==n.options?i(n.options):{}})})).filter((e=>!!e)),feedbacks:f.map((e=>{const n=t[e];if(n)return(0,s.literal)({id:n.id,controlId:n.controlId,feedbackId:n.feedbackId,options:void 0!==n.options?i(n.options):{}})})).filter((e=>!!e))});l&&g.updatedConfig&&(p=g.updatedConfig);for(const t of g.updatedActions)if(t){const n=e[t.id];n&&(n.actionId=t.actionId,n.options=t.options,d[t.id]=n)}for(const e of g.updatedFeedbacks)if(e){const n=t[e.id];n&&(n.feedbackId=e.feedbackId,n.options=e.options,u[e.id]={...n,style:u[e.id]?.style??e.style})}}for(const[t,n]of Object.entries(e))d[t]||"number"!=typeof n?.upgradeIndex||(d[t]=n);for(const[e,n]of Object.entries(t))u[e]||"number"!=typeof n?.upgradeIndex||(u[e]=n)}return{updatedActions:d,updatedFeedbacks:u,updatedConfig:p}}},7517:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateManifest=void 0;const s=n(7582).__importDefault(n(4618));t.validateManifest=function(e){if(!(0,s.default)(e)){const e=s.default.errors;if(!e)throw new Error("Manifest failed validation with unknown reason");throw new Error(`Manifest validation failed: ${JSON.stringify(e)}`)}}},8322:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5203:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InstanceBase=void 0;const s=n(7582),i=n(2068),r=s.__importDefault(n(5860)),o=n(2557),a=n(1806),c=n(7550),l=n(8221),u=n(4391);t.InstanceBase=class{#B;#Y;id;#$=new r.default({concurrency:1});#G=!1;#j=!1;#M={};#F;#V;#q=new Map;#L=new Map;#n;#H;get instanceOptions(){return this.#n}get label(){return this.#H}constructor(e){if(!(0,o.isInstanceBaseProps)(e)||!e._isInstanceBaseProps)throw new Error("Module instance is being constructed incorrectly. Make sure you aren't trying to do this manually");this.#n={disableVariableValidation:!1},this.#B=new l.IpcWrapper({init:this._handleInit.bind(this),destroy:this._handleDestroy.bind(this),updateConfigAndLabel:this._handleConfigUpdateAndLabel.bind(this),updateConfig:async()=>{},executeAction:this._handleExecuteAction.bind(this),updateFeedbacks:this._handleUpdateFeedbacks.bind(this),updateActions:this._handleUpdateActions.bind(this),getConfigFields:this._handleGetConfigFields.bind(this),handleHttpRequest:this._handleHttpRequest.bind(this),learnAction:this._handleLearnAction.bind(this),learnFeedback:this._handleLearnFeedback.bind(this),startStopRecordActions:this._handleStartStopRecordActions.bind(this),variablesChanged:this._handleVariablesChanged.bind(this)},(e=>{process.send(e)}),5e3),process.on("message",(e=>{this.#B.receivedMessage(e)})),this.#F=new u.ActionManager((async e=>this.#B.sendWithCb("parseVariablesInString",e)),(e=>this.#B.sendWithNoCb("setActionDefinitions",e)),this.log.bind(this)),this.#V=new c.FeedbackManager((async e=>this.#B.sendWithCb("parseVariablesInString",e)),(e=>this.#B.sendWithNoCb("updateFeedbackValues",e)),(e=>this.#B.sendWithNoCb("setFeedbackDefinitions",e)),this.log.bind(this)),this.#Y=e.upgradeScripts,this.id=e.id,this.#H=e.id,this.log("debug","Initializing")}async _handleInit(e){return this.#$.add((async()=>{if(this.#G)throw new Error("Already initialized");const t=e.actions,n=e.feedbacks;if(this.#M=e.config,this.#H=e.label,e.isFirstInit){const t={},n=this.getConfigFields();for(const e of n)"default"in e&&(t[e.id]=e.default);this.#M=t,this.saveConfig(this.#M),e.lastUpgradeIndex=this.#Y.length-1}const{updatedActions:s,updatedFeedbacks:i,updatedConfig:r}=(0,a.runThroughUpgradeScripts)(t,n,e.lastUpgradeIndex,this.#Y,this.#M,!1);this.#M=r??this.#M;const o=this.#B.sendWithCb("upgradedItems",{updatedActions:s,updatedFeedbacks:i});try{await this.init(this.#M,!!e.isFirstInit),this.#G=!0}catch(e){throw console.trace(`Init failed: ${e}`),e}finally{await o}return setImmediate((()=>{this._handleUpdateActions({actions:t},!0).catch((e=>{this.log("error",`Receive actions failed: ${e}`)})),this._handleUpdateFeedbacks({feedbacks:n},!0).catch((e=>{this.log("error",`Receive feedbacks failed: ${e}`)}))})),{hasHttpHandler:"function"==typeof this.handleHttpRequest,hasRecordActionsHandler:"function"==typeof this.handleStartStopRecordActions,newUpgradeIndex:this.#Y.length-1,updatedConfig:this.#M}}))}async _handleDestroy(){await this.#$.add((async()=>{if(!this.#G)throw new Error("Not initialized");await this.destroy(),this.#G=!1}))}async _handleConfigUpdateAndLabel(e){await this.#$.add((async()=>{if(!this.#G)throw new Error("Not initialized");this.#H=e.label,this.#M=e.config,await this.configUpdated(this.#M)}))}async _handleExecuteAction(e){return this.#F.handleExecuteAction(e)}async _handleUpdateFeedbacks(e,t){if(!t){const t=(0,a.runThroughUpgradeScripts)({},e.feedbacks,null,this.#Y,this.#M,!0);this.#B.sendWithCb("upgradedItems",{updatedActions:t.updatedActions,updatedFeedbacks:t.updatedFeedbacks}).catch((e=>{this.log("error",`Failed to save upgraded feedbacks: ${e}`)}))}this.#V.handleUpdateFeedbacks(e.feedbacks)}async _handleUpdateActions(e,t){if(!t){const t=(0,a.runThroughUpgradeScripts)(e.actions,{},null,this.#Y,this.#M,!0);this.#B.sendWithCb("upgradedItems",{updatedActions:t.updatedActions,updatedFeedbacks:t.updatedFeedbacks}).catch((e=>{this.log("error",`Failed to save upgraded actions: ${e}`)}))}this.#F.handleUpdateActions(e.actions)}async _handleGetConfigFields(e){return{fields:(0,o.serializeIsVisibleFn)(this.getConfigFields())}}async _handleHttpRequest(e){if(!this.handleHttpRequest)throw new Error("handleHttpRequest is not supported!");return{response:await this.handleHttpRequest(e.request)}}async _handleLearnAction(e){return this.#F.handleLearnAction(e)}async _handleLearnFeedback(e){return this.#V.handleLearnFeedback(e)}async _handleStartStopRecordActions(e){if(e.recording){if(this.#j)return}else if(!this.#j)return;if(!this.handleStartStopRecordActions)throw this.#j=!1,new Error("Recording actions is not supported by this module!");this.#j=e.recording,this.handleStartStopRecordActions(this.#j)}async _handleVariablesChanged(e){this.#V.handleVariablesChanged(e)}saveConfig(e){this.#M=e,this.#B.sendWithNoCb("saveConfig",{config:e})}setActionDefinitions(e){this.#F.setActionDefinitions(e)}setFeedbackDefinitions(e){this.#V.setFeedbackDefinitions(e)}setPresetDefinitions(e){const t=[];for(const[n,s]of Object.entries(e))s&&t.push({...s,id:n});this.#B.sendWithNoCb("setPresetDefinitions",{presets:t})}setVariableDefinitions(e){const t=[];this.#q.clear();for(const n of e)t.push({id:n.variableId,name:n.name}),this.#q.set(n.variableId,n),this.#L.has(n.variableId)||this.#L.set(n.variableId,"");if(!this.#n.disableVariableValidation){const e=new Set(this.#q.keys());for(const t of this.#L.keys())e.has(t)||this.#L.delete(t)}this.#B.sendWithNoCb("setVariableDefinitions",{variables:t})}setVariableValues(e){const t=[];for(const[n,s]of Object.entries(e))this.#n.disableVariableValidation?(void 0===s?this.#L.delete(n):this.#L.set(n,s),t.push({id:n,value:s})):this.#q.has(n)?(this.#L.set(n,s??""),t.push({id:n,value:s??""})):t.push({id:n,value:void 0});this.#B.sendWithNoCb("setVariableValues",{newValues:t})}getVariableValue(e){return this.#L.get(e)}async parseVariablesInString(e){const t=this.#V.parseVariablesContext;return t&&this.log("debug",`parseVariablesInString called while in: ${t}. You should use the parseVariablesInString provided to the callback instead`),(await this.#B.sendWithCb("parseVariablesInString",{text:e,controlId:void 0,actionInstanceId:void 0,feedbackInstanceId:void 0})).text}checkFeedbacks(...e){this.#V.checkFeedbacks(e)}checkFeedbacksById(...e){this.#V.checkFeedbacksById(e)}_getAllActions(){return this.#F._getAllActions()}subscribeActions(...e){this.#F.subscribeActions(e)}unsubscribeActions(...e){this.#F.unsubscribeActions(e)}_getAllFeedbacks(){return this.#V._getAllFeedbacks()}subscribeFeedbacks(...e){this.#V.subscribeFeedbacks(e)}unsubscribeFeedbacks(...e){this.#V.unsubscribeFeedbacks(e)}recordAction(e,t){if(!this.#j)throw new Error("Not currently recording actions");this.#B.sendWithNoCb("recordAction",{uniquenessId:t??null,actionId:e.actionId,options:e.options})}setCustomVariableValue(e,t){this.#B.sendWithNoCb("setCustomVariable",{customVariableId:e,value:t})}oscSend(e,t,n,s){this.#B.sendWithNoCb("send-osc",(0,i.literal)({host:e,port:t,path:n,args:s}))}updateStatus(e,t){this.#B.sendWithNoCb("set-status",(0,i.literal)({status:e,message:t??null}))}log(e,t){this.#B.sendWithNoCb("log-message",(0,i.literal)({level:e,message:t}))}}},9051:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},609:(e,t)=>{"use strict";var n,s;Object.defineProperty(t,"__esModule",{value:!0}),t.Regex=t.InstanceStatus=void 0,(s=t.InstanceStatus||(t.InstanceStatus={})).Ok="ok",s.Connecting="connecting",s.Disconnected="disconnected",s.ConnectionFailure="connection_failure",s.BadConfig="bad_config",s.UnknownError="unknown_error",s.UnknownWarning="unknown_warning",(n=t.Regex||(t.Regex={})).IP="/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/",n.HOSTNAME="/^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]*[a-zA-Z0-9])\\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9-]*[A-Za-z0-9])$/",n.BOOLEAN="/^(true|false|0|1)$/i",n.PORT="/^([1-9]|[1-8][0-9]|9[0-9]|[1-8][0-9]{2}|9[0-8][0-9]|99[0-9]|[1-8][0-9]{3}|9[0-8][0-9]{2}|99[0-8][0-9]|999[0-9]|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-4])$/",n.PERCENT="/^(100|[0-9]|[0-9][0-9])$/",n.FLOAT="/^([0-9]*\\.)?[0-9]+$/",n.SIGNED_FLOAT="/^[+-]?([0-9]*\\.)?[0-9]+$/",n.FLOAT_OR_INT="/^([0-9]+)(\\.[0-9]+)?$/",n.NUMBER="/^\\d+$/",n.SIGNED_NUMBER="/^[+-]?\\d+$/",n.SOMETHING="/^.+$/",n.TIMECODE="/^(0*[0-9]|1[0-9]|2[0-4]):(0*[0-9]|[1-5][0-9]|60):(0*[0-9]|[1-5][0-9]|60):(0*[0-9]|[12][0-9]|30)$/"},4334:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2490:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4911:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=n(7582);s.__exportStar(n(8322),t),s.__exportStar(n(5203),t),s.__exportStar(n(9051),t),s.__exportStar(n(609),t),s.__exportStar(n(4334),t),s.__exportStar(n(2490),t),s.__exportStar(n(3646),t),s.__exportStar(n(3558),t),s.__exportStar(n(4788),t),s.__exportStar(n(521),t),s.__exportStar(n(6870),t)},3646:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3558:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4788:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},521:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CreateConvertToBooleanFeedbackUpgradeScript=t.EmptyUpgradeScript=void 0,t.EmptyUpgradeScript=()=>({updatedConfig:null,updatedActions:[],updatedFeedbacks:[]}),t.CreateConvertToBooleanFeedbackUpgradeScript=function(e){return(t,n)=>{const s=[];for(const t of n.feedbacks){let n=e[t.feedbackId];if(!0===n&&(n={bg:"bgcolor",bgcolor:"bgcolor",fg:"color",color:"color",png64:"png64",png:"png64"}),n){t.style||(t.style={});for(const[e,i]of Object.entries(n))void 0!==t.options[e]&&(t.style[i]=t.options[e],delete t.options[e],s.push(t))}}return{updatedConfig:null,updatedActions:[],updatedFeedbacks:s}}}},6870:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2068:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.splitRgb=t.combineRgb=t.assertNever=t.literal=void 0,t.literal=function(e){return e},t.assertNever=function(e){},t.combineRgb=function(e,t,n){return(255&e)<<16|(255&t)<<8|255&n},t.splitRgb=function(e){return{r:(16711680&e)>>16,g:(65280&e)>>8,b:255&e}}},4618:(e,t,n)=>{"use strict";e.exports=r,e.exports.default=r;const s={$schema:"http://json-schema.org/draft-07/schema#",type:"object",title:"ModuleManifest",properties:{id:{type:"string",description:"Unique identifier for the module"},name:{type:"string",description:"Name of the module"},shortname:{type:"string"},description:{type:"string",description:"Description of the module "},version:{type:"string",description:"Current version of the module"},license:{type:"string",description:"SPDX identifier for license of the module"},repository:{type:"string",description:"URL to the source repository"},bugs:{type:"string",description:"URL to bug tracker"},maintainers:{type:"array",description:"List of active maintiners",uniqueItems:!0,items:{type:"object",title:"ModuleManifestMaintainer",properties:{name:{type:"string"},email:{type:"string"},github:{type:"string"}},required:["name"]}},legacyIds:{type:"array",description:"If the module had a different unique identifier previously, then specify it here",uniqueItems:!0,items:{type:"string"}},runtime:{type:"object",title:"ModuleManifestRuntime",description:"Information on how to execute the module",properties:{type:{type:"string",description:"Type of the module. Must be: node18"},api:{type:"string",description:"Which host-api does it use. In the future alternate options will be allowed",enum:["nodejs-ipc"]},apiVersion:{type:"string",description:"The version of the host-api used"},entrypoint:{type:"string",description:"Entrypoint to pass to the runtime. eg index.js"}},required:["type","api","apiVersion","entrypoint"]},manufacturer:{type:"string"},products:{type:"array",uniqueItems:!0,items:{type:"string"}},keywords:{type:"array",uniqueItems:!0,items:{type:"string"}}},required:["id","name","shortname","description","version","license","repository","bugs","maintainers","legacyIds","runtime","manufacturer","products","keywords"]},i=n(7056).Z;function r(e,{instancePath:t="",parentData:n,parentDataProperty:o,rootData:a=e}={}){if(!e||"object"!=typeof e||Array.isArray(e))return r.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let n;if(void 0===e.id&&(n="id")||void 0===e.name&&(n="name")||void 0===e.shortname&&(n="shortname")||void 0===e.description&&(n="description")||void 0===e.version&&(n="version")||void 0===e.license&&(n="license")||void 0===e.repository&&(n="repository")||void 0===e.bugs&&(n="bugs")||void 0===e.maintainers&&(n="maintainers")||void 0===e.legacyIds&&(n="legacyIds")||void 0===e.runtime&&(n="runtime")||void 0===e.manufacturer&&(n="manufacturer")||void 0===e.products&&(n="products")||void 0===e.keywords&&(n="keywords"))return r.errors=[{instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:n},message:"must have required property '"+n+"'"}],!1;if(void 0!==e.id){const n=0;if("string"!=typeof e.id)return r.errors=[{instancePath:t+"/id",schemaPath:"#/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=0===n}else c=!0;if(c){if(void 0!==e.name){const n=0;if("string"!=typeof e.name)return r.errors=[{instancePath:t+"/name",schemaPath:"#/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;c=0===n}else c=!0;if(c){if(void 0!==e.shortname){const n=0;if("string"!=typeof e.shortname)return r.errors=[{instancePath:t+"/shortname",schemaPath:"#/properties/shortname/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;c=0===n}else c=!0;if(c){if(void 0!==e.description){const n=0;if("string"!=typeof e.description)return r.errors=[{instancePath:t+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;c=0===n}else c=!0;if(c){if(void 0!==e.version){const n=0;if("string"!=typeof e.version)return r.errors=[{instancePath:t+"/version",schemaPath:"#/properties/version/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;c=0===n}else c=!0;if(c){if(void 0!==e.license){const n=0;if("string"!=typeof e.license)return r.errors=[{instancePath:t+"/license",schemaPath:"#/properties/license/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;c=0===n}else c=!0;if(c){if(void 0!==e.repository){const n=0;if("string"!=typeof e.repository)return r.errors=[{instancePath:t+"/repository",schemaPath:"#/properties/repository/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;c=0===n}else c=!0;if(c){if(void 0!==e.bugs){const n=0;if("string"!=typeof e.bugs)return r.errors=[{instancePath:t+"/bugs",schemaPath:"#/properties/bugs/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;c=0===n}else c=!0;if(c){if(void 0!==e.maintainers){let n=e.maintainers;const s=0;if(0===s){if(!Array.isArray(n))return r.errors=[{instancePath:t+"/maintainers",schemaPath:"#/properties/maintainers/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;{var l=!0;const e=n.length;for(let s=0;s<e;s++){let e=n[s];const i=0;if(0===i){if(!e||"object"!=typeof e||Array.isArray(e))return r.errors=[{instancePath:t+"/maintainers/"+s,schemaPath:"#/properties/maintainers/items/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let n;if(void 0===e.name&&(n="name"))return r.errors=[{instancePath:t+"/maintainers/"+s,schemaPath:"#/properties/maintainers/items/required",keyword:"required",params:{missingProperty:n},message:"must have required property '"+n+"'"}],!1;if(void 0!==e.name){const n=0;if("string"!=typeof e.name)return r.errors=[{instancePath:t+"/maintainers/"+s+"/name",schemaPath:"#/properties/maintainers/items/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=0===n}else u=!0;if(u){if(void 0!==e.email){const n=0;if("string"!=typeof e.email)return r.errors=[{instancePath:t+"/maintainers/"+s+"/email",schemaPath:"#/properties/maintainers/items/properties/email/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;u=0===n}else u=!0;if(u)if(void 0!==e.github){const n=0;if("string"!=typeof e.github)return r.errors=[{instancePath:t+"/maintainers/"+s+"/github",schemaPath:"#/properties/maintainers/items/properties/github/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;u=0===n}else u=!0}}}if(!(l=0===i))break}if(l){let e,s=n.length;if(s>1)for(;s--;)for(e=s;e--;)if(i(n[s],n[e]))return r.errors=[{instancePath:t+"/maintainers",schemaPath:"#/properties/maintainers/uniqueItems",keyword:"uniqueItems",params:{i:s,j:e},message:"must NOT have duplicate items (items ## "+e+" and "+s+" are identical)"}],!1}}}c=0===s}else c=!0;if(c){if(void 0!==e.legacyIds){let n=e.legacyIds;const s=0;if(0===s){if(!Array.isArray(n))return r.errors=[{instancePath:t+"/legacyIds",schemaPath:"#/properties/legacyIds/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;{var d=!0;const e=n.length;for(let s=0;s<e;s++){const e=0;if("string"!=typeof n[s])return r.errors=[{instancePath:t+"/legacyIds/"+s,schemaPath:"#/properties/legacyIds/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(d=0===e))break}if(d){let e,s=n.length;if(s>1){const i={};for(;s--;){let o=n[s];if("string"==typeof o){if("number"==typeof i[o])return e=i[o],r.errors=[{instancePath:t+"/legacyIds",schemaPath:"#/properties/legacyIds/uniqueItems",keyword:"uniqueItems",params:{i:s,j:e},message:"must NOT have duplicate items (items ## "+e+" and "+s+" are identical)"}],!1;i[o]=s}}}}}}c=0===s}else c=!0;if(c){if(void 0!==e.runtime){let n=e.runtime;const i=0;if(0===i){if(!n||"object"!=typeof n||Array.isArray(n))return r.errors=[{instancePath:t+"/runtime",schemaPath:"#/properties/runtime/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let e;if(void 0===n.type&&(e="type")||void 0===n.api&&(e="api")||void 0===n.apiVersion&&(e="apiVersion")||void 0===n.entrypoint&&(e="entrypoint"))return r.errors=[{instancePath:t+"/runtime",schemaPath:"#/properties/runtime/required",keyword:"required",params:{missingProperty:e},message:"must have required property '"+e+"'"}],!1;if(void 0!==n.type){const e=0;if("string"!=typeof n.type)return r.errors=[{instancePath:t+"/runtime/type",schemaPath:"#/properties/runtime/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var p=0===e}else p=!0;if(p){if(void 0!==n.api){let e=n.api;const i=0;if("string"!=typeof e)return r.errors=[{instancePath:t+"/runtime/api",schemaPath:"#/properties/runtime/properties/api/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("nodejs-ipc"!==e)return r.errors=[{instancePath:t+"/runtime/api",schemaPath:"#/properties/runtime/properties/api/enum",keyword:"enum",params:{allowedValues:s.properties.runtime.properties.api.enum},message:"must be equal to one of the allowed values"}],!1;p=0===i}else p=!0;if(p){if(void 0!==n.apiVersion){const e=0;if("string"!=typeof n.apiVersion)return r.errors=[{instancePath:t+"/runtime/apiVersion",schemaPath:"#/properties/runtime/properties/apiVersion/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;p=0===e}else p=!0;if(p)if(void 0!==n.entrypoint){const e=0;if("string"!=typeof n.entrypoint)return r.errors=[{instancePath:t+"/runtime/entrypoint",schemaPath:"#/properties/runtime/properties/entrypoint/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;p=0===e}else p=!0}}}}c=0===i}else c=!0;if(c){if(void 0!==e.manufacturer){const n=0;if("string"!=typeof e.manufacturer)return r.errors=[{instancePath:t+"/manufacturer",schemaPath:"#/properties/manufacturer/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;c=0===n}else c=!0;if(c){if(void 0!==e.products){let n=e.products;const s=0;if(0===s){if(!Array.isArray(n))return r.errors=[{instancePath:t+"/products",schemaPath:"#/properties/products/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;{var h=!0;const e=n.length;for(let s=0;s<e;s++){const e=0;if("string"!=typeof n[s])return r.errors=[{instancePath:t+"/products/"+s,schemaPath:"#/properties/products/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(h=0===e))break}if(h){let e,s=n.length;if(s>1){const i={};for(;s--;){let o=n[s];if("string"==typeof o){if("number"==typeof i[o])return e=i[o],r.errors=[{instancePath:t+"/products",schemaPath:"#/properties/products/uniqueItems",keyword:"uniqueItems",params:{i:s,j:e},message:"must NOT have duplicate items (items ## "+e+" and "+s+" are identical)"}],!1;i[o]=s}}}}}}c=0===s}else c=!0;if(c)if(void 0!==e.keywords){let n=e.keywords;const s=0;if(0===s){if(!Array.isArray(n))return r.errors=[{instancePath:t+"/keywords",schemaPath:"#/properties/keywords/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;{var f=!0;const e=n.length;for(let s=0;s<e;s++){const e=0;if("string"!=typeof n[s])return r.errors=[{instancePath:t+"/keywords/"+s,schemaPath:"#/properties/keywords/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(f=0===e))break}if(f){let e,s=n.length;if(s>1){const i={};for(;s--;){let o=n[s];if("string"==typeof o){if("number"==typeof i[o])return e=i[o],r.errors=[{instancePath:t+"/keywords",schemaPath:"#/properties/keywords/uniqueItems",keyword:"uniqueItems",params:{i:s,j:e},message:"must NOT have duplicate items (items ## "+e+" and "+s+" are identical)"}],!1;i[o]=s}}}}}}c=0===s}else c=!0}}}}}}}}}}}}}return r.errors=null,!0}},3453:(e,t,n)=>{"use strict";const s=n(4341);e.exports=(e,t={})=>{if("function"!=typeof e)throw new TypeError(`Expected the first argument to be a function, got \`${typeof e}\``);const{wait:n=0,maxWait:i=0,before:r=!1,after:o=!0}=t;if(!r&&!o)throw new Error("Both `before` and `after` are false, function wouldn't be called.");let a,c,l;const u=function(...t){const s=this,u=r&&!a;return clearTimeout(a),a=setTimeout((()=>{a=void 0,c&&(clearTimeout(c),c=void 0),o&&(l=e.apply(s,t))}),n),i>0&&!c&&o&&(c=setTimeout((()=>{c=void 0,a&&(clearTimeout(a),a=void 0),l=e.apply(s,t)}),i)),u&&(l=e.apply(s,t)),l};return s(u,e),u.cancel=()=>{a&&(clearTimeout(a),a=void 0),c&&(clearTimeout(c),c=void 0)},u}},4300:(e,t,n)=>{let s,i,r=n(6113),{urlAlphabet:o}=n(3792),a=e=>{!s||s.length<e?(s=Buffer.allocUnsafe(128*e),r.randomFillSync(s),i=0):i+e>s.length&&(r.randomFillSync(s),i=0),i+=e},c=e=>(a(e-=0),s.subarray(i-e,i)),l=(e,t,n)=>{let s=(2<<31-Math.clz32(e.length-1|1))-1,i=Math.ceil(1.6*s*t/e.length);return(r=t)=>{let o="";for(;;){let t=n(i),a=i;for(;a--;)if(o+=e[t[a]&s]||"",o.length===r)return o}}};e.exports={nanoid:(e=21)=>{a(e-=0);let t="";for(let n=i-e;n<i;n++)t+=o[63&s[n]];return t},customAlphabet:(e,t=21)=>l(e,t,c),customRandom:l,urlAlphabet:o,random:c}},3792:e=>{e.exports={urlAlphabet:"useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"}},7582:(e,t,n)=>{"use strict";n.r(t),n.d(t,{__addDisposableResource:()=>N,__assign:()=>r,__asyncDelegator:()=>w,__asyncGenerator:()=>I,__asyncValues:()=>C,__await:()=>k,__awaiter:()=>f,__classPrivateFieldGet:()=>A,__classPrivateFieldIn:()=>O,__classPrivateFieldSet:()=>P,__createBinding:()=>g,__decorate:()=>a,__disposeResources:()=>B,__esDecorate:()=>l,__exportStar:()=>m,__extends:()=>i,__generator:()=>_,__importDefault:()=>R,__importStar:()=>D,__makeTemplateObject:()=>x,__metadata:()=>h,__param:()=>c,__propKey:()=>d,__read:()=>b,__rest:()=>o,__runInitializers:()=>u,__setFunctionName:()=>p,__spread:()=>E,__spreadArray:()=>S,__spreadArrays:()=>v,__values:()=>y,default:()=>Y});var s=function(e,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},s(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var r=function(){return r=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};function o(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(n[s[i]]=e[s[i]])}return n}function a(e,t,n,s){var i,r=arguments.length,o=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,s);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r<3?i(o):r>3?i(t,n,o):i(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o}function c(e,t){return function(n,s){t(n,s,e)}}function l(e,t,n,s,i,r){function o(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var a,c=s.kind,l="getter"===c?"get":"setter"===c?"set":"value",u=!t&&e?s.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,s.name):{}),p=!1,h=n.length-1;h>=0;h--){var f={};for(var _ in s)f[_]="access"===_?{}:s[_];for(var _ in s.access)f.access[_]=s.access[_];f.addInitializer=function(e){if(p)throw new TypeError("Cannot add initializers after decoration has completed");r.push(o(e||null))};var g=(0,n[h])("accessor"===c?{get:d.get,set:d.set}:d[l],f);if("accessor"===c){if(void 0===g)continue;if(null===g||"object"!=typeof g)throw new TypeError("Object expected");(a=o(g.get))&&(d.get=a),(a=o(g.set))&&(d.set=a),(a=o(g.init))&&i.unshift(a)}else(a=o(g))&&("field"===c?i.unshift(a):d[l]=a)}u&&Object.defineProperty(u,s.name,d),p=!0}function u(e,t,n){for(var s=arguments.length>2,i=0;i<t.length;i++)n=s?t[i].call(e,n):t[i].call(e);return s?n:void 0}function d(e){return"symbol"==typeof e?e:"".concat(e)}function p(e,t,n){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function h(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function f(e,t,n,s){return new(n||(n=Promise))((function(i,r){function o(e){try{c(s.next(e))}catch(e){r(e)}}function a(e){try{c(s.throw(e))}catch(e){r(e)}}function c(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,a)}c((s=s.apply(e,t||[])).next())}))}function _(e,t){var n,s,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,a[0]&&(o=0)),o;)try{if(n=1,s&&(i=2&a[0]?s.return:a[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,a[1])).done)return i;switch(s=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,s=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],s=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}var g=Object.create?function(e,t,n,s){void 0===s&&(s=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,i)}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]};function m(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||g(t,e,n)}function y(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],s=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&s>=e.length&&(e=void 0),{value:e&&e[s++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function b(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var s,i,r=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(s=r.next()).done;)o.push(s.value)}catch(e){i={error:e}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return o}function E(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(b(arguments[t]));return e}function v(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var s=Array(e),i=0;for(t=0;t<n;t++)for(var r=arguments[t],o=0,a=r.length;o<a;o++,i++)s[i]=r[o];return s}function S(e,t,n){if(n||2===arguments.length)for(var s,i=0,r=t.length;i<r;i++)!s&&i in t||(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return e.concat(s||Array.prototype.slice.call(t))}function k(e){return this instanceof k?(this.v=e,this):new k(e)}function I(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,i=n.apply(e,t||[]),r=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(e){i[e]&&(s[e]=function(t){return new Promise((function(n,s){r.push([e,t,n,s])>1||a(e,t)}))})}function a(e,t){try{(n=i[e](t)).value instanceof k?Promise.resolve(n.value.v).then(c,l):u(r[0][2],n)}catch(e){u(r[0][3],e)}var n}function c(e){a("next",e)}function l(e){a("throw",e)}function u(e,t){e(t),r.shift(),r.length&&a(r[0][0],r[0][1])}}function w(e){var t,n;return t={},s("next"),s("throw",(function(e){throw e})),s("return"),t[Symbol.iterator]=function(){return this},t;function s(s,i){t[s]=e[s]?function(t){return(n=!n)?{value:k(e[s](t)),done:!1}:i?i(t):t}:i}}function C(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=y(e),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(n){t[n]=e[n]&&function(t){return new Promise((function(s,i){!function(e,t,n,s){Promise.resolve(s).then((function(t){e({value:t,done:n})}),t)}(s,i,(t=e[n](t)).done,t.value)}))}}}function x(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var T=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function D(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&g(t,e,n);return T(t,e),t}function R(e){return e&&e.__esModule?e:{default:e}}function A(e,t,n,s){if("a"===n&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?s:"a"===n?s.call(e):s?s.value:t.get(e)}function P(e,t,n,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,n):i?i.value=n:t.set(e,n),n}function O(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function N(e,t,n){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var s;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");s=t[Symbol.asyncDispose]}if(void 0===s){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");s=t[Symbol.dispose]}if("function"!=typeof s)throw new TypeError("Object not disposable.");e.stack.push({value:t,dispose:s,async:n})}else n&&e.stack.push({async:!0});return t}var U="function"==typeof SuppressedError?SuppressedError:function(e,t,n){var s=new Error(n);return s.name="SuppressedError",s.error=e,s.suppressed=t,s};function B(e){function t(t){e.error=e.hasError?new U(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}return function n(){for(;e.stack.length;){var s=e.stack.pop();try{var i=s.dispose&&s.dispose.call(s.value);if(s.async)return Promise.resolve(i).then(n,(function(e){return t(e),n()}))}catch(e){t(e)}}if(e.hasError)throw e.error}()}const Y={__extends:i,__assign:r,__rest:o,__decorate:a,__param:c,__metadata:h,__awaiter:f,__generator:_,__createBinding:g,__exportStar:m,__values:y,__read:b,__spread:E,__spreadArrays:v,__spreadArray:S,__await:k,__asyncGenerator:I,__asyncDelegator:w,__asyncValues:C,__makeTemplateObject:x,__importStar:D,__importDefault:R,__classPrivateFieldGet:A,__classPrivateFieldSet:P,__classPrivateFieldIn:O,__addDisposableResource:N,__disposeResources:B}}},t={};function n(s){var i=t[s];if(void 0!==i)return i.exports;var r=t[s]={id:s,loaded:!1,exports:{}};return e[s].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}n.c=t,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(n.s=2398)})();