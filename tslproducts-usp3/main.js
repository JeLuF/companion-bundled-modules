/*! For license information please see main.js.LICENSE.txt */
(()=>{var e={6010:(e,t,n)=>{const{InstanceBase:r,InstanceStatus:i,runEntrypoint:s}=n(8049),o=n(4556),a=n(9182),c=n(5144),u=n(7417),l=n(4049),p=n(3125),d=n(3555),h=n(603),f=n(7061),g=n(5279);s(class extends r{constructor(e){super(e),Object.assign(this,{...a,...c,...u,...l,...p,...d,...h,...f,...g}),this.SOCKET_COMPANION=void 0,this.SOCKET_USP=void 0,this.USP_LEGACY_SNMP_AGENT=void 0,this.COMPANION_PING_INTERVAL=void 0,this.USP_INTERVAL=void 0,this.USP_LEGACY_PERIODIC_UPDATE=void 0,this.DATA={satelliteConnected:!1,uspConnected:!1,keys:[],gpiStates:[{id:"01",state:!1},{id:"02",state:!1},{id:"03",state:!1},{id:"04",state:!1},{id:"05",state:!1},{id:"06",state:!1},{id:"07",state:!1},{id:"08",state:!1},{id:"09",state:!1},{id:"10",state:!1},{id:"11",state:!1},{id:"12",state:!1},{id:"13",state:!1},{id:"14",state:!1},{id:"15",state:!1},{id:"16",state:!1}],gpoStates:[{id:"01",state:!1},{id:"02",state:!1},{id:"03",state:!1},{id:"04",state:!1},{id:"05",state:!1},{id:"06",state:!1},{id:"07",state:!1},{id:"08",state:!1},{id:"09",state:!1},{id:"10",state:!1},{id:"11",state:!1},{id:"12",state:!1},{id:"13",state:!1},{id:"14",state:!1},{id:"15",state:!1},{id:"16",state:!1}],memStates:[{id:"01",state:!1},{id:"02",state:!1},{id:"03",state:!1},{id:"04",state:!1},{id:"05",state:!1},{id:"06",state:!1},{id:"07",state:!1},{id:"08",state:!1},{id:"09",state:!1},{id:"10",state:!1},{id:"11",state:!1},{id:"12",state:!1},{id:"13",state:!1},{id:"14",state:!1},{id:"15",state:!1},{id:"16",state:!1}],keyStates:[{id:"01",state:!1},{id:"02",state:!1},{id:"03",state:!1},{id:"04",state:!1},{id:"05",state:!1},{id:"06",state:!1},{id:"07",state:!1},{id:"08",state:!1},{id:"09",state:!1},{id:"10",state:!1},{id:"11",state:!1},{id:"12",state:!1},{id:"13",state:!1},{id:"14",state:!1},{id:"15",state:!1},{id:"16",state:!1}]},this.DEVICE_ID=this.id,this.currentlyUpdatingLegacyPanel=!1,this.legacy_key_interval=null}async destroy(){void 0!==this.SOCKET_COMPANION&&(this.sendCompanionSatelliteCommand("QUIT"),this.SOCKET_COMPANION.destroy(),delete this.SOCKET_COMPANION),void 0!==this.SOCKET_USP&&(this.SOCKET_USP.destroy(),delete this.SOCKET_USP),void 0!==this.COMPANION_PING_INTERVAL&&(clearInterval(this.COMPANION_PING_INTERVAL),delete this.COMPANION_PING_INTERVAL),void 0!==this.USP_INTERVAL&&(clearInterval(this.USP_INTERVAL),delete this.USP_INTERVAL),void 0!==this.USP_LEGACY_PERIODIC_UPDATE&&(clearInterval(this.USP_LEGACY_PERIODIC_UPDATE),delete this.USP_LEGACY_PERIODIC_UPDATE)}async init(e){this.configUpdated(e)}async configUpdated(e){void 0!==this.USP_INTERVAL&&(clearInterval(this.USP_INTERVAL),delete this.USP_INTERVAL),this.config=e,this.updateStatus(i.Connecting,"Connecting to panel..."),this.initActions(),this.initFeedbacks(),this.initVariables(),this.initPresets(),this.checkVariables(),this.checkFeedbacks(),1==this.config.use_as_surface&&this.CompanionSatellite_Close(),"usp3"===this.config.model?this.initUSP():"usp_legacy"==this.config.model&&(this.initCompanionSatellite(),this.initUSP_Legacy())}},o)},7056:(e,t,n)=>{"use strict";const r=n(4063);r.code='require("ajv/dist/runtime/equal").default',t.Z=r},758:(e,t,n)=>{"use strict";n.d(t,{r:()=>o});var r=n(5659),i=n(6890),s=n(2176);function o(){(0,i.T)(),(0,s.KV)()&&function(){const t=(0,r.cu)();if(!t.__SENTRY__)return;const n={mongodb:()=>new((0,s.l$)(e,"./node/integrations/mongo").Mongo),mongoose:()=>new((0,s.l$)(e,"./node/integrations/mongo").Mongo),mysql:()=>new((0,s.l$)(e,"./node/integrations/mysql").Mysql),pg:()=>new((0,s.l$)(e,"./node/integrations/postgres").Postgres)},i=Object.keys(n).filter((e=>!!(0,s.$y)(e))).map((e=>{try{return n[e]()}catch(e){return}})).filter((e=>e));i.length>0&&(t.__SENTRY__.integrations=[...t.__SENTRY__.integrations||[],...i])}()}e=n.hmd(e)},2716:(e,t,n)=>{"use strict";n.d(t,{_:()=>l});var r=n(4307),i=n(2176),s=n(2343),o=n(535),a=n(2844),c=n(7597),u=n(7990);class l{static __initStatic(){this.id="Apollo"}__init(){this.name=l.id}constructor(e={useNestjs:!1}){l.prototype.__init.call(this),this._useNest=!!e.useNestjs}loadDependency(){return this._useNest?this._module=this._module||(0,i.$y)("@nestjs/graphql"):this._module=this._module||(0,i.$y)("apollo-server-core"),this._module}setupOnce(e,t){if((0,u.K)(t))("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.kg.log("Apollo Integration is skipped because of instrumenter configuration.");else if(this._useNest){const e=this.loadDependency();if(!e)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.kg.error("Apollo-NestJS Integration was unable to require @nestjs/graphql package."));(0,o.hl)(e.GraphQLFactory.prototype,"mergeWithSchema",(function(e){return function(...n){return(0,o.hl)(this.resolversExplorerService,"explore",(function(e){return function(){return p((0,a.lE)(e.call(this)),t)}})),e.call(this,...n)}}))}else{const e=this.loadDependency();if(!e)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.kg.error("Apollo Integration was unable to require apollo-server-core package."));(0,o.hl)(e.ApolloServerBase.prototype,"constructSchema",(function(e){return function(){if(!this.config.resolvers)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&(this.config.schema?(s.kg.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `schema` property.If you are using NestJS with Apollo, please use `Sentry.Integrations.Apollo({ useNestjs: true })` instead."),s.kg.warn()):this.config.modules&&s.kg.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `modules` property."),s.kg.error("Skipping tracing as no resolvers found on the `ApolloServer` instance.")),e.call(this);const n=(0,a.lE)(this.config.resolvers);return this.config.resolvers=p(n,t),e.call(this)}}))}}}function p(e,t){return e.map((e=>(Object.keys(e).forEach((n=>{Object.keys(e[n]).forEach((i=>{"function"==typeof e[n][i]&&function(e,t,n,i){(0,o.hl)(e[t],n,(function(e){return function(...s){const o=i().getScope(),a=(0,r.x)([o,"optionalAccess",e=>e.getSpan,"call",e=>e()]),u=(0,r.x)([a,"optionalAccess",e=>e.startChild,"call",e=>e({description:`${t}.${n}`,op:"graphql.resolve"})]),l=e.call(this,...s);return(0,c.J8)(l)?l.then((e=>((0,r.x)([u,"optionalAccess",e=>e.finish,"call",e=>e()]),e))):((0,r.x)([u,"optionalAccess",e=>e.finish,"call",e=>e()]),l)}}))}(e,n,i,t)}))})),e)))}l.__initStatic()},8737:(e,t,n)=>{"use strict";n.d(t,{N:()=>u});var r=n(4307),i=n(2343),s=n(6956),o=n(442),a=n(7597),c=n(7990);class u{static __initStatic(){this.id="Express"}__init(){this.name=u.id}constructor(e={}){u.prototype.__init.call(this),this._router=e.router||e.app,this._methods=(Array.isArray(e.methods)?e.methods:[]).concat("use")}setupOnce(e,t){this._router?(0,c.K)(t)?("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.kg.log("Express Integration is skipped because of instrumenter configuration."):(function(e,t=[]){t.forEach((t=>function(e,t){const n=e[t];return e[t]=function(...e){return n.call(this,...function(e,t){return e.map((e=>"function"==typeof e?l(e,t):Array.isArray(e)?e.map((e=>"function"==typeof e?l(e,t):e)):e))}(e,t))},e}(e,t)))}(this._router,this._methods),function(e){const t="settings"in e;t&&void 0===e._router&&e.lazyrouter&&e.lazyrouter();const n=t?e._router:e;if(!n)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.kg.debug("Cannot instrument router for URL Parameterization (did not find a valid router)."),void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.kg.debug("Routing instrumentation is currently only supported in Express 4."));const c=Object.getPrototypeOf(n),u=c.process_params;c.process_params=function(e,t,n,i,c){n._reconstructedRoute||(n._reconstructedRoute="");const{layerRoutePath:l,isRegex:p,isArray:d,numExtraSegments:h}=function(e){const t=(0,r.x)([e,"access",e=>e.route,"optionalAccess",e=>e.path]),n=(0,a.Kj)(t),i=Array.isArray(t);if(!t)return{isRegex:n,isArray:i,numExtraSegments:0};const o=i?Math.max(t.reduce(((e,t)=>e+(0,s.$A)(t.toString())),0)-(0,s.$A)(e.path||""),0):0,c=function(e,t){return e?t.map((e=>e.toString())).join(","):t&&t.toString()}(i,t);return{layerRoutePath:c,isRegex:n,isArray:i,numExtraSegments:o}}(e);(l||p||d)&&(n._hasParameters=!0);const f=(l||e.path||"").split("/").filter((e=>e.length>0&&(p||d||!e.includes("*")))).join("/");if(f&&f.length>0&&(n._reconstructedRoute+=`/${f}${p?"/":""}`),(0,s.$A)(n.originalUrl||"")+h===(0,s.$A)(n._reconstructedRoute)){n._hasParameters||n._reconstructedRoute!==n.originalUrl&&(n._reconstructedRoute=n.originalUrl?(0,s.rt)(n.originalUrl):n.originalUrl);const e=i.__sentry_transaction;if(e&&"custom"!==e.metadata.source){const t=n._reconstructedRoute||"/";e.setName(...(0,o.oA)(n,{path:!0,method:!0,customRoute:t}))}}return u.call(this,e,t,n,i,c)}}(this._router)):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.kg.error("ExpressIntegration is missing an Express instance")}}function l(e,t){const n=e.length;switch(n){case 2:return function(n,r){const i=r.__sentry_transaction;if(i){const n=i.startChild({description:e.name,op:`middleware.express.${t}`});r.once("finish",(()=>{n.finish()}))}return e.call(this,n,r)};case 3:return function(n,i,s){const o=i.__sentry_transaction,a=(0,r.x)([o,"optionalAccess",e=>e.startChild,"call",n=>n({description:e.name,op:`middleware.express.${t}`})]);e.call(this,n,i,(function(...e){(0,r.x)([a,"optionalAccess",e=>e.finish,"call",e=>e()]),s.call(this,...e)}))};case 4:return function(n,i,s,o){const a=s.__sentry_transaction,c=(0,r.x)([a,"optionalAccess",e=>e.startChild,"call",n=>n({description:e.name,op:`middleware.express.${t}`})]);e.call(this,n,i,s,(function(...e){(0,r.x)([c,"optionalAccess",e=>e.finish,"call",e=>e()]),o.call(this,...e)}))};default:throw new Error(`Express middleware takes 2-4 arguments. Got: ${n}`)}}u.__initStatic()},1791:(e,t,n)=>{"use strict";n.d(t,{k:()=>u});var r=n(4307),i=n(2176),s=n(2343),o=n(535),a=n(7597),c=n(7990);class u{constructor(){u.prototype.__init.call(this)}static __initStatic(){this.id="GraphQL"}__init(){this.name=u.id}loadDependency(){return this._module=this._module||(0,i.$y)("graphql/execution/execute.js")}setupOnce(e,t){if((0,c.K)(t))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.kg.log("GraphQL Integration is skipped because of instrumenter configuration."));const n=this.loadDependency();n?(0,o.hl)(n,"execute",(function(e){return function(...n){const i=t().getScope(),s=(0,r.x)([i,"optionalAccess",e=>e.getSpan,"call",e=>e()]),o=(0,r.x)([s,"optionalAccess",e=>e.startChild,"call",e=>e({description:"execute",op:"graphql.execute"})]);(0,r.x)([i,"optionalAccess",e=>e.setSpan,"call",e=>e(o)]);const c=e.call(this,...n);return(0,a.J8)(c)?c.then((e=>((0,r.x)([o,"optionalAccess",e=>e.finish,"call",e=>e()]),(0,r.x)([i,"optionalAccess",e=>e.setSpan,"call",e=>e(s)]),e))):((0,r.x)([o,"optionalAccess",e=>e.finish,"call",e=>e()]),(0,r.x)([i,"optionalAccess",e=>e.setSpan,"call",e=>e(s)]),c)}})):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.kg.error("GraphQL Integration was unable to require graphql/execution package.")}}u.__initStatic()},6046:(e,t,n)=>{"use strict";n.d(t,{G:()=>i});var r=n(2176);e=n.hmd(e);const i=[()=>new((0,r.l$)(e,"./apollo").Apollo),()=>new((0,r.l$)(e,"./apollo").Apollo)({useNestjs:!0}),()=>new((0,r.l$)(e,"./graphql").GraphQL),()=>new((0,r.l$)(e,"./mongo").Mongo),()=>new((0,r.l$)(e,"./mongo").Mongo)({mongoose:!0}),()=>new((0,r.l$)(e,"./mysql").Mysql),()=>new((0,r.l$)(e,"./postgres").Postgres)]},6169:(e,t,n)=>{"use strict";n.d(t,{_:()=>p});var r=n(4307),i=n(2176),s=n(2343),o=n(535),a=n(7597),c=n(7990);const u=["aggregate","bulkWrite","countDocuments","createIndex","createIndexes","deleteMany","deleteOne","distinct","drop","dropIndex","dropIndexes","estimatedDocumentCount","find","findOne","findOneAndDelete","findOneAndReplace","findOneAndUpdate","indexes","indexExists","indexInformation","initializeOrderedBulkOp","insertMany","insertOne","isCapped","mapReduce","options","parallelCollectionScan","rename","replaceOne","stats","updateMany","updateOne"],l={bulkWrite:["operations"],countDocuments:["query"],createIndex:["fieldOrSpec"],createIndexes:["indexSpecs"],deleteMany:["filter"],deleteOne:["filter"],distinct:["key","query"],dropIndex:["indexName"],find:["query"],findOne:["query"],findOneAndDelete:["filter"],findOneAndReplace:["filter","replacement"],findOneAndUpdate:["filter","update"],indexExists:["indexes"],insertMany:["docs"],insertOne:["doc"],mapReduce:["map","reduce"],rename:["newName"],replaceOne:["filter","doc"],updateMany:["filter","update"],updateOne:["filter","update"]};class p{static __initStatic(){this.id="Mongo"}__init(){this.name=p.id}constructor(e={}){p.prototype.__init.call(this),this._operations=Array.isArray(e.operations)?e.operations:u,this._describeOperations=!("describeOperations"in e)||e.describeOperations,this._useMongoose=!!e.useMongoose}loadDependency(){const e=this._useMongoose?"mongoose":"mongodb";return this._module=this._module||(0,i.$y)(e)}setupOnce(e,t){if((0,c.K)(t))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.kg.log("Mongo Integration is skipped because of instrumenter configuration."));const n=this.loadDependency();if(n)this._instrumentOperations(n.Collection,this._operations,t);else{const e=this._useMongoose?"mongoose":"mongodb";("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.kg.error(`Mongo Integration was unable to require \`${e}\` package.`)}}_instrumentOperations(e,t,n){t.forEach((t=>this._patchOperation(e,t,n)))}_patchOperation(e,t,n){if(!(t in e.prototype))return;const i=this._getSpanContextFromOperationArguments.bind(this);(0,o.hl)(e.prototype,t,(function(e){return function(...s){const o=s[s.length-1],c=n().getScope(),u=(0,r.x)([c,"optionalAccess",e=>e.getSpan,"call",e=>e()]);if("function"!=typeof o||"mapReduce"===t&&2===s.length){const n=(0,r.x)([u,"optionalAccess",e=>e.startChild,"call",e=>e(i(this,t,s))]),o=e.call(this,...s);if((0,a.J8)(o))return o.then((e=>((0,r.x)([n,"optionalAccess",e=>e.finish,"call",e=>e()]),e)));if((l=o)&&"object"==typeof l&&l.once&&"function"==typeof l.once){const e=o;try{e.once("close",(()=>{(0,r.x)([n,"optionalAccess",e=>e.finish,"call",e=>e()])}))}catch(e){(0,r.x)([n,"optionalAccess",e=>e.finish,"call",e=>e()])}return e}return(0,r.x)([n,"optionalAccess",e=>e.finish,"call",e=>e()]),o}var l;const p=(0,r.x)([u,"optionalAccess",e=>e.startChild,"call",e=>e(i(this,t,s.slice(0,-1)))]);return e.call(this,...s.slice(0,-1),(function(e,t){(0,r.x)([p,"optionalAccess",e=>e.finish,"call",e=>e()]),o(e,t)}))}}))}_getSpanContextFromOperationArguments(e,t,n){const r={collectionName:e.collectionName,dbName:e.dbName,namespace:e.namespace,"db.system":"mongodb"},i={op:"db",description:t,data:r},s=l[t],o=Array.isArray(this._describeOperations)?this._describeOperations.includes(t):this._describeOperations;if(!s||!o)return i;try{if("mapReduce"===t){const[e,t]=n;r[s[0]]="string"==typeof e?e:e.name||"<anonymous>",r[s[1]]="string"==typeof t?t:t.name||"<anonymous>"}else for(let e=0;e<s.length;e++)r[s[e]]=JSON.stringify(n[e])}catch(e){}return i}}p.__initStatic()},24:(e,t,n)=>{"use strict";n.d(t,{m:()=>c});var r=n(4307),i=n(2176),s=n(2343),o=n(535),a=n(7990);class c{constructor(){c.prototype.__init.call(this)}static __initStatic(){this.id="Mysql"}__init(){this.name=c.id}loadDependency(){return this._module=this._module||(0,i.$y)("mysql/lib/Connection.js")}setupOnce(e,t){if((0,a.K)(t))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.kg.log("Mysql Integration is skipped because of instrumenter configuration."));const n=this.loadDependency();n?(0,o.hl)(n,"createQuery",(function(e){return function(n,i,s){const o=t().getScope(),a=(0,r.x)([o,"optionalAccess",e=>e.getSpan,"call",e=>e()]),c=(0,r.x)([a,"optionalAccess",e=>e.startChild,"call",e=>e({description:"string"==typeof n?n:n.sql,op:"db",data:{"db.system":"mysql"}})]);return"function"==typeof s?e.call(this,n,i,(function(e,t,n){(0,r.x)([c,"optionalAccess",e=>e.finish,"call",e=>e()]),s(e,t,n)})):"function"==typeof i?e.call(this,n,(function(e,t,n){(0,r.x)([c,"optionalAccess",e=>e.finish,"call",e=>e()]),i(e,t,n)})):e.call(this,n,i,s)}})):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.kg.error("Mysql Integration was unable to require `mysql` package.")}}c.__initStatic()},1370:(e,t,n)=>{"use strict";n.d(t,{E:()=>u});var r=n(4307),i=n(2176),s=n(2343),o=n(535),a=n(7597),c=n(7990);class u{static __initStatic(){this.id="Postgres"}__init(){this.name=u.id}constructor(e={}){u.prototype.__init.call(this),this._usePgNative=!!e.usePgNative}loadDependency(){return this._module=this._module||(0,i.$y)("pg")}setupOnce(e,t){if((0,c.K)(t))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.kg.log("Postgres Integration is skipped because of instrumenter configuration."));const n=this.loadDependency();if(!n)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.kg.error("Postgres Integration was unable to require `pg` package."));if(this._usePgNative&&!(0,r.x)([n,"access",e=>e.native,"optionalAccess",e=>e.Client]))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.kg.error("Postgres Integration was unable to access 'pg-native' bindings."));const{Client:i}=this._usePgNative?n.native:n;(0,o.hl)(i.prototype,"query",(function(e){return function(n,i,s){const o=t().getScope(),c=(0,r.x)([o,"optionalAccess",e=>e.getSpan,"call",e=>e()]),u=(0,r.x)([c,"optionalAccess",e=>e.startChild,"call",e=>e({description:"string"==typeof n?n:n.text,op:"db",data:{"db.system":"postgresql"}})]);if("function"==typeof s)return e.call(this,n,i,(function(e,t){(0,r.x)([u,"optionalAccess",e=>e.finish,"call",e=>e()]),s(e,t)}));if("function"==typeof i)return e.call(this,n,(function(e,t){(0,r.x)([u,"optionalAccess",e=>e.finish,"call",e=>e()]),i(e,t)}));const l=void 0!==i?e.call(this,n,i):e.call(this,n);return(0,a.J8)(l)?l.then((e=>((0,r.x)([u,"optionalAccess",e=>e.finish,"call",e=>e()]),e))):((0,r.x)([u,"optionalAccess",e=>e.finish,"call",e=>e()]),l)}}))}}u.__initStatic()},9889:(e,t,n)=>{"use strict";n.d(t,{g:()=>o});var r=n(1250),i=n(2343),s=n(7990);class o{static __initStatic(){this.id="Prisma"}__init(){this.name=o.id}constructor(e={}){var t;o.prototype.__init.call(this),(t=e.client)&&t.$use?this._client=e.client:("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.kg.warn(`Unsupported Prisma client provided to PrismaIntegration. Provided client: ${JSON.stringify(e.client)}`)}setupOnce(e,t){this._client?(0,s.K)(t)?("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.kg.log("Prisma Integration is skipped because of instrumenter configuration."):this._client.$use(((e,t)=>{const n=e.action,i=e.model;return(0,r.g)({name:i?`${i} ${n}`:n,op:"db.sql.prisma",data:{"db.system":"prisma"}},(()=>t(e)))})):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.kg.error("PrismaIntegration is missing a Prisma Client Instance")}}o.__initStatic()},7990:(e,t,n)=>{"use strict";n.d(t,{K:()=>i});var r=n(4307);function i(e){const t=(0,r.x)([e,"call",e=>e(),"access",e=>e.getClient,"call",e=>e(),"optionalAccess",e=>e.getOptions,"call",e=>e()]);return"sentry"!==((0,r.x)([t,"optionalAccess",e=>e.instrumenter])||"sentry")}},1131:(e,t,n)=>{"use strict";n.d(t,{J:()=>r});const r="production"},5659:(e,t,n)=>{"use strict";n.d(t,{$b:()=>_,Gd:()=>g,Ok:()=>b,Xb:()=>d,cu:()=>h,j0:()=>S,pj:()=>f,uZ:()=>y,vi:()=>E});var r=n(2844),i=n(1170),s=n(2343),o=n(1235),a=n(1131),c=n(350),u=n(9015);const l=4,p=100;class d{constructor(e,t=new c.s,n=l){this._version=n,this._stack=[{scope:t}],e&&this.bindClient(e)}isOlderThan(e){return this._version<e}bindClient(e){this.getStackTop().client=e,e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){const e=c.s.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return!(this.getStack().length<=1||!this.getStack().pop())}withScope(e){const t=this.pushScope();try{e(t)}finally{this.popScope()}}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,t){const n=this._lastEventId=t&&t.event_id?t.event_id:(0,r.DM)(),i=new Error("Sentry syntheticException");return this._withClient(((r,s)=>{r.captureException(e,{originalException:e,syntheticException:i,...t,event_id:n},s)})),n}captureMessage(e,t,n){const i=this._lastEventId=n&&n.event_id?n.event_id:(0,r.DM)(),s=new Error(e);return this._withClient(((r,o)=>{r.captureMessage(e,t,{originalException:e,syntheticException:s,...n,event_id:i},o)})),i}captureEvent(e,t){const n=t&&t.event_id?t.event_id:(0,r.DM)();return e.type||(this._lastEventId=n),this._withClient(((r,i)=>{r.captureEvent(e,{...t,event_id:n},i)})),n}lastEventId(){return this._lastEventId}addBreadcrumb(e,t){const{scope:n,client:r}=this.getStackTop();if(!r)return;const{beforeBreadcrumb:o=null,maxBreadcrumbs:a=p}=r.getOptions&&r.getOptions()||{};if(a<=0)return;const c={timestamp:(0,i.yW)(),...e},u=o?(0,s.Cf)((()=>o(c,t))):c;null!==u&&(r.emit&&r.emit("beforeAddBreadcrumb",u,t),n.addBreadcrumb(u,a))}setUser(e){this.getScope().setUser(e)}setTags(e){this.getScope().setTags(e)}setExtras(e){this.getScope().setExtras(e)}setTag(e,t){this.getScope().setTag(e,t)}setExtra(e,t){this.getScope().setExtra(e,t)}setContext(e,t){this.getScope().setContext(e,t)}configureScope(e){const{scope:t,client:n}=this.getStackTop();n&&e(t)}run(e){const t=f(this);try{e(this)}finally{f(t)}}getIntegration(e){const t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(t){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.kg.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,t){const n=this._callExtensionMethod("startTransaction",e,t);return"undefined"!=typeof __SENTRY_DEBUG__&&!__SENTRY_DEBUG__||n||console.warn("Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':\nSentry.addTracingExtensions();\nSentry.init({...});\n"),n}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){const e=this.getStackTop().scope,t=e.getSession();t&&(0,u.RJ)(t),this._sendSessionUpdate(),e.setSession()}startSession(e){const{scope:t,client:n}=this.getStackTop(),{release:r,environment:i=a.J}=n&&n.getOptions()||{},{userAgent:s}=o.n2.navigator||{},c=(0,u.Hv)({release:r,environment:i,user:t.getUser(),...s&&{userAgent:s},...e}),l=t.getSession&&t.getSession();return l&&"ok"===l.status&&(0,u.CT)(l,{status:"exited"}),this.endSession(),t.setSession(c),c}shouldSendDefaultPii(){const e=this.getClient(),t=e&&e.getOptions();return Boolean(t&&t.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:t}=this.getStackTop(),n=e.getSession();n&&t&&t.captureSession&&t.captureSession(n)}_withClient(e){const{scope:t,client:n}=this.getStackTop();n&&e(n,t)}_callExtensionMethod(e,...t){const n=h().__SENTRY__;if(n&&n.extensions&&"function"==typeof n.extensions[e])return n.extensions[e].apply(this,t);("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.kg.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function h(){return o.n2.__SENTRY__=o.n2.__SENTRY__||{extensions:{},hub:void 0},o.n2}function f(e){const t=h(),n=E(t);return S(t,e),n}function g(){const e=h();if(e.__SENTRY__&&e.__SENTRY__.acs){const t=e.__SENTRY__.acs.getCurrentHub();if(t)return t}return m(e)}function m(e=h()){return v(e)&&!E(e).isOlderThan(l)||S(e,new d),E(e)}function y(e,t=m()){if(!v(e)||E(e).isOlderThan(l)){const n=t.getStackTop();S(e,new d(n.client,c.s.clone(n.scope)))}}function _(e){const t=h();t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.acs=e}function b(e,t={}){const n=h();return n.__SENTRY__&&n.__SENTRY__.acs?n.__SENTRY__.acs.runWithAsyncContext(e,t):e()}function v(e){return!!(e&&e.__SENTRY__&&e.__SENTRY__.hub)}function E(e){return(0,o.YO)("hub",(()=>new d),e)}function S(e,t){return!!e&&((e.__SENTRY__=e.__SENTRY__||{}).hub=t,!0)}},350:(e,t,n)=>{"use strict";n.d(t,{c:()=>d,s:()=>l});var r=n(7597),i=n(1170),s=n(6893),o=n(2343),a=n(2844),c=n(1235),u=n(9015);class l{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={}}static clone(e){const t=new l;return e&&(t._breadcrumbs=[...e._breadcrumbs],t._tags={...e._tags},t._extra={...e._extra},t._contexts={...e._contexts},t._user=e._user,t._level=e._level,t._span=e._span,t._session=e._session,t._transactionName=e._transactionName,t._fingerprint=e._fingerprint,t._eventProcessors=[...e._eventProcessors],t._requestSession=e._requestSession,t._attachments=[...e._attachments],t._sdkProcessingMetadata={...e._sdkProcessingMetadata}),t}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{},this._session&&(0,u.CT)(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const e=this.getSpan();return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;if("function"==typeof e){const t=e(this);return t instanceof l?t:this}return e instanceof l?(this._tags={...this._tags,...e._tags},this._extra={...this._extra,...e._extra},this._contexts={...this._contexts,...e._contexts},e._user&&Object.keys(e._user).length&&(this._user=e._user),e._level&&(this._level=e._level),e._fingerprint&&(this._fingerprint=e._fingerprint),e._requestSession&&(this._requestSession=e._requestSession)):(0,r.PO)(e)&&(this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint&&(this._fingerprint=e.fingerprint),e.requestSession&&(this._requestSession=e.requestSession)),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this}addBreadcrumb(e,t){const n="number"==typeof t?t:100;if(n<=0)return this;const r={timestamp:(0,i.yW)(),...e};return this._breadcrumbs=[...this._breadcrumbs,r].slice(-n),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this._attachments}clearAttachments(){return this._attachments=[],this}applyToEvent(e,t={}){if(this._extra&&Object.keys(this._extra).length&&(e.extra={...this._extra,...e.extra}),this._tags&&Object.keys(this._tags).length&&(e.tags={...this._tags,...e.tags}),this._user&&Object.keys(this._user).length&&(e.user={...this._user,...e.user}),this._contexts&&Object.keys(this._contexts).length&&(e.contexts={...this._contexts,...e.contexts}),this._level&&(e.level=this._level),this._transactionName&&(e.transaction=this._transactionName),this._span){e.contexts={trace:this._span.getTraceContext(),...e.contexts};const t=this._span.transaction;if(t){e.sdkProcessingMetadata={dynamicSamplingContext:t.getDynamicSamplingContext(),...e.sdkProcessingMetadata};const n=t.name;n&&(e.tags={transaction:n,...e.tags})}}return this._applyFingerprint(e),e.breadcrumbs=[...e.breadcrumbs||[],...this._breadcrumbs],e.breadcrumbs=e.breadcrumbs.length>0?e.breadcrumbs:void 0,e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...this._sdkProcessingMetadata},this._notifyEventProcessors([...p(),...this._eventProcessors],e,t)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}_notifyEventProcessors(e,t,n,i=0){return new s.cW(((s,a)=>{const c=e[i];if(null===t||"function"!=typeof c)s(t);else{const u=c({...t},n);("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&c.id&&null===u&&o.kg.log(`Event processor "${c.id}" dropped event`),(0,r.J8)(u)?u.then((t=>this._notifyEventProcessors(e,t,n,i+1).then(s))).then(null,a):this._notifyEventProcessors(e,u,n,i+1).then(s).then(null,a)}}))}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((e=>{e(this)})),this._notifyingListeners=!1)}_applyFingerprint(e){e.fingerprint=e.fingerprint?(0,a.lE)(e.fingerprint):[],this._fingerprint&&(e.fingerprint=e.fingerprint.concat(this._fingerprint)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}}function p(){return(0,c.YO)("globalEventProcessors",(()=>[]))}function d(e){p().push(e)}},9015:(e,t,n)=>{"use strict";n.d(t,{CT:()=>a,Hv:()=>o,RJ:()=>c});var r=n(1170),i=n(2844),s=n(535);function o(e){const t=(0,r.ph)(),n={sid:(0,i.DM)(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(e){return(0,s.Jr)({sid:`${e.sid}`,init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"==typeof e.did||"string"==typeof e.did?`${e.did}`:void 0,duration:e.duration,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}(n)};return e&&a(n,e),n}function a(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||(0,r.ph)(),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:(0,i.DM)()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}function c(e,t){let n={};t?n={status:t}:"ok"===e.status&&(n={status:"exited"}),a(e,n)}},6890:(e,t,n)=>{"use strict";n.d(t,{T:()=>y,l:()=>m});var r=n(2343),i=n(7597),s=n(5659),o=n(7522),a=n(1688),c=n(9791);let u=!1;function l(){const e=(0,c.x1)();if(e){const t="internal_error";("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.kg.log(`[Tracing] Transaction: ${t} -> Global error occured`),e.setStatus(t)}}l.tag="sentry_tracingErrorCallback";var p=n(5544),d=n(8069);function h(){const e=this.getScope().getSpan();return e?{"sentry-trace":e.toTraceparent()}:{}}function f(e,t,n){if(!(0,o.z)(t))return e.sampled=!1,e;if(void 0!==e.sampled)return e.setMetadata({sampleRate:Number(e.sampled)}),e;let s;return"function"==typeof t.tracesSampler?(s=t.tracesSampler(n),e.setMetadata({sampleRate:Number(s)})):void 0!==n.parentSampled?s=n.parentSampled:void 0!==t.tracesSampleRate?(s=t.tracesSampleRate,e.setMetadata({sampleRate:Number(s)})):(s=1,e.setMetadata({sampleRate:s})),a=s,((0,i.i2)(a)||"number"!=typeof a&&"boolean"!=typeof a?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.kg.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(a)} of type ${JSON.stringify(typeof a)}.`),0):!(a<0||a>1)||(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.kg.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${a}.`),0))?s?(e.sampled=Math.random()<s,e.sampled?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.kg.log(`[Tracing] starting ${e.op} transaction - ${e.name}`),e):(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.kg.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(s)})`),e)):(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.kg.log("[Tracing] Discarding transaction because "+("function"==typeof t.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),e.sampled=!1,e):(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.kg.warn("[Tracing] Discarding transaction because of invalid sample rate."),e.sampled=!1,e);var a}function g(e,t){const n=this.getClient(),i=n&&n.getOptions()||{},s=i.instrumenter||"sentry",o=e.instrumenter||"sentry";s!==o&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.kg.error(`A transaction was started with instrumenter=\`${o}\`, but the SDK is configured with the \`${s}\` instrumenter.\nThe transaction will not be sampled. Please use the ${s} instrumentation to start transactions.`),e.sampled=!1);let a=new d.Y(e,this);return a=f(a,i,{parentSampled:e.parentSampled,transactionContext:e,...t}),a.sampled&&a.initSpanRecorder(i._experiments&&i._experiments.maxSpans),n&&n.emit&&n.emit("startTransaction",a),a}function m(e,t,n,r,i,s,o){const a=e.getClient(),c=a&&a.getOptions()||{};let u=new p.io(t,e,n,r,o,i);return u=f(u,c,{parentSampled:t.parentSampled,transactionContext:t,...s}),u.sampled&&u.initSpanRecorder(c._experiments&&c._experiments.maxSpans),a&&a.emit&&a.emit("startTransaction",u),u}function y(){const e=(0,s.cu)();e.__SENTRY__&&(e.__SENTRY__.extensions=e.__SENTRY__.extensions||{},e.__SENTRY__.extensions.startTransaction||(e.__SENTRY__.extensions.startTransaction=g),e.__SENTRY__.extensions.traceHeaders||(e.__SENTRY__.extensions.traceHeaders=h),u||(u=!0,(0,a.oq)("error",l),(0,a.oq)("unhandledrejection",l)))}},5544:(e,t,n)=>{"use strict";n.d(t,{AT:()=>a,io:()=>l});var r=n(1170),i=n(2343),s=n(8903),o=n(8069);const a={idleTimeout:1e3,finalTimeout:3e4,heartbeatInterval:5e3},c=["heartbeatFailed","idleTimeout","documentHidden","finalTimeout","externalFinish","cancelled"];class u extends s.gB{constructor(e,t,n,r){super(r),this._pushActivity=e,this._popActivity=t,this.transactionSpanId=n}add(e){e.spanId!==this.transactionSpanId&&(e.finish=t=>{e.endTimestamp="number"==typeof t?t:(0,r.ph)(),this._popActivity(e.spanId)},void 0===e.endTimestamp&&this._pushActivity(e.spanId)),super.add(e)}}class l extends o.Y{__init(){this.activities={}}__init2(){this._heartbeatCounter=0}__init3(){this._finished=!1}__init4(){this._idleTimeoutCanceledPermanently=!1}__init5(){this._beforeFinishCallbacks=[]}__init6(){this._finishReason=c[4]}constructor(e,t,n=a.idleTimeout,r=a.finalTimeout,s=a.heartbeatInterval,o=!1){super(e,t),this._idleHub=t,this._idleTimeout=n,this._finalTimeout=r,this._heartbeatInterval=s,this._onScope=o,l.prototype.__init.call(this),l.prototype.__init2.call(this),l.prototype.__init3.call(this),l.prototype.__init4.call(this),l.prototype.__init5.call(this),l.prototype.__init6.call(this),o&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.kg.log(`Setting idle transaction on scope. Span ID: ${this.spanId}`),t.configureScope((e=>e.setSpan(this)))),this._restartIdleTimeout(),setTimeout((()=>{this._finished||(this.setStatus("deadline_exceeded"),this._finishReason=c[3],this.finish())}),this._finalTimeout)}finish(e=(0,r.ph)()){if(this._finished=!0,this.activities={},"ui.action.click"===this.op&&this.setTag("finishReason",this._finishReason),this.spanRecorder){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.kg.log("[Tracing] finishing IdleTransaction",new Date(1e3*e).toISOString(),this.op);for(const t of this._beforeFinishCallbacks)t(this,e);this.spanRecorder.spans=this.spanRecorder.spans.filter((t=>{if(t.spanId===this.spanId)return!0;t.endTimestamp||(t.endTimestamp=e,t.setStatus("cancelled"),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.kg.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(t,void 0,2)));const n=t.startTimestamp<e;return n||("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.kg.log("[Tracing] discarding Span since it happened after Transaction was finished",JSON.stringify(t,void 0,2)),n})),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.kg.log("[Tracing] flushing IdleTransaction")}else("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.kg.log("[Tracing] No active IdleTransaction");if(this._onScope){const e=this._idleHub.getScope();e.getTransaction()===this&&e.setSpan(void 0)}return super.finish(e)}registerBeforeFinishCallback(e){this._beforeFinishCallbacks.push(e)}initSpanRecorder(e){if(!this.spanRecorder){const t=e=>{this._finished||this._pushActivity(e)},n=e=>{this._finished||this._popActivity(e)};this.spanRecorder=new u(t,n,this.spanId,e),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.kg.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)}cancelIdleTimeout(e,{restartOnChildSpanChange:t}={restartOnChildSpanChange:!0}){this._idleTimeoutCanceledPermanently=!1===t,this._idleTimeoutID&&(clearTimeout(this._idleTimeoutID),this._idleTimeoutID=void 0,0===Object.keys(this.activities).length&&this._idleTimeoutCanceledPermanently&&(this._finishReason=c[5],this.finish(e)))}setFinishReason(e){this._finishReason=e}_restartIdleTimeout(e){this.cancelIdleTimeout(),this._idleTimeoutID=setTimeout((()=>{this._finished||0!==Object.keys(this.activities).length||(this._finishReason=c[1],this.finish(e))}),this._idleTimeout)}_pushActivity(e){this.cancelIdleTimeout(void 0,{restartOnChildSpanChange:!this._idleTimeoutCanceledPermanently}),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.kg.log(`[Tracing] pushActivity: ${e}`),this.activities[e]=!0,("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.kg.log("[Tracing] new activities count",Object.keys(this.activities).length)}_popActivity(e){if(this.activities[e]&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.kg.log(`[Tracing] popActivity ${e}`),delete this.activities[e],("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.kg.log("[Tracing] new activities count",Object.keys(this.activities).length)),0===Object.keys(this.activities).length){const e=(0,r.ph)();this._idleTimeoutCanceledPermanently?(this._finishReason=c[5],this.finish(e)):this._restartIdleTimeout(e+this._idleTimeout/1e3)}}_beat(){if(this._finished)return;const e=Object.keys(this.activities).join("");e===this._prevHeartbeatString?this._heartbeatCounter++:this._heartbeatCounter=1,this._prevHeartbeatString=e,this._heartbeatCounter>=3?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.kg.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus("deadline_exceeded"),this._finishReason=c[0],this.finish()):this._pingHeartbeat()}_pingHeartbeat(){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.kg.log(`pinging Heartbeat -> current counter: ${this._heartbeatCounter}`),setTimeout((()=>{this._beat()}),this._heartbeatInterval)}}},8903:(e,t,n)=>{"use strict";n.d(t,{Dr:()=>c,Zd:()=>u,gB:()=>a});var r=n(2844),i=n(1170),s=n(2343),o=n(535);class a{__init(){this.spans=[]}constructor(e=1e3){a.prototype.__init.call(this),this._maxlen=e}add(e){this.spans.length>this._maxlen?e.spanRecorder=void 0:this.spans.push(e)}}class c{__init2(){this.traceId=(0,r.DM)()}__init3(){this.spanId=(0,r.DM)().substring(16)}__init4(){this.startTimestamp=(0,i.ph)()}__init5(){this.tags={}}__init6(){this.data={}}__init7(){this.instrumenter="sentry"}constructor(e){if(c.prototype.__init2.call(this),c.prototype.__init3.call(this),c.prototype.__init4.call(this),c.prototype.__init5.call(this),c.prototype.__init6.call(this),c.prototype.__init7.call(this),!e)return this;e.traceId&&(this.traceId=e.traceId),e.spanId&&(this.spanId=e.spanId),e.parentSpanId&&(this.parentSpanId=e.parentSpanId),"sampled"in e&&(this.sampled=e.sampled),e.op&&(this.op=e.op),e.description&&(this.description=e.description),e.data&&(this.data=e.data),e.tags&&(this.tags=e.tags),e.status&&(this.status=e.status),e.startTimestamp&&(this.startTimestamp=e.startTimestamp),e.endTimestamp&&(this.endTimestamp=e.endTimestamp),e.instrumenter&&(this.instrumenter=e.instrumenter)}startChild(e){const t=new c({...e,parentSpanId:this.spanId,sampled:this.sampled,traceId:this.traceId});if(t.spanRecorder=this.spanRecorder,t.spanRecorder&&t.spanRecorder.add(t),t.transaction=this.transaction,("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&t.transaction){const n=`[Tracing] Starting '${e&&e.op||"< unknown op >"}' span on transaction '${t.transaction.name||"< unknown name >"}' (${t.transaction.spanId}).`;t.transaction.metadata.spanMetadata[t.spanId]={logMessage:n},s.kg.log(n)}return t}setTag(e,t){return this.tags={...this.tags,[e]:t},this}setData(e,t){return this.data={...this.data,[e]:t},this}setStatus(e){return this.status=e,this}setHttpStatus(e){this.setTag("http.status_code",String(e));const t=u(e);return"unknown_error"!==t&&this.setStatus(t),this}isSuccess(){return"ok"===this.status}finish(e){if(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&this.transaction&&this.transaction.spanId!==this.spanId){const{logMessage:e}=this.transaction.metadata.spanMetadata[this.spanId];e&&s.kg.log(e.replace("Starting","Finishing"))}this.endTimestamp="number"==typeof e?e:(0,i.ph)()}toTraceparent(){let e="";return void 0!==this.sampled&&(e=this.sampled?"-1":"-0"),`${this.traceId}-${this.spanId}${e}`}toContext(){return(0,o.Jr)({data:this.data,description:this.description,endTimestamp:this.endTimestamp,op:this.op,parentSpanId:this.parentSpanId,sampled:this.sampled,spanId:this.spanId,startTimestamp:this.startTimestamp,status:this.status,tags:this.tags,traceId:this.traceId})}updateWithContext(e){return this.data=e.data||{},this.description=e.description,this.endTimestamp=e.endTimestamp,this.op=e.op,this.parentSpanId=e.parentSpanId,this.sampled=e.sampled,this.spanId=e.spanId||this.spanId,this.startTimestamp=e.startTimestamp||this.startTimestamp,this.status=e.status,this.tags=e.tags||{},this.traceId=e.traceId||this.traceId,this}getTraceContext(){return(0,o.Jr)({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,trace_id:this.traceId})}toJSON(){return(0,o.Jr)({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,start_timestamp:this.startTimestamp,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this.endTimestamp,trace_id:this.traceId})}}function u(e){if(e<400&&e>=100)return"ok";if(e>=400&&e<500)switch(e){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(e>=500&&e<600)switch(e){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}},1250:(e,t,n)=>{"use strict";n.d(t,{g:()=>s});var r=n(7597),i=n(5659);function s(e,t,n=(()=>{})){const s={...e};void 0!==s.name&&void 0===s.description&&(s.description=s.name);const o=(0,i.Gd)(),a=o.getScope(),c=a.getSpan(),u=c?c.startChild(s):o.startTransaction(s);function l(){u&&u.finish(),o.getScope().setSpan(c)}let p;a.setSpan(u);try{p=t(u)}catch(e){throw u&&u.setStatus("internal_error"),n(e),l(),e}return(0,r.J8)(p)?Promise.resolve(p).then((()=>{l()}),(e=>{u&&u.setStatus("internal_error"),n(e),l()})):l(),p}},8069:(e,t,n)=>{"use strict";n.d(t,{Y:()=>c});var r=n(2343),i=n(535),s=n(1131),o=n(5659),a=n(8903);class c extends a.Dr{__init(){this._measurements={}}__init2(){this._contexts={}}__init3(){this._frozenDynamicSamplingContext=void 0}constructor(e,t){super(e),c.prototype.__init.call(this),c.prototype.__init2.call(this),c.prototype.__init3.call(this),this._hub=t||(0,o.Gd)(),this._name=e.name||"",this.metadata={source:"custom",...e.metadata,spanMetadata:{}},this._trimEnd=e.trimEnd,this.transaction=this;const n=this.metadata.dynamicSamplingContext;n&&(this._frozenDynamicSamplingContext={...n})}get name(){return this._name}set name(e){this.setName(e)}setName(e,t="custom"){this._name=e,this.metadata.source=t}initSpanRecorder(e=1e3){this.spanRecorder||(this.spanRecorder=new a.gB(e)),this.spanRecorder.add(this)}setContext(e,t){null===t?delete this._contexts[e]:this._contexts[e]=t}setMeasurement(e,t,n=""){this._measurements[e]={value:t,unit:n}}setMetadata(e){this.metadata={...this.metadata,...e}}finish(e){if(void 0!==this.endTimestamp)return;this.name||(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.kg.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this.name="<unlabeled transaction>"),super.finish(e);const t=this._hub.getClient();if(t&&t.emit&&t.emit("finishTransaction",this),!0!==this.sampled)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.kg.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),void(t&&t.recordDroppedEvent("sample_rate","transaction"));const n=this.spanRecorder?this.spanRecorder.spans.filter((e=>e!==this&&e.endTimestamp)):[];this._trimEnd&&n.length>0&&(this.endTimestamp=n.reduce(((e,t)=>e.endTimestamp&&t.endTimestamp?e.endTimestamp>t.endTimestamp?e:t:e)).endTimestamp);const i=this.metadata,s={contexts:{...this._contexts,trace:this.getTraceContext()},spans:n,start_timestamp:this.startTimestamp,tags:this.tags,timestamp:this.endTimestamp,transaction:this.name,type:"transaction",sdkProcessingMetadata:{...i,dynamicSamplingContext:this.getDynamicSamplingContext()},...i.source&&{transaction_info:{source:i.source}}};return Object.keys(this._measurements).length>0&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.kg.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),s.measurements=this._measurements),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.kg.log(`[Tracing] Finishing ${this.op} transaction: ${this.name}.`),this._hub.captureEvent(s)}toContext(){const e=super.toContext();return(0,i.Jr)({...e,name:this.name,trimEnd:this._trimEnd})}updateWithContext(e){return super.updateWithContext(e),this.name=e.name||"",this._trimEnd=e.trimEnd,this}getDynamicSamplingContext(){if(this._frozenDynamicSamplingContext)return this._frozenDynamicSamplingContext;const e=this._hub||(0,o.Gd)(),t=e&&e.getClient();if(!t)return{};const{environment:n,release:r}=t.getOptions()||{},{publicKey:a}=t.getDsn()||{},c=this.metadata.sampleRate,u=void 0!==c?c.toString():void 0,{segment:l}=e.getScope().getUser()||{},p=this.metadata.source,d=p&&"url"!==p?this.name:void 0,h=(0,i.Jr)({environment:n||s.J,release:r,transaction:d,user_segment:l,public_key:a,trace_id:this.traceId,sample_rate:u});return t.emit&&t.emit("createDsc",h),h}setHub(e){this._hub=e}}},9791:(e,t,n)=>{"use strict";n.d(t,{x1:()=>i});var r=n(5659);function i(e){return(e||(0,r.Gd)()).getScope().getTransaction()}},7522:(e,t,n)=>{"use strict";n.d(t,{z:()=>i});var r=n(5659);function i(e){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const t=(0,r.Gd)().getClient(),n=e||t&&t.getOptions();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}},450:(e,t,n)=>{"use strict";n.r(t),n.d(t,{DEFAULT_USER_INCLUDES:()=>Tt,Handlers:()=>i,Hub:()=>_.Xb,Integrations:()=>un,NodeClient:()=>Ne,SDK_VERSION:()=>y,Scope:()=>ne.s,addBreadcrumb:()=>w,addGlobalEventProcessor:()=>ne.c,addRequestDataToEvent:()=>Nt,autoDiscoverNodePerformanceMonitoringIntegrations:()=>ce,captureCheckIn:()=>P,captureEvent:()=>E,captureException:()=>b,captureMessage:()=>v,close:()=>Vt,configureScope:()=>S,createTransport:()=>ee,deepReadDirSync:()=>zt,defaultIntegrations:()=>Lt,defaultStackParser:()=>Yt,extractRequestData:()=>Ct,extractTraceparentData:()=>re.q,flush:()=>jt,getActiveTransaction:()=>ie.x1,getCurrentHub:()=>_.Gd,getHubFromCarrier:()=>_.vi,getSentryRelease:()=>$t,init:()=>Mt,lastEventId:()=>Gt,makeMain:()=>_.pj,makeNodeTransport:()=>Fe,runWithAsyncContext:()=>_.Ok,setContext:()=>I,setExtra:()=>O,setExtras:()=>T,setTag:()=>N,setTags:()=>C,setUser:()=>D,spanStatusfromHttpCode:()=>se.Zd,startTransaction:()=>x,trace:()=>oe.g,withScope:()=>A});var r={};n.r(r),n.d(r,{FunctionToString:()=>u,InboundFilters:()=>g});var i={};n.r(i),n.d(i,{errorHandler:()=>Qt,extractRequestData:()=>Kt,parseRequest:()=>Wt,requestHandler:()=>Xt,tracingHandler:()=>Jt,trpcMiddleware:()=>en});var s={};n.r(s),n.d(s,{Console:()=>ze,Context:()=>ft,ContextLines:()=>st,Http:()=>Xe,LinkedErrors:()=>at,LocalVariables:()=>Bt,Modules:()=>lt,OnUncaughtException:()=>tt,OnUnhandledRejection:()=>nt,RequestData:()=>At,Undici:()=>Ut.Y});var o={};n.r(o),n.d(o,{Apollo:()=>tn._,Express:()=>nn.N,GraphQL:()=>rn.k,Mongo:()=>sn._,Mysql:()=>on.m,Postgres:()=>an.E,Prisma:()=>cn.g});var a=n(535);let c;class u{constructor(){u.prototype.__init.call(this)}static __initStatic(){this.id="FunctionToString"}__init(){this.name=u.id}setupOnce(){c=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=(0,a.HK)(this)||this;return c.apply(t,e)}}catch(e){}}}u.__initStatic();var l=n(2343),p=n(2844),d=n(7321);const h=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],f=[/^.*healthcheck.*$/,/^.*healthy.*$/,/^.*live.*$/,/^.*ready.*$/,/^.*heartbeat.*$/,/^.*\/health$/,/^.*\/healthz$/];class g{static __initStatic(){this.id="InboundFilters"}__init(){this.name=g.id}constructor(e={}){this._options=e,g.prototype.__init.call(this)}setupOnce(e,t){const n=e=>{const n=t();if(n){const t=n.getIntegration(g);if(t){const r=n.getClient(),i=r?r.getOptions():{},s=function(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:h],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[],...e.disableTransactionDefaults?[]:f],ignoreInternal:void 0===e.ignoreInternal||e.ignoreInternal}}(t._options,i);return function(e,t){return t.ignoreInternal&&function(e){try{return"SentryError"===e.exception.values[0].type}catch(e){}return!1}(e)?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${(0,p.jH)(e)}`),!0):function(e,t){return!(e.type||!t||!t.length)&&function(e){if(e.message)return[e.message];if(e.exception){const{values:t}=e.exception;try{const{type:e="",value:n=""}=t&&t[t.length-1]||{};return[`${n}`,`${e}: ${n}`]}catch(t){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.error(`Cannot extract message for event ${(0,p.jH)(e)}`),[]}}return[]}(e).some((e=>(0,d.U0)(e,t)))}(e,t.ignoreErrors)?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${(0,p.jH)(e)}`),!0):function(e,t){if("transaction"!==e.type||!t||!t.length)return!1;const n=e.transaction;return!!n&&(0,d.U0)(n,t)}(e,t.ignoreTransactions)?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${(0,p.jH)(e)}`),!0):function(e,t){if(!t||!t.length)return!1;const n=m(e);return!!n&&(0,d.U0)(n,t)}(e,t.denyUrls)?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${(0,p.jH)(e)}.\nUrl: ${m(e)}`),!0):!function(e,t){if(!t||!t.length)return!0;const n=m(e);return!n||(0,d.U0)(n,t)}(e,t.allowUrls)&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${(0,p.jH)(e)}.\nUrl: ${m(e)}`),!0)}(e,s)?null:e}}return e};n.id=this.name,e(n)}}function m(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch(e){}return t?function(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null}(t):null}catch(t){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.error(`Cannot extract url for event ${(0,p.jH)(e)}`),null}}g.__initStatic();const y="7.56.0";var _=n(5659);function b(e,t){return(0,_.Gd)().captureException(e,{captureContext:t})}function v(e,t){const n="string"==typeof t?t:void 0,r="string"!=typeof t?{captureContext:t}:void 0;return(0,_.Gd)().captureMessage(e,n,r)}function E(e,t){return(0,_.Gd)().captureEvent(e,t)}function S(e){(0,_.Gd)().configureScope(e)}function w(e){(0,_.Gd)().addBreadcrumb(e)}function I(e,t){(0,_.Gd)().setContext(e,t)}function T(e){(0,_.Gd)().setExtras(e)}function O(e,t){(0,_.Gd)().setExtra(e,t)}function C(e){(0,_.Gd)().setTags(e)}function N(e,t){(0,_.Gd)().setTag(e,t)}function D(e){(0,_.Gd)().setUser(e)}function A(e){(0,_.Gd)().withScope(e)}function x(e,t){return(0,_.Gd)().startTransaction({...e},t)}function P(e,t){const n=(0,_.Gd)().getClient();if(n){if(n.captureCheckIn)return n.captureCheckIn(e,t);("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.warn("Cannot capture check-in. Client does not support sending check-ins.")}else("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.warn("Cannot capture check-in. No client defined.");return(0,p.DM)()}class k extends Error{constructor(e,t="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=t}}var R=n(6893);const B=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function U(e,t=!1){const{host:n,path:r,pass:i,port:s,projectId:o,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&i?`:${i}`:""}@${n}${s?`:${s}`:""}/${r?`${r}/`:r}${o}`}function F(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}var L=n(7597),M=n(6147);function G(e,t=100,n=1/0){try{return V("",e,t,n)}catch(e){return{ERROR:`**non-serializable** (${e})`}}}function j(e,t=3,n=102400){const r=G(e,t);return i=r,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(i))>n?j(e,t-1,n):r;var i}function V(e,t,n=1/0,r=1/0,i=function(){const e="function"==typeof WeakSet,t=e?new WeakSet:[];return[function(n){if(e)return!!t.has(n)||(t.add(n),!1);for(let e=0;e<t.length;e++)if(t[e]===n)return!0;return t.push(n),!1},function(n){if(e)t.delete(n);else for(let e=0;e<t.length;e++)if(t[e]===n){t.splice(e,1);break}}]}()){const[s,o]=i;if(null==t||["number","boolean","string"].includes(typeof t)&&!(0,L.i2)(t))return t;const c=function(e,t){try{if("domain"===e&&t&&"object"==typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if("undefined"!=typeof global&&t===global)return"[Global]";if("undefined"!=typeof window&&t===window)return"[Window]";if("undefined"!=typeof document&&t===document)return"[Document]";if((0,L.Cy)(t))return"[SyntheticEvent]";if("number"==typeof t&&t!=t)return"[NaN]";if("function"==typeof t)return`[Function: ${(0,M.$P)(t)}]`;if("symbol"==typeof t)return`[${String(t)}]`;if("bigint"==typeof t)return`[BigInt: ${String(t)}]`;const n=function(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(e){return`**non-serializable** (${e})`}}(e,t);if(!c.startsWith("[object "))return c;if(t.__sentry_skip_normalization__)return t;const u="number"==typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:n;if(0===u)return c.replace("object ","");if(s(t))return"[Circular ~]";const l=t;if(l&&"function"==typeof l.toJSON)try{return V("",l.toJSON(),u-1,r,i)}catch(e){}const p=Array.isArray(t)?[]:{};let d=0;const h=(0,a.Sh)(t);for(const e in h){if(!Object.prototype.hasOwnProperty.call(h,e))continue;if(d>=r){p[e]="[MaxProperties ~]";break}const t=h[e];p[e]=V(e,t,u-1,r,i),d++}return o(t),p}function q(e,t=[]){return[e,t]}function $(e,t){const[n,r]=e;return[n,[...r,t]]}function Y(e,t){const n=e[1];for(const e of n)if(t(e,e[0].type))return!0;return!1}function z(e,t){return(t||new TextEncoder).encode(e)}function H(e,t){const[n,r]=e;let i=JSON.stringify(n);function s(e){"string"==typeof i?i="string"==typeof e?i+e:[z(i,t),e]:i.push("string"==typeof e?z(e,t):e)}for(const e of r){const[t,n]=e;if(s(`\n${JSON.stringify(t)}\n`),"string"==typeof n||n instanceof Uint8Array)s(n);else{let e;try{e=JSON.stringify(n)}catch(t){e=JSON.stringify(G(n))}s(e)}}return"string"==typeof i?i:function(e){const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);let r=0;for(const t of e)n.set(t,r),r+=t.length;return n}(i)}function K(e,t){const n="string"==typeof e.data?z(e.data,t):e.data;return[(0,a.Jr)({type:"attachment",length:n.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),n]}const W={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor"};function J(e){return W[e]}function X(e){if(!e||!e.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}const Z=6e4;const Q=30;function ee(e,t,n=function(e){const t=[];function n(e){return t.splice(t.indexOf(e),1)[0]}return{$:t,add:function(r){if(!(void 0===e||t.length<e))return(0,R.$2)(new k("Not adding Promise because buffer limit was reached."));const i=r();return-1===t.indexOf(i)&&t.push(i),i.then((()=>n(i))).then(null,(()=>n(i).then(null,(()=>{})))),i},drain:function(e){return new R.cW(((n,r)=>{let i=t.length;if(!i)return n(!0);const s=setTimeout((()=>{e&&e>0&&n(!1)}),e);t.forEach((e=>{(0,R.WD)(e).then((()=>{--i||(clearTimeout(s),n(!0))}),r)}))}))}}}(e.bufferSize||Q)){let r={};function i(i){const s=[];if(Y(i,((t,n)=>{const i=J(n);if(function(e,t,n=Date.now()){return function(e,t){return e[t]||e.all||0}(e,t)>n}(r,i)){const r=te(t,n);e.recordDroppedEvent("ratelimit_backoff",i,r)}else s.push(t)})),0===s.length)return(0,R.WD)();const o=q(i[0],s),a=t=>{Y(o,((n,r)=>{const i=te(n,r);e.recordDroppedEvent(t,J(r),i)}))};return n.add((()=>t({body:H(o,e.textEncoder)}).then((e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),r=function(e,{statusCode:t,headers:n},r=Date.now()){const i={...e},s=n&&n["x-sentry-rate-limits"],o=n&&n["retry-after"];if(s)for(const e of s.trim().split(",")){const[t,n]=e.split(":",2),s=parseInt(t,10),o=1e3*(isNaN(s)?60:s);if(n)for(const e of n.split(";"))i[e]=r+o;else i.all=r+o}else o?i.all=r+function(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return 1e3*n;const r=Date.parse(`${e}`);return isNaN(r)?Z:r-t}(o,r):429===t&&(i.all=r+6e4);return i}(r,e),e)),(e=>{throw a("network_error"),e})))).then((e=>e),(e=>{if(e instanceof k)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.error("Skipped sending event because buffer is full."),a("queue_overflow"),(0,R.WD)();throw e}))}return i.__sentry__baseTransport__=!0,{send:i,flush:e=>n.drain(e)}}function te(e,t){if("event"===t||"transaction"===t)return Array.isArray(e)?e[1]:void 0}var ne=n(350),re=n(7638),ie=n(9791),se=n(8903),oe=n(1250),ae=n(6046);function ce(){const e=ae.G.map((e=>{try{return e()}catch(e){return}})).filter((e=>!!e));return 0===e.length&&l.kg.warn("Performance monitoring integrations could not be automatically loaded."),e.filter((e=>!!e.loadDependency()))}var ue=n(4307);const le=[];function pe(e){const t=e.defaultIntegrations||[],n=e.integrations;let r;t.forEach((e=>{e.isDefaultInstance=!0})),r=Array.isArray(n)?[...t,...n]:"function"==typeof n?(0,p.lE)(n(t)):t;const i=function(e){const t={};return e.forEach((e=>{const{name:n}=e,r=t[n];r&&!r.isDefaultInstance&&e.isDefaultInstance||(t[n]=e)})),Object.keys(t).map((e=>t[e]))}(r),s=function(e,t){for(let t=0;t<e.length;t++)if(!0==("Debug"===e[t].name))return t;return-1}(i);if(-1!==s){const[e]=i.splice(s,1);i.push(e)}return i}function de(e,t){t[e.name]=e,-1===le.indexOf(e.name)&&(e.setupOnce(ne.c,_.Gd),le.push(e.name),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.log(`Integration installed: ${e.name}`))}var he=n(9015),fe=n(1170),ge=n(1235),me=n(1131);const ye=new WeakMap,_e="Not capturing exception because it's already been captured.";class be{__init(){this._integrations={}}__init2(){this._integrationsInitialized=!1}__init3(){this._numProcessing=0}__init4(){this._outcomes={}}__init5(){this._hooks={}}constructor(e){if(be.prototype.__init.call(this),be.prototype.__init2.call(this),be.prototype.__init3.call(this),be.prototype.__init4.call(this),be.prototype.__init5.call(this),this._options=e,e.dsn?this._dsn=function(e){const t="string"==typeof e?function(e){const t=B.exec(e);if(!t)return void console.error(`Invalid Sentry Dsn: ${e}`);const[n,r,i="",s,o="",a]=t.slice(1);let c="",u=a;const l=u.split("/");if(l.length>1&&(c=l.slice(0,-1).join("/"),u=l.pop()),u){const e=u.match(/^\d+/);e&&(u=e[0])}return F({host:s,pass:i,path:c,projectId:u,port:o,protocol:n,publicKey:r})}(e):F(e);if(t&&function(e){if("undefined"!=typeof __SENTRY_DEBUG__&&!__SENTRY_DEBUG__)return!0;const{port:t,projectId:n,protocol:r}=e;return!(["protocol","publicKey","host","projectId"].find((t=>!e[t]&&(l.kg.error(`Invalid Sentry Dsn: ${t} missing`),!0)))||(n.match(/^\d+$/)?function(e){return"http"===e||"https"===e}(r)?t&&isNaN(parseInt(t,10))&&(l.kg.error(`Invalid Sentry Dsn: Invalid port ${t}`),1):(l.kg.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),1):(l.kg.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),1)))}(t))return t}(e.dsn):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.warn("No DSN provided, client will not do anything."),this._dsn){const t=function(e,t={}){const n="string"==typeof t?t:t.tunnel,r="string"!=typeof t&&t._metadata?t._metadata.sdk:void 0;return n||`${function(e){return`${function(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}(e)}${e.projectId}/envelope/`}(e)}?${function(e,t){return(0,a._j)({sentry_key:e.publicKey,sentry_version:"7",...t&&{sentry_client:`${t.name}/${t.version}`}})}(e,r)}`}(this._dsn,e);this._transport=e.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}}captureException(e,t,n){if((0,p.YO)(e))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.log(_e));let r=t&&t.event_id;return this._process(this.eventFromException(e,t).then((e=>this._captureEvent(e,t,n))).then((e=>{r=e}))),r}captureMessage(e,t,n,r){let i=n&&n.event_id;const s=(0,L.pt)(e)?this.eventFromMessage(String(e),t,n):this.eventFromException(e,n);return this._process(s.then((e=>this._captureEvent(e,n,r))).then((e=>{i=e}))),i}captureEvent(e,t,n){if(t&&t.originalException&&(0,p.YO)(t.originalException))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.log(_e));let r=t&&t.event_id;return this._process(this._captureEvent(e,t,n).then((e=>{r=e}))),r}captureSession(e){this._isEnabled()?"string"!=typeof e.release?("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),(0,he.CT)(e,{init:!1})):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.warn("SDK not enabled, will not capture session.")}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const t=this._transport;return t?this._isClientDoneProcessing(e).then((n=>t.flush(e).then((e=>n&&e)))):(0,R.WD)(!0)}close(e){return this.flush(e).then((e=>(this.getOptions().enabled=!1,e)))}setupIntegrations(){this._isEnabled()&&!this._integrationsInitialized&&(this._integrations=function(e){const t={};return e.forEach((e=>{e&&de(e,t)})),t}(this._options.integrations),this._integrationsInitialized=!0)}getIntegrationById(e){return this._integrations[e]}getIntegration(e){try{return this._integrations[e.id]||null}catch(t){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.warn(`Cannot retrieve integration ${e.id} from the current Client`),null}}addIntegration(e){de(e,this._integrations)}sendEvent(e,t={}){if(this._dsn){let n=function(e,t,n,r){const i=X(n),s=e.type&&"replay_event"!==e.type?e.type:"event";!function(e,t){t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]])}(e,n&&n.sdk);const o=function(e,t,n,r){const i=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!n&&{dsn:U(r)},...i&&{trace:(0,a.Jr)({...i})}}}(e,i,r,t);return delete e.sdkProcessingMetadata,q(o,[[{type:s},e]])}(e,this._dsn,this._options._metadata,this._options.tunnel);for(const e of t.attachments||[])n=$(n,K(e,this._options.transportOptions&&this._options.transportOptions.textEncoder));const r=this._sendEnvelope(n);r&&r.then((t=>this.emit("afterSendEvent",e,t)),null)}}sendSession(e){if(this._dsn){const t=function(e,t,n,r){const i=X(n);return q({sent_at:(new Date).toISOString(),...i&&{sdk:i},...!!r&&{dsn:U(t)}},["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}}recordDroppedEvent(e,t,n){if(this._options.sendClientReports){const n=`${e}:${t}`;("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.log(`Adding outcome: "${n}"`),this._outcomes[n]=this._outcomes[n]+1||1}}on(e,t){this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(t)}emit(e,...t){this._hooks[e]&&this._hooks[e].forEach((e=>e(...t)))}_updateSessionFromEvent(e,t){let n=!1,r=!1;const i=t.exception&&t.exception.values;if(i){r=!0;for(const e of i){const t=e.mechanism;if(t&&!1===t.handled){n=!0;break}}}const s="ok"===e.status;(s&&0===e.errors||s&&n)&&((0,he.CT)(e,{...n&&{status:"crashed"},errors:e.errors||Number(r||n)}),this.captureSession(e))}_isClientDoneProcessing(e){return new R.cW((t=>{let n=0;const r=setInterval((()=>{0==this._numProcessing?(clearInterval(r),t(!0)):(n+=1,e&&n>=e&&(clearInterval(r),t(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._dsn}_prepareEvent(e,t,n){const r=this.getOptions(),i=Object.keys(this._integrations);return!t.integrations&&i.length>0&&(t.integrations=i),function(e,t,n,r){const{normalizeDepth:i=3,normalizeMaxBreadth:s=1e3}=e,o={...t,event_id:t.event_id||n.event_id||(0,p.DM)(),timestamp:t.timestamp||(0,fe.yW)()},a=n.integrations||e.integrations.map((e=>e.name));!function(e,t){const{environment:n,release:r,dist:i,maxValueLength:s=250}=t;"environment"in e||(e.environment="environment"in t?n:me.J),void 0===e.release&&void 0!==r&&(e.release=r),void 0===e.dist&&void 0!==i&&(e.dist=i),e.message&&(e.message=(0,d.$G)(e.message,s));const o=e.exception&&e.exception.values&&e.exception.values[0];o&&o.value&&(o.value=(0,d.$G)(o.value,s));const a=e.request;a&&a.url&&(a.url=(0,d.$G)(a.url,s))}(o,e),function(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}(o,a),void 0===t.type&&function(e,t){const n=ge.n2._sentryDebugIds;if(!n)return;let r;const i=ye.get(t);i?r=i:(r=new Map,ye.set(t,r));const s=Object.keys(n).reduce(((e,i)=>{let s;const o=r.get(i);o?s=o:(s=t(i),r.set(i,s));for(let t=s.length-1;t>=0;t--){const r=s[t];if(r.filename){e[r.filename]=n[i];break}}return e}),{});try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.filename&&(e.debug_id=s[e.filename])}))}))}catch(e){}}(o,e.stackParser);let c=r;n.captureContext&&(c=ne.s.clone(c).update(n.captureContext));let u=(0,R.WD)(o);if(c){if(c.getAttachments){const e=[...n.attachments||[],...c.getAttachments()];e.length&&(n.attachments=e)}u=c.applyToEvent(o,n)}return u.then((e=>(e&&function(e){const t={};try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)}))}))}catch(e){}if(0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.keys(t).forEach((e=>{n.push({type:"sourcemap",code_file:e,debug_id:t[e]})}))}(e),"number"==typeof i&&i>0?function(e,t,n){if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((e=>({...e,...e.data&&{data:G(e.data,t,n)}})))},...e.user&&{user:G(e.user,t,n)},...e.contexts&&{contexts:G(e.contexts,t,n)},...e.extra&&{extra:G(e.extra,t,n)}};return e.contexts&&e.contexts.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=G(e.contexts.trace.data,t,n))),e.spans&&(r.spans=e.spans.map((e=>(e.data&&(e.data=G(e.data,t,n)),e)))),r}(e,i,s):e)))}(r,e,t,n)}_captureEvent(e,t={},n){return this._processEvent(e,t,n).then((e=>e.event_id),(e=>{if("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__){const t=e;"log"===t.logLevel?l.kg.log(t.message):l.kg.warn(t)}}))}_processEvent(e,t,n){const r=this.getOptions(),{sampleRate:i}=r;if(!this._isEnabled())return(0,R.$2)(new k("SDK not enabled, will not capture event.","log"));const s=Ee(e),o=ve(e),a=e.type||"error",c=`before send for type \`${a}\``;if(o&&"number"==typeof i&&Math.random()>i)return this.recordDroppedEvent("sample_rate","error",e),(0,R.$2)(new k(`Discarding event because it's not included in the random sample (sampling rate = ${i})`,"log"));const u="replay_event"===a?"replay":a;return this._prepareEvent(e,t,n).then((n=>{if(null===n)throw this.recordDroppedEvent("event_processor",u,e),new k("An event processor returned `null`, will not send event.","log");if(t.data&&!0===t.data.__sentry__)return n;const i=function(e,t,n){const{beforeSend:r,beforeSendTransaction:i}=e;return ve(t)&&r?r(t,n):Ee(t)&&i?i(t,n):t}(r,n,t);return function(e,t){const n=`${t} must return \`null\` or a valid event.`;if((0,L.J8)(e))return e.then((e=>{if(!(0,L.PO)(e)&&null!==e)throw new k(n);return e}),(e=>{throw new k(`${t} rejected with ${e}`)}));if(!(0,L.PO)(e)&&null!==e)throw new k(n);return e}(i,c)})).then((r=>{if(null===r)throw this.recordDroppedEvent("before_send",u,e),new k(`${c} returned \`null\`, will not send event.`,"log");const i=n&&n.getSession();!s&&i&&this._updateSessionFromEvent(i,r);const o=r.transaction_info;if(s&&o&&r.transaction!==e.transaction){const e="custom";r.transaction_info={...o,source:e}}return this.sendEvent(r,t),r})).then(null,(e=>{if(e instanceof k)throw e;throw this.captureException(e,{data:{__sentry__:!0},originalException:e}),new k(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${e}`)}))}_process(e){this._numProcessing++,e.then((e=>(this._numProcessing--,e)),(e=>(this._numProcessing--,e)))}_sendEnvelope(e){if(this._transport&&this._dsn)return this.emit("beforeEnvelope",e),this._transport.send(e).then(null,(e=>{("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.error("Error while sending event:",e)}));("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.error("Transport disabled")}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.keys(e).map((t=>{const[n,r]=t.split(":");return{reason:n,category:r,quantity:e[t]}}))}}function ve(e){return void 0===e.type}function Ee(e){return"transaction"===e.type}var Se=n(6890);class we{__init(){this.flushTimeout=60}__init2(){this._pendingAggregates={}}__init3(){this._isEnabled=!0}constructor(e,t){we.prototype.__init.call(this),we.prototype.__init2.call(this),we.prototype.__init3.call(this),this._client=e,this._intervalId=setInterval((()=>this.flush()),1e3*this.flushTimeout),this._sessionAttrs=t}flush(){const e=this.getSessionAggregates();0!==e.aggregates.length&&(this._pendingAggregates={},this._client.sendSession(e))}getSessionAggregates(){const e=Object.keys(this._pendingAggregates).map((e=>this._pendingAggregates[parseInt(e)])),t={attrs:this._sessionAttrs,aggregates:e};return(0,a.Jr)(t)}close(){clearInterval(this._intervalId),this._isEnabled=!1,this.flush()}incrementSessionStatusCount(){if(!this._isEnabled)return;const e=(0,_.Gd)().getScope(),t=e.getRequestSession();t&&t.status&&(this._incrementSessionStatusCount(t.status,new Date),e.setRequestSession(void 0))}_incrementSessionStatusCount(e,t){const n=new Date(t).setSeconds(0,0);this._pendingAggregates[n]=this._pendingAggregates[n]||{};const r=this._pendingAggregates[n];switch(r.started||(r.started=new Date(n).toISOString()),e){case"errored":return r.errored=(r.errored||0)+1,r.errored;case"ok":return r.exited=(r.exited||0)+1,r.exited;default:return r.crashed=(r.crashed||0)+1,r.crashed}}}var Ie=n(2037),Te=n(3837);function Oe(e,t){return e(t.stack||"",1)}function Ce(e,t){const n={type:t.name||t.constructor.name,value:t.message},r=Oe(e,t);return r.length&&(n.stacktrace={frames:r}),n}class Ne extends be{constructor(e){e._metadata=e._metadata||{},e._metadata.sdk=e._metadata.sdk||{name:"sentry.javascript.node",packages:[{name:"npm:@sentry/node",version:y}],version:y},e.transportOptions={textEncoder:new Te.TextEncoder,...e.transportOptions},(0,Se.T)(),super(e)}captureException(e,t,n){if(this._options.autoSessionTracking&&this._sessionFlusher&&n){const e=n.getRequestSession();e&&"ok"===e.status&&(e.status="errored")}return super.captureException(e,t,n)}captureEvent(e,t,n){if(this._options.autoSessionTracking&&this._sessionFlusher&&n&&"exception"===(e.type||"exception")&&e.exception&&e.exception.values&&e.exception.values.length>0){const e=n.getRequestSession();e&&"ok"===e.status&&(e.status="errored")}return super.captureEvent(e,t,n)}close(e){return(0,ue.x)([this,"access",e=>e._sessionFlusher,"optionalAccess",e=>e.close,"call",e=>e()]),super.close(e)}initSessionFlusher(){const{release:e,environment:t}=this._options;e?this._sessionFlusher=new we(this,{release:e,environment:t}):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.warn("Cannot initialise an instance of SessionFlusher if no release is provided!")}eventFromException(e,t){return(0,R.WD)(function(e,t,n){let r=t;const i=n&&n.data&&n.data.mechanism||{handled:!0,type:"generic"};if(!(0,L.VZ)(t)){if((0,L.PO)(t)){const e=`Non-Error exception captured with keys: ${(0,a.zf)(t)}`,i=(0,_.Gd)(),s=i.getClient(),o=s&&s.getOptions().normalizeDepth;i.configureScope((e=>{e.setExtra("__serialized__",j(t,o))})),r=n&&n.syntheticException||new Error(e),r.message=e}else r=n&&n.syntheticException||new Error(t),r.message=t;i.synthetic=!0}const s={exception:{values:[Ce(e,r)]}};return(0,p.Db)(s,void 0,void 0),(0,p.EG)(s,i),{...s,event_id:n&&n.event_id}}(this._options.stackParser,e,t))}eventFromMessage(e,t="info",n){return(0,R.WD)(function(e,t,n="info",r,i){const s={event_id:r&&r.event_id,level:n,message:t};if(i&&r&&r.syntheticException){const n=Oe(e,r.syntheticException);n.length&&(s.exception={values:[{value:t,stacktrace:{frames:n}}]})}return s}(this._options.stackParser,e,t,n,this._options.attachStacktrace))}captureCheckIn(e,t){const n="in_progress"!==e.status&&e.checkInId?e.checkInId:(0,p.DM)();if(!this._isEnabled())return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.warn("SDK not enabled, will not capture checkin."),n;const r=this.getOptions(),{release:i,environment:s,tunnel:o}=r,a={check_in_id:n,monitor_slug:e.monitorSlug,status:e.status,release:i,environment:s};"in_progress"!==e.status&&(a.duration=e.duration),t&&(a.monitor_config={schedule:t.schedule,checkin_margin:t.checkinMargin,max_runtime:t.maxRuntime,timezone:t.timezone});const c=function(e,t,n,r){const i={sent_at:(new Date).toISOString(),...t&&t.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!r&&{dsn:U(r)}},s=function(e){return[{type:"check_in"},e]}(e);return q(i,[s])}(a,this.getSdkMetadata(),o,this.getDsn());return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.info("Sending checkin:",e.monitorSlug,e.status),this._sendEnvelope(c),n}_prepareEvent(e,t,n){return e.platform=e.platform||"node",e.contexts={...e.contexts,runtime:(0,ue.x)([e,"access",e=>e.contexts,"optionalAccess",e=>e.runtime])||{name:"node",version:global.process.version}},e.server_name=e.server_name||this.getOptions().serverName||global.process.env.SENTRY_NAME||Ie.hostname(),super._prepareEvent(e,t,n)}_captureRequestSession(){this._sessionFlusher?this._sessionFlusher.incrementSessionStatusCount():("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.warn("Discarded request mode session because autoSessionTracking option was disabled")}}function De(e,t){return null!=e?e:t()}var Ae=n(3685),xe=n(5687),Pe=n(6018),ke=n(2781),Re=n(7310),Be=n(9796);const Ue=32768;function Fe(e){let t;try{t=new Re.URL(e.url)}catch(t){return console.warn("[@sentry/node]: Invalid dsn or tunnel option, will not send any events. The tunnel option must be a full URL when used."),ee(e,(()=>Promise.resolve({})))}const n="https:"===t.protocol,r=function(e,t){const{no_proxy:n}=process.env;return n&&n.split(",").some((t=>e.host.endsWith(t)||e.hostname.endsWith(t)))?void 0:t}(t,e.proxy||(n?process.env.https_proxy:void 0)||process.env.http_proxy),i=n?xe:Ae,s=void 0!==e.keepAlive&&e.keepAlive,o=r?new Pe.HttpsProxyAgent(r):new i.Agent({keepAlive:s,maxSockets:30,timeout:2e3}),a=function(e,t,n){const{hostname:r,pathname:i,port:s,protocol:o,search:a}=new Re.URL(e.url);return function(c){return new Promise(((u,l)=>{let p=function(e){return new ke.Readable({read(){this.push(e),this.push(null)}})}(c.body);const d={...e.headers};c.body.length>Ue&&(d["content-encoding"]="gzip",p=p.pipe((0,Be.createGzip)()));const h=t.request({method:"POST",agent:n,headers:d,hostname:r,path:`${i}${a}`,port:s,protocol:o,ca:e.caCerts},(e=>{e.on("data",(()=>{})),e.on("end",(()=>{})),e.setEncoding("utf8");const t=De(e.headers["retry-after"],(()=>null)),n=De(e.headers["x-sentry-rate-limits"],(()=>null));u({statusCode:e.statusCode,headers:{"retry-after":t,"x-sentry-rate-limits":Array.isArray(n)?n[0]:n}})}));h.on("error",l),p.pipe(h)}))}}(e,De(e.httpModule,(()=>i)),o);return ee(e,a)}var Le=n(9656);const Me=require("domain");function Ge(){return Me.active}function je(){const e=Ge();if(e)return(0,_.uZ)(e),(0,_.vi)(e)}function Ve(e,t){const n=Ge();if(n&&(0,ue.x)([t,"optionalAccess",e=>e.reuseExisting]))return e();const r=Me.create(),i=function(e){const t={};return(0,_.uZ)(t,e),(0,_.vi)(t)}(n?(0,_.vi)(n):void 0);return(0,_.j0)(r,i),r.bind((()=>e()))()}const qe=require("async_hooks");function $e(){Le.V.major&&Le.V.major>=14?function(){const e=new qe.AsyncLocalStorage;function t(){return e.getStore()}(0,_.$b)({getCurrentHub:t,runWithAsyncContext:function(n,r){const i=t();if(i&&(0,ue.x)([r,"optionalAccess",e=>e.reuseExisting]))return n();const s=function(e){const t={};return(0,_.uZ)(t,e),(0,_.vi)(t)}(i);return e.run(s,(()=>n()))}})}():(0,_.$b)({getCurrentHub:je,runWithAsyncContext:Ve})}const Ye=["fatal","error","warning","log","info","debug"];class ze{constructor(){ze.prototype.__init.call(this)}static __initStatic(){this.id="Console"}__init(){this.name=ze.id}setupOnce(){for(const e of["debug","info","warn","error","log"])(0,a.hl)(console,e,He(e))}}function He(e){return function(t){const n=function(e){return"warn"===e?"warning":Ye.includes(e)?e:"log"}(e);return function(){(0,_.Gd)().getIntegration(ze)&&(0,_.Gd)().addBreadcrumb({category:"console",level:n,message:Te.format.apply(void 0,arguments)},{input:[...arguments],level:e}),t.apply(this,arguments)}}}ze.__initStatic();var Ke=n(9181),We=n(7612),Je=n(7578);class Xe{static __initStatic(){this.id="Http"}__init(){this.name=Xe.id}constructor(e={}){Xe.prototype.__init.call(this),this._breadcrumbs=void 0===e.breadcrumbs||e.breadcrumbs,this._tracing=e.tracing?!0===e.tracing?{}:e.tracing:void 0}setupOnce(e,t){if(!this._breadcrumbs&&!this._tracing)return;const r=(0,ue.x)([t,"call",e=>e(),"access",e=>e.getClient,"call",e=>e(),"optionalAccess",e=>e.getOptions,"call",e=>e()]);if(r&&"sentry"!==r.instrumenter)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.log("HTTP Integration is skipped because of instrumenter configuration."));const i=this._tracing?{...r,...this._tracing}:void 0,s=n(3685),o=Ze(this._breadcrumbs,i,s);if((0,a.hl)(s,"get",o),(0,a.hl)(s,"request",o),Le.V.major&&Le.V.major>8){const e=n(5687),t=Ze(this._breadcrumbs,i,e);(0,a.hl)(e,"get",t),(0,a.hl)(e,"request",t)}}}function Ze(e,t,n){const r=new We.LRUMap(100),i=new We.LRUMap(100);return function(s){return function(...o){const a=(0,Je.nY)(n,o),c=a[0],u=(0,Je.lx)(c),p=(0,Je.CA)(c);if((0,Je.ZB)(p))return s.apply(n,a);let h,f;const g=(0,_.Gd)().getScope(),m=c.method||"GET",y={url:p,"http.method":m};if(c.hash&&(y["http.fragment"]=c.hash.substring(1)),c.search&&(y["http.query"]=c.search.substring(1)),g&&t&&(e=>{if(void 0===(0,ue.x)([t,"optionalAccess",e=>e.shouldCreateSpanForRequest]))return!0;const n=r.get(e);if(void 0!==n)return n;const i=t.shouldCreateSpanForRequest(e);return r.set(e,i),i})(u)&&(f=g.getSpan(),f))if(h=f.startChild({description:`${m} ${y.url}`,op:"http.client",data:y}),(e=>{if(void 0===(0,ue.x)([t,"optionalAccess",e=>e.tracePropagationTargets]))return!0;const n=i.get(e);if(void 0!==n)return n;const r=(0,d.U0)(e,t.tracePropagationTargets);return i.set(e,r),r})(u)){const e=h.toTraceparent();if(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.log(`[Tracing] Adding sentry-trace header ${e} to outgoing request to "${p}": `),c.headers={...c.headers,"sentry-trace":e},f.transaction){const e=f.transaction.getDynamicSamplingContext(),t=(0,Ke.IQ)(e);let n;n=c.headers&&c.headers.baggage?t?Array.isArray(c.headers.baggage)?[...c.headers.baggage,t]:[c.headers.baggage,t]:c.headers.baggage:t,c.headers={...c.headers,...n&&{baggage:n}}}}else("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.log(`[Tracing] Not adding sentry-trace header to outgoing request (${p}) due to mismatching tracePropagationTargets option.`);return s.apply(n,a).once("response",(function(t){e&&Qe("response",y,this,t),h&&(t.statusCode&&h.setHttpStatus(t.statusCode),h.description=(0,Je.Dt)(h.description,c,this),h.finish())})).once("error",(function(){e&&Qe("error",y,this),h&&(h.setHttpStatus(500),h.description=(0,Je.Dt)(h.description,c,this),h.finish())}))}}}function Qe(e,t,n,r){(0,_.Gd)().getIntegration(Xe)&&(0,_.Gd)().addBreadcrumb({category:"http",data:{status_code:r&&r.statusCode,...t},type:"http"},{event:e,request:n,response:r})}function et(e){console.error(e&&e.stack?e.stack:e);const t=(0,_.Gd)().getClient();void 0===t&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.warn("No NodeClient was defined, we are exiting the process now."),global.process.exit(1));const n=t.getOptions(),r=n&&n.shutdownTimeout&&n.shutdownTimeout>0&&n.shutdownTimeout||2e3;t.close(r).then((e=>{e||("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.warn("We reached the timeout for emptying the request buffer, still exiting now!"),global.process.exit(1)}),(e=>{("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.error(e)}))}Xe.__initStatic();class tt{static __initStatic(){this.id="OnUncaughtException"}__init(){this.name=tt.id}__init2(){this.handler=this._makeErrorHandler()}constructor(e={}){tt.prototype.__init.call(this),tt.prototype.__init2.call(this),this._options={exitEvenIfOtherHandlersAreRegistered:!0,...e}}setupOnce(){global.process.on("uncaughtException",this.handler)}_makeErrorHandler(){let e,t=!1,n=!1,r=!1;return i=>{let s=et;const o=(0,_.Gd)().getClient();this._options.onFatalError?s=this._options.onFatalError:o&&o.getOptions().onFatalError&&(s=o.getOptions().onFatalError);const a=0===global.process.listeners("uncaughtException").reduce(((e,t)=>"domainUncaughtExceptionClear"===t.name||t.tag&&"sentry_tracingErrorCallback"===t.tag||t===this.handler?e:e+1),0),c=this._options.exitEvenIfOtherHandlersAreRegistered||a;if(t)c&&(r?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.warn("uncaught exception after calling fatal error shutdown callback - this is bad! forcing shutdown"),et(i)):n||(n=!0,setTimeout((()=>{r||(r=!0,s(e,i))}),2e3)));else{const n=(0,_.Gd)();e=i,t=!0,n.getIntegration(tt)?n.withScope((e=>{e.setLevel("fatal"),n.captureException(i,{originalException:i,data:{mechanism:{handled:!1,type:"onuncaughtexception"}}}),!r&&c&&(r=!0,s(i))})):!r&&c&&(r=!0,s(i))}}}}tt.__initStatic();class nt{static __initStatic(){this.id="OnUnhandledRejection"}__init(){this.name=nt.id}constructor(e={mode:"warn"}){this._options=e,nt.prototype.__init.call(this)}setupOnce(){global.process.on("unhandledRejection",this.sendUnhandledPromise.bind(this))}sendUnhandledPromise(e,t){const n=(0,_.Gd)();n.getIntegration(nt)&&n.withScope((r=>{r.setExtra("unhandledPromiseRejection",!0),n.captureException(e,{originalException:t,data:{mechanism:{handled:!1,type:"onunhandledrejection"}}})})),this._handleRejection(e)}_handleRejection(e){const t="This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). The promise rejected with the reason:";"warn"===this._options.mode?(0,l.Cf)((()=>{console.warn(t),console.error(e&&e.stack?e.stack:e)})):"strict"===this._options.mode&&((0,l.Cf)((()=>{console.warn(t)})),et(e))}}nt.__initStatic();var rt=n(7147);const it=new We.LRUMap(100);class st{static __initStatic(){this.id="ContextLines"}__init(){this.name=st.id}constructor(e={}){this._options=e,st.prototype.__init.call(this)}get _contextLines(){return void 0!==this._options.frameContextLines?this._options.frameContextLines:7}setupOnce(e){e((e=>this.addSourceContext(e)))}async addSourceContext(e){const t={},n=[];if(this._contextLines>0&&(0,ue.x)([e,"access",e=>e.exception,"optionalAccess",e=>e.values]))for(const r of e.exception.values)if((0,ue.x)([r,"access",e=>e.stacktrace,"optionalAccess",e=>e.frames]))for(let e=r.stacktrace.frames.length-1;e>=0;e--){const i=r.stacktrace.frames[e];!i.filename||t[i.filename]||it.get(i.filename)||(n.push(ot(i.filename)),t[i.filename]=1)}if(n.length>0&&await Promise.all(n),this._contextLines>0&&(0,ue.x)([e,"access",e=>e.exception,"optionalAccess",e=>e.values]))for(const t of e.exception.values)t.stacktrace&&t.stacktrace.frames&&await this.addSourceContextToFrames(t.stacktrace.frames);return e}addSourceContextToFrames(e){for(const t of e)if(t.filename&&void 0===t.context_line){const e=it.get(t.filename);if(e)try{(0,p.go)(e,t,this._contextLines)}catch(e){}}}}async function ot(e){const t=it.get(e);if(null===t)return null;if(void 0!==t)return t;let n=null;try{n=(await(r=e,new Promise(((e,t)=>{(0,rt.readFile)(r,"utf8",((n,r)=>{n?t(n):e(r)}))})))).split("\n")}catch(e){}var r;return it.set(e,n),n}st.__initStatic();class at{static __initStatic(){this.id="LinkedErrors"}__init(){this.name=at.id}constructor(e={}){at.prototype.__init.call(this),this._key=e.key||"cause",this._limit=e.limit||5}setupOnce(){(0,ne.c)((async(e,t)=>{const n=(0,_.Gd)(),r=n.getIntegration(at),i=n.getClient();return i&&r&&r._handler&&"function"==typeof r._handler&&await r._handler(i.getOptions().stackParser,e,t),e}))}_handler(e,t,n){return t.exception&&t.exception.values&&(0,L.V9)(n.originalException,Error)?new R.cW((r=>{this._walkErrorTree(e,n.originalException,this._key).then((e=>{t&&t.exception&&t.exception.values&&(t.exception.values=[...e,...t.exception.values]),r(t)})).then(null,(()=>{r(t)}))})):(0,R.WD)(t)}async _walkErrorTree(e,t,n,r=[]){if(!(0,L.V9)(t[n],Error)||r.length+1>=this._limit)return Promise.resolve(r);const i=Ce(e,t[n]),s=(0,_.Gd)().getIntegration(st);return s&&(0,ue.x)([i,"access",e=>e.stacktrace,"optionalAccess",e=>e.frames])&&await s.addSourceContextToFrames(i.stacktrace.frames),new Promise(((s,o)=>{this._walkErrorTree(e,t[n],n,[i,...r]).then(s).then(null,(()=>{o()}))}))}}at.__initStatic();var ct=n(1017);let ut;class lt{constructor(){lt.prototype.__init.call(this)}static __initStatic(){this.id="Modules"}__init(){this.name=lt.id}setupOnce(e,t){e((e=>t().getIntegration(lt)?{...e,modules:{...e.modules,...this._getModules()}}:e))}_getModules(){return ut||(ut=function(){const e=n.c[n.s]&&n.c[n.s].paths||[],t=function(){try{return n.c?Object.keys(n.c):[]}catch(e){return[]}}(),r={},i={};return t.forEach((t=>{let n=t;const s=()=>{const t=n;if(n=(0,ct.dirname)(t),!n||t===n||i[t])return;if(e.indexOf(n)<0)return s();const o=(0,ct.join)(t,"package.json");if(i[t]=!0,!(0,rt.existsSync)(o))return s();try{const e=JSON.parse((0,rt.readFileSync)(o,"utf8"));r[e.name]=e.version}catch(e){}};s()})),r}()),ut}}lt.__initStatic();const pt=require("child_process"),dt=(0,Te.promisify)(rt.readFile),ht=(0,Te.promisify)(rt.readdir);class ft{static __initStatic(){this.id="Context"}__init(){this.name=ft.id}constructor(e={app:!0,os:!0,device:!0,culture:!0}){this._options=e,ft.prototype.__init.call(this)}setupOnce(e){e((e=>this.addContext(e)))}async addContext(e){void 0===this._cachedContext&&(this._cachedContext=this._getContexts());const t=this._updateContext(await this._cachedContext);return e.contexts={...e.contexts,app:{...t.app,...(0,ue.x)([e,"access",e=>e.contexts,"optionalAccess",e=>e.app])},os:{...t.os,...(0,ue.x)([e,"access",e=>e.contexts,"optionalAccess",e=>e.os])},device:{...t.device,...(0,ue.x)([e,"access",e=>e.contexts,"optionalAccess",e=>e.device])},culture:{...t.culture,...(0,ue.x)([e,"access",e=>e.contexts,"optionalAccess",e=>e.culture])}},e}_updateContext(e){return(0,ue.x)([e,"optionalAccess",e=>e.app,"optionalAccess",e=>e.app_memory])&&(e.app.app_memory=process.memoryUsage().rss),(0,ue.x)([e,"optionalAccess",e=>e.device,"optionalAccess",e=>e.free_memory])&&(e.device.free_memory=Ie.freemem()),e}async _getContexts(){const e={};if(this._options.os&&(e.os=await async function(){const e=Ie.platform();switch(e){case"darwin":return async function(){const e={kernel_version:Ie.release(),name:"Mac OS X",version:"10."+(Number(Ie.release().split(".")[0])-4)};try{const t=await new Promise(((e,t)=>{(0,pt.execFile)("/usr/bin/sw_vers",((n,r)=>{n?t(n):e(r)}))}));e.name=_t(/^ProductName:\s+(.*)$/m,t),e.version=_t(/^ProductVersion:\s+(.*)$/m,t),e.build=_t(/^BuildVersion:\s+(.*)$/m,t)}catch(e){}return e}();case"linux":return async function(){const e={kernel_version:Ie.release(),name:"Linux"};try{const t=await ht("/etc"),n=mt.find((e=>t.includes(e.name)));if(!n)return e;const r=(0,ct.join)("/etc",n.name),i=(await dt(r,{encoding:"utf-8"})).toLowerCase(),{distros:s}=n;e.name=s.find((e=>i.indexOf(bt(e))>=0))||s[0];const o=bt(e.name);e.version=yt[o](i)}catch(e){}return e}();default:return{name:gt[e]||e,version:Ie.release()}}}()),this._options.app&&(e.app=function(){const e=process.memoryUsage().rss;return{app_start_time:new Date(Date.now()-1e3*process.uptime()).toISOString(),app_memory:e}}()),this._options.device&&(e.device=function(e){const t={};let n;try{n=Ie.uptime&&Ie.uptime()}catch(e){}if("number"==typeof n&&(t.boot_time=new Date(Date.now()-1e3*n).toISOString()),t.arch=Ie.arch(),(!0===e||e.memory)&&(t.memory_size=Ie.totalmem(),t.free_memory=Ie.freemem()),!0===e||e.cpu){const e=Ie.cpus();if(e&&e.length){const n=e[0];t.processor_count=e.length,t.cpu_description=n.model,t.processor_frequency=n.speed}}return t}(this._options.device)),this._options.culture){const t=function(){try{if("string"!=typeof process.versions.icu)return;const e=new Date(9e8);if("enero"===new Intl.DateTimeFormat("es",{month:"long"}).format(e)){const e=Intl.DateTimeFormat().resolvedOptions();return{locale:e.locale,timezone:e.timeZone}}}catch(e){}}();t&&(e.culture=t)}return e}}ft.__initStatic();const gt={aix:"IBM AIX",freebsd:"FreeBSD",openbsd:"OpenBSD",sunos:"SunOS",win32:"Windows"},mt=[{name:"fedora-release",distros:["Fedora"]},{name:"redhat-release",distros:["Red Hat Linux","Centos"]},{name:"redhat_version",distros:["Red Hat Linux"]},{name:"SuSE-release",distros:["SUSE Linux"]},{name:"lsb-release",distros:["Ubuntu Linux","Arch Linux"]},{name:"debian_version",distros:["Debian"]},{name:"debian_release",distros:["Debian"]},{name:"arch-release",distros:["Arch Linux"]},{name:"gentoo-release",distros:["Gentoo Linux"]},{name:"novell-release",distros:["SUSE Linux"]},{name:"alpine-release",distros:["Alpine Linux"]}],yt={alpine:e=>e,arch:e=>_t(/distrib_release=(.*)/,e),centos:e=>_t(/release ([^ ]+)/,e),debian:e=>e,fedora:e=>_t(/release (..)/,e),mint:e=>_t(/distrib_release=(.*)/,e),red:e=>_t(/release ([^ ]+)/,e),suse:e=>_t(/VERSION = (.*)\n/,e),ubuntu:e=>_t(/distrib_release=(.*)/,e)};function _t(e,t){const n=e.exec(t);return n?n[1]:void 0}function bt(e){return e.split(" ")[0].toLowerCase()}var vt=n(442),Et=n(6956),St=n(6489);const wt={ip:!1,request:!0,transaction:!0,user:!0},It=["cookies","data","headers","method","query_string","url"],Tt=["id","username","email"];function Ot(e,t={}){const n=e.method&&e.method.toUpperCase();let r="",i="url";t.customRoute||e.route?(r=t.customRoute||`${e.baseUrl||""}${e.route&&e.route.path}`,i="route"):(e.originalUrl||e.url)&&(r=(0,Et.rt)(e.originalUrl||e.url||""));let s="";return t.method&&n&&(s+=n),t.method&&t.path&&(s+=" "),t.path&&r&&(s+=r),[s,i]}function Ct(e,t){const{include:n=It}=t||{},r={},i=e.headers||{},s=e.method,o=e.hostname||e.host||i.host||"<no host>",a="https"===e.protocol||e.socket&&e.socket.encrypted?"https":"http",c=e.originalUrl||e.url||"",u=c.startsWith(a)?c:`${a}://${o}${c}`;return n.forEach((t=>{switch(t){case"headers":r.headers=i,n.includes("cookies")||delete r.headers.cookie;break;case"method":r.method=s;break;case"url":r.url=u;break;case"cookies":r.cookies=e.cookies||i.cookie&&St.Q(i.cookie)||{};break;case"query_string":r.query_string=function(e){let t=e.originalUrl||e.url||"";if(t)return t.startsWith("/")&&(t=`http://dogs.are.great${t}`),e.query||void 0!==typeof URL&&new URL(t).search.replace("?","")||Re.parse(t).query||void 0}(e);break;case"data":if("GET"===s||"HEAD"===s)break;void 0!==e.body&&(r.data=(0,L.HD)(e.body)?e.body:JSON.stringify(G(e.body)));break;default:({}).hasOwnProperty.call(e,t)&&(r[t]=e[t])}})),r}function Nt(e,t,n){const r={...wt,...(0,ue.x)([n,"optionalAccess",e=>e.include])};if(r.request){const n=Array.isArray(r.request)?Ct(t,{include:r.request}):Ct(t);e.request={...e.request,...n}}if(r.user){const n=t.user&&(0,L.PO)(t.user)?function(e,t){const n={};return(Array.isArray(t)?t:Tt).forEach((t=>{e&&t in e&&(n[t]=e[t])})),n}(t.user,r.user):{};Object.keys(n).length&&(e.user={...e.user,...n})}if(r.ip){const n=t.ip||t.socket&&t.socket.remoteAddress;n&&(e.user={...e.user,ip_address:n})}return r.transaction&&!e.transaction&&(e.transaction=function(e,t){switch(t){case"path":return Ot(e,{path:!0})[0];case"handler":return e.route&&e.route.stack&&e.route.stack[0]&&e.route.stack[0].name||"<anonymous>";default:return Ot(e,{path:!0,method:!0})[0]}}(t,r.transaction)),e}const Dt={include:{cookies:!0,data:!0,headers:!0,ip:!1,query_string:!0,url:!0,user:{id:!0,username:!0,email:!0}},transactionNamingScheme:"methodPath"};class At{static __initStatic(){this.id="RequestData"}__init(){this.name=At.id}constructor(e={}){At.prototype.__init.call(this),this._addRequestData=Nt,this._options={...Dt,...e,include:{method:!0,...Dt.include,...e.include,user:e.include&&"boolean"==typeof e.include.user?e.include.user:{...Dt.include.user,...(e.include||{}).user}}}}setupOnce(e,t){const{transactionNamingScheme:n}=this._options;e((e=>{const r=t(),i=r.getIntegration(At),{sdkProcessingMetadata:s={}}=e,o=s.request;if(!i||!o)return e;const a=s.requestDataOptionsFromExpressHandler||s.requestDataOptionsFromGCPWrapper||function(e){const{transactionNamingScheme:t,include:{ip:n,user:r,...i}}=e,s=[];for(const[e,t]of Object.entries(i))t&&s.push(e);let o;if(void 0===r)o=!0;else if("boolean"==typeof r)o=r;else{const e=[];for(const[t,n]of Object.entries(r))n&&e.push(t);o=e}return{include:{ip:n,user:o,request:0!==s.length?s:void 0,transaction:t}}}(this._options),c=this._addRequestData(e,o,a);if("transaction"===e.type||"handler"===n)return c;const u=o._sentryTransaction;if(u){const e="sentry.javascript.nextjs"===function(e){try{return e.getClient().getOptions()._metadata.sdk.name}catch(e){return}}(r)?u.name.startsWith("/api"):"path"!==n,[t]=(0,vt.oA)(o,{path:!0,method:e,customRoute:u.name});c.transaction=t}return c}))}}function xt(e){let t=[],n=!1;function r(r){t=[],n||(n=!0,e(r))}return t.push(r),{add:function(e){t.push(e)},next:function(e){const n=t.pop()||r;try{n(e)}catch(t){r(e)}}}}At.__initStatic();class Pt{constructor(){const{Session:e}=n(1405);this._session=new e}configureAndConnect(e,t){this._session.connect(),this._session.on("Debugger.paused",(t=>{e(t,(()=>{this._session.post("Debugger.resume")}))})),this._session.post("Debugger.enable"),this._session.post("Debugger.setPauseOnExceptions",{state:t?"all":"uncaught"})}getLocalVariables(e,t){this._getProperties(e,(e=>{const{add:n,next:r}=xt(t);for(const t of e)if((0,ue.x)([t,"optionalAccess",e=>e.value,"optionalAccess",e=>e.objectId])&&"Array"===(0,ue.x)([t,"optionalAccess",e=>e.value,"access",e=>e.className])){const e=t.value.objectId;n((n=>this._unrollArray(e,t.name,n,r)))}else if((0,ue.x)([t,"optionalAccess",e=>e.value,"optionalAccess",e=>e.objectId])&&"Object"===(0,ue.x)([t,"optionalAccess",e=>e.value,"optionalAccess",e=>e.className])){const e=t.value.objectId;n((n=>this._unrollObject(e,t.name,n,r)))}else((0,ue.x)([t,"optionalAccess",e=>e.value,"optionalAccess",e=>e.value])||(0,ue.x)([t,"optionalAccess",e=>e.value,"optionalAccess",e=>e.description]))&&n((e=>this._unrollOther(t,e,r)));r({})}))}_getProperties(e,t){this._session.post("Runtime.getProperties",{objectId:e,ownProperties:!0},((e,n)=>{t(e?[]:n.result)}))}_unrollArray(e,t,n,r){this._getProperties(e,(e=>{n[t]=e.filter((e=>"length"!==e.name&&!isNaN(parseInt(e.name,10)))).sort(((e,t)=>parseInt(e.name,10)-parseInt(t.name,10))).map((e=>(0,ue.x)([e,"optionalAccess",e=>e.value,"optionalAccess",e=>e.value]))),r(n)}))}_unrollObject(e,t,n,r){this._getProperties(e,(e=>{n[t]=e.map((e=>[e.name,(0,ue.x)([e,"optionalAccess",e=>e.value,"optionalAccess",e=>e.value])])).reduce(((e,[t,n])=>(e[t]=n,e)),{}),r(n)}))}_unrollOther(e,t,n){(0,ue.x)([e,"optionalAccess",e=>e.value,"optionalAccess",e=>e.value])?t[e.name]=e.value.value:(0,ue.x)([e,"optionalAccess",e=>e.value,"optionalAccess",e=>e.description])&&"function"!==(0,ue.x)([e,"optionalAccess",e=>e.value,"optionalAccess",e=>e.type])&&(t[e.name]=`<${e.value.description}>`),n(t)}}function kt(e){return void 0!==e&&["","?","<anonymous>"].includes(e)}function Rt(e){if(void 0!==e)return e.slice(-10).reduce(((e,t)=>`${e},${t.function},${t.lineno},${t.colno}`),"")}class Bt{static __initStatic(){this.id="LocalVariables"}__init(){this.name=Bt.id}__init2(){this._cachedFrames=new We.LRUMap(20)}constructor(e={},t=function(){try{return new Pt}catch(e){return}}()){this._options=e,this._session=t,Bt.prototype.__init.call(this),Bt.prototype.__init2.call(this)}setupOnce(e,t){this._setup(e,(0,ue.x)([t,"call",e=>e(),"access",e=>e.getClient,"call",e=>e(),"optionalAccess",e=>e.getOptions,"call",e=>e()]))}_setup(e,t){if(this._session&&(0,ue.x)([t,"optionalAccess",e=>e.includeLocalVariables])){if((Le.V.major||0)<18)return void l.kg.log("The `LocalVariables` integration is only supported on Node >= v18.");this._session.configureAndConnect(((e,n)=>this._handlePaused(t.stackParser,e,n)),!!this._options.captureAllExceptions),e((async e=>this._addLocalVariables(e)))}}_handlePaused(e,{params:{reason:t,data:n,callFrames:r}},i){if("exception"!==t&&"promiseRejection"!==t)return void i();const s=function(e,t){if(void 0!==t)return Rt(e(t,1))}(e,(0,ue.x)([n,"optionalAccess",e=>e.description]));if(null==s)return void i();const{add:o,next:a}=xt((e=>{this._cachedFrames.set(s,e),i()}));for(let e=0;e<Math.min(r.length,5);e++){const{scopeChain:t,functionName:n,this:i}=r[e],s=t.find((e=>"local"===e.type)),c="global"!==i.className&&i.className?`${i.className}.${n}`:n;if(void 0===(0,ue.x)([s,"optionalAccess",e=>e.object,"access",e=>e.objectId]))o((t=>{t[e]={function:c},a(t)}));else{const t=s.object.objectId;o((n=>(0,ue.x)([this,"access",e=>e._session,"optionalAccess",e=>e.getLocalVariables,"call",r=>r(t,(t=>{n[e]={function:c,vars:t},a(n)}))])))}}a([])}_addLocalVariables(e){for(const t of(0,ue.x)([e,"optionalAccess",e=>e.exception,"optionalAccess",e=>e.values])||[])this._addLocalVariablesToException(t);return e}_addLocalVariablesToException(e){const t=Rt((0,ue.x)([e,"optionalAccess",e=>e.stacktrace,"optionalAccess",e=>e.frames]));if(void 0===t)return;const n=this._cachedFrames.delete(t);if(void 0===n)return;const r=(0,ue.x)([e,"access",e=>e.stacktrace,"optionalAccess",e=>e.frames,"optionalAccess",e=>e.length])||0;for(let t=0;t<r;t++){const o=r-t-1;if(!(0,ue.x)([e,"optionalAccess",e=>e.stacktrace,"optionalAccess",e=>e.frames,"optionalAccess",e=>e[o]])||!n[t])break;void 0!==n[t].vars&&!1!==e.stacktrace.frames[o].in_app&&((i=e.stacktrace.frames[o].function)===(s=n[t].function)||kt(i)&&kt(s))&&(e.stacktrace.frames[o].vars=n[t].vars)}var i,s}}Bt.__initStatic();var Ut=n(1249);const Ft="\\"===ct.sep,Lt=[new g,new u,new ze,new Xe,new Ut.Y,new tt,new nt,new st,new Bt,new ft,new lt,new At,new at];function Mt(e={}){const t=(0,_.cu)();$e();const n=(0,ue.x)([t,"access",e=>e.__SENTRY__,"optionalAccess",e=>e.integrations])||[];if(e.defaultIntegrations=!1===e.defaultIntegrations?[]:[...Array.isArray(e.defaultIntegrations)?e.defaultIntegrations:Lt,...n],void 0===e.dsn&&process.env.SENTRY_DSN&&(e.dsn=process.env.SENTRY_DSN),void 0===e.tracesSampleRate&&process.env.SENTRY_TRACES_SAMPLE_RATE){const t=parseFloat(process.env.SENTRY_TRACES_SAMPLE_RATE);isFinite(t)&&(e.tracesSampleRate=t)}if(void 0===e.release){const t=$t();void 0!==t?e.release=t:e.autoSessionTracking=!1}void 0===e.environment&&process.env.SENTRY_ENVIRONMENT&&(e.environment=process.env.SENTRY_ENVIRONMENT),void 0===e.autoSessionTracking&&void 0!==e.dsn&&(e.autoSessionTracking=!0),void 0===e.instrumenter&&(e.instrumenter="sentry");const r={...e,stackParser:(0,M.Sq)(e.stackParser||Yt),integrations:pe(e),transport:e.transport||Fe};!function(e,t){!0===t.debug&&("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__?l.kg.enable():console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle."));const n=(0,_.Gd)();n.getScope().update(t.initialScope);const r=new e(t);n.bindClient(r)}(Ne,r),e.autoSessionTracking&&function(){const e=(0,_.Gd)();e.startSession(),process.on("beforeExit",(()=>{const t=(0,ue.x)([e,"access",e=>e.getScope,"call",e=>e(),"optionalAccess",e=>e.getSession,"call",e=>e()]);t&&!["exited","crashed"].includes(t.status)&&e.endSession()}))}()}function Gt(){return(0,_.Gd)().lastEventId()}async function jt(e){const t=(0,_.Gd)().getClient();return t?t.flush(e):(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.warn("Cannot flush events. No client defined."),Promise.resolve(!1))}async function Vt(e){const t=(0,_.Gd)().getClient();return t?t.close(e):(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))}function qt(e){if(void 0===e)return!1;const t=e&&e.getOptions();return!(!t||void 0===t.autoSessionTracking)&&t.autoSessionTracking}function $t(e){return process.env.SENTRY_RELEASE?process.env.SENTRY_RELEASE:ge.n2.SENTRY_RELEASE&&ge.n2.SENTRY_RELEASE.id?ge.n2.SENTRY_RELEASE.id:process.env.GITHUB_SHA||process.env.COMMIT_REF||process.env.VERCEL_GIT_COMMIT_SHA||process.env.VERCEL_GITHUB_COMMIT_SHA||process.env.VERCEL_GITLAB_COMMIT_SHA||process.env.VERCEL_BITBUCKET_COMMIT_SHA||process.env.ZEIT_GITHUB_COMMIT_SHA||process.env.ZEIT_GITLAB_COMMIT_SHA||process.env.ZEIT_BITBUCKET_COMMIT_SHA||e}const Yt=(0,M.pE)((0,M.Ep)((function(e,t=Ft){if(!e)return;const r=t?e.replace(/^[A-Z]:/,"").replace(/\\/g,"/"):e;let{root:i,dir:s,base:o,ext:a}=ct.posix.parse(r);const c=`${n.c[n.s]&&n.c[n.s].filename&&s||global.process.cwd()}/`;let u=o;".js"===a&&(u=u.slice(0,u.length-3)),i||s||(s=".");let l=s.lastIndexOf("/node_modules/");if(l>-1)return`${s.slice(l+14).replace(/\//g,".")}:${u}`;if(l=`${s}/`.lastIndexOf(c,0),0===l){let e=s.slice(c.length).replace(/\//g,".");return e&&(e+=":"),e+=u,e}return u})));function zt(e){const t=ct.resolve(e);if(!rt.existsSync(t))throw new Error(`Cannot read contents of ${t}. Directory does not exist.`);if(!rt.statSync(t).isDirectory())throw new Error(`Cannot read contents of ${t}, because it is not a directory.`);const n=e=>rt.readdirSync(e).reduce(((t,r)=>{const i=ct.join(e,r);return rt.statSync(i).isDirectory()?t.concat(n(i)):(t.push(i),t)}),[]);return n(t).map((e=>ct.relative(t,e)))}var Ht=n(7522);function Kt(e,t){return Ct(e,{include:t})}function Wt(e,t,n={}){return Nt(e,t,{include:n})}function Jt(){return function(e,t,n){const r=(0,_.Gd)(),i=(0,ue.x)([r,"access",e=>e.getClient,"call",e=>e(),"optionalAccess",e=>e.getOptions,"call",e=>e()]);if(!i||"sentry"!==i.instrumenter||"OPTIONS"===(0,ue.x)([e,"access",e=>e.method,"optionalAccess",e=>e.toUpperCase,"call",e=>e()])||"HEAD"===(0,ue.x)([e,"access",e=>e.method,"optionalAccess",e=>e.toUpperCase,"call",e=>e()]))return n();if(!(0,Ht.z)(i))return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.warn("Sentry `tracingHandler` is being used, but tracing is disabled. Please enable tracing by setting either `tracesSampleRate` or `tracesSampler` in your `Sentry.init()` options."),n();const s=e.headers&&(0,L.HD)(e.headers["sentry-trace"])&&(0,re.q)(e.headers["sentry-trace"]),o=(0,ue.x)([e,"access",e=>e.headers,"optionalAccess",e=>e.baggage]),a=(0,Ke.EN)(o),[c,u]=(0,vt.oA)(e,{path:!0,method:!0}),p=x({name:c,op:"http.server",...s,metadata:{dynamicSamplingContext:s&&!a?{}:a,request:e,source:u}},{request:Ct(e)});r.configureScope((e=>{e.setSpan(p)})),t.__sentry_transaction=p,t.once("finish",(()=>{setImmediate((()=>{(0,vt.dB)(p,e),p.setHttpStatus(t.statusCode),p.finish()}))})),n()}}function Xt(e){const t=function(e={}){let t;if("include"in e)t={include:e.include};else{const{ip:n,request:r,transaction:i,user:s}=e;(n||r||i||s)&&(t={include:(0,a.Jr)({ip:n,request:r,transaction:i,user:s})})}return t}(e),n=(0,_.Gd)(),r=n.getClient();if(r&&qt(r)){r.initSessionFlusher();const e=n.getScope();e&&e.getSession()&&e.setSession()}return function(n,r,i){if(e&&e.flushTimeout&&e.flushTimeout>0){const t=r.end;r.end=function(n,r,i){jt(e.flushTimeout).then((()=>{t.call(this,n,r,i)})).then(null,(e=>{("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.kg.error(e),t.call(this,n,r,i)}))}}(0,_.Ok)((()=>{const e=(0,_.Gd)();e.configureScope((r=>{if(r.setSDKProcessingMetadata({request:n,requestDataOptionsFromExpressHandler:t}),qt(e.getClient())){const t=e.getScope();t&&t.setRequestSession({status:"ok"})}})),r.once("finish",(()=>{const t=e.getClient();qt(t)&&setImmediate((()=>{t&&t._captureRequestSession&&t._captureRequestSession()}))})),i()}))}}function Zt(e){const t=function(e){const t=e.status||e.statusCode||e.status_code||e.output&&e.output.statusCode;return t?parseInt(t,10):500}(e);return t>=500}function Qt(e){return function(t,n,r,i){(e&&e.shouldHandleError||Zt)(t)?A((e=>{e.setSDKProcessingMetadata({request:n});const s=r.__sentry_transaction;s&&void 0===e.getSpan()&&e.setSpan(s);const o=(0,_.Gd)().getClient();if(o&&qt(o)&&void 0!==o._sessionFlusher){const t=e.getRequestSession();t&&void 0!==t.status&&(t.status="crashed")}const a=b(t);r.sentry=a,i(t)})):i(t)}}function en(e={}){return function({path:t,type:n,next:r,rawInput:i}){const s=(0,_.Gd)(),o=(0,ue.x)([s,"access",e=>e.getClient,"call",e=>e(),"optionalAccess",e=>e.getOptions,"call",e=>e()]),a=(0,ue.x)([s,"access",e=>e.getScope,"call",e=>e(),"optionalAccess",e=>e.getTransaction,"call",e=>e()]);if(a){a.setName(`trpc/${t}`,"route"),a.op="rpc.server";const r={procedure_type:n};(void 0!==e.attachRpcInput?e.attachRpcInput:(0,ue.x)([o,"optionalAccess",e=>e.sendDefaultPii]))&&(r.input=G(i)),a.setContext("trpc",r)}return r()}}var tn=n(2716),nn=n(8737),rn=n(1791),sn=n(6169),on=n(24),an=n(1370),cn=n(9889);const un={...r,...s,...o}},1249:(e,t,n)=>{"use strict";n.d(t,{Y:()=>p});var r,i=n(2176),s=n(6956),o=n(7321),a=n(9181),c=n(7612),u=n(9656),l=n(7578);e=n.hmd(e),function(e){e.RequestCreate="undici:request:create",e.RequestEnd="undici:request:headers",e.RequestError="undici:request:error"}(r||(r={}));class p{static __initStatic(){this.id="Undici"}__init(){this.name=p.id}__init2(){this._createSpanUrlMap=new c.LRUMap(100)}__init3(){this._headersUrlMap=new c.LRUMap(100)}constructor(e={}){p.prototype.__init.call(this),p.prototype.__init2.call(this),p.prototype.__init3.call(this),this._options={breadcrumbs:void 0===e.breadcrumbs||e.breadcrumbs,shouldCreateSpanForRequest:e.shouldCreateSpanForRequest}}setupOnce(t,n){if(u.V.major&&u.V.major<16)return;let c;try{c=(0,i.l$)(e,"diagnostics_channel")}catch(e){}if(!c||!c.subscribe)return;const d=e=>{if(void 0===this._options.shouldCreateSpanForRequest)return!0;const t=this._createSpanUrlMap.get(e);if(void 0!==t)return t;const n=this._options.shouldCreateSpanForRequest(e);return this._createSpanUrlMap.set(e,n),n};c.subscribe(r.RequestCreate,(e=>{const t=n();if(!t.getIntegration(p))return;const{request:r}=e,i=r.origin?r.origin.toString()+r.path:r.path,c=(0,s.en)(i);if((0,l.ZB)(i)||void 0!==r.__sentry__)return;const u=t.getClient(),h=t.getScope().getSpan();if(h&&u){const e=u.getOptions();if(d(i)){const t=r.method||"GET",n={"http.method":t};c.search&&(n["http.query"]=c.search),c.hash&&(n["http.fragment"]=c.hash);const u=h.startChild({op:"http.client",description:`${t} ${(0,s.tF)(c)}`,data:n});r.__sentry__=u;const l=t=>{if(void 0===e.tracePropagationTargets)return!0;const n=this._headersUrlMap.get(t);if(void 0!==n)return n;const r=(0,o.U0)(t,e.tracePropagationTargets);return this._headersUrlMap.set(t,r),r};if(l(i)&&(r.addHeader("sentry-trace",u.toTraceparent()),u.transaction)){const e=u.transaction.getDynamicSamplingContext(),t=(0,a.IQ)(e);t&&r.addHeader("baggage",t)}}}})),c.subscribe(r.RequestEnd,(e=>{const t=n();if(!t.getIntegration(p))return;const{request:r,response:i}=e,s=r.origin?r.origin.toString()+r.path:r.path;if((0,l.ZB)(s))return;const o=r.__sentry__;o&&(o.setHttpStatus(i.statusCode),o.finish()),this._options.breadcrumbs&&t.addBreadcrumb({category:"http",data:{method:r.method,status_code:i.statusCode,url:s},type:"http"},{event:"response",request:r,response:i})})),c.subscribe(r.RequestError,(e=>{const t=n();if(!t.getIntegration(p))return;const{request:r}=e,i=r.origin?r.origin.toString()+r.path:r.path;if((0,l.ZB)(i))return;const s=r.__sentry__;s&&(s.setStatus("internal_error"),s.finish()),this._options.breadcrumbs&&t.addBreadcrumb({category:"http",data:{method:r.method,url:i},level:"error",type:"http"},{event:"error",request:r})}))}}p.__initStatic()},7578:(e,t,n)=>{"use strict";n.d(t,{CA:()=>u,Dt:()=>l,ZB:()=>a,lx:()=>c,nY:()=>d});var r=n(4307),i=n(5659),s=n(7310),o=n(9656);function a(e){const t=(0,r.x)([i.Gd,"call",e=>e(),"access",e=>e.getClient,"call",e=>e(),"optionalAccess",e=>e.getDsn,"call",e=>e()]);return!!t&&e.includes(t.host)}function c(e){return`${e.protocol||""}//${e.hostname||e.host||""}${e.port&&80!==e.port&&443!==e.port?`:${e.port}`:""}${e.path?e.path:"/"}`}function u(e){const t=e.protocol||"",n=e.hostname||e.host||"",r=e.port&&80!==e.port&&443!==e.port?`:${e.port}`:"",i=e.pathname||"/";return`${t}//${e.auth?function(e){const[t,n]=e.split(":");return`${t?"[Filtered]":""}:${n?"[Filtered]":""}@`}(e.auth):""}${n}${r}${i}`}function l(e,t,n){if(!e)return e;let[i,s]=e.split(" ");return t.host&&!t.protocol&&(t.protocol=(0,r.x)([n,"optionalAccess",e=>e.agent,"optionalAccess",e=>e.protocol]),s=u(t)),(0,r.x)([s,"optionalAccess",e=>e.startsWith,"call",e=>e("///")])&&(s=s.slice(2)),`${i} ${s}`}function p(e){const t={protocol:e.protocol,hostname:"string"==typeof e.hostname&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:`${e.pathname||""}${e.search||""}`,href:e.href};return""!==e.port&&(t.port=Number(e.port)),(e.username||e.password)&&(t.auth=`${e.username}:${e.password}`),t}function d(e,t){let n,i;return"function"==typeof t[t.length-1]&&(n=t.pop()),i="string"==typeof t[0]?p(new s.URL(t[0])):t[0]instanceof s.URL?p(t[0]):t[0],2===t.length&&(i={...i,...t[1]}),void 0===i.protocol&&(o.V.major&&o.V.major>8?i.protocol=(0,r.x)([(0,r.x)([e,"optionalAccess",e=>e.globalAgent]),"optionalAccess",e=>e.protocol])||(0,r.x)([i.agent,"optionalAccess",e=>e.protocol])||(0,r.x)([i._defaultAgent,"optionalAccess",e=>e.protocol]):i.protocol=(0,r.x)([i.agent,"optionalAccess",e=>e.protocol])||(0,r.x)([i._defaultAgent,"optionalAccess",e=>e.protocol])||(0,r.x)([(0,r.x)([e,"optionalAccess",e=>e.globalAgent]),"optionalAccess",e=>e.protocol])),n?[i,n]:[i]}},9656:(e,t,n)=>{"use strict";n.d(t,{V:()=>r});const r=(0,n(2844).J4)(process.versions.node)},5605:(e,t,n)=>{"use strict";n.r(t),n.d(t,{BROWSER_TRACING_INTEGRATION_ID:()=>ce,BrowserTracing:()=>te,IdleTransaction:()=>he,Integrations:()=>ye,Span:()=>ae,SpanStatus:()=>me,TRACEPARENT_REGEXP:()=>de,Transaction:()=>oe,addExtensionMethods:()=>ne,defaultRequestInstrumentationOptions:()=>ue,extractTraceparentData:()=>ie,getActiveTransaction:()=>re,hasTracingEnabled:()=>le,instrumentOutgoingRequests:()=>fe,spanStatusfromHttpCode:()=>se,startIdleTransaction:()=>ge,stripUrlQueryAndFragment:()=>pe});var r=n(5544),i=n(6890),s=n(7638),o=n(9791),a=n(2343),c=n(9181),u=n(8464);const l=n(1235).n2;var p=n(1170);const d=(e,t,n)=>{let r,i;return s=>{t.value>=0&&(s||n)&&(i=t.value-(r||0),(i||void 0===r)&&(r=t.value,t.delta=i,e(t)))}},h=()=>l.__WEB_VITALS_POLYFILL__?l.performance&&(performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||(()=>{const e=l.performance.timing,t=l.performance.navigation.type,n={entryType:"navigation",startTime:0,type:2==t?"back_forward":1===t?"reload":"navigate"};for(const t in e)"navigationStart"!==t&&"toJSON"!==t&&(n[t]=Math.max(e[t]-e.navigationStart,0));return n})()):l.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],f=()=>{const e=h();return e&&e.activationStart||0},g=(e,t)=>{const n=h();let r="navigate";return n&&(r=l.document.prerendering||f()>0?"prerender":n.type.replace(/_/g,"-")),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:`v3-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:r}},m=(e,t,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const r=new PerformanceObserver((e=>{t(e.getEntries())}));return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch(e){}},y=(e,t)=>{const n=r=>{"pagehide"!==r.type&&"hidden"!==l.document.visibilityState||(e(r),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)};let _=-1;const b=()=>(_<0&&(_="hidden"!==l.document.visibilityState||l.document.prerendering?1/0:0,y((({timeStamp:e})=>{_=e}),!0)),{get firstHiddenTime(){return _}}),v={};function E(e){return"number"==typeof e&&isFinite(e)}function S(e,{startTimestamp:t,...n}){return t&&e.startTimestamp>t&&(e.startTimestamp=t),e.startChild({startTimestamp:t,...n})}function w(e){return e/1e3}function I(){return l&&l.addEventListener&&l.performance}let T,O,C=0,N={};function D(){const e=I();if(e&&p.Z1){e.mark&&l.performance.mark("sentry-tracing-init"),(e=>{const t=b(),n=g("FID");let r;const i=e=>{e.startTime<t.firstHiddenTime&&(n.value=e.processingStart-e.startTime,n.entries.push(e),r(!0))},s=e=>{e.forEach(i)},o=m("first-input",s);r=d(e,n),o&&y((()=>{s(o.takeRecords()),o.disconnect()}),!0)})((e=>{const t=e.entries.pop();if(!t)return;const n=w(p.Z1),r=w(t.startTime);("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&a.kg.log("[Measurements] Adding FID"),N.fid={value:e.value,unit:"millisecond"},N["mark.fid"]={value:n+r,unit:"second"}}));const t=(e=>{const t=g("CLS",0);let n,r=0,i=[];const s=e=>{e.forEach((e=>{if(!e.hadRecentInput){const s=i[0],o=i[i.length-1];r&&0!==i.length&&e.startTime-o.startTime<1e3&&e.startTime-s.startTime<5e3?(r+=e.value,i.push(e)):(r=e.value,i=[e]),r>t.value&&(t.value=r,t.entries=i,n&&n())}}))},o=m("layout-shift",s);if(o){n=d(e,t);const r=()=>{s(o.takeRecords()),n(!0)};return y(r),r}})((e=>{const t=e.entries.pop();t&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&a.kg.log("[Measurements] Adding CLS"),N.cls={value:e.value,unit:""},O=t)})),n=(e=>{const t=b(),n=g("LCP");let r;const i=e=>{const i=e[e.length-1];if(i){const e=Math.max(i.startTime-f(),0);e<t.firstHiddenTime&&(n.value=e,n.entries=[i],r())}},s=m("largest-contentful-paint",i);if(s){r=d(e,n);const t=()=>{v[n.id]||(i(s.takeRecords()),s.disconnect(),v[n.id]=!0,r(!0))};return["keydown","click"].forEach((e=>{addEventListener(e,t,{once:!0,capture:!0})})),y(t,!0),t}})((e=>{const t=e.entries.pop();t&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&a.kg.log("[Measurements] Adding LCP"),N.lcp={value:e.value,unit:"millisecond"},T=t)}));return()=>{t&&t(),n&&n()}}return()=>{}}function A(e,t,n,r,i,s){const o=s?t[s]:t[`${n}End`],a=t[`${n}Start`];a&&o&&S(e,{op:"browser",description:i||n,startTimestamp:r+w(a),endTimestamp:r+w(o)})}var x=n(7522),P=n(5659),k=n(1688),R=n(7321),B=n(7597);const U=["localhost",/^\/(?!\/)/],F={traceFetch:!0,traceXHR:!0,tracingOrigins:U,tracePropagationTargets:U};function L(e){const{traceFetch:t,traceXHR:n,tracePropagationTargets:r,tracingOrigins:i,shouldCreateSpanForRequest:s}={traceFetch:F.traceFetch,traceXHR:F.traceXHR,...e},o="function"==typeof s?s:e=>!0,a=e=>function(e,t){return(0,R.U0)(e,t||U)}(e,r||i),u={};t&&(0,k.oq)("fetch",(e=>{!function(e,t,n,r){if(!(0,x.z)()||!e.fetchData||!t(e.fetchData.url))return;if(e.endTimestamp){const t=e.fetchData.__span;if(!t)return;const n=r[t];if(n){if(e.response){n.setHttpStatus(e.response.status);const t=e.response&&e.response.headers&&e.response.headers.get("content-length"),r=parseInt(t);r>0&&n.setData("http.response_content_length",r)}else e.error&&n.setStatus("internal_error");n.finish(),delete r[t]}return}const i=(0,P.Gd)().getScope(),s=i&&i.getSpan(),o=s&&s.transaction;if(s&&o){const{method:t,url:i}=e.fetchData,a=s.startChild({data:{url:i,type:"fetch","http.method":t},description:`${t} ${i}`,op:"http.client"});e.fetchData.__span=a.spanId,r[a.spanId]=a;const u=e.args[0];e.args[1]=e.args[1]||{};const l=e.args[1];n(e.fetchData.url)&&(l.headers=function(e,t,n,r){const i=(0,c.IQ)(t),s=n.toTraceparent(),o="undefined"!=typeof Request&&(0,B.V9)(e,Request)?e.headers:r.headers;if(o){if("undefined"!=typeof Headers&&(0,B.V9)(o,Headers)){const e=new Headers(o);return e.append("sentry-trace",s),i&&e.append(c.bU,i),e}if(Array.isArray(o)){const e=[...o,["sentry-trace",s]];return i&&e.push([c.bU,i]),e}{const e="baggage"in o?o.baggage:void 0,t=[];return Array.isArray(e)?t.push(...e):e&&t.push(e),i&&t.push(i),{...o,"sentry-trace":s,baggage:t.length>0?t.join(","):void 0}}}return{"sentry-trace":s,baggage:i}}(u,o.getDynamicSamplingContext(),a,l))}}(e,o,a,u)})),n&&(0,k.oq)("xhr",(e=>{!function(e,t,n,r){const i=e.xhr,s=i&&i[k.xU];if(!(0,x.z)()||i&&i.__sentry_own_request__||!(i&&s&&t(s.url)))return;if(e.endTimestamp){const e=i.__sentry_xhr_span_id__;if(!e)return;const t=r[e];return void(t&&(t.setHttpStatus(s.status_code),t.finish(),delete r[e]))}const o=(0,P.Gd)().getScope(),a=o&&o.getSpan(),u=a&&a.transaction;if(a&&u){const e=a.startChild({data:{...s.data,type:"xhr","http.method":s.method,url:s.url},description:`${s.method} ${s.url}`,op:"http.client"});if(i.__sentry_xhr_span_id__=e.spanId,r[i.__sentry_xhr_span_id__]=e,i.setRequestHeader&&n(s.url))try{i.setRequestHeader("sentry-trace",e.toTraceparent());const t=u.getDynamicSamplingContext(),n=(0,c.IQ)(t);n&&i.setRequestHeader(c.bU,n)}catch(e){}}}(e,o,a,u)}))}const M="BrowserTracing",G={...r.AT,markBackgroundTransactions:!0,routingInstrumentation:function(e,t=!0,n=!0){if(!l||!l.location)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&a.kg.warn("Could not initialize routing instrumentation due to invalid location"));let r,i=l.location.href;t&&(r=e({name:l.location.pathname,startTimestamp:p.Z1?p.Z1/1e3:void 0,op:"pageload",metadata:{source:"url"}})),n&&(0,k.oq)("history",(({to:t,from:n})=>{void 0===n&&i&&-1!==i.indexOf(t)?i=void 0:n!==t&&(i=void 0,r&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&a.kg.log(`[Tracing] Finishing current transaction with op: ${r.op}`),r.finish()),r=e({name:l.location.pathname,op:"navigation",metadata:{source:"url"}}))}))},startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0,enableLongTask:!0,_experiments:{},...F};class j{__init(){this.name=M}constructor(e){j.prototype.__init.call(this),(0,i.T)(),this.options={...G,...e},void 0!==this.options._experiments.enableLongTask&&(this.options.enableLongTask=this.options._experiments.enableLongTask),e&&!e.tracePropagationTargets&&e.tracingOrigins&&(this.options.tracePropagationTargets=e.tracingOrigins),this._collectWebVitals=D(),this.options.enableLongTask&&m("longtask",(e=>{for(const t of e){const e=(0,o.x1)();if(!e)return;const n=w(p.Z1+t.startTime),r=w(t.duration);e.startChild({description:"Main UI thread blocked",op:"ui.long-task",startTimestamp:n,endTimestamp:n+r})}})),this.options._experiments.enableInteractions&&m("event",(e=>{for(const t of e){const e=(0,o.x1)();if(!e)return;if("click"===t.name){const n=w(p.Z1+t.startTime),r=w(t.duration);e.startChild({description:(0,u.Rt)(t.target),op:`ui.interaction.${t.name}`,startTimestamp:n,endTimestamp:n+r})}}}),{durationThreshold:0})}setupOnce(e,t){this._getCurrentHub=t;const{routingInstrumentation:n,startTransactionOnLocationChange:r,startTransactionOnPageLoad:i,markBackgroundTransactions:s,traceFetch:c,traceXHR:u,tracePropagationTargets:p,shouldCreateSpanForRequest:d,_experiments:h}=this.options;n((e=>{const n=this._createRouteTransaction(e);return this.options._experiments.onStartRouteTransaction&&this.options._experiments.onStartRouteTransaction(n,e,t),n}),i,r),s&&(l&&l.document?l.document.addEventListener("visibilitychange",(()=>{const e=(0,o.x1)();if(l.document.hidden&&e){const t="cancelled";("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&a.kg.log(`[Tracing] Transaction: ${t} -> since tab moved to the background, op: ${e.op}`),e.status||e.setStatus(t),e.setTag("visibilitychange","document.hidden"),e.finish()}})):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&a.kg.warn("[Tracing] Could not set up background tab detection due to lack of global document")),h.enableInteractions&&this._registerInteractionListener(),L({traceFetch:c,traceXHR:u,tracePropagationTargets:p,shouldCreateSpanForRequest:d})}_createRouteTransaction(e){if(!this._getCurrentHub)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&a.kg.warn(`[Tracing] Did not create ${e.op} transaction because _getCurrentHub is invalid.`));const{beforeNavigate:t,idleTimeout:n,finalTimeout:r,heartbeatInterval:o}=this.options,d="pageload"===e.op,h=d?V("sentry-trace"):null,f=d?V("baggage"):null,g=h?(0,s.q)(h):void 0,m=f?(0,c.EN)(f):void 0,y={...e,...g,metadata:{...e.metadata,dynamicSamplingContext:g&&!m?{}:m},trimEnd:!0},_="function"==typeof t?t(y):y,v=void 0===_?{...y,sampled:!1}:_;v.metadata=v.name!==y.name?{...v.metadata,source:"custom"}:v.metadata,this._latestRouteName=v.name,this._latestRouteSource=v.metadata&&v.metadata.source,!1===v.sampled&&("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&a.kg.log(`[Tracing] Will not send ${v.op} transaction because of beforeNavigate.`),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&a.kg.log(`[Tracing] Starting ${v.op} transaction on scope`);const D=this._getCurrentHub(),{location:x}=l,P=(0,i.l)(D,v,n,r,!0,{location:x},o);return P.registerBeforeFinishCallback((e=>{this._collectWebVitals(),function(e){const t=I();if(!t||!l.performance.getEntries||!p.Z1)return;("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&a.kg.log("[Tracing] Adding & adjusting spans using Performance API");const n=w(p.Z1),r=t.getEntries();let i,s;if(r.slice(C).forEach((t=>{const r=w(t.startTime),o=w(t.duration);if(!("navigation"===e.op&&n+r<e.startTimestamp))switch(t.entryType){case"navigation":!function(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach((r=>{A(e,t,r,n)})),A(e,t,"secureConnection",n,"TLS/SSL","connectEnd"),A(e,t,"fetch",n,"cache","domainLookupStart"),A(e,t,"domainLookup",n,"DNS"),function(e,t,n){S(e,{op:"browser",description:"request",startTimestamp:n+w(t.requestStart),endTimestamp:n+w(t.responseEnd)}),S(e,{op:"browser",description:"response",startTimestamp:n+w(t.responseStart),endTimestamp:n+w(t.responseEnd)})}(e,t,n)}(e,t,n),i=n+w(t.responseStart),s=n+w(t.requestStart);break;case"mark":case"paint":case"measure":{!function(e,t,n,r,i){const s=i+n,o=s+r;S(e,{description:t.name,endTimestamp:o,op:t.entryType,startTimestamp:s})}(e,t,r,o,n);const i=b(),s=t.startTime<i.firstHiddenTime;"first-paint"===t.name&&s&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&a.kg.log("[Measurements] Adding FP"),N.fp={value:t.startTime,unit:"millisecond"}),"first-contentful-paint"===t.name&&s&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&a.kg.log("[Measurements] Adding FCP"),N.fcp={value:t.startTime,unit:"millisecond"});break}case"resource":{const i=t.name.replace(l.location.origin,"");!function(e,t,n,r,i,s){if("xmlhttprequest"===t.initiatorType||"fetch"===t.initiatorType)return;const o={};"transferSize"in t&&(o["http.response_transfer_size"]=t.transferSize),"encodedBodySize"in t&&(o["http.response_content_length"]=t.encodedBodySize),"decodedBodySize"in t&&(o["http.decoded_response_content_length"]=t.decodedBodySize),"renderBlockingStatus"in t&&(o["resource.render_blocking_status"]=t.renderBlockingStatus);const a=s+r;S(e,{description:n,endTimestamp:a+i,op:t.initiatorType?`resource.${t.initiatorType}`:"resource.other",startTimestamp:a,data:o})}(e,t,i,r,o,n);break}}})),C=Math.max(r.length-1,0),function(e){const t=l.navigator;if(!t)return;const n=t.connection;n&&(n.effectiveType&&e.setTag("effectiveConnectionType",n.effectiveType),n.type&&e.setTag("connectionType",n.type),E(n.rtt)&&(N["connection.rtt"]={value:n.rtt,unit:"millisecond"})),E(t.deviceMemory)&&e.setTag("deviceMemory",`${t.deviceMemory} GB`),E(t.hardwareConcurrency)&&e.setTag("hardwareConcurrency",String(t.hardwareConcurrency))}(e),"pageload"===e.op){"number"==typeof i&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&a.kg.log("[Measurements] Adding TTFB"),N.ttfb={value:1e3*(i-e.startTimestamp),unit:"millisecond"},"number"==typeof s&&s<=i&&(N["ttfb.requestTime"]={value:1e3*(i-s),unit:"millisecond"})),["fcp","fp","lcp"].forEach((t=>{if(!N[t]||n>=e.startTimestamp)return;const r=N[t].value,i=n+w(r),s=Math.abs(1e3*(i-e.startTimestamp)),o=s-r;("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&a.kg.log(`[Measurements] Normalized ${t} from ${r} to ${s} (${o})`),N[t].value=s}));const t=N["mark.fid"];t&&N.fid&&(S(e,{description:"first input delay",endTimestamp:t.value+w(N.fid.value),op:"ui.action",startTimestamp:t.value}),delete N["mark.fid"]),"fcp"in N||delete N.cls,Object.keys(N).forEach((t=>{e.setMeasurement(t,N[t].value,N[t].unit)})),function(e){T&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&a.kg.log("[Measurements] Adding LCP Data"),T.element&&e.setTag("lcp.element",(0,u.Rt)(T.element)),T.id&&e.setTag("lcp.id",T.id),T.url&&e.setTag("lcp.url",T.url.trim().slice(0,200)),e.setTag("lcp.size",T.size)),O&&O.sources&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&a.kg.log("[Measurements] Adding CLS Data"),O.sources.forEach(((t,n)=>e.setTag(`cls.source.${n+1}`,(0,u.Rt)(t.node)))))}(e)}T=void 0,O=void 0,N={}}(e)})),P}_registerInteractionListener(){let e;const t=()=>{const{idleTimeout:t,finalTimeout:n,heartbeatInterval:r}=this.options,s="ui.action.click",c=(0,o.x1)();if(c&&c.op&&["navigation","pageload"].includes(c.op))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&a.kg.warn(`[Tracing] Did not create ${s} transaction because a pageload or navigation transaction is in progress.`));if(e&&(e.setFinishReason("interactionInterrupted"),e.finish(),e=void 0),!this._getCurrentHub)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&a.kg.warn(`[Tracing] Did not create ${s} transaction because _getCurrentHub is invalid.`));if(!this._latestRouteName)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&a.kg.warn(`[Tracing] Did not create ${s} transaction because _latestRouteName is missing.`));const u=this._getCurrentHub(),{location:p}=l,d={name:this._latestRouteName,op:s,trimEnd:!0,metadata:{source:this._latestRouteSource||"url"}};e=(0,i.l)(u,d,t,n,!0,{location:p},r)};["click"].forEach((e=>{addEventListener(e,t,{once:!1,capture:!0})}))}}function V(e){const t=(0,u.qT)(`meta[name=${e}]`);return t?t.getAttribute("content"):null}var q,$=n(758),Y=n(8903),z=n(8069),H=n(6956);!function(e){e.Ok="ok",e.DeadlineExceeded="deadline_exceeded",e.Unauthenticated="unauthenticated",e.PermissionDenied="permission_denied",e.NotFound="not_found",e.ResourceExhausted="resource_exhausted",e.InvalidArgument="invalid_argument",e.Unimplemented="unimplemented",e.Unavailable="unavailable",e.InternalError="internal_error",e.UnknownError="unknown_error",e.Cancelled="cancelled",e.AlreadyExists="already_exists",e.FailedPrecondition="failed_precondition",e.Aborted="aborted",e.OutOfRange="out_of_range",e.DataLoss="data_loss"}(q||(q={}));var K=n(2716),W=n(8737),J=n(1791),X=n(6169),Z=n(24),Q=n(1370),ee=n(9889);const te=j,ne=$.r,re=o.x1,ie=s.q,se=Y.Zd,oe=z.Y,ae=Y.Dr,ce=M,ue=F,le=x.z,pe=H.rt,de=s.K,he=r.io,fe=L,ge=i.l,me=q,ye={BrowserTracing:te,Apollo:K._,Express:W.N,GraphQL:J.k,Mongo:X._,Mysql:Z.m,Postgres:Q.E,Prisma:ee.g};("undefined"==typeof __SENTRY_TRACING__||__SENTRY_TRACING__)&&(0,$.r)()},9181:(e,t,n)=>{"use strict";n.d(t,{EN:()=>u,IQ:()=>l,bU:()=>s});var r=n(7597),i=n(2343);const s="baggage",o="sentry-",a=/^sentry-/,c=8192;function u(e){if(!(0,r.HD)(e)&&!Array.isArray(e))return;let t={};if(Array.isArray(e))t=e.reduce(((e,t)=>({...e,...p(t)})),{});else{if(!e)return;t=p(e)}const n=Object.entries(t).reduce(((e,[t,n])=>(t.match(a)&&(e[t.slice(o.length)]=n),e)),{});return Object.keys(n).length>0?n:void 0}function l(e){return function(e){if(0!==Object.keys(e).length)return Object.entries(e).reduce(((e,[t,n],r)=>{const s=`${encodeURIComponent(t)}=${encodeURIComponent(n)}`,o=0===r?s:`${e},${s}`;return o.length>c?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.kg.warn(`Not adding key: ${t} with val: ${n} to baggage header due to exceeding baggage size limits.`),e):o}),"")}(Object.entries(e).reduce(((e,[t,n])=>(n&&(e[`${o}${t}`]=n),e)),{}))}function p(e){return e.split(",").map((e=>e.split("=").map((e=>decodeURIComponent(e.trim()))))).reduce(((e,[t,n])=>(e[t]=n,e)),{})}},8464:(e,t,n)=>{"use strict";n.d(t,{Rt:()=>o,qT:()=>c});var r=n(7597);const i=(0,n(1235).Rf)(),s=80;function o(e,t={}){try{let n=e;const r=5,i=[];let o=0,c=0;const u=" > ",l=u.length;let p;const d=Array.isArray(t)?t:t.keyAttrs,h=!Array.isArray(t)&&t.maxStringLength||s;for(;n&&o++<r&&(p=a(n,d),!("html"===p||o>1&&c+i.length*l+p.length>=h));)i.push(p),c+=p.length,n=n.parentNode;return i.reverse().join(u)}catch(e){return"<unknown>"}}function a(e,t){const n=e,i=[];let s,o,a,c,u;if(!n||!n.tagName)return"";i.push(n.tagName.toLowerCase());const l=t&&t.length?t.filter((e=>n.getAttribute(e))).map((e=>[e,n.getAttribute(e)])):null;if(l&&l.length)l.forEach((e=>{i.push(`[${e[0]}="${e[1]}"]`)}));else if(n.id&&i.push(`#${n.id}`),s=n.className,s&&(0,r.HD)(s))for(o=s.split(/\s+/),u=0;u<o.length;u++)i.push(`.${o[u]}`);const p=["aria-label","type","name","title","alt"];for(u=0;u<p.length;u++)a=p[u],c=n.getAttribute(a),c&&i.push(`[${a}="${c}"]`);return i.join("")}function c(e){return i.document&&i.document.querySelector?i.document.querySelector(e):null}},4307:(e,t,n)=>{"use strict";function r(e){let t,n=e[0],r=1;for(;r<e.length;){const i=e[r],s=e[r+1];if(r+=2,("optionalAccess"===i||"optionalCall"===i)&&null==n)return;"access"===i||"optionalAccess"===i?(t=n,n=s(n)):"call"!==i&&"optionalCall"!==i||(n=s(((...e)=>n.call(t,...e))),t=void 0)}return n}n.d(t,{x:()=>r})},1688:(e,t,n)=>{"use strict";n.d(t,{xU:()=>d,oq:()=>m});var r=n(7597),i=n(2343),s=n(535),o=n(6147),a=n(1235);const c=(0,a.Rf)();function u(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}const l=(0,a.Rf)(),p=(0,a.Rf)(),d="__sentry_xhr_v2__",h={},f={};function g(e){if(!f[e])switch(f[e]=!0,e){case"console":"console"in p&&i.RU.forEach((function(e){e in p.console&&(0,s.hl)(p.console,e,(function(t){return function(...n){y("console",{args:n,level:e}),t&&t.apply(p.console,n)}}))}));break;case"dom":!function(){if(!("document"in p))return;const e=y.bind(null,"dom"),t=I(e,!0);p.document.addEventListener("click",t,!1),p.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((t=>{const n=p[t]&&p[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&((0,s.hl)(n,"addEventListener",(function(t){return function(n,r,i){if("click"===n||"keypress"==n)try{const r=this,s=r.__sentry_instrumentation_handlers__=r.__sentry_instrumentation_handlers__||{},o=s[n]=s[n]||{refCount:0};if(!o.handler){const r=I(e);o.handler=r,t.call(this,n,r,i)}o.refCount++}catch(e){}return t.call(this,n,r,i)}})),(0,s.hl)(n,"removeEventListener",(function(e){return function(t,n,r){if("click"===t||"keypress"==t)try{const n=this,i=n.__sentry_instrumentation_handlers__||{},s=i[t];s&&(s.refCount--,s.refCount<=0&&(e.call(this,t,s.handler,r),s.handler=void 0,delete i[t]),0===Object.keys(i).length&&delete n.__sentry_instrumentation_handlers__)}catch(e){}return e.call(this,t,n,r)}})))}))}();break;case"xhr":!function(){if(!("XMLHttpRequest"in p))return;const e=XMLHttpRequest.prototype;(0,s.hl)(e,"open",(function(e){return function(...t){const n=t[1],i=this[d]={method:(0,r.HD)(t[0])?t[0].toUpperCase():t[0],url:t[1],request_headers:{}};(0,r.HD)(n)&&"POST"===i.method&&n.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const o=()=>{const e=this[d];if(e&&4===this.readyState){try{e.status_code=this.status}catch(e){}y("xhr",{args:t,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:this})}};return"onreadystatechange"in this&&"function"==typeof this.onreadystatechange?(0,s.hl)(this,"onreadystatechange",(function(e){return function(...t){return o(),e.apply(this,t)}})):this.addEventListener("readystatechange",o),(0,s.hl)(this,"setRequestHeader",(function(e){return function(...t){const[n,r]=t,i=this[d];return i&&(i.request_headers[n.toLowerCase()]=r),e.apply(this,t)}})),e.apply(this,t)}})),(0,s.hl)(e,"send",(function(e){return function(...t){const n=this[d];return n&&void 0!==t[0]&&(n.body=t[0]),y("xhr",{args:t,startTimestamp:Date.now(),xhr:this}),e.apply(this,t)}}))}();break;case"fetch":(function(){if(!function(){if(!("fetch"in c))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}())return!1;if(u(c.fetch))return!0;let e=!1;const t=c.document;if(t&&"function"==typeof t.createElement)try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=u(n.contentWindow.fetch)),t.head.removeChild(n)}catch(e){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.kg.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return e})()&&(0,s.hl)(p,"fetch",(function(e){return function(...t){const{method:n,url:r}=function(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){const[t,n]=e;return{url:b(t),method:_(n,"method")?String(n.method).toUpperCase():"GET"}}const t=e[0];return{url:b(t),method:_(t,"method")?String(t.method).toUpperCase():"GET"}}(t),i={args:t,fetchData:{method:n,url:r},startTimestamp:Date.now()};return y("fetch",{...i}),e.apply(p,t).then((e=>(y("fetch",{...i,endTimestamp:Date.now(),response:e}),e)),(e=>{throw y("fetch",{...i,endTimestamp:Date.now(),error:e}),e}))}}));break;case"history":!function(){if(!function(){const e=l.chrome,t=e&&e.app&&e.app.runtime,n="history"in l&&!!l.history.pushState&&!!l.history.replaceState;return!t&&n}())return;const e=p.onpopstate;function t(e){return function(...t){const n=t.length>2?t[2]:void 0;if(n){const e=v,t=String(n);v=t,y("history",{from:e,to:t})}return e.apply(this,t)}}p.onpopstate=function(...t){const n=p.location.href,r=v;if(v=n,y("history",{from:r,to:n}),e)try{return e.apply(this,t)}catch(e){}},(0,s.hl)(p.history,"pushState",t),(0,s.hl)(p.history,"replaceState",t)}();break;case"error":T=p.onerror,p.onerror=function(e,t,n,r,i){return y("error",{column:r,error:i,line:n,msg:e,url:t}),!(!T||T.__SENTRY_LOADER__)&&T.apply(this,arguments)},p.onerror.__SENTRY_INSTRUMENTED__=!0;break;case"unhandledrejection":O=p.onunhandledrejection,p.onunhandledrejection=function(e){return y("unhandledrejection",e),!(O&&!O.__SENTRY_LOADER__)||O.apply(this,arguments)},p.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0;break;default:return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.kg.warn("unknown instrumentation type:",e))}}function m(e,t){h[e]=h[e]||[],h[e].push(t),g(e)}function y(e,t){if(e&&h[e])for(const n of h[e]||[])try{n(t)}catch(t){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.kg.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${(0,o.$P)(n)}\nError:`,t)}}function _(e,t){return!!e&&"object"==typeof e&&!!e[t]}function b(e){return"string"==typeof e?e:e?_(e,"url")?e.url:e.toString?e.toString():"":""}let v;const E=1e3;let S,w;function I(e,t=!1){return n=>{if(!n||w===n)return;if(function(e){if("keypress"!==e.type)return!1;try{const t=e.target;if(!t||!t.tagName)return!0;if("INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable)return!1}catch(e){}return!0}(n))return;const r="keypress"===n.type?"input":n.type;(void 0===S||function(e,t){if(!e)return!0;if(e.type!==t.type)return!0;try{if(e.target!==t.target)return!0}catch(e){}return!1}(w,n))&&(e({event:n,name:r,global:t}),w=n),clearTimeout(S),S=p.setTimeout((()=>{S=void 0}),E)}}let T=null,O=null},7597:(e,t,n)=>{"use strict";n.d(t,{Cy:()=>h,HD:()=>o,J8:()=>d,Kj:()=>p,PO:()=>c,V9:()=>g,VZ:()=>i,cO:()=>u,i2:()=>f,kK:()=>l,pt:()=>a});const r=Object.prototype.toString;function i(e){switch(r.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return g(e,Error)}}function s(e,t){return r.call(e)===`[object ${t}]`}function o(e){return s(e,"String")}function a(e){return null===e||"object"!=typeof e&&"function"!=typeof e}function c(e){return s(e,"Object")}function u(e){return"undefined"!=typeof Event&&g(e,Event)}function l(e){return"undefined"!=typeof Element&&g(e,Element)}function p(e){return s(e,"RegExp")}function d(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function h(e){return c(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function f(e){return"number"==typeof e&&e!=e}function g(e,t){try{return e instanceof t}catch(e){return!1}}},2343:(e,t,n)=>{"use strict";n.d(t,{Cf:()=>s,RU:()=>i,kg:()=>a});var r=n(1235);const i=["debug","info","warn","error","log","assert","trace"];function s(e){if(!("console"in r.n2))return e();const t=r.n2.console,n={};i.forEach((e=>{const r=t[e]&&t[e].__sentry_original__;e in t&&r&&(n[e]=t[e],t[e]=r)}));try{return e()}finally{Object.keys(n).forEach((e=>{t[e]=n[e]}))}}function o(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1}};return"undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__?i.forEach((n=>{t[n]=(...t)=>{e&&s((()=>{r.n2.console[n](`Sentry Logger [${n}]:`,...t)}))}})):i.forEach((e=>{t[e]=()=>{}})),t}let a;a="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__?(0,r.YO)("logger",o):o()},2844:(e,t,n)=>{"use strict";n.d(t,{DM:()=>o,Db:()=>u,EG:()=>l,J4:()=>d,YO:()=>f,go:()=>h,jH:()=>c,lE:()=>g});var r=n(535),i=n(7321),s=n(1235);function o(){const e=s.n2,t=e.crypto||e.msCrypto;if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");const n=t&&t.getRandomValues?()=>t.getRandomValues(new Uint8Array(1))[0]:()=>16*Math.random();return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(e=>(e^(15&n())>>e/4).toString(16)))}function a(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function c(e){const{message:t,event_id:n}=e;if(t)return t;const r=a(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function u(e,t,n){const r=e.exception=e.exception||{},i=r.values=r.values||[],s=i[0]=i[0]||{};s.value||(s.value=t||""),s.type||(s.type=n||"Error")}function l(e,t){const n=a(e);if(!n)return;const r=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...r,...t},t&&"data"in t){const e={...r&&r.data,...t.data};n.mechanism.data=e}}const p=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/;function d(e){const t=e.match(p)||[],n=parseInt(t[1],10),r=parseInt(t[2],10),i=parseInt(t[3],10);return{buildmetadata:t[5],major:isNaN(n)?void 0:n,minor:isNaN(r)?void 0:r,patch:isNaN(i)?void 0:i,prerelease:t[4]}}function h(e,t,n=5){if(void 0===t.lineno)return;const r=e.length,s=Math.max(Math.min(r,t.lineno-1),0);t.pre_context=e.slice(Math.max(0,s-n),s).map((e=>(0,i.JM)(e,0))),t.context_line=(0,i.JM)(e[Math.min(r-1,s)],t.colno||0),t.post_context=e.slice(Math.min(s+1,r),s+1+n).map((e=>(0,i.JM)(e,0)))}function f(e){if(e&&e.__sentry_captured__)return!0;try{(0,r.xp)(e,"__sentry_captured__",!0)}catch(e){}return!1}function g(e){return Array.isArray(e)?e:[e]}},2176:(e,t,n)=>{"use strict";function r(){return!("undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&__SENTRY_BROWSER_BUNDLE__)&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}function i(e,t){return e.require(t)}function s(t){let n;try{n=i(e,t)}catch(e){}try{const{cwd:r}=i(e,"process");n=i(e,`${r()}/node_modules/${t}`)}catch(e){}return n}n.d(t,{l$:()=>i,KV:()=>r,$y:()=>s}),e=n.hmd(e)},535:(e,t,n)=>{"use strict";n.d(t,{HK:()=>c,Jr:()=>f,Sh:()=>l,_j:()=>u,hl:()=>o,xp:()=>a,zf:()=>h});var r=n(8464),i=n(7597),s=n(7321);function o(e,t,n){if(!(t in e))return;const r=e[t],i=n(r);if("function"==typeof i)try{!function(e,t){const n=t.prototype||{};e.prototype=t.prototype=n,a(e,"__sentry_original__",t)}(i,r)}catch(e){}e[t]=i}function a(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}function c(e){return e.__sentry_original__}function u(e){return Object.keys(e).map((t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`)).join("&")}function l(e){if((0,i.VZ)(e))return{message:e.message,name:e.name,stack:e.stack,...d(e)};if((0,i.cO)(e)){const t={type:e.type,target:p(e.target),currentTarget:p(e.currentTarget),...d(e)};return"undefined"!=typeof CustomEvent&&(0,i.V9)(e,CustomEvent)&&(t.detail=e.detail),t}return e}function p(e){try{return(0,i.kK)(e)?(0,r.Rt)(e):Object.prototype.toString.call(e)}catch(e){return"<unknown>"}}function d(e){if("object"==typeof e&&null!==e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}return{}}function h(e,t=40){const n=Object.keys(l(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return(0,s.$G)(n[0],t);for(let e=n.length;e>0;e--){const r=n.slice(0,e).join(", ");if(!(r.length>t))return e===n.length?r:(0,s.$G)(r,t)}return""}function f(e){return g(e,new Map)}function g(e,t){if((0,i.PO)(e)){const n=t.get(e);if(void 0!==n)return n;const r={};t.set(e,r);for(const n of Object.keys(e))void 0!==e[n]&&(r[n]=g(e[n],t));return r}if(Array.isArray(e)){const n=t.get(e);if(void 0!==n)return n;const r=[];return t.set(e,r),e.forEach((e=>{r.push(g(e,t))})),r}return e}},442:(e,t,n)=>{"use strict";n.d(t,{dB:()=>i,oA:()=>s});var r=n(6956);function i(e,t,n){e&&(e.metadata.source&&"url"!==e.metadata.source||e.setName(...s(t,{path:!0,method:!0})),e.setData("url",t.originalUrl||t.url),t.baseUrl&&e.setData("baseUrl",t.baseUrl),e.setData("query",function(e,t){let n=e.originalUrl||e.url||"";if(n)return n.startsWith("/")&&(n=`http://dogs.are.great${n}`),e.query||void 0!==typeof URL&&new URL(n).search.replace("?","")||t&&t.url&&t.url.parse(n).query||void 0}(t,n)))}function s(e,t={}){const n=e.method&&e.method.toUpperCase();let i="",s="url";t.customRoute||e.route?(i=t.customRoute||`${e.baseUrl||""}${e.route&&e.route.path}`,s="route"):(e.originalUrl||e.url)&&(i=(0,r.rt)(e.originalUrl||e.url||""));let o="";return t.method&&n&&(o+=n),t.method&&t.path&&(o+=" "),t.path&&i&&(o+=i),[o,s]}},6147:(e,t,n)=>{"use strict";function r(e){const t=/^\s*[-]{4,}$/,n=/at (?:async )?(?:(.+?)\s+\()?(?:(.+):(\d+):(\d+)?|([^)]+))\)?/;return r=>{const i=r.match(n);if(i){let t,n,r,s,o;if(i[1]){r=i[1];let e=r.lastIndexOf(".");if("."===r[e-1]&&e--,e>0){t=r.slice(0,e),n=r.slice(e+1);const i=t.indexOf(".Module");i>0&&(r=r.slice(i+1),t=t.slice(0,i))}s=void 0}n&&(s=t,o=n),"<anonymous>"===n&&(o=void 0,r=void 0),void 0===r&&(o=o||"<anonymous>",r=s?`${s}.${o}`:o);let a=i[2]&&i[2].startsWith("file://")?i[2].slice(7):i[2];const c="native"===i[5];a||!i[5]||c||(a=i[5]);const u=!(c||a&&!a.startsWith("/")&&!a.includes(":\\")&&!a.startsWith(".")&&!a.match(/^[a-zA-Z]([a-zA-Z0-9.\-+])*:\/\//)||void 0===a||a.includes("node_modules/"));return{filename:a,module:e?e(a):void 0,function:r,lineno:parseInt(i[3],10)||void 0,colno:parseInt(i[4],10)||void 0,in_app:u}}if(r.match(t))return{filename:r}}}n.d(t,{pE:()=>o,$P:()=>u,Ep:()=>l,Sq:()=>a});const i=50,s=/\(error: (.*)\)/;function o(...e){const t=e.sort(((e,t)=>e[0]-t[0])).map((e=>e[1]));return(e,n=0)=>{const r=[],o=e.split("\n");for(let e=n;e<o.length;e++){const n=o[e];if(n.length>1024)continue;const a=s.test(n)?n.replace(s,"$1"):n;if(!a.match(/\S*Error: /)){for(const e of t){const t=e(a);if(t){r.push(t);break}}if(r.length>=i)break}}return function(e){if(!e.length)return[];const t=e.slice(0,i),n=t[t.length-1].function;n&&/sentryWrapped/.test(n)&&t.pop(),t.reverse();const r=t[t.length-1].function;return r&&/captureMessage|captureException/.test(r)&&t.pop(),t.map((e=>({...e,filename:e.filename||t[t.length-1].filename,function:e.function||"?"})))}(r)}}function a(e){return Array.isArray(e)?o(...e):e}const c="<anonymous>";function u(e){try{return e&&"function"==typeof e&&e.name||c}catch(e){return c}}function l(e){return[90,r(e)]}},7321:(e,t,n)=>{"use strict";n.d(t,{$G:()=>i,JM:()=>s,U0:()=>o});var r=n(7597);function i(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}function s(e,t){let n=e;const r=n.length;if(r<=150)return n;t>r&&(t=r);let i=Math.max(t-60,0);i<5&&(i=0);let s=Math.min(i+140,r);return s>r-5&&(s=r),s===r&&(i=Math.max(s-140,0)),n=n.slice(i,s),i>0&&(n=`'{snip} ${n}`),s<r&&(n+=" {snip}"),n}function o(e,t=[],n=!1){return t.some((t=>function(e,t,n=!1){return!!(0,r.HD)(e)&&((0,r.Kj)(t)?t.test(e):!!(0,r.HD)(t)&&(n?e===t:e.includes(t)))}(e,t,n)))}},6893:(e,t,n)=>{"use strict";n.d(t,{$2:()=>o,WD:()=>s,cW:()=>a});var r,i=n(7597);function s(e){return new a((t=>{t(e)}))}function o(e){return new a(((t,n)=>{n(e)}))}!function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"}(r||(r={}));class a{__init(){this._state=r.PENDING}__init2(){this._handlers=[]}constructor(e){a.prototype.__init.call(this),a.prototype.__init2.call(this),a.prototype.__init3.call(this),a.prototype.__init4.call(this),a.prototype.__init5.call(this),a.prototype.__init6.call(this);try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}then(e,t){return new a(((n,r)=>{this._handlers.push([!1,t=>{if(e)try{n(e(t))}catch(e){r(e)}else n(t)},e=>{if(t)try{n(t(e))}catch(e){r(e)}else r(e)}]),this._executeHandlers()}))}catch(e){return this.then((e=>e),e)}finally(e){return new a(((t,n)=>{let r,i;return this.then((t=>{i=!1,r=t,e&&e()}),(t=>{i=!0,r=t,e&&e()})).then((()=>{i?n(r):t(r)}))}))}__init3(){this._resolve=e=>{this._setResult(r.RESOLVED,e)}}__init4(){this._reject=e=>{this._setResult(r.REJECTED,e)}}__init5(){this._setResult=(e,t)=>{this._state===r.PENDING&&((0,i.J8)(t)?t.then(this._resolve,this._reject):(this._state=e,this._value=t,this._executeHandlers()))}}__init6(){this._executeHandlers=()=>{if(this._state===r.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach((e=>{e[0]||(this._state===r.RESOLVED&&e[1](this._value),this._state===r.REJECTED&&e[2](this._value),e[0]=!0)}))}}}},1170:(e,t,n)=>{"use strict";n.d(t,{Z1:()=>d,ph:()=>l,yW:()=>u});var r=n(2176),i=n(1235);e=n.hmd(e);const s=(0,i.Rf)(),o={nowSeconds:()=>Date.now()/1e3},a=(0,r.KV)()?function(){try{return(0,r.l$)(e,"perf_hooks").performance}catch(e){return}}():function(){const{performance:e}=s;if(e&&e.now)return{now:()=>e.now(),timeOrigin:Date.now()-e.now()}}(),c=void 0===a?o:{nowSeconds:()=>(a.timeOrigin+a.now())/1e3},u=o.nowSeconds.bind(o),l=c.nowSeconds.bind(c);let p;const d=(()=>{const{performance:e}=s;if(!e||!e.now)return void(p="none");const t=36e5,n=e.now(),r=Date.now(),i=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,o=i<t,a=e.timing&&e.timing.navigationStart,c="number"==typeof a?Math.abs(a+n-r):t;return o||c<t?i<=c?(p="timeOrigin",e.timeOrigin):(p="navigationStart",a):(p="dateNow",r)})()},7638:(e,t,n)=>{"use strict";n.d(t,{K:()=>r,q:()=>i});const r=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function i(e){const t=e.match(r);if(!e||!t)return;let n;return"1"===t[3]?n=!0:"0"===t[3]&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}},6956:(e,t,n)=>{"use strict";function r(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}function i(e){return e.split(/[\?#]/,1)[0]}function s(e){return e.split(/\\?\//).filter((e=>e.length>0&&","!==e)).length}function o(e){const{protocol:t,host:n,path:r}=e;return`${t?`${t}://`:""}${n&&n.replace(/^.*@/,"[filtered]:[filtered]@").replace(":80","").replace(":443","")||""}${r}`}n.d(t,{$A:()=>s,en:()=>r,rt:()=>i,tF:()=>o})},1235:(e,t,n)=>{"use strict";function r(e){return e&&e.Math==Math?e:void 0}n.d(t,{Rf:()=>s,YO:()=>o,n2:()=>i});const i="object"==typeof globalThis&&r(globalThis)||"object"==typeof window&&r(window)||"object"==typeof self&&r(self)||"object"==typeof global&&r(global)||function(){return this}()||{};function s(){return i}function o(e,t,n){const r=n||i,s=r.__SENTRY__=r.__SENTRY__||{};return s[e]||(s[e]=t())}},8054:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};const i=n(2361),s=r(n(5158)),o=r(n(6304)),a=s.default("agent-base");function c(){const{stack:e}=new Error;return"string"==typeof e&&e.split("\n").some((e=>-1!==e.indexOf("(https.js:")||-1!==e.indexOf("node:https:")))}function u(e,t){return new u.Agent(e,t)}!function(e){class t extends i.EventEmitter{constructor(e,t){super();let n=t;"function"==typeof e?this.callback=e:e&&(n=e),this.timeout=null,n&&"number"==typeof n.timeout&&(this.timeout=n.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return"number"==typeof this.explicitDefaultPort?this.explicitDefaultPort:c()?443:80}set defaultPort(e){this.explicitDefaultPort=e}get protocol(){return"string"==typeof this.explicitProtocol?this.explicitProtocol:c()?"https:":"http:"}set protocol(e){this.explicitProtocol=e}callback(e,t,n){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(e,t){const n=Object.assign({},t);"boolean"!=typeof n.secureEndpoint&&(n.secureEndpoint=c()),null==n.host&&(n.host="localhost"),null==n.port&&(n.port=n.secureEndpoint?443:80),null==n.protocol&&(n.protocol=n.secureEndpoint?"https:":"http:"),n.host&&n.path&&delete n.path,delete n.agent,delete n.hostname,delete n._defaultAgent,delete n.defaultPort,delete n.createConnection,e._last=!0,e.shouldKeepAlive=!1;let r=!1,i=null;const s=n.timeout||this.timeout,u=t=>{e._hadError||(e.emit("error",t),e._hadError=!0)},l=()=>{i=null,r=!0;const e=new Error(`A "socket" was not created for HTTP request before ${s}ms`);e.code="ETIMEOUT",u(e)},p=e=>{r||(null!==i&&(clearTimeout(i),i=null),u(e))},d=t=>{if(r)return;if(null!=i&&(clearTimeout(i),i=null),s=t,Boolean(s)&&"function"==typeof s.addRequest)return a("Callback returned another Agent instance %o",t.constructor.name),void t.addRequest(e,n);var s;if(t)return t.once("free",(()=>{this.freeSocket(t,n)})),void e.onSocket(t);const o=new Error(`no Duplex stream was returned to agent-base for \`${e.method} ${e.path}\``);u(o)};if("function"==typeof this.callback){this.promisifiedCallback||(this.callback.length>=3?(a("Converting legacy callback function to promise"),this.promisifiedCallback=o.default(this.callback)):this.promisifiedCallback=this.callback),"number"==typeof s&&s>0&&(i=setTimeout(l,s)),"port"in n&&"number"!=typeof n.port&&(n.port=Number(n.port));try{a("Resolving socket for %o request: %o",n.protocol,`${e.method} ${e.path}`),Promise.resolve(this.promisifiedCallback(e,n)).then(d,p)}catch(e){Promise.reject(e).catch(p)}}else u(new Error("`callback` is not defined"))}freeSocket(e,t){a("Freeing socket %o %o",e.constructor.name,t),e.destroy()}destroy(){a("Destroying agent %o",this.constructor.name)}}e.Agent=t,e.prototype=e.Agent.prototype}(u||(u={})),e.exports=u},6304:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t,n){return new Promise(((r,i)=>{e.call(this,t,n,((e,t)=>{e?i(e):r(t)}))}))}}},9464:(e,t,n)=>{var r=n(8801);t.OE=r,r.Reader,r.Writer},7314:e=>{e.exports={InvalidAsn1Error:function(e){var t=new Error;return t.name="InvalidAsn1Error",t.message=e||"",t}}},8801:(e,t,n)=>{var r=n(7314),i=n(1734),s=n(3806),o=n(1214);for(var a in i)i.hasOwnProperty(a)&&(t[a]=i[a]);for(var c in r)r.hasOwnProperty(c)&&(t[c]=r[c]);t.Reader=s,t.Writer=o},3806:(e,t,n)=>{n(9491);var r=n(1734),i=n(7314).InvalidAsn1Error;function s(e){if(!e||!Buffer.isBuffer(e))throw new TypeError("data must be a node Buffer");this._buf=e,this._size=e.length,this._len=0,this._offset=0}Object.defineProperty(s.prototype,"length",{enumerable:!0,get:function(){return this._len}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){return this._offset}}),Object.defineProperty(s.prototype,"remain",{get:function(){return this._size-this._offset}}),Object.defineProperty(s.prototype,"buffer",{get:function(){return this._buf.slice(this._offset)}}),s.prototype.readByte=function(e){if(this._size-this._offset<1)return null;var t=255&this._buf[this._offset];return e||(this._offset+=1),t},s.prototype.peek=function(){return this.readByte(!0)},s.prototype.readLength=function(e){if(void 0===e&&(e=this._offset),e>=this._size)return null;var t=255&this._buf[e++];if(null===t)return null;if(128==(128&t)){if(0==(t&=127))throw i("Indefinite length not supported");if(this._size-e<t)return null;this._len=0;for(var n=0;n<t;n++)this._len*=256,this._len+=255&this._buf[e++]}else this._len=t;return e},s.prototype.readSequence=function(e){var t=this.peek();if(null===t)return null;if(void 0!==e&&e!==t)throw i("Expected 0x"+e.toString(16)+": got 0x"+t.toString(16));var n=this.readLength(this._offset+1);return null===n?null:(this._offset=n,t)},s.prototype.readInt=function(e){return this._readTag(e)},s.prototype.readBoolean=function(e){return"number"!=typeof e&&(e=r.Boolean),0!==this._readTag(e)},s.prototype.readEnumeration=function(e){return"number"!=typeof e&&(e=r.Enumeration),this._readTag(e)},s.prototype.readString=function(e,t){e||(e=r.OctetString);var n=this.peek();if(null===n)return null;if(n!==e)throw i("Expected 0x"+e.toString(16)+": got 0x"+n.toString(16));var s=this.readLength(this._offset+1);if(null===s)return null;if(this.length>this._size-s)return null;if(this._offset=s,0===this.length)return t?Buffer.alloc(0):"";var o=this._buf.slice(this._offset,this._offset+this.length);return this._offset+=this.length,t?o:o.toString("utf8")},s.prototype.readOID=function(e){e||(e=r.OID);var t=this.readString(e,!0);if(null===t)return null;for(var n=[],i=0,s=0;s<t.length;s++){var o=255&t[s];i<<=7,i+=127&o,0==(128&o)&&(n.push(i>>>0),i=0)}return i=n.shift(),n.unshift(i%40),n.unshift(i/40>>0),n.join(".")},s.prototype.readBitString=function(e){e||(e=r.BitString);var t=this.peek();if(null===t)return null;if(t!==e)throw i("Expected 0x"+e.toString(16)+": got 0x"+t.toString(16));var n=this.readLength(this._offset+1);if(null===n)return null;if(this.length>this._size-n)return null;if(this._offset=n,0===this.length)return"";var s=this._buf[this._offset++],o=this._buf.slice(this._offset,this._offset+this.length-1),a=parseInt(o.toString("hex"),16).toString(2).padStart(8*o.length,"0");return this._offset+=this.length-1,a.substring(0,a.length-s)},s.prototype._readTag=function(e){var t=this.peek();if(null===t)return null;if(void 0!==e&&t!==e)throw i("Expected 0x"+e.toString(16)+": got 0x"+t.toString(16));var n=this.readLength(this._offset+1);if(null===n)return null;if(0===this.length)throw i("Zero-length integer");if(this.length>this._size-n)return null;this._offset=n;for(var r=this._buf.readInt8(this._offset++),s=1;s<this.length;s++)r*=256,r+=this._buf[this._offset++];if(!Number.isSafeInteger(r))throw i("Integer not representable as javascript number");return r},e.exports=s},1734:e=>{e.exports={EOC:0,Boolean:1,Integer:2,BitString:3,OctetString:4,Null:5,OID:6,ObjectDescriptor:7,External:8,Real:9,Enumeration:10,PDV:11,Utf8String:12,RelativeOID:13,Sequence:16,Set:17,NumericString:18,PrintableString:19,T61String:20,VideotexString:21,IA5String:22,UTCTime:23,GeneralizedTime:24,GraphicString:25,VisibleString:26,GeneralString:28,UniversalString:29,CharacterString:30,BMPString:31,Constructor:32,Context:128}},1214:(e,t,n)=>{var r=n(9491),i=n(1734),s=n(7314).InvalidAsn1Error,o={size:1024,growthFactor:8};function a(e){var t,n;t=o,n=e||{},r.ok(t),r.equal(typeof t,"object"),r.ok(n),r.equal(typeof n,"object"),Object.getOwnPropertyNames(t).forEach((function(e){if(!n[e]){var r=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(n,e,r)}})),e=n,this._buf=Buffer.alloc(e.size||1024),this._size=this._buf.length,this._offset=0,this._options=e,this._seq=[]}Object.defineProperty(a.prototype,"buffer",{get:function(){if(this._seq.length)throw new s(this._seq.length+" unended sequence(s)");return this._buf.slice(0,this._offset)}}),a.prototype.writeByte=function(e){if("number"!=typeof e)throw new TypeError("argument must be a Number");this._ensure(1),this._buf[this._offset++]=e},a.prototype.writeInt=function(e,t){if(!Number.isInteger(e))throw new TypeError("argument must be an integer");"number"!=typeof t&&(t=i.Integer);let n=[];for(;e<-128||e>=128;)n.push(255&e),e=Math.floor(e/256);for(n.push(255&e),this._ensure(2+n.length),this._buf[this._offset++]=t,this._buf[this._offset++]=n.length;n.length;)this._buf[this._offset++]=n.pop()},a.prototype.writeNull=function(){this.writeByte(i.Null),this.writeByte(0)},a.prototype.writeEnumeration=function(e,t){if("number"!=typeof e)throw new TypeError("argument must be a Number");return"number"!=typeof t&&(t=i.Enumeration),this.writeInt(e,t)},a.prototype.writeBoolean=function(e,t){if("boolean"!=typeof e)throw new TypeError("argument must be a Boolean");"number"!=typeof t&&(t=i.Boolean),this._ensure(3),this._buf[this._offset++]=t,this._buf[this._offset++]=1,this._buf[this._offset++]=e?255:0},a.prototype.writeString=function(e,t){if("string"!=typeof e)throw new TypeError("argument must be a string (was: "+typeof e+")");"number"!=typeof t&&(t=i.OctetString);var n=Buffer.byteLength(e);this.writeByte(t),this.writeLength(n),n&&(this._ensure(n),this._buf.write(e,this._offset),this._offset+=n)},a.prototype.writeBuffer=function(e,t){if(!Buffer.isBuffer(e))throw new TypeError("argument must be a buffer");"number"==typeof t&&(this.writeByte(t),this.writeLength(e.length)),e.length>0&&(this._ensure(e.length),e.copy(this._buf,this._offset,0,e.length),this._offset+=e.length)},a.prototype.writeStringArray=function(e,t){if(!(e instanceof Array))throw new TypeError("argument must be an Array[String]");var n=this;e.forEach((function(e){n.writeString(e,t)}))},a.prototype.writeOID=function(e,t){if("string"!=typeof e)throw new TypeError("argument must be a string");if("number"!=typeof t&&(t=i.OID),!/^([0-9]+\.){0,}[0-9]+$/.test(e))throw new Error("argument is not a valid OID string");var n=e.split("."),r=[];r.push(40*parseInt(n[0],10)+parseInt(n[1],10)),n.slice(2).forEach((function(e){!function(e,t){t<128?e.push(t):t<16384?(e.push(t>>>7|128),e.push(127&t)):t<2097152?(e.push(t>>>14|128),e.push(255&(t>>>7|128)),e.push(127&t)):t<268435456?(e.push(t>>>21|128),e.push(255&(t>>>14|128)),e.push(255&(t>>>7|128)),e.push(127&t)):(e.push(255&(t>>>28|128)),e.push(255&(t>>>21|128)),e.push(255&(t>>>14|128)),e.push(255&(t>>>7|128)),e.push(127&t))}(r,parseInt(e,10))}));var s=this;this._ensure(2+r.length),this.writeByte(t),this.writeLength(r.length),r.forEach((function(e){s.writeByte(e)}))},a.prototype.writeLength=function(e){if("number"!=typeof e)throw new TypeError("argument must be a Number");if(this._ensure(4),e<=127)this._buf[this._offset++]=e;else if(e<=255)this._buf[this._offset++]=129,this._buf[this._offset++]=e;else if(e<=65535)this._buf[this._offset++]=130,this._buf[this._offset++]=e>>8,this._buf[this._offset++]=e;else{if(!(e<=16777215))throw new s("Length too long (> 4 bytes)");this._buf[this._offset++]=131,this._buf[this._offset++]=e>>16,this._buf[this._offset++]=e>>8,this._buf[this._offset++]=e}},a.prototype.startSequence=function(e){"number"!=typeof e&&(e=i.Sequence|i.Constructor),this.writeByte(e),this._seq.push(this._offset),this._ensure(3),this._offset+=3},a.prototype.endSequence=function(){var e=this._seq.pop(),t=e+3,n=this._offset-t;if(n<=127)this._shift(t,n,-2),this._buf[e]=n;else if(n<=255)this._shift(t,n,-1),this._buf[e]=129,this._buf[e+1]=n;else if(n<=65535)this._buf[e]=130,this._buf[e+1]=n>>8,this._buf[e+2]=n;else{if(!(n<=16777215))throw new s("Sequence too long");this._shift(t,n,1),this._buf[e]=131,this._buf[e+1]=n>>16,this._buf[e+2]=n>>8,this._buf[e+3]=n}},a.prototype._shift=function(e,t,n){r.ok(void 0!==e),r.ok(void 0!==t),r.ok(n),this._buf.copy(this._buf,e+n,e,e+t),this._offset+=n},a.prototype._ensure=function(e){if(r.ok(e),this._size-this._offset<e){var t=this._size*this._options.growthFactor;t-this._offset<e&&(t+=e);var n=Buffer.alloc(t);this._buf.copy(n,0,0,this._offset),this._buf=n,this._size=t}},e.exports=a},1195:function(e,t,n){var r;e=n.nmd(e),r=function(t){"use strict";function n(e,t){t|=0;for(var n=Math.max(e.length-t,0),r=Array(n),i=0;i<n;i++)r[i]=e[t+i];return r}var r=function(e){var t=n(arguments,1);return function(){var r=n(arguments);return e.apply(null,t.concat(r))}},i=function(e){return function(){var t=n(arguments),r=t.pop();e.call(this,t,r)}};function s(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var o="function"==typeof setImmediate&&setImmediate,a="object"==typeof process&&"function"==typeof process.nextTick;function c(e){setTimeout(e,0)}function u(e){return function(t){var r=n(arguments,1);e((function(){t.apply(null,r)}))}}var l=u(o?setImmediate:a?process.nextTick:c);function p(e){return i((function(t,n){var r;try{r=e.apply(this,t)}catch(e){return n(e)}s(r)&&"function"==typeof r.then?r.then((function(e){d(n,null,e)}),(function(e){d(n,e.message?e:new Error(e))})):n(null,r)}))}function d(e,t,n){try{e(t,n)}catch(e){l(h,e)}}function h(e){throw e}var f="function"==typeof Symbol;function g(e){return f&&"AsyncFunction"===e[Symbol.toStringTag]}function m(e){return g(e)?p(e):e}function y(e){return function(t){var r=n(arguments,1),s=i((function(n,r){var i=this;return e(t,(function(e,t){m(e).apply(i,n.concat(t))}),r)}));return r.length?s.apply(this,r):s}}var _="object"==typeof global&&global&&global.Object===Object&&global,b="object"==typeof self&&self&&self.Object===Object&&self,v=_||b||Function("return this")(),E=v.Symbol,S=Object.prototype,w=S.hasOwnProperty,I=S.toString,T=E?E.toStringTag:void 0,O=Object.prototype.toString,C="[object Null]",N="[object Undefined]",D=E?E.toStringTag:void 0;function A(e){return null==e?void 0===e?N:C:D&&D in Object(e)?function(e){var t=w.call(e,T),n=e[T];try{e[T]=void 0;var r=!0}catch(e){}var i=I.call(e);return r&&(t?e[T]=n:delete e[T]),i}(e):function(e){return O.call(e)}(e)}var x="[object AsyncFunction]",P="[object Function]",k="[object GeneratorFunction]",R="[object Proxy]",B=9007199254740991;function U(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=B}function F(e){return null!=e&&U(e.length)&&!function(e){if(!s(e))return!1;var t=A(e);return t==P||t==k||t==x||t==R}(e)}var L={};function M(){}function G(e){return function(){if(null!==e){var t=e;e=null,t.apply(this,arguments)}}}var j="function"==typeof Symbol&&Symbol.iterator,V=function(e){return j&&e[j]&&e[j]()};function q(e){return null!=e&&"object"==typeof e}function $(e){return q(e)&&"[object Arguments]"==A(e)}var Y=Object.prototype,z=Y.hasOwnProperty,H=Y.propertyIsEnumerable,K=$(function(){return arguments}())?$:function(e){return q(e)&&z.call(e,"callee")&&!H.call(e,"callee")},W=Array.isArray,J="object"==typeof t&&t&&!t.nodeType&&t,X=J&&e&&!e.nodeType&&e,Z=X&&X.exports===J?v.Buffer:void 0,Q=(Z?Z.isBuffer:void 0)||function(){return!1},ee=9007199254740991,te=/^(?:0|[1-9]\d*)$/;function ne(e,t){var n=typeof e;return!!(t=null==t?ee:t)&&("number"==n||"symbol"!=n&&te.test(e))&&e>-1&&e%1==0&&e<t}var re={};re["[object Float32Array]"]=re["[object Float64Array]"]=re["[object Int8Array]"]=re["[object Int16Array]"]=re["[object Int32Array]"]=re["[object Uint8Array]"]=re["[object Uint8ClampedArray]"]=re["[object Uint16Array]"]=re["[object Uint32Array]"]=!0,re["[object Arguments]"]=re["[object Array]"]=re["[object ArrayBuffer]"]=re["[object Boolean]"]=re["[object DataView]"]=re["[object Date]"]=re["[object Error]"]=re["[object Function]"]=re["[object Map]"]=re["[object Number]"]=re["[object Object]"]=re["[object RegExp]"]=re["[object Set]"]=re["[object String]"]=re["[object WeakMap]"]=!1;var ie,se="object"==typeof t&&t&&!t.nodeType&&t,oe=se&&e&&!e.nodeType&&e,ae=oe&&oe.exports===se&&_.process,ce=function(){try{return oe&&oe.require&&oe.require("util").types||ae&&ae.binding&&ae.binding("util")}catch(e){}}(),ue=ce&&ce.isTypedArray,le=ue?(ie=ue,function(e){return ie(e)}):function(e){return q(e)&&U(e.length)&&!!re[A(e)]},pe=Object.prototype.hasOwnProperty;var de=Object.prototype,he=function(e,t){return function(n){return e(t(n))}}(Object.keys,Object),fe=Object.prototype.hasOwnProperty;function ge(e){return F(e)?function(e,t){var n=W(e),r=!n&&K(e),i=!n&&!r&&Q(e),s=!n&&!r&&!i&&le(e),o=n||r||i||s,a=o?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],c=a.length;for(var u in e)!t&&!pe.call(e,u)||o&&("length"==u||i&&("offset"==u||"parent"==u)||s&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||ne(u,c))||a.push(u);return a}(e):function(e){if(n=(t=e)&&t.constructor,t!==("function"==typeof n&&n.prototype||de))return he(e);var t,n,r=[];for(var i in Object(e))fe.call(e,i)&&"constructor"!=i&&r.push(i);return r}(e)}function me(e){return function(){if(null===e)throw new Error("Callback was already called.");var t=e;e=null,t.apply(this,arguments)}}function ye(e){return function(t,n,r){if(r=G(r||M),e<=0||!t)return r(null);var i=function(e){if(F(e))return function(e){var t=-1,n=e.length;return function(){return++t<n?{value:e[t],key:t}:null}}(e);var t,n,r,i,s=V(e);return s?function(e){var t=-1;return function(){var n=e.next();return n.done?null:(t++,{value:n.value,key:t})}}(s):(n=ge(t=e),r=-1,i=n.length,function e(){var s=n[++r];return"__proto__"===s?e():r<i?{value:t[s],key:s}:null})}(t),s=!1,o=0,a=!1;function c(e,t){if(o-=1,e)s=!0,r(e);else{if(t===L||s&&o<=0)return s=!0,r(null);a||u()}}function u(){for(a=!0;o<e&&!s;){var t=i();if(null===t)return s=!0,void(o<=0&&r(null));o+=1,n(t.value,t.key,me(c))}a=!1}u()}}function _e(e,t,n,r){ye(t)(e,m(n),r)}function be(e,t){return function(n,r,i){return e(n,t,r,i)}}function ve(e,t,n){n=G(n||M);var r=0,i=0,s=e.length;function o(e,t){e?n(e):++i!==s&&t!==L||n(null)}for(0===s&&n(null);r<s;r++)t(e[r],r,me(o))}var Ee=be(_e,1/0),Se=function(e,t,n){(F(e)?ve:Ee)(e,m(t),n)};function we(e){return function(t,n,r){return e(Se,t,m(n),r)}}function Ie(e,t,n,r){r=r||M,t=t||[];var i=[],s=0,o=m(n);e(t,(function(e,t,n){var r=s++;o(e,(function(e,t){i[r]=t,n(e)}))}),(function(e){r(e,i)}))}var Te=we(Ie),Oe=y(Te);function Ce(e){return function(t,n,r,i){return e(ye(n),t,m(r),i)}}var Ne=Ce(Ie),De=be(Ne,1),Ae=y(De);function xe(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}var Pe=function(e,t,n){for(var r=-1,i=Object(e),s=n(e),o=s.length;o--;){var a=s[++r];if(!1===t(i[a],a,i))break}return e};function ke(e,t){return e&&Pe(e,t,ge)}function Re(e){return e!=e}function Be(e,t,n){return t==t?function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):function(e,t,n,r){for(var i=e.length,s=n+-1;++s<i;)if(t(e[s],s,e))return s;return-1}(e,Re,n)}var Ue=function(e,t,r){"function"==typeof t&&(r=t,t=null),r=G(r||M);var i=ge(e).length;if(!i)return r(null);t||(t=i);var s={},o=0,a=!1,c=Object.create(null),u=[],l=[],p={};function d(e,t){u.push((function(){!function(e,t){if(!a){var i=me((function(t,i){if(o--,arguments.length>2&&(i=n(arguments,1)),t){var u={};ke(s,(function(e,t){u[t]=e})),u[e]=i,a=!0,c=Object.create(null),r(t,u)}else s[e]=i,xe(c[e]||[],(function(e){e()})),h()}));o++;var u=m(t[t.length-1]);t.length>1?u(s,i):u(i)}}(e,t)}))}function h(){if(0===u.length&&0===o)return r(null,s);for(;u.length&&o<t;)u.shift()()}function f(t){var n=[];return ke(e,(function(e,r){W(e)&&Be(e,t,0)>=0&&n.push(r)})),n}ke(e,(function(t,n){if(!W(t))return d(n,[t]),void l.push(n);var r=t.slice(0,t.length-1),i=r.length;if(0===i)return d(n,t),void l.push(n);p[n]=i,xe(r,(function(s){if(!e[s])throw new Error("async.auto task `"+n+"` has a non-existent dependency `"+s+"` in "+r.join(", "));var o,a,u;a=function(){0==--i&&d(n,t)},(u=c[o=s])||(u=c[o]=[]),u.push(a)}))})),function(){for(var e=0;l.length;)e++,xe(f(l.pop()),(function(e){0==--p[e]&&l.push(e)}));if(e!==i)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}(),h()};function Fe(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var Le="[object Symbol]",Me=1/0,Ge=E?E.prototype:void 0,je=Ge?Ge.toString:void 0;function Ve(e){if("string"==typeof e)return e;if(W(e))return Fe(e,Ve)+"";if(function(e){return"symbol"==typeof e||q(e)&&A(e)==Le}(e))return je?je.call(e):"";var t=e+"";return"0"==t&&1/e==-Me?"-0":t}var qe=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),$e="\\ud800-\\udfff",Ye="["+$e+"]",ze="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",He="\\ud83c[\\udffb-\\udfff]",Ke="[^"+$e+"]",We="(?:\\ud83c[\\udde6-\\uddff]){2}",Je="[\\ud800-\\udbff][\\udc00-\\udfff]",Xe="(?:"+ze+"|"+He+")?",Ze="[\\ufe0e\\ufe0f]?",Qe=Ze+Xe+"(?:\\u200d(?:"+[Ke,We,Je].join("|")+")"+Ze+Xe+")*",et="(?:"+[Ke+ze+"?",ze,We,Je,Ye].join("|")+")",tt=RegExp(He+"(?="+He+")|"+et+Qe,"g");function nt(e){return function(e){return qe.test(e)}(e)?function(e){return e.match(tt)||[]}(e):function(e){return e.split("")}(e)}var rt=/^\s+|\s+$/g;function it(e,t,n){var r;if((e=null==(r=e)?"":Ve(r))&&(n||void 0===t))return e.replace(rt,"");if(!e||!(t=Ve(t)))return e;var i=nt(e),s=nt(t),o=function(e,t){for(var n=-1,r=e.length;++n<r&&Be(t,e[n],0)>-1;);return n}(i,s),a=function(e,t){for(var n=e.length;n--&&Be(t,e[n],0)>-1;);return n}(i,s)+1;return function(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var s=Array(i);++r<i;)s[r]=e[r+t];return s}(e,t,n)}(i,o,a).join("")}var st=/^(?:async\s+)?(function)?\s*[^\(]*\(\s*([^\)]*)\)/m,ot=/,/,at=/(=.+)?(\s*)$/,ct=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm;function ut(e,t){var n={};ke(e,(function(e,t){var r,i=g(e),s=!i&&1===e.length||i&&0===e.length;if(W(e))r=e.slice(0,-1),e=e[e.length-1],n[t]=r.concat(r.length>0?o:e);else if(s)n[t]=e;else{if(r=function(e){return(e=(e=(e=e.toString().replace(ct,"")).match(st)[2].replace(" ",""))?e.split(ot):[]).map((function(e){return it(e.replace(at,""))}))}(e),0===e.length&&!i&&0===r.length)throw new Error("autoInject task functions require explicit parameters.");i||r.pop(),n[t]=r.concat(o)}function o(t,n){var i=Fe(r,(function(e){return t[e]}));i.push(n),m(e).apply(null,i)}})),Ue(n,t)}function lt(){this.head=this.tail=null,this.length=0}function pt(e,t){e.length=1,e.head=e.tail=t}function dt(e,t,n){if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");var r=m(e),i=0,s=[],o=!1;function a(e,t,n){if(null!=n&&"function"!=typeof n)throw new Error("task callback must be a function");if(p.started=!0,W(e)||(e=[e]),0===e.length&&p.idle())return l((function(){p.drain()}));for(var r=0,i=e.length;r<i;r++){var s={data:e[r],callback:n||M};t?p._tasks.unshift(s):p._tasks.push(s)}o||(o=!0,l((function(){o=!1,p.process()})))}function c(e){return function(t){i-=1;for(var n=0,r=e.length;n<r;n++){var o=e[n],a=Be(s,o,0);0===a?s.shift():a>0&&s.splice(a,1),o.callback.apply(o,arguments),null!=t&&p.error(t,o.data)}i<=p.concurrency-p.buffer&&p.unsaturated(),p.idle()&&p.drain(),p.process()}}var u=!1,p={_tasks:new lt,concurrency:t,payload:n,saturated:M,unsaturated:M,buffer:t/4,empty:M,drain:M,error:M,started:!1,paused:!1,push:function(e,t){a(e,!1,t)},kill:function(){p.drain=M,p._tasks.empty()},unshift:function(e,t){a(e,!0,t)},remove:function(e){p._tasks.remove(e)},process:function(){if(!u){for(u=!0;!p.paused&&i<p.concurrency&&p._tasks.length;){var e=[],t=[],n=p._tasks.length;p.payload&&(n=Math.min(n,p.payload));for(var o=0;o<n;o++){var a=p._tasks.shift();e.push(a),s.push(a),t.push(a.data)}i+=1,0===p._tasks.length&&p.empty(),i===p.concurrency&&p.saturated();var l=me(c(e));r(t,l)}u=!1}},length:function(){return p._tasks.length},running:function(){return i},workersList:function(){return s},idle:function(){return p._tasks.length+i===0},pause:function(){p.paused=!0},resume:function(){!1!==p.paused&&(p.paused=!1,l(p.process))}};return p}function ht(e,t){return dt(e,1,t)}lt.prototype.removeLink=function(e){return e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev,e.prev=e.next=null,this.length-=1,e},lt.prototype.empty=function(){for(;this.head;)this.shift();return this},lt.prototype.insertAfter=function(e,t){t.prev=e,t.next=e.next,e.next?e.next.prev=t:this.tail=t,e.next=t,this.length+=1},lt.prototype.insertBefore=function(e,t){t.prev=e.prev,t.next=e,e.prev?e.prev.next=t:this.head=t,e.prev=t,this.length+=1},lt.prototype.unshift=function(e){this.head?this.insertBefore(this.head,e):pt(this,e)},lt.prototype.push=function(e){this.tail?this.insertAfter(this.tail,e):pt(this,e)},lt.prototype.shift=function(){return this.head&&this.removeLink(this.head)},lt.prototype.pop=function(){return this.tail&&this.removeLink(this.tail)},lt.prototype.toArray=function(){for(var e=Array(this.length),t=this.head,n=0;n<this.length;n++)e[n]=t.data,t=t.next;return e},lt.prototype.remove=function(e){for(var t=this.head;t;){var n=t.next;e(t)&&this.removeLink(t),t=n}return this};var ft=be(_e,1);function gt(e,t,n,r){r=G(r||M);var i=m(n);ft(e,(function(e,n,r){i(t,e,(function(e,n){t=n,r(e)}))}),(function(e){r(e,t)}))}function mt(){var e=Fe(arguments,m);return function(){var t=n(arguments),r=this,i=t[t.length-1];"function"==typeof i?t.pop():i=M,gt(e,t,(function(e,t,i){t.apply(r,e.concat((function(e){var t=n(arguments,1);i(e,t)})))}),(function(e,t){i.apply(r,[e].concat(t))}))}}var yt=function(){return mt.apply(null,n(arguments).reverse())},_t=Array.prototype.concat,bt=function(e,t,r,i){i=i||M;var s=m(r);Ne(e,t,(function(e,t){s(e,(function(e){return e?t(e):t(null,n(arguments,1))}))}),(function(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&(n=_t.apply(n,t[r]));return i(e,n)}))},vt=be(bt,1/0),Et=be(bt,1),St=function(){var e=n(arguments),t=[null].concat(e);return function(){return arguments[arguments.length-1].apply(this,t)}};function wt(e){return e}function It(e,t){return function(n,r,i,s){s=s||M;var o,a=!1;n(r,(function(n,r,s){i(n,(function(r,i){r?s(r):e(i)&&!o?(a=!0,o=t(!0,n),s(null,L)):s()}))}),(function(e){e?s(e):s(null,a?o:t(!1))}))}}function Tt(e,t){return t}var Ot=we(It(wt,Tt)),Ct=Ce(It(wt,Tt)),Nt=be(Ct,1);function Dt(e){return function(t){var r=n(arguments,1);r.push((function(t){var r=n(arguments,1);"object"==typeof console&&(t?console.error&&console.error(t):console[e]&&xe(r,(function(t){console[e](t)})))})),m(t).apply(null,r)}}var At=Dt("dir");function xt(e,t,r){r=me(r||M);var i=m(e),s=m(t);function o(e){if(e)return r(e);var t=n(arguments,1);t.push(a),s.apply(this,t)}function a(e,t){return e?r(e):t?void i(o):r(null)}a(null,!0)}function Pt(e,t,r){r=me(r||M);var i=m(e),s=function(e){if(e)return r(e);var o=n(arguments,1);if(t.apply(this,o))return i(s);r.apply(null,[null].concat(o))};i(s)}function kt(e,t,n){Pt(e,(function(){return!t.apply(this,arguments)}),n)}function Rt(e,t,n){n=me(n||M);var r=m(t),i=m(e);function s(e){if(e)return n(e);i(o)}function o(e,t){return e?n(e):t?void r(s):n(null)}i(o)}function Bt(e){return function(t,n,r){return e(t,r)}}function Ut(e,t,n){Se(e,Bt(m(t)),n)}function Ft(e,t,n,r){ye(t)(e,Bt(m(n)),r)}var Lt=be(Ft,1);function Mt(e){return g(e)?e:i((function(t,n){var r=!0;t.push((function(){var e=arguments;r?l((function(){n.apply(null,e)})):n.apply(null,e)})),e.apply(this,t),r=!1}))}function Gt(e){return!e}var jt=we(It(Gt,Gt)),Vt=Ce(It(Gt,Gt)),qt=be(Vt,1);function $t(e){return function(t){return null==t?void 0:t[e]}}function Yt(e,t,n,r){var i=new Array(t.length);e(t,(function(e,t,r){n(e,(function(e,n){i[t]=!!n,r(e)}))}),(function(e){if(e)return r(e);for(var n=[],s=0;s<t.length;s++)i[s]&&n.push(t[s]);r(null,n)}))}function zt(e,t,n,r){var i=[];e(t,(function(e,t,r){n(e,(function(n,s){n?r(n):(s&&i.push({index:t,value:e}),r())}))}),(function(e){e?r(e):r(null,Fe(i.sort((function(e,t){return e.index-t.index})),$t("value")))}))}function Ht(e,t,n,r){(F(t)?Yt:zt)(e,t,m(n),r||M)}var Kt=we(Ht),Wt=Ce(Ht),Jt=be(Wt,1);function Xt(e,t){var n=me(t||M),r=m(Mt(e));!function e(t){if(t)return n(t);r(e)}()}var Zt=function(e,t,n,r){r=r||M;var i=m(n);Ne(e,t,(function(e,t){i(e,(function(n,r){return n?t(n):t(null,{key:r,val:e})}))}),(function(e,t){for(var n={},i=Object.prototype.hasOwnProperty,s=0;s<t.length;s++)if(t[s]){var o=t[s].key,a=t[s].val;i.call(n,o)?n[o].push(a):n[o]=[a]}return r(e,n)}))},Qt=be(Zt,1/0),en=be(Zt,1),tn=Dt("log");function nn(e,t,n,r){r=G(r||M);var i={},s=m(n);_e(e,t,(function(e,t,n){s(e,t,(function(e,r){if(e)return n(e);i[t]=r,n()}))}),(function(e){r(e,i)}))}var rn=be(nn,1/0),sn=be(nn,1);function on(e,t){return t in e}function an(e,t){var r=Object.create(null),s=Object.create(null);t=t||wt;var o=m(e),a=i((function(e,i){var a=t.apply(null,e);on(r,a)?l((function(){i.apply(null,r[a])})):on(s,a)?s[a].push(i):(s[a]=[i],o.apply(null,e.concat((function(){var e=n(arguments);r[a]=e;var t=s[a];delete s[a];for(var i=0,o=t.length;i<o;i++)t[i].apply(null,e)}))))}));return a.memo=r,a.unmemoized=e,a}var cn=u(a?process.nextTick:o?setImmediate:c);function un(e,t,r){r=r||M;var i=F(t)?[]:{};e(t,(function(e,t,r){m(e)((function(e,s){arguments.length>2&&(s=n(arguments,1)),i[t]=s,r(e)}))}),(function(e){r(e,i)}))}function ln(e,t){un(Se,e,t)}function pn(e,t,n){un(ye(t),e,n)}var dn=function(e,t){var n=m(e);return dt((function(e,t){n(e[0],t)}),t,1)},hn=function(e,t){var n=dn(e,t);return n.push=function(e,t,r){if(null==r&&(r=M),"function"!=typeof r)throw new Error("task callback must be a function");if(n.started=!0,W(e)||(e=[e]),0===e.length)return l((function(){n.drain()}));t=t||0;for(var i=n._tasks.head;i&&t>=i.priority;)i=i.next;for(var s=0,o=e.length;s<o;s++){var a={data:e[s],priority:t,callback:r};i?n._tasks.insertBefore(i,a):n._tasks.push(a)}l(n.process)},delete n.unshift,n};function fn(e,t){if(t=G(t||M),!W(e))return t(new TypeError("First argument to race must be an array of functions"));if(!e.length)return t();for(var n=0,r=e.length;n<r;n++)m(e[n])(t)}function gn(e,t,r,i){gt(n(e).reverse(),t,r,i)}function mn(e){var t=m(e);return i((function(e,r){return e.push((function(e,t){var i;e?r(null,{error:e}):(i=arguments.length<=2?t:n(arguments,1),r(null,{value:i}))})),t.apply(this,e)}))}function yn(e){var t;return W(e)?t=Fe(e,mn):(t={},ke(e,(function(e,n){t[n]=mn.call(this,e)}))),t}function _n(e,t,n,r){Ht(e,t,(function(e,t){n(e,(function(e,n){t(e,!n)}))}),r)}var bn=we(_n),vn=Ce(_n),En=be(vn,1);function Sn(e){return function(){return e}}function wn(e,t,n){var r={times:5,intervalFunc:Sn(0)};if(arguments.length<3&&"function"==typeof e?(n=t||M,t=e):(function(e,t){if("object"==typeof t)e.times=+t.times||5,e.intervalFunc="function"==typeof t.interval?t.interval:Sn(+t.interval||0),e.errorFilter=t.errorFilter;else{if("number"!=typeof t&&"string"!=typeof t)throw new Error("Invalid arguments for async.retry");e.times=+t||5}}(r,e),n=n||M),"function"!=typeof t)throw new Error("Invalid arguments for async.retry");var i=m(t),s=1;!function e(){i((function(t){t&&s++<r.times&&("function"!=typeof r.errorFilter||r.errorFilter(t))?setTimeout(e,r.intervalFunc(s)):n.apply(null,arguments)}))}()}var In=function(e,t){t||(t=e,e=null);var n=m(t);return i((function(t,r){function i(e){n.apply(null,t.concat(e))}e?wn(e,i,r):wn(i,r)}))};function Tn(e,t){un(ft,e,t)}var On=we(It(Boolean,wt)),Cn=Ce(It(Boolean,wt)),Nn=be(Cn,1);function Dn(e,t,n){var r=m(t);function i(e,t){var n=e.criteria,r=t.criteria;return n<r?-1:n>r?1:0}Te(e,(function(e,t){r(e,(function(n,r){if(n)return t(n);t(null,{value:e,criteria:r})}))}),(function(e,t){if(e)return n(e);n(null,Fe(t.sort(i),$t("value")))}))}function An(e,t,n){var r=m(e);return i((function(i,s){var o,a=!1;i.push((function(){a||(s.apply(null,arguments),clearTimeout(o))})),o=setTimeout((function(){var t=e.name||"anonymous",r=new Error('Callback function "'+t+'" timed out.');r.code="ETIMEDOUT",n&&(r.info=n),a=!0,s(r)}),t),r.apply(null,i)}))}var xn=Math.ceil,Pn=Math.max;function kn(e,t,n,r){var i=m(n);Ne(function(e,t,n,r){for(var i=-1,s=Pn(xn((t-e)/1),0),o=Array(s);s--;)o[++i]=e,e+=1;return o}(0,e),t,i,r)}var Rn=be(kn,1/0),Bn=be(kn,1);function Un(e,t,n,r){arguments.length<=3&&(r=n,n=t,t=W(e)?[]:{}),r=G(r||M);var i=m(n);Se(e,(function(e,n,r){i(t,e,n,r)}),(function(e){r(e,t)}))}function Fn(e,t){var r,i=null;t=t||M,Lt(e,(function(e,t){m(e)((function(e,s){r=arguments.length>2?n(arguments,1):s,i=e,t(!e)}))}),(function(){t(i,r)}))}function Ln(e){return function(){return(e.unmemoized||e).apply(null,arguments)}}function Mn(e,t,r){r=me(r||M);var i=m(t);if(!e())return r(null);var s=function(t){if(t)return r(t);if(e())return i(s);var o=n(arguments,1);r.apply(null,[null].concat(o))};i(s)}function Gn(e,t,n){Mn((function(){return!e.apply(this,arguments)}),t,n)}var jn=function(e,t){if(t=G(t||M),!W(e))return t(new Error("First argument to waterfall must be an array of functions"));if(!e.length)return t();var r=0;function i(t){var n=m(e[r++]);t.push(me(s)),n.apply(null,t)}function s(s){if(s||r===e.length)return t.apply(null,arguments);i(n(arguments,1))}i([])},Vn={apply:r,applyEach:Oe,applyEachSeries:Ae,asyncify:p,auto:Ue,autoInject:ut,cargo:ht,compose:yt,concat:vt,concatLimit:bt,concatSeries:Et,constant:St,detect:Ot,detectLimit:Ct,detectSeries:Nt,dir:At,doDuring:xt,doUntil:kt,doWhilst:Pt,during:Rt,each:Ut,eachLimit:Ft,eachOf:Se,eachOfLimit:_e,eachOfSeries:ft,eachSeries:Lt,ensureAsync:Mt,every:jt,everyLimit:Vt,everySeries:qt,filter:Kt,filterLimit:Wt,filterSeries:Jt,forever:Xt,groupBy:Qt,groupByLimit:Zt,groupBySeries:en,log:tn,map:Te,mapLimit:Ne,mapSeries:De,mapValues:rn,mapValuesLimit:nn,mapValuesSeries:sn,memoize:an,nextTick:cn,parallel:ln,parallelLimit:pn,priorityQueue:hn,queue:dn,race:fn,reduce:gt,reduceRight:gn,reflect:mn,reflectAll:yn,reject:bn,rejectLimit:vn,rejectSeries:En,retry:wn,retryable:In,seq:mt,series:Tn,setImmediate:l,some:On,someLimit:Cn,someSeries:Nn,sortBy:Dn,timeout:An,times:Rn,timesLimit:kn,timesSeries:Bn,transform:Un,tryEach:Fn,unmemoize:Ln,until:Gn,waterfall:jn,whilst:Mn,all:jt,allLimit:Vt,allSeries:qt,any:On,anyLimit:Cn,anySeries:Nn,find:Ot,findLimit:Ct,findSeries:Nt,forEach:Ut,forEachSeries:Lt,forEachLimit:Ft,forEachOf:Se,forEachOfSeries:ft,forEachOfLimit:_e,inject:gt,foldl:gt,foldr:gn,select:Kt,selectLimit:Wt,selectSeries:Jt,wrapSync:p};t.default=Vn,t.apply=r,t.applyEach=Oe,t.applyEachSeries=Ae,t.asyncify=p,t.auto=Ue,t.autoInject=ut,t.cargo=ht,t.compose=yt,t.concat=vt,t.concatLimit=bt,t.concatSeries=Et,t.constant=St,t.detect=Ot,t.detectLimit=Ct,t.detectSeries=Nt,t.dir=At,t.doDuring=xt,t.doUntil=kt,t.doWhilst=Pt,t.during=Rt,t.each=Ut,t.eachLimit=Ft,t.eachOf=Se,t.eachOfLimit=_e,t.eachOfSeries=ft,t.eachSeries=Lt,t.ensureAsync=Mt,t.every=jt,t.everyLimit=Vt,t.everySeries=qt,t.filter=Kt,t.filterLimit=Wt,t.filterSeries=Jt,t.forever=Xt,t.groupBy=Qt,t.groupByLimit=Zt,t.groupBySeries=en,t.log=tn,t.map=Te,t.mapLimit=Ne,t.mapSeries=De,t.mapValues=rn,t.mapValuesLimit=nn,t.mapValuesSeries=sn,t.memoize=an,t.nextTick=cn,t.parallel=ln,t.parallelLimit=pn,t.priorityQueue=hn,t.queue=dn,t.race=fn,t.reduce=gt,t.reduceRight=gn,t.reflect=mn,t.reflectAll=yn,t.reject=bn,t.rejectLimit=vn,t.rejectSeries=En,t.retry=wn,t.retryable=In,t.seq=mt,t.series=Tn,t.setImmediate=l,t.some=On,t.someLimit=Cn,t.someSeries=Nn,t.sortBy=Dn,t.timeout=An,t.times=Rn,t.timesLimit=kn,t.timesSeries=Bn,t.transform=Un,t.tryEach=Fn,t.unmemoize=Ln,t.until=Gn,t.waterfall=jn,t.whilst=Mn,t.all=jt,t.allLimit=Vt,t.allSeries=qt,t.any=On,t.anyLimit=Cn,t.anySeries=Nn,t.find=Ot,t.findLimit=Ct,t.findSeries=Nt,t.forEach=Ut,t.forEachSeries=Lt,t.forEachLimit=Ft,t.forEachOf=Se,t.forEachOfSeries=ft,t.forEachOfLimit=_e,t.inject=gt,t.foldl=gt,t.foldr=gn,t.select=Kt,t.selectLimit=Wt,t.selectSeries=Jt,t.wrapSync=p,Object.defineProperty(t,"__esModule",{value:!0})},r(t)},6489:(e,t)=>{"use strict";t.Q=function(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var i={},s=t||{},o=e.split(";"),a=s.decode||n,c=0;c<o.length;c++){var u=o[c],l=u.indexOf("=");if(!(l<0)){var p=u.substring(0,l).trim();if(null==i[p]){var d=u.substring(l+1,u.length).trim();'"'===d[0]&&(d=d.slice(1,-1)),i[p]=r(d,a)}}}return i};var n=decodeURIComponent;encodeURIComponent;function r(e,t){try{return t(e)}catch(t){return e}}},7319:(e,t,n)=>{"use strict";const r=n(4341);e.exports=(e,t={})=>{if("function"!=typeof e)throw new TypeError(`Expected the first argument to be a function, got \`${typeof e}\``);const{wait:n=0,maxWait:i=0,before:s=!1,after:o=!0}=t;if(!s&&!o)throw new Error("Both `before` and `after` are false, function wouldn't be called.");let a,c,u;const l=function(...t){const r=this,l=s&&!a;return clearTimeout(a),a=setTimeout((()=>{a=void 0,c&&(clearTimeout(c),c=void 0),o&&(u=e.apply(r,t))}),n),i>0&&!c&&o&&(c=setTimeout((()=>{c=void 0,a&&(clearTimeout(a),a=void 0),u=e.apply(r,t)}),i)),l&&(u=e.apply(r,t)),u};return r(l,e),l.cancel=()=>{a&&(clearTimeout(a),a=void 0),c&&(clearTimeout(c),c=void 0)},l}},1227:(e,t,n)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(r++,"%c"===e&&(i=r))})),t.splice(i,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=n(2447)(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},2447:(e,t,n)=>{e.exports=function(e){function t(e){let n,i,s,o=null;function a(...e){if(!a.enabled)return;const r=a,i=Number(new Date),s=i-(n||i);r.diff=s,r.prev=n,r.curr=i,n=i,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let o=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((n,i)=>{if("%%"===n)return"%";o++;const s=t.formatters[i];if("function"==typeof s){const t=e[o];n=s.call(r,t),e.splice(o,1),o--}return n})),t.formatArgs.call(r,e),(r.log||t.log).apply(r,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=r,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(i!==t.namespaces&&(i=t.namespaces,s=t.enabled(e)),s),set:e=>{o=e}}),"function"==typeof t.init&&t.init(a),a}function r(e,n){const r=t(this.namespace+(void 0===n?":":n)+e);return r.log=this.log,r}function i(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(i),...t.skips.map(i).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(7824),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((n=>{t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},5158:(e,t,n)=>{"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=n(1227):e.exports=n(39)},39:(e,t,n)=>{const r=n(6224),i=n(3837);t.init=function(e){e.inspectOpts={};const n=Object.keys(t.inspectOpts);for(let r=0;r<n.length;r++)e.inspectOpts[n[r]]=t.inspectOpts[n[r]]},t.log=function(...e){return process.stderr.write(i.format(...e)+"\n")},t.formatArgs=function(n){const{namespace:r,useColors:i}=this;if(i){const t=this.color,i="[3"+(t<8?t:"8;5;"+t),s=`  ${i};1m${r} [0m`;n[0]=s+n[0].split("\n").join("\n"+s),n.push(i+"m+"+e.exports.humanize(this.diff)+"[0m")}else n[0]=(t.inspectOpts.hideDate?"":(new Date).toISOString()+" ")+r+" "+n[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):r.isatty(process.stderr.fd)},t.destroy=i.deprecate((()=>{}),"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{const e=n(2130);e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter((e=>/^debug_/i.test(e))).reduce(((e,t)=>{const n=t.substring(6).toLowerCase().replace(/_([a-z])/g,((e,t)=>t.toUpperCase()));let r=process.env[t];return r=!!/^(yes|on|true|enabled)$/i.test(r)||!/^(no|off|false|disabled)$/i.test(r)&&("null"===r?null:Number(r)),e[n]=r,e}),{}),e.exports=n(2447)(t);const{formatters:s}=e.exports;s.o=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts).split("\n").map((e=>e.trim())).join(" ")},s.O=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts)}},2559:e=>{!function(){"use strict";var t=[,function(e,t){function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.lengthOf=t.keysOf=t.isObject=t.isInfOrNaN=t.isFunction=t.isArguments=t.hasOwn=t.handleError=t.convertMapToObject=t.checkError=void 0,t.isFunction=function(e){return"function"==typeof e},t.isObject=function(e){return"object"===r(e)},t.keysOf=function(e){return Object.keys(e)},t.lengthOf=function(e){return Object.keys(e).length};var i=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};t.hasOwn=i,t.convertMapToObject=function(e){return Array.from(e).reduce((function(e,t){var r,i,s=(i=2,function(e){if(Array.isArray(e))return e}(r=t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return s}}(r,i)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(r,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=s[0],a=s[1];return e[o]=a,e}),{})},t.isArguments=function(e){return null!=e&&i(e,"callee")},t.isInfOrNaN=function(e){return Number.isNaN(e)||e===1/0||e===-1/0};var s={maxStack:function(e){return new RegExp("Maximum call stack size exceeded","g").test(e)}};t.checkError=s,t.handleError=function(e){return function(){try{return e.apply(this,arguments)}catch(e){if(s.maxStack(e.message))throw new Error("Converting circular structure to JSON");throw e}}}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Base64=void 0;for(var n=Object.create(null),r=function(e){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e)},i=0;i<64;i++)n[r(i)]=i;var s=function(e){if("undefined"==typeof Uint8Array||"undefined"==typeof ArrayBuffer){for(var t=[],n=0;n<e;n++)t.push(0);return t.$Uint8ArrayPolyfill=!0,t}return new Uint8Array(new ArrayBuffer(e))},o={encode:function(e){if("string"==typeof e){var t=e;e=s(t.length);for(var n=0;n<t.length;n++){var i=t.charCodeAt(n);if(i>255)throw new Error("Not ascii. Base64.encode can only take ascii strings.");e[n]=i}}for(var o=[],a=null,c=null,u=null,l=null,p=0;p<e.length;p++)switch(p%3){case 0:a=e[p]>>2&63,c=(3&e[p])<<4;break;case 1:c|=e[p]>>4&15,u=(15&e[p])<<2;break;case 2:u|=e[p]>>6&3,l=63&e[p],o.push(r(a)),o.push(r(c)),o.push(r(u)),o.push(r(l)),a=null,c=null,u=null,l=null}return null!=a&&(o.push(r(a)),o.push(r(c)),null==u?o.push("="):o.push(r(u)),null==l&&o.push("=")),o.join("")},decode:function(e){var t=Math.floor(3*e.length/4);"="==e.charAt(e.length-1)&&(t--,"="==e.charAt(e.length-2)&&t--);for(var r,i=s(t),o=null,a=null,c=null,u=0,l=0;l<e.length;l++){var p="="===(r=e.charAt(l))?-1:n[r];switch(l%4){case 0:if(p<0)throw new Error("invalid base64 string");o=p<<2;break;case 1:if(p<0)throw new Error("invalid base64 string");o|=p>>4,i[u++]=o,a=(15&p)<<4;break;case 2:p>=0&&(a|=p>>2,i[u++]=a,c=(3&p)<<6);break;case 3:p>=0&&(i[u++]=c|p)}}return i},newBinary:s};t.Base64=o},function(e){e.exports={_noYieldsAllowed:function(e){return e()}}},function(e,t){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e){return JSON.stringify(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function e(t,i,s,o,a){var c=i[t];switch(n(c)){case"string":return r(c);case"number":return isFinite(c)?String(c):"null";case"boolean":return String(c);case"object":if(!c)return"null";var u,l=o+s,p=[];if(Array.isArray(c)||{}.hasOwnProperty.call(c,"callee")){for(var d=c.length,h=0;h<d;h+=1)p[h]=e(h,c,s,l,a)||"null";return u=0===p.length?"[]":l?"[\n"+l+p.join(",\n"+l)+"\n"+o+"]":"["+p.join(",")+"]"}var f=Object.keys(c);return a&&(f=f.sort()),f.forEach((function(t){(u=e(t,c,s,l,a))&&p.push(r(t)+(l?": ":":")+u)})),u=0===p.length?"{}":l?"{\n"+l+p.join(",\n"+l)+"\n"+o+"}":"{"+p.join(",")+"}"}};t.default=function(e,t){var n=Object.assign({indent:"",canonical:!1},t);if(!0===n.indent)n.indent="  ";else if("number"==typeof n.indent){for(var r="",s=0;s<n.indent;s++)r+=" ";n.indent=r}return i("",{"":e},n.indent,"",n.canonical)},e.exports=t.default}],n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var s=n[e]={exports:{}};return t[e](s,s.exports,r),s.exports}var i={};!function(){var e=i,t=r(2).Base64,n=r(3);Object.defineProperty(e,"__esModule",{value:!0}),e.EJSON=void 0;var s=r(1),o={};e.EJSON=o;var a=new Map;o.addType=function(e,t){if(a.has(e))throw new Error("Type ".concat(e," already present"));a.set(e,t)};var c=[{matchJSONValue:function(e){return(0,s.hasOwn)(e,"$date")&&1===(0,s.lengthOf)(e)},matchObject:function(e){return e instanceof Date},toJSONValue:function(e){return{$date:e.getTime()}},fromJSONValue:function(e){return new Date(e.$date)}},{matchJSONValue:function(e){return(0,s.hasOwn)(e,"$regexp")&&(0,s.hasOwn)(e,"$flags")&&2===(0,s.lengthOf)(e)},matchObject:function(e){return e instanceof RegExp},toJSONValue:function(e){return{$regexp:e.source,$flags:e.flags}},fromJSONValue:function(e){return new RegExp(e.$regexp,e.$flags.slice(0,50).replace(/[^gimuy]/g,"").replace(/(.)(?=.*\1)/g,""))}},{matchJSONValue:function(e){return(0,s.hasOwn)(e,"$InfNaN")&&1===(0,s.lengthOf)(e)},matchObject:s.isInfOrNaN,toJSONValue:function(e){return{$InfNaN:Number.isNaN(e)?0:e===1/0?1:-1}},fromJSONValue:function(e){return e.$InfNaN/0}},{matchJSONValue:function(e){return(0,s.hasOwn)(e,"$binary")&&1===(0,s.lengthOf)(e)},matchObject:function(e){return"undefined"!=typeof Uint8Array&&e instanceof Uint8Array||e&&(0,s.hasOwn)(e,"$Uint8ArrayPolyfill")},toJSONValue:function(e){return{$binary:t.encode(e)}},fromJSONValue:function(e){return t.decode(e.$binary)}},{matchJSONValue:function(e){return(0,s.hasOwn)(e,"$escape")&&1===(0,s.lengthOf)(e)},matchObject:function(e){var t=!1;if(e){var n=(0,s.lengthOf)(e);1!==n&&2!==n||(t=c.some((function(t){return t.matchJSONValue(e)})))}return t},toJSONValue:function(e){var t={};return(0,s.keysOf)(e).forEach((function(n){t[n]=o.toJSONValue(e[n])})),{$escape:t}},fromJSONValue:function(e){var t={};return(0,s.keysOf)(e.$escape).forEach((function(n){t[n]=o.fromJSONValue(e.$escape[n])})),t}},{matchJSONValue:function(e){return(0,s.hasOwn)(e,"$type")&&(0,s.hasOwn)(e,"$value")&&2===(0,s.lengthOf)(e)},matchObject:function(e){return o._isCustomType(e)},toJSONValue:function(e){var t=n._noYieldsAllowed((function(){return e.toJSONValue()}));return{$type:e.typeName(),$value:t}},fromJSONValue:function(e){var t=e.$type;if(!a.has(t))throw new Error("Custom EJSON type ".concat(t," is not defined"));var r=a.get(t);return n._noYieldsAllowed((function(){return r(e.$value)}))}}];o._isCustomType=function(e){return e&&(0,s.isFunction)(e.toJSONValue)&&(0,s.isFunction)(e.typeName)&&a.has(e.typeName())},o._getTypes=function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?a:(0,s.convertMapToObject)(a)},o._getConverters=function(){return c};var u=function(e){for(var t=0;t<c.length;t++){var n=c[t];if(n.matchObject(e))return n.toJSONValue(e)}},l=function e(t){if(null===t)return null;var n=u(t);return void 0!==n?n:(0,s.isObject)(t)?((0,s.keysOf)(t).forEach((function(n){var r=t[n];if((0,s.isObject)(r)||void 0===r||(0,s.isInfOrNaN)(r)){var i=u(r);i?t[n]=i:e(r)}})),t):t};o._adjustTypesToJSONValue=l,o.toJSONValue=function(e){var t=u(e);if(void 0!==t)return t;var n=e;return(0,s.isObject)(e)&&(n=o.clone(e),l(n)),n};var p=function(e){if((0,s.isObject)(e)&&null!==e){var t=(0,s.keysOf)(e);if(t.length<=2&&t.every((function(e){return"string"==typeof e&&"$"===e.substr(0,1)})))for(var n=0;n<c.length;n++){var r=c[n];if(r.matchJSONValue(e))return r.fromJSONValue(e)}}return e},d=function e(t){if(null===t)return null;var n=p(t);return n!==t?n:(0,s.isObject)(t)?((0,s.keysOf)(t).forEach((function(n){var r=t[n];if((0,s.isObject)(r)){var i=p(r);if(r!==i)return void(t[n]=i);e(r)}})),t):t};o._adjustTypesFromJSONValue=d,o.fromJSONValue=function(e){var t=p(e);return t===e&&(0,s.isObject)(e)&&(t=o.clone(e),d(t)),t},o.stringify=(0,s.handleError)((function(e,t){var n=o.toJSONValue(e);return t&&(t.canonical||t.indent)?r(4)(n,t):JSON.stringify(n)})),o.parse=function(e){if("string"!=typeof e)throw new Error("EJSON.parse argument should be a string");return o.fromJSONValue(JSON.parse(e))},o.isBinary=function(e){return!!("undefined"!=typeof Uint8Array&&e instanceof Uint8Array||e&&e.$Uint8ArrayPolyfill)},o.equals=function(e,t,n){var r,i=!(!n||!n.keyOrderSensitive);if(e===t)return!0;if(Number.isNaN(e)&&Number.isNaN(t))return!0;if(!e||!t)return!1;if(!(0,s.isObject)(e)||!(0,s.isObject)(t))return!1;if(e instanceof Date&&t instanceof Date)return e.valueOf()===t.valueOf();if(o.isBinary(e)&&o.isBinary(t)){if(e.length!==t.length)return!1;for(r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}if((0,s.isFunction)(e.equals))return e.equals(t,n);if((0,s.isFunction)(t.equals))return t.equals(e,n);var a,c=Array.isArray(e),u=Array.isArray(t);if(c!==u)return!1;if(c&&u){if(e.length!==t.length)return!1;for(r=0;r<e.length;r++)if(!o.equals(e[r],t[r],n))return!1;return!0}switch(o._isCustomType(e)+o._isCustomType(t)){case 1:return!1;case 2:return o.equals(o.toJSONValue(e),o.toJSONValue(t))}var l=(0,s.keysOf)(e),p=(0,s.keysOf)(t);return i?(r=0,a=l.every((function(i){return!(r>=p.length||i!==p[r]||!o.equals(e[i],t[p[r]],n)||(r++,0))}))):(r=0,a=l.every((function(i){return!!(0,s.hasOwn)(t,i)&&!!o.equals(e[i],t[i],n)&&(r++,!0)}))),a&&r===p.length},o.clone=function(e){var t;if(!(0,s.isObject)(e))return e;if(null===e)return null;if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return e;if(o.isBinary(e)){t=o.newBinary(e.length);for(var n=0;n<e.length;n++)t[n]=e[n];return t}return Array.isArray(e)?e.map(o.clone):(0,s.isArguments)(e)?Array.from(e).map(o.clone):(0,s.isFunction)(e.clone)?e.clone():o._isCustomType(e)?o.fromJSONValue(o.clone(o.toJSONValue(e)),!0):(t={},(0,s.keysOf)(e).forEach((function(n){t[n]=o.clone(e[n])})),t)},o.newBinary=t.newBinary}(),e.exports=i.EJSON}()},6729:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(e,t,r,s,o){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new i(r,s||e,o),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),a.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},a.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,s=r.length,o=new Array(s);i<s;i++)o[i]=r[i].fn;return o},a.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},a.prototype.emit=function(e,t,r,i,s,o){var a=n?n+e:e;if(!this._events[a])return!1;var c,u,l=this._events[a],p=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),p){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,r),!0;case 4:return l.fn.call(l.context,t,r,i),!0;case 5:return l.fn.call(l.context,t,r,i,s),!0;case 6:return l.fn.call(l.context,t,r,i,s,o),!0}for(u=1,c=new Array(p-1);u<p;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var d,h=l.length;for(u=0;u<h;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),p){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,r);break;case 4:l[u].fn.call(l[u].context,t,r,i);break;default:if(!c)for(d=1,c=new Array(p-1);d<p;d++)c[d-1]=arguments[d];l[u].fn.apply(l[u].context,c)}}return!0},a.prototype.on=function(e,t,n){return s(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return s(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,r,i){var s=n?n+e:e;if(!this._events[s])return this;if(!t)return o(this,s),this;var a=this._events[s];if(a.fn)a.fn!==t||i&&!a.once||r&&a.context!==r||o(this,s);else{for(var c=0,u=[],l=a.length;c<l;c++)(a[c].fn!==t||i&&!a[c].once||r&&a[c].context!==r)&&u.push(a[c]);u.length?this._events[s]=1===u.length?u[0]:u:o(this,s)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&o(this,t)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a},4063:e=>{"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!=i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(s=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;0!=i--;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!=t&&n!=n}},2261:(e,t,n)=>{var r;e.exports=function(){if(!r){try{r=n(5158)("follow-redirects")}catch(e){}"function"!=typeof r&&(r=function(){})}r.apply(null,arguments)}},938:(e,t,n)=>{var r=n(7310),i=r.URL,s=n(3685),o=n(5687),a=n(2781).Writable,c=n(9491),u=n(2261),l=!1;try{c(new i)}catch(e){l="ERR_INVALID_URL"===e.code}var p=["auth","host","hostname","href","path","pathname","port","protocol","query","search","hash"],d=["abort","aborted","connect","error","socket","timeout"],h=Object.create(null);d.forEach((function(e){h[e]=function(t,n,r){this._redirectable.emit(e,t,n,r)}}));var f=C("ERR_INVALID_URL","Invalid URL",TypeError),g=C("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),m=C("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded",g),y=C("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),_=C("ERR_STREAM_WRITE_AFTER_END","write after end"),b=a.prototype.destroy||S;function v(e,t){a.call(this),this._sanitizeOptions(e),this._options=e,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],t&&this.on("response",t);var n=this;this._onNativeResponse=function(e){try{n._processResponse(e)}catch(e){n.emit("error",e instanceof g?e:new g({cause:e}))}},this._performRequest()}function E(e){var t={maxRedirects:21,maxBodyLength:10485760},n={};return Object.keys(e).forEach((function(r){var s=r+":",o=n[s]=e[r],a=t[r]=Object.create(o);Object.defineProperties(a,{request:{value:function(e,r,o){return i&&e instanceof i?e=T(e):D(e)?e=T(w(e)):(o=r,r=I(e),e={protocol:s}),A(r)&&(o=r,r=null),(r=Object.assign({maxRedirects:t.maxRedirects,maxBodyLength:t.maxBodyLength},e,r)).nativeProtocols=n,D(r.host)||D(r.hostname)||(r.hostname="::1"),c.equal(r.protocol,s,"protocol mismatch"),u("options",r),new v(r,o)},configurable:!0,enumerable:!0,writable:!0},get:{value:function(e,t,n){var r=a.request(e,t,n);return r.end(),r},configurable:!0,enumerable:!0,writable:!0}})})),t}function S(){}function w(e){var t;if(l)t=new i(e);else if(!D((t=I(r.parse(e))).protocol))throw new f({input:e});return t}function I(e){if(/^\[/.test(e.hostname)&&!/^\[[:0-9a-f]+\]$/i.test(e.hostname))throw new f({input:e.href||e});if(/^\[/.test(e.host)&&!/^\[[:0-9a-f]+\](:\d+)?$/i.test(e.host))throw new f({input:e.href||e});return e}function T(e,t){var n=t||{};for(var r of p)n[r]=e[r];return n.hostname.startsWith("[")&&(n.hostname=n.hostname.slice(1,-1)),""!==n.port&&(n.port=Number(n.port)),n.path=n.search?n.pathname+n.search:n.pathname,n}function O(e,t){var n;for(var r in t)e.test(r)&&(n=t[r],delete t[r]);return null==n?void 0:String(n).trim()}function C(e,t,n){function r(n){Error.captureStackTrace(this,this.constructor),Object.assign(this,n||{}),this.code=e,this.message=this.cause?t+": "+this.cause.message:t}return r.prototype=new(n||Error),Object.defineProperties(r.prototype,{constructor:{value:r,enumerable:!1},name:{value:"Error ["+e+"]",enumerable:!1}}),r}function N(e,t){for(var n of d)e.removeListener(n,h[n]);e.on("error",S),e.destroy(t)}function D(e){return"string"==typeof e||e instanceof String}function A(e){return"function"==typeof e}v.prototype=Object.create(a.prototype),v.prototype.abort=function(){N(this._currentRequest),this._currentRequest.abort(),this.emit("abort")},v.prototype.destroy=function(e){return N(this._currentRequest,e),b.call(this,e),this},v.prototype.write=function(e,t,n){if(this._ending)throw new _;if(!(D(e)||"object"==typeof(r=e)&&"length"in r))throw new TypeError("data should be a string, Buffer or Uint8Array");var r;A(t)&&(n=t,t=null),0!==e.length?this._requestBodyLength+e.length<=this._options.maxBodyLength?(this._requestBodyLength+=e.length,this._requestBodyBuffers.push({data:e,encoding:t}),this._currentRequest.write(e,t,n)):(this.emit("error",new y),this.abort()):n&&n()},v.prototype.end=function(e,t,n){if(A(e)?(n=e,e=t=null):A(t)&&(n=t,t=null),e){var r=this,i=this._currentRequest;this.write(e,t,(function(){r._ended=!0,i.end(null,null,n)})),this._ending=!0}else this._ended=this._ending=!0,this._currentRequest.end(null,null,n)},v.prototype.setHeader=function(e,t){this._options.headers[e]=t,this._currentRequest.setHeader(e,t)},v.prototype.removeHeader=function(e){delete this._options.headers[e],this._currentRequest.removeHeader(e)},v.prototype.setTimeout=function(e,t){var n=this;function r(t){t.setTimeout(e),t.removeListener("timeout",t.destroy),t.addListener("timeout",t.destroy)}function i(t){n._timeout&&clearTimeout(n._timeout),n._timeout=setTimeout((function(){n.emit("timeout"),s()}),e),r(t)}function s(){n._timeout&&(clearTimeout(n._timeout),n._timeout=null),n.removeListener("abort",s),n.removeListener("error",s),n.removeListener("response",s),n.removeListener("close",s),t&&n.removeListener("timeout",t),n.socket||n._currentRequest.removeListener("socket",i)}return t&&this.on("timeout",t),this.socket?i(this.socket):this._currentRequest.once("socket",i),this.on("socket",r),this.on("abort",s),this.on("error",s),this.on("response",s),this.on("close",s),this},["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach((function(e){v.prototype[e]=function(t,n){return this._currentRequest[e](t,n)}})),["aborted","connection","socket"].forEach((function(e){Object.defineProperty(v.prototype,e,{get:function(){return this._currentRequest[e]}})})),v.prototype._sanitizeOptions=function(e){if(e.headers||(e.headers={}),e.host&&(e.hostname||(e.hostname=e.host),delete e.host),!e.pathname&&e.path){var t=e.path.indexOf("?");t<0?e.pathname=e.path:(e.pathname=e.path.substring(0,t),e.search=e.path.substring(t))}},v.prototype._performRequest=function(){var e=this._options.protocol,t=this._options.nativeProtocols[e];if(!t)throw new TypeError("Unsupported protocol "+e);if(this._options.agents){var n=e.slice(0,-1);this._options.agent=this._options.agents[n]}var i=this._currentRequest=t.request(this._options,this._onNativeResponse);for(var s of(i._redirectable=this,d))i.on(s,h[s]);if(this._currentUrl=/^\//.test(this._options.path)?r.format(this._options):this._options.path,this._isRedirect){var o=0,a=this,c=this._requestBodyBuffers;!function e(t){if(i===a._currentRequest)if(t)a.emit("error",t);else if(o<c.length){var n=c[o++];i.finished||i.write(n.data,n.encoding,e)}else a._ended&&i.end()}()}},v.prototype._processResponse=function(e){var t=e.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:e.headers,statusCode:t});var n,s=e.headers.location;if(!s||!1===this._options.followRedirects||t<300||t>=400)return e.responseUrl=this._currentUrl,e.redirects=this._redirects,this.emit("response",e),void(this._requestBodyBuffers=[]);if(N(this._currentRequest),e.destroy(),++this._redirectCount>this._options.maxRedirects)throw new m;var o=this._options.beforeRedirect;o&&(n=Object.assign({Host:e.req.getHeader("host")},this._options.headers));var a=this._options.method;((301===t||302===t)&&"POST"===this._options.method||303===t&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],O(/^content-/i,this._options.headers));var p,d,h=O(/^host$/i,this._options.headers),f=w(this._currentUrl),g=h||f.host,y=/^\w+:/.test(s)?this._currentUrl:r.format(Object.assign(f,{host:g})),_=(p=s,d=y,l?new i(p,d):w(r.resolve(d,p)));if(u("redirecting to",_.href),this._isRedirect=!0,T(_,this._options),(_.protocol!==f.protocol&&"https:"!==_.protocol||_.host!==g&&!function(e,t){c(D(e)&&D(t));var n=e.length-t.length-1;return n>0&&"."===e[n]&&e.endsWith(t)}(_.host,g))&&O(/^(?:(?:proxy-)?authorization|cookie)$/i,this._options.headers),A(o)){var b={headers:e.headers,statusCode:t},v={url:y,method:a,headers:n};o(this._options,b,v),this._sanitizeOptions(this._options)}this._performRequest()},e.exports=E({http:s,https:o}),e.exports.wrap=E},6560:e=>{"use strict";e.exports=(e,t=process.argv)=>{const n=e.startsWith("-")?"":1===e.length?"-":"--",r=t.indexOf(n+e),i=t.indexOf("--");return-1!==r&&(-1===i||r<i)}},9146:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(n(1808)),o=i(n(4404)),a=i(n(7310)),c=i(n(9491)),u=i(n(5158)),l=n(8054),p=i(n(9829)),d=u.default("https-proxy-agent:agent");class h extends l.Agent{constructor(e){let t;if(t="string"==typeof e?a.default.parse(e):e,!t)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");d("creating new HttpsProxyAgent instance: %o",t),super(t);const n=Object.assign({},t);var r;this.secureProxy=t.secureProxy||"string"==typeof(r=n.protocol)&&/^https:?$/i.test(r),n.host=n.hostname||n.host,"string"==typeof n.port&&(n.port=parseInt(n.port,10)),!n.port&&n.host&&(n.port=this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in n)&&(n.ALPNProtocols=["http 1.1"]),n.host&&n.path&&(delete n.path,delete n.pathname),this.proxy=n}callback(e,t){return r(this,void 0,void 0,(function*(){const{proxy:n,secureProxy:r}=this;let i;r?(d("Creating `tls.Socket`: %o",n),i=o.default.connect(n)):(d("Creating `net.Socket`: %o",n),i=s.default.connect(n));const a=Object.assign({},n.headers);let u=`CONNECT ${t.host}:${t.port} HTTP/1.1\r\n`;n.auth&&(a["Proxy-Authorization"]=`Basic ${Buffer.from(n.auth).toString("base64")}`);let{host:l,port:h,secureEndpoint:g}=t;(function(e,t){return Boolean(!t&&80===e||t&&443===e)})(h,g)||(l+=`:${h}`),a.Host=l,a.Connection="close";for(const e of Object.keys(a))u+=`${e}: ${a[e]}\r\n`;const m=p.default(i);i.write(`${u}\r\n`);const{statusCode:y,buffered:_}=yield m;if(200===y){if(e.once("socket",f),t.secureEndpoint){d("Upgrading socket connection to TLS");const e=t.servername||t.host;return o.default.connect(Object.assign(Object.assign({},function(e,...t){const n={};let r;for(r in e)t.includes(r)||(n[r]=e[r]);return n}(t,"host","hostname","path","port")),{socket:i,servername:e}))}return i}i.destroy();const b=new s.default.Socket({writable:!1});return b.readable=!0,e.once("socket",(e=>{d("replaying proxy buffer for failed request"),c.default(e.listenerCount("data")>0),e.push(_),e.push(null)})),b}))}}function f(e){e.resume()}t.default=h},6018:function(e,t,n){"use strict";const r=(this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(n(9146));function i(e){return new r.default(e)}!function(e){e.HttpsProxyAgent=r.default,e.prototype=r.default.prototype}(i||(i={})),e.exports=i},9829:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(5158)).default("https-proxy-agent:parse-proxy-response");t.default=function(e){return new Promise(((t,n)=>{let r=0;const s=[];function o(){const n=e.read();n?function(e){s.push(e),r+=e.length;const n=Buffer.concat(s,r);if(-1===n.indexOf("\r\n\r\n"))return i("have not received end of HTTP headers yet..."),void o();const a=n.toString("ascii",0,n.indexOf("\r\n")),c=+a.split(" ")[1];i("got proxy server response: %o",a),t({statusCode:c,buffered:n})}(n):e.once("readable",o)}function a(e){i("onclose had error %o",e)}function c(){i("onend")}e.on("error",(function t(r){e.removeListener("end",c),e.removeListener("error",t),e.removeListener("close",a),e.removeListener("readable",o),i("onerror %o",r),n(r)})),e.on("close",a),e.on("end",c),o()}))}},7612:function(e,t,n){var r,i;!function(s,o){const a=t;!function(e){const t=Symbol("newer"),n=Symbol("older");function r(e,t){"number"!=typeof e&&(t=e,e=0),this.size=0,this.limit=e,this.oldest=this.newest=void 0,this._keymap=new Map,t&&(this.assign(t),e<1&&(this.limit=this.size))}function i(e,r){this.key=e,this.value=r,this[t]=void 0,this[n]=void 0}function s(e){this.entry=e}function o(e){this.entry=e}function a(e){this.entry=e}e.LRUMap=r,r.prototype._markEntryAsUsed=function(e){e!==this.newest&&(e[t]&&(e===this.oldest&&(this.oldest=e[t]),e[t][n]=e[n]),e[n]&&(e[n][t]=e[t]),e[t]=void 0,e[n]=this.newest,this.newest&&(this.newest[t]=e),this.newest=e)},r.prototype.assign=function(e){let r,s=this.limit||Number.MAX_VALUE;this._keymap.clear();let o=e[Symbol.iterator]();for(let e=o.next();!e.done;e=o.next()){let o=new i(e.value[0],e.value[1]);if(this._keymap.set(o.key,o),r?(r[t]=o,o[n]=r):this.oldest=o,r=o,0==s--)throw new Error("overflow")}this.newest=r,this.size=this._keymap.size},r.prototype.get=function(e){var t=this._keymap.get(e);if(t)return this._markEntryAsUsed(t),t.value},r.prototype.set=function(e,r){var s=this._keymap.get(e);return s?(s.value=r,this._markEntryAsUsed(s),this):(this._keymap.set(e,s=new i(e,r)),this.newest?(this.newest[t]=s,s[n]=this.newest):this.oldest=s,this.newest=s,++this.size,this.size>this.limit&&this.shift(),this)},r.prototype.shift=function(){var e=this.oldest;if(e)return this.oldest[t]?(this.oldest=this.oldest[t],this.oldest[n]=void 0):(this.oldest=void 0,this.newest=void 0),e[t]=e[n]=void 0,this._keymap.delete(e.key),--this.size,[e.key,e.value]},r.prototype.find=function(e){let t=this._keymap.get(e);return t?t.value:void 0},r.prototype.has=function(e){return this._keymap.has(e)},r.prototype.delete=function(e){var r=this._keymap.get(e);if(r)return this._keymap.delete(r.key),r[t]&&r[n]?(r[n][t]=r[t],r[t][n]=r[n]):r[t]?(r[t][n]=void 0,this.oldest=r[t]):r[n]?(r[n][t]=void 0,this.newest=r[n]):this.oldest=this.newest=void 0,this.size--,r.value},r.prototype.clear=function(){this.oldest=this.newest=void 0,this.size=0,this._keymap.clear()},s.prototype[Symbol.iterator]=function(){return this},s.prototype.next=function(){let e=this.entry;return e?(this.entry=e[t],{done:!1,value:[e.key,e.value]}):{done:!0,value:void 0}},o.prototype[Symbol.iterator]=function(){return this},o.prototype.next=function(){let e=this.entry;return e?(this.entry=e[t],{done:!1,value:e.key}):{done:!0,value:void 0}},a.prototype[Symbol.iterator]=function(){return this},a.prototype.next=function(){let e=this.entry;return e?(this.entry=e[t],{done:!1,value:e.value}):{done:!0,value:void 0}},r.prototype.keys=function(){return new o(this.oldest)},r.prototype.values=function(){return new a(this.oldest)},r.prototype.entries=function(){return this},r.prototype[Symbol.iterator]=function(){return new s(this.oldest)},r.prototype.forEach=function(e,n){"object"!=typeof n&&(n=this);let r=this.oldest;for(;r;)e.call(n,r.value,r.key,this),r=r[t]},r.prototype.toJSON=function(){for(var e=new Array(this.size),n=0,r=this.oldest;r;)e[n++]={key:r.key,value:r.value},r=r[t];return e},r.prototype.toString=function(){for(var e="",n=this.oldest;n;)e+=String(n.key)+":"+n.value,(n=n[t])&&(e+=" < ");return e}}(a),void 0===(i="function"==typeof(r=a)?r.call(t,n,t,e):r)||(e.exports=i)}()},4341:e=>{"use strict";const t=(e,t,r,i)=>{if("length"===r||"prototype"===r)return;if("arguments"===r||"caller"===r)return;const s=Object.getOwnPropertyDescriptor(e,r),o=Object.getOwnPropertyDescriptor(t,r);!n(s,o)&&i||Object.defineProperty(e,r,o)},n=function(e,t){return void 0===e||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},r=(e,t)=>`/* Wrapped ${e}*/\n${t}`,i=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),s=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name");e.exports=(e,n,{ignoreNonConfigurable:o=!1}={})=>{const{name:a}=e;for(const r of Reflect.ownKeys(n))t(e,n,r,o);return((e,t)=>{const n=Object.getPrototypeOf(t);n!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,n)})(e,n),((e,t,n)=>{const o=""===n?"":`with ${n.trim()}() `,a=r.bind(null,o,t.toString());Object.defineProperty(a,"name",s),Object.defineProperty(e,"toString",{...i,value:a})})(e,n,a),e}},1890:(e,t,n)=>{var r=n(1017),i=n(7147),s=parseInt("0777",8);function o(e,t,n,a){"function"==typeof t?(n=t,t={}):t&&"object"==typeof t||(t={mode:t});var c=t.mode,u=t.fs||i;void 0===c&&(c=s),a||(a=null);var l=n||function(){};e=r.resolve(e),u.mkdir(e,c,(function(n){if(!n)return l(null,a=a||e);if("ENOENT"===n.code){if(r.dirname(e)===e)return l(n);o(r.dirname(e),t,(function(n,r){n?l(n,r):o(e,t,l,r)}))}else u.stat(e,(function(e,t){e||!t.isDirectory()?l(n,a):l(null,a)}))}))}e.exports=o.mkdirp=o.mkdirP=o,o.sync=function e(t,n,o){n&&"object"==typeof n||(n={mode:n});var a=n.mode,c=n.fs||i;void 0===a&&(a=s),o||(o=null),t=r.resolve(t);try{c.mkdirSync(t,a),o=o||t}catch(i){if("ENOENT"===i.code)o=e(r.dirname(t),n,o),e(t,n,o);else{var u;try{u=c.statSync(t)}catch(e){throw i}if(!u.isDirectory())throw i}}return o}},7824:e=>{var t=1e3,n=60*t,r=60*n,i=24*r;function s(e,t,n,r){var i=t>=1.5*n;return Math.round(e/n)+" "+r+(i?"s":"")}e.exports=function(e,o){o=o||{};var a,c,u=typeof e;if("string"===u&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var s=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(s){var o=parseFloat(s[1]);switch((s[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"weeks":case"week":case"w":return 6048e5*o;case"days":case"day":case"d":return o*i;case"hours":case"hour":case"hrs":case"hr":case"h":return o*r;case"minutes":case"minute":case"mins":case"min":case"m":return o*n;case"seconds":case"second":case"secs":case"sec":case"s":return o*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}(e);if("number"===u&&isFinite(e))return o.long?(a=e,(c=Math.abs(a))>=i?s(a,c,i,"day"):c>=r?s(a,c,r,"hour"):c>=n?s(a,c,n,"minute"):c>=t?s(a,c,t,"second"):a+" ms"):function(e){var s=Math.abs(e);return s>=i?Math.round(e/i)+"d":s>=r?Math.round(e/r)+"h":s>=n?Math.round(e/n)+"m":s>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},3398:(e,t,n)=>{var r=n(9464).OE,i=n(3717),s=n(1891),o=n(1808),a=n(2361),c=n(3837),u=n(6113),l=n(5398),p=!1,d=-2147483648,h=2147483647,f=0,g=4294967295;function m(e){p&&console.debug(e)}function y(e){var t=[];for(var n in e)t.push(n);for(var r=0;r<t.length;r++)e[e[t[r]]]=parseInt(t[r])}var _={0:"NoError",1:"TooBig",2:"NoSuchName",3:"BadValue",4:"ReadOnly",5:"GeneralError",6:"NoAccess",7:"WrongType",8:"WrongLength",9:"WrongEncoding",10:"WrongValue",11:"NoCreation",12:"InconsistentValue",13:"ResourceUnavailable",14:"CommitFailed",15:"UndoFailed",16:"AuthorizationError",17:"NotWritable",18:"InconsistentName"};y(_);var b={1:"Boolean",2:"Integer",3:"BitString",4:"OctetString",5:"Null",6:"OID",64:"IpAddress",65:"Counter",66:"Gauge",67:"TimeTicks",68:"Opaque",70:"Counter64",128:"NoSuchObject",129:"NoSuchInstance",130:"EndOfMibView"};y(b),b.INTEGER=b.Integer,b["OCTET STRING"]=b.OctetString,b["OBJECT IDENTIFIER"]=b.OID,b.Integer32=b.Integer,b.Counter32=b.Counter,b.Gauge32=b.Gauge,b.Unsigned32=b.Gauge32;var v={160:"GetRequest",161:"GetNextRequest",162:"GetResponse",163:"SetRequest",164:"Trap",165:"GetBulkRequest",166:"InformRequest",167:"TrapV2",168:"Report"};y(v);var E={0:"ColdStart",1:"WarmStart",2:"LinkDown",3:"LinkUp",4:"AuthenticationFailure",5:"EgpNeighborLoss",6:"EnterpriseSpecific"};y(E);var S={1:"noAuthNoPriv",2:"authNoPriv",3:"authPriv"};y(S);var w={1:"none",2:"md5",3:"sha",4:"sha224",5:"sha256",6:"sha384",7:"sha512"};y(w);var I={1:"none",2:"des",4:"aes",6:"aes256b",8:"aes256r"};y(I);var T="1.3.6.1.6.3.15.1.1",O={1:"Unsupported Security Level",2:"Not In Time Window",3:"Unknown User Name",4:"Unknown Engine ID",5:"Wrong Digest (incorrect password, community or key)",6:"Decryption Error"};y(O);var C={1:"Scalar",2:"Table"};y(C);var N={1:"Open",2:"Close",3:"Register",4:"Unregister",5:"Get",6:"GetNext",7:"GetBulk",8:"TestSet",9:"CommitSet",10:"UndoSet",11:"CleanupSet",12:"Notify",13:"Ping",14:"IndexAllocate",15:"IndexDeallocate",16:"AddAgentCaps",17:"RemoveAgentCaps",18:"Response"};y(N);var D={0:"None",1:"Simple"};y(D);var A={0:"None",1:"ReadOnly",2:"ReadWrite"};y(A);var x={0:"not-accessible",1:"accessible-for-notify",2:"read-only",3:"read-write",4:"read-create"};y(x);var P={"not-accessible":"not-accessible","read-only":"read-only","read-write":"read-write","write-only":"read-write"},k={1:"active",2:"notInService",3:"notReady",4:"createAndGo",5:"createAndWait",6:"destroy"};y(k);var R={1:"EIp4AddressSize",2:"EUnknownObjectType",3:"EUnknownPduType",4:"ECouldNotDecrypt",5:"EAuthFailure",6:"EReqResOidNoMatch",8:"EOutOfOrder",9:"EVersionNoMatch",10:"ECommunityNoMatch",11:"EUnexpectedReport",12:"EResponseNotHandled",13:"EUnexpectedResponse"};function B(e,t,n){this.name="ResponseInvalidError",this.message=e,this.code=t,this.info=n,Error.captureStackTrace(this,B)}function U(e){this.name="RequestInvalidError",this.message=e,Error.captureStackTrace(this,U)}function F(e,t){this.name="RequestFailedError",this.message=e,this.status=t,Error.captureStackTrace(this,F)}function L(e){this.name="RequestTimedOutError",this.message=e,Error.captureStackTrace(this,L)}function M(e,t,n,r){this.name="ProcessingError",this.message=e,this.error=t,this.rinfo=n,this.buffer=r,Error.captureStackTrace(this,M)}function G(e){return!(e.type!=b.NoSuchObject&&e.type!=b.NoSuchInstance&&e.type!=b.EndOfMibView)}function j(e){return(b[e.type]||"NotAnError")+": "+e.oid}function V(e,t){var n={str:e,len:e.length,idx:0},r={str:t,len:t.length,idx:0},i=".".charCodeAt(0);function s(e){var t=0;if(e.idx>=e.len)return null;for(;e.idx<e.len;){var n=e.str.charCodeAt(e.idx++);if(n==i)return t;t=(t?10*t:t)+(n-48)}return t}for(;;){var o=s(n),a=s(r);if(null===o)return!0;if(null===a)return!0;if(a>o)return!0;if(a<o)return!1}}function q(e,t){var n=e.split("."),r=t.split(".");if(n.length>r.length)return!1;for(var i=0;i<n.length;i++)if(r[i]!=n[i])return!1;return!0}function $(e){var t=e.readInt();if(!Number.isInteger(t))throw new TypeError("Value read as integer "+t+" is not an integer");if(t<d||t>h)throw new RangeError("Read integer "+t+" is outside the signed 32-bit range");return t}function Y(e){var t=e.readInt();if(!Number.isInteger(t))throw new TypeError("Value read as integer "+t+" is not an integer");if(t<f||t>g)throw new RangeError("Read integer "+t+" is outside the unsigned 32-bit range");return t}function z(e){return e.readString(b.Counter64,!0)}function H(e){var t=e.readString(b.IpAddress,!0);if(4!=t.length)throw new B("Length '"+t.length+"' of IP address '"+t.toString("hex")+"' is not 4",R.EIp4AddressSize);return t[0]+"."+t[1]+"."+t[2]+"."+t[3]}function K(e,t){var n;if(t==b.Boolean)n=e.readBoolean();else if(t==b.Integer)n=$(e);else if(t==b.BitString)n=e.readBitString();else if(t==b.OctetString)n=e.readString(null,!0);else if(t==b.Null)e.readByte(),e.readByte(),n=null;else if(t==b.OID)n=e.readOID();else if(t==b.IpAddress)n=H(e);else if(t==b.Counter)n=Y(e);else if(t==b.Gauge)n=Y(e);else if(t==b.TimeTicks)n=Y(e);else if(t==b.Opaque)n=e.readString(b.Opaque,!0);else if(t==b.Counter64)n=z(e);else if(t==b.NoSuchObject)e.readByte(),e.readByte(),n=null;else if(t==b.NoSuchInstance)e.readByte(),e.readByte(),n=null;else{if(t!=b.EndOfMibView)throw new B("Unknown type '"+t+"' in response",R.EUnknownObjectType);e.readByte(),e.readByte(),n=null}return n}function W(e,t){for(e.readSequence();e.readSequence(),e.peek()==b.OID;){var n=e.readOID(),r=e.peek();if(null==r)break;var i=K(e,r);t.push({oid:n,type:r,value:i})}}function J(e,t,n){if(!Number.isInteger(n))throw new TypeError("Value to write as integer "+n+" is not an integer");if(n<d||n>h)throw new RangeError("Integer to write "+n+" is outside the signed 32-bit range");e.writeInt(n,t)}function X(e,t,n){if(!Number.isInteger(n))throw new TypeError("Value to write as integer "+n+" is not an integer");if(n<f||n>g)throw new RangeError("Integer to write "+n+" is outside the unsigned 32-bit range");e.writeInt(n,t)}function Z(e,t){e.writeBuffer(t,b.Counter64)}function Q(e,t){e.startSequence();for(var n=0;n<t.length;n++){if(e.startSequence(),e.writeOID(t[n].oid),t[n].type&&t[n].hasOwnProperty("value")){var r=t[n].type,i=t[n].value;switch(r){case b.Boolean:e.writeBoolean(!!i);break;case b.Integer:J(e,b.Integer,i);break;case b.OctetString:"string"==typeof i?e.writeString(i):e.writeBuffer(i,b.OctetString);break;case b.Null:e.writeNull();break;case b.OID:e.writeOID(i);break;case b.IpAddress:var s=i.split(".");if(4!=s.length)throw new U("Invalid IP address '"+i+"'");e.writeBuffer(Buffer.from(s),64);break;case b.Counter:X(e,b.Counter,i);break;case b.Gauge:X(e,b.Gauge,i);break;case b.TimeTicks:X(e,b.TimeTicks,i);break;case b.Opaque:e.writeBuffer(i,b.Opaque);break;case b.Counter64:Z(e,i);break;case b.NoSuchObject:case b.NoSuchInstance:case b.EndOfMibView:e.writeByte(r),e.writeByte(0);break;default:throw new U("Unknown type '"+r+"' in request")}}else e.writeNull();e.endSequence()}e.endSequence()}y(R),c.inherits(B,Error),c.inherits(U,Error),c.inherits(F,Error),c.inherits(L,Error),c.inherits(M,Error);var ee=function(){};ee.prototype.toBuffer=function(e){e.startSequence(this.type),J(e,b.Integer,this.id),J(e,b.Integer,this.type==v.GetBulkRequest&&this.options.nonRepeaters||0),J(e,b.Integer,this.type==v.GetBulkRequest&&this.options.maxRepetitions||0),Q(e,this.varbinds),e.endSequence()},ee.prototype.initializeFromVariables=function(e,t,n){this.id=e,this.varbinds=t,this.options=n||{},this.contextName=n&&n.context?n.context:""},ee.prototype.initializeFromBuffer=function(e){this.type=e.peek(),e.readSequence(),this.id=$(e),this.nonRepeaters=$(e),this.maxRepetitions=$(e),this.varbinds=[],W(e,this.varbinds)},ee.prototype.getResponsePduForRequest=function(){var e=ue.createFromVariables(this.id,[],{});return this.contextEngineID&&(e.contextEngineID=this.contextEngineID,e.contextName=this.contextName),e},ee.createFromVariables=function(e,t,n,r){var i=new e(t,n,r);return i.id=t,i.varbinds=n,i.options=r||{},i.contextName=r&&r.context?r.context:"",i};var te=function(){this.type=v.GetBulkRequest,te.super_.apply(this,arguments)};c.inherits(te,ee),te.createFromBuffer=function(e){var t=new te;return t.initializeFromBuffer(e),t};var ne=function(){this.type=v.GetNextRequest,ne.super_.apply(this,arguments)};c.inherits(ne,ee),ne.createFromBuffer=function(e){var t=new ne;return t.initializeFromBuffer(e),t};var re=function(){this.type=v.GetRequest,re.super_.apply(this,arguments)};c.inherits(re,ee),re.createFromBuffer=function(e){var t=new re;return t.initializeFromBuffer(e),t},re.createFromVariables=function(e,t,n){var r=new re;return r.initializeFromVariables(e,t,n),r};var ie=function(){this.type=v.InformRequest,ie.super_.apply(this,arguments)};c.inherits(ie,ee),ie.createFromBuffer=function(e){var t=new ie;return t.initializeFromBuffer(e),t};var se=function(){this.type=v.SetRequest,se.super_.apply(this,arguments)};c.inherits(se,ee),se.createFromBuffer=function(e){var t=new se;return t.initializeFromBuffer(e),t};var oe=function(){this.type=v.Trap};oe.prototype.toBuffer=function(e){e.startSequence(this.type),e.writeOID(this.enterprise),e.writeBuffer(Buffer.from(this.agentAddr.split(".")),b.IpAddress),J(e,b.Integer,this.generic),J(e,b.Integer,this.specific),X(e,b.TimeTicks,this.upTime||Math.floor(100*process.uptime())),Q(e,this.varbinds),e.endSequence()},oe.createFromBuffer=function(e){var t=new oe;return e.readSequence(),t.enterprise=e.readOID(),t.agentAddr=H(e),t.generic=$(e),t.specific=$(e),t.upTime=Y(e),t.varbinds=[],W(e,t.varbinds),t},oe.createFromVariables=function(e,t,n){var r=new oe;return r.agentAddr=n.agentAddr||"127.0.0.1",r.upTime=n.upTime,"string"==typeof e?(r.generic=E.EnterpriseSpecific,r.specific=parseInt(e.match(/\.(\d+)$/)[1]),r.enterprise=e.replace(/\.(\d+)$/,"")):(r.generic=e,r.specific=0,r.enterprise="1.3.6.1.4.1"),r.varbinds=t,r};var ae=function(){this.type=v.TrapV2,ae.super_.apply(this,arguments)};c.inherits(ae,ee),ae.createFromBuffer=function(e){var t=new ae;return t.initializeFromBuffer(e),t},ae.createFromVariables=function(e,t,n){var r=new ae;return r.initializeFromVariables(e,t,n),r};var ce=function(){};ce.prototype.toBuffer=function(e){e.startSequence(this.type),J(e,b.Integer,this.id),J(e,b.Integer,this.errorStatus||0),J(e,b.Integer,this.errorIndex||0),Q(e,this.varbinds),e.endSequence()},ce.prototype.initializeFromBuffer=function(e){e.readSequence(this.type),this.id=$(e),this.errorStatus=$(e),this.errorIndex=$(e),this.varbinds=[],W(e,this.varbinds)},ce.prototype.initializeFromVariables=function(e,t,n){this.id=e,this.varbinds=t,this.options=n||{}};var ue=function(){this.type=v.GetResponse,ue.super_.apply(this,arguments)};c.inherits(ue,ce),ue.createFromBuffer=function(e){var t=new ue;return t.initializeFromBuffer(e),t},ue.createFromVariables=function(e,t,n){var r=new ue;return r.initializeFromVariables(e,t,n),r};var le=function(){this.type=v.Report,le.super_.apply(this,arguments)};c.inherits(le,ce),le.createFromBuffer=function(e){var t=new le;return t.initializeFromBuffer(e),t},le.createFromVariables=function(e,t,n){var r=new le;return r.initializeFromVariables(e,t,n),r};var pe=function(e,t){var n,i,s;t&&(i=(e=new r.Reader(e.readString(r.Sequence|r.Constructor,!0))).readString(r.OctetString,!0),s=e.readString());var o=e.peek();if(o==v.GetResponse)n=ue.createFromBuffer(e);else if(o==v.Report)n=le.createFromBuffer(e);else if(o==v.Trap)n=oe.createFromBuffer(e);else if(o==v.TrapV2)n=ae.createFromBuffer(e);else if(o==v.InformRequest)n=ie.createFromBuffer(e);else if(o==v.GetRequest)n=re.createFromBuffer(e);else if(o==v.SetRequest)n=se.createFromBuffer(e);else if(o==v.GetNextRequest)n=ne.createFromBuffer(e);else{if(o!=v.GetBulkRequest)throw new B("Unknown PDU type '"+o+"' in response",R.EUnknownPduType);n=te.createFromBuffer(e)}return t&&(n.contextEngineID=i,n.contextName=s),n.scoped=t,n},de={HMAC_BUFFER_SIZE:1048576,algorithms:{}};de.algorithms[w.md5]={KEY_LENGTH:16,AUTHENTICATION_CODE_LENGTH:12,CRYPTO_ALGORITHM:"md5"},de.algorithms[w.sha]={KEY_LENGTH:20,AUTHENTICATION_CODE_LENGTH:12,CRYPTO_ALGORITHM:"sha1"},de.algorithms[w.sha224]={KEY_LENGTH:28,AUTHENTICATION_CODE_LENGTH:16,CRYPTO_ALGORITHM:"sha224"},de.algorithms[w.sha256]={KEY_LENGTH:32,AUTHENTICATION_CODE_LENGTH:24,CRYPTO_ALGORITHM:"sha256"},de.algorithms[w.sha384]={KEY_LENGTH:48,AUTHENTICATION_CODE_LENGTH:32,CRYPTO_ALGORITHM:"sha384"},de.algorithms[w.sha512]={KEY_LENGTH:64,AUTHENTICATION_CODE_LENGTH:48,CRYPTO_ALGORITHM:"sha512"},de.authToKeyCache={},de.computeCacheKey=function(e,t,n){return e+t+n.toString("base64")},de.passwordToKey=function(e,t,n){var r,i,s,o,a=de.algorithms[e].CRYPTO_ALGORITHM,c=de.computeCacheKey(e,t,n);return void 0!==de.authToKeyCache[c]?de.authToKeyCache[c]:(o=Buffer.alloc(de.HMAC_BUFFER_SIZE,t),(r=u.createHash(a)).update(o),i=r.digest(),(r=u.createHash(a)).update(i),r.update(n),r.update(i),s=r.digest(),de.authToKeyCache[c]=s,s)},de.getParametersLength=function(e){return de.algorithms[e].AUTHENTICATION_CODE_LENGTH},de.writeParameters=function(e,t,n,r,i){de.calculateDigest(e,t,n,r).copy(i)},de.isAuthentic=function(e,t,n,r,i){var s,o;return i.length===de.algorithms[t].AUTHENTICATION_CODE_LENGTH&&(s=Buffer.from(i),i.fill(0),o=de.calculateDigest(e,t,n,r),s.copy(i),o.equals(i))},de.calculateDigest=function(e,t,n,r){var i=de.passwordToKey(t,n,r),s=de.algorithms[t].CRYPTO_ALGORITHM,o=u.createHmac(s,i);return o.update(e),o.digest().subarray(0,de.algorithms[t].AUTHENTICATION_CODE_LENGTH)};var he={encryptPdu:function(e,t,n,r,i){return(0,he.algorithms[e].encryptPdu)(t,e,n,r,i)},decryptPdu:function(e,t,n,r,i,s){return(0,he.algorithms[e].decryptPdu)(t,e,n,r,i,s)},debugEncrypt:function(e,t,n,r){m("Key: "+e.toString("hex")),m("IV:  "+t.toString("hex")),m("Plain:     "+n.toString("hex")),m("Encrypted: "+r.toString("hex"))},debugDecrypt:function(e,t,n,r){m("Key: "+e.toString("hex")),m("IV:  "+t.toString("hex")),m("Encrypted: "+n.toString("hex")),m("Plain:     "+r.toString("hex"))},generateLocalizedKey:function(e,t,n,r){var i,s;return i=de.passwordToKey(t,n,r),s=Buffer.alloc(e.KEY_LENGTH),i.copy(s,0,0,e.KEY_LENGTH),s},generateLocalizedKeyBlumenthal:function(e,t,n,r){let i,s,o,a,c,l,p;i=de.algorithms[t].KEY_LENGTH,a=Math.ceil(e.KEY_LENGTH/i),o=Buffer.alloc(e.KEY_LENGTH),s=de.passwordToKey(t,n,r),l=s;for(let e=0;e<a;e++)l.copy(o,e*i,0,i),e<a-1&&(p=u.createHash(de.algorithms[t].CRYPTO_ALGORITHM),c=Buffer.alloc((e+1)*i),o.copy(c,e*i,0,(e+1)*i),p.update(c),l=p.digest());return o},generateLocalizedKeyReeder:function(e,t,n,r){let i,s,o,a,c;i=de.algorithms[t].KEY_LENGTH,a=Math.ceil(e.KEY_LENGTH/i),o=Buffer.alloc(e.KEY_LENGTH),c=n;for(let e=0;e<a;e++)s=de.passwordToKey(t,c,r),s.copy(o,e*i,0,i),c=s;return o},encryptPduDes:function(e,t,n,r,i){var s,o,a,c,l,p,d,h,f,g,m=he.algorithms[I.des];for(he.generateLocalizedKey(m,r,n,i.engineID),s=de.passwordToKey(r,n,i.engineID),o=Buffer.alloc(m.KEY_LENGTH),s.copy(o,0,0,m.KEY_LENGTH),a=Buffer.alloc(m.BLOCK_LENGTH),s.copy(a,0,m.KEY_LENGTH,m.KEY_LENGTH+m.BLOCK_LENGTH),(c=Buffer.alloc(m.BLOCK_LENGTH)).fill("00000001",0,4,"hex"),c.fill(u.randomBytes(4),4,8),l=Buffer.alloc(m.BLOCK_LENGTH),p=0;p<l.length;p++)l[p]=a[p]^c[p];return e.length%m.BLOCK_LENGTH==0?h=e:(d=m.BLOCK_LENGTH*(Math.floor(e.length/m.BLOCK_LENGTH)+1),h=Buffer.alloc(d),e.copy(h,0,0,e.length)),f=(g=u.createCipheriv(m.CRYPTO_ALGORITHM,o,l)).update(h),{encryptedPdu:f=Buffer.concat([f,g.final()]),msgPrivacyParameters:c}},decryptPduDes:function(e,t,n,r,i,s){var o,a,c,l,p,d,h,f,g=he.algorithms[I.des];for(o=de.passwordToKey(i,r,s.engineID),a=Buffer.alloc(g.KEY_LENGTH),o.copy(a,0,0,g.KEY_LENGTH),c=Buffer.alloc(g.BLOCK_LENGTH),o.copy(c,0,g.KEY_LENGTH,g.KEY_LENGTH+g.BLOCK_LENGTH),l=n,p=Buffer.alloc(g.BLOCK_LENGTH),d=0;d<p.length;d++)p[d]=c[d]^l[d];return(f=u.createDecipheriv(g.CRYPTO_ALGORITHM,a,p)).setAutoPadding(!1),h=f.update(e),Buffer.concat([h,f.final()])},generateIvAes:function(e,t,n,r){var i,s,o;return i=Buffer.alloc(e.BLOCK_LENGTH),(s=Buffer.alloc(4)).writeUInt32BE(t),(o=Buffer.alloc(4)).writeUInt32BE(n),s.copy(i,0,0,4),o.copy(i,4,0,4),r.copy(i,8,0,8),i},encryptPduAes:function(e,t,n,r,i){var s,o,a,c,l,p=he.algorithms[t];return s=(0,p.localizationAlgorithm)(p,r,n,i.engineID),o=Buffer.alloc(8).fill(u.randomBytes(8),0,8),a=he.generateIvAes(p,i.engineBoots,i.engineTime,o),l=(c=u.createCipheriv(p.CRYPTO_ALGORITHM,s,a)).update(e),{encryptedPdu:l=Buffer.concat([l,c.final()]),msgPrivacyParameters:o}},decryptPduAes:function(e,t,n,r,i,s){var o,a,c,l,p=he.algorithms[t];return o=(0,p.localizationAlgorithm)(p,i,r,s.engineID),a=he.generateIvAes(p,s.engineBoots,s.engineTime,n),l=(c=u.createDecipheriv(p.CRYPTO_ALGORITHM,o,a)).update(e),Buffer.concat([l,c.final()])},algorithms:{}};he.algorithms[I.des]={CRYPTO_ALGORITHM:"des-cbc",KEY_LENGTH:8,BLOCK_LENGTH:8,encryptPdu:he.encryptPduDes,decryptPdu:he.decryptPduDes,localizationAlgorithm:he.generateLocalizedKey},he.algorithms[I.aes]={CRYPTO_ALGORITHM:"aes-128-cfb",KEY_LENGTH:16,BLOCK_LENGTH:16,encryptPdu:he.encryptPduAes,decryptPdu:he.decryptPduAes,localizationAlgorithm:he.generateLocalizedKey},he.algorithms[I.aes256b]={CRYPTO_ALGORITHM:"aes-256-cfb",KEY_LENGTH:32,BLOCK_LENGTH:16,encryptPdu:he.encryptPduAes,decryptPdu:he.decryptPduAes,localizationAlgorithm:he.generateLocalizedKeyBlumenthal},he.algorithms[I.aes256r]={CRYPTO_ALGORITHM:"aes-256-cfb",KEY_LENGTH:32,BLOCK_LENGTH:16,encryptPdu:he.encryptPduAes,decryptPdu:he.decryptPduAes,localizationAlgorithm:he.generateLocalizedKeyReeder};var fe=function(){};fe.prototype.getReqId=function(){return 3==this.version?this.msgGlobalData.msgID:this.pdu.id},fe.prototype.toBuffer=function(){return 3==this.version?this.toBufferV3():this.toBufferCommunity()},fe.prototype.toBufferCommunity=function(){if(this.buffer)return this.buffer;var e=new r.Writer;return e.startSequence(),J(e,b.Integer,this.version),e.writeString(this.community),this.pdu.toBuffer(e),e.endSequence(),this.buffer=e.buffer,this.buffer},fe.prototype.toBufferV3=function(){var e;if(this.buffer)return this.buffer;var t=new r.Writer;t.startSequence();var n=this.pdu.contextEngineID?this.pdu.contextEngineID:this.msgSecurityParameters.msgAuthoritativeEngineID;if(0==n.length?t.writeString(""):t.writeBuffer(n,r.OctetString),t.writeString(this.pdu.contextName),this.pdu.toBuffer(t),t.endSequence(),this.hasPrivacy()){var i={engineID:this.msgSecurityParameters.msgAuthoritativeEngineID,engineBoots:this.msgSecurityParameters.msgAuthoritativeEngineBoots,engineTime:this.msgSecurityParameters.msgAuthoritativeEngineTime};e=he.encryptPdu(this.user.privProtocol,t.buffer,this.user.privKey,this.user.authProtocol,i)}var s=new r.Writer;s.startSequence(),J(s,b.Integer,this.version),s.startSequence(),J(s,b.Integer,this.msgGlobalData.msgID),J(s,b.Integer,this.msgGlobalData.msgMaxSize),s.writeByte(r.OctetString),s.writeByte(1),s.writeByte(this.msgGlobalData.msgFlags),J(s,b.Integer,this.msgGlobalData.msgSecurityModel),s.endSequence(),s.startSequence(r.OctetString),s.startSequence(),0==this.msgSecurityParameters.msgAuthoritativeEngineID.length?s.writeString(""):s.writeBuffer(this.msgSecurityParameters.msgAuthoritativeEngineID,r.OctetString),J(s,b.Integer,this.msgSecurityParameters.msgAuthoritativeEngineBoots),J(s,b.Integer,this.msgSecurityParameters.msgAuthoritativeEngineTime),s.writeString(this.msgSecurityParameters.msgUserName);var o="";if(this.hasAuthentication()){var a=de.getParametersLength(this.user.authProtocol);o=Buffer.alloc(a),s.writeBuffer(o,r.OctetString)}else s.writeString("");var c=s._offset-o.length;return this.hasPrivacy()?s.writeBuffer(e.msgPrivacyParameters,r.OctetString):s.writeString(""),c-=s._offset,s.endSequence(),s.endSequence(),c+=s._offset,this.hasPrivacy()?s.writeBuffer(e.encryptedPdu,r.OctetString):s.writeBuffer(t.buffer),c-=s._offset,s.endSequence(),c+=s._offset,this.buffer=s.buffer,this.hasAuthentication()&&(o=this.buffer.subarray(c,c+o.length),de.writeParameters(this.buffer,this.user.authProtocol,this.user.authKey,this.msgSecurityParameters.msgAuthoritativeEngineID,o)),this.buffer},fe.prototype.processIncomingSecurity=function(e,t){return!(this.hasPrivacy()&&!this.decryptPdu(e,t))&&(!(this.hasAuthentication()&&!this.isAuthenticationDisabled())||this.checkAuthentication(e,t))},fe.prototype.decryptPdu=function(e,t){var n,i;try{var s={engineID:this.msgSecurityParameters.msgAuthoritativeEngineID,engineBoots:this.msgSecurityParameters.msgAuthoritativeEngineBoots,engineTime:this.msgSecurityParameters.msgAuthoritativeEngineTime};return n=he.decryptPdu(e.privProtocol,this.encryptedPdu,this.msgSecurityParameters.msgPrivacyParameters,e.privKey,e.authProtocol,s),i=new r.Reader(n),this.pdu=pe(i,!0),!0}catch(e){return t(new B("Failed to decrypt PDU: "+e,R.ECouldNotDecrypt)),!1}},fe.prototype.checkAuthentication=function(e,t){return!!de.isAuthentic(this.buffer,e.authProtocol,e.authKey,this.msgSecurityParameters.msgAuthoritativeEngineID,this.msgSecurityParameters.msgAuthenticationParameters)||(t(new B("Authentication digest "+this.msgSecurityParameters.msgAuthenticationParameters.toString("hex")+" received in message does not match digest "+de.calculateDigest(this.buffer,e.authProtocol,e.authKey,this.msgSecurityParameters.msgAuthoritativeEngineID).toString("hex")+" calculated for message",R.EAuthFailure,{user:e})),!1)},fe.prototype.setMsgFlags=function(e,t){this.msgGlobalData&&void 0!==this.msgGlobalData&&null!==this.msgGlobalData&&(this.msgGlobalData.msgFlags=t?this.msgGlobalData.msgFlags|2**e:this.msgGlobalData.msgFlags&255-2**e)},fe.prototype.hasAuthentication=function(){return this.msgGlobalData&&this.msgGlobalData.msgFlags&&1&this.msgGlobalData.msgFlags},fe.prototype.setAuthentication=function(e){this.setMsgFlags(0,e)},fe.prototype.hasPrivacy=function(){return this.msgGlobalData&&this.msgGlobalData.msgFlags&&2&this.msgGlobalData.msgFlags},fe.prototype.setPrivacy=function(e){this.setMsgFlags(1,e)},fe.prototype.isReportable=function(){return this.msgGlobalData&&this.msgGlobalData.msgFlags&&4&this.msgGlobalData.msgFlags},fe.prototype.setReportable=function(e){this.setMsgFlags(2,e)},fe.prototype.isAuthenticationDisabled=function(){return this.disableAuthentication},fe.prototype.hasAuthoritativeEngineID=function(){return this.msgSecurityParameters&&this.msgSecurityParameters.msgAuthoritativeEngineID&&""!=this.msgSecurityParameters.msgAuthoritativeEngineID},fe.prototype.createReportResponseMessage=function(e,t){var n={name:"",level:S.noAuthNoPriv},r={msgAuthoritativeEngineID:e.engineID,msgAuthoritativeEngineBoots:e.engineBoots,msgAuthoritativeEngineTime:e.engineTime,msgUserName:n.name,msgAuthenticationParameters:"",msgPrivacyParameters:""},i=le.createFromVariables(this.pdu.id,[],{});i.contextName=t;var s=fe.createRequestV3(n,r,i);return s.msgGlobalData.msgID=this.msgGlobalData.msgID,s},fe.prototype.createResponseForRequest=function(e){return 3==this.version?this.createV3ResponseFromRequest(e):this.createCommunityResponseFromRequest(e)},fe.prototype.createCommunityResponseFromRequest=function(e){return fe.createCommunity(this.version,this.community,e)},fe.prototype.createV3ResponseFromRequest=function(e){var t={name:this.user.name,level:this.user.level,authProtocol:this.user.authProtocol,authKey:this.user.authKey,privProtocol:this.user.privProtocol,privKey:this.user.privKey},n={msgAuthoritativeEngineID:this.msgSecurityParameters.msgAuthoritativeEngineID,msgAuthoritativeEngineBoots:this.msgSecurityParameters.msgAuthoritativeEngineBoots,msgAuthoritativeEngineTime:this.msgSecurityParameters.msgAuthoritativeEngineTime,msgUserName:this.msgSecurityParameters.msgUserName,msgAuthenticationParameters:"",msgPrivacyParameters:""},r={msgID:this.msgGlobalData.msgID,msgMaxSize:65507,msgFlags:251&this.msgGlobalData.msgFlags,msgSecurityModel:3};return fe.createV3(t,r,n,e)},fe.createCommunity=function(e,t,n){var r=new fe;return r.version=e,r.community=t,r.pdu=n,r},fe.createRequestV3=function(e,t,n){var r=e.level==S.authNoPriv||e.level==S.authPriv?1:0,i=e.level==S.authPriv?1:0,s=n.type==v.GetResponse||n.type==v.TrapV2?0:1,o={msgID:ye(),msgMaxSize:65507,msgFlags:4*s|2*i|1*r,msgSecurityModel:3};return fe.createV3(e,o,t,n)},fe.createV3=function(e,t,n,r){var i=new fe;return i.version=3,i.user=e,i.msgGlobalData=t,i.msgSecurityParameters={msgAuthoritativeEngineID:n.msgAuthoritativeEngineID||Buffer.from(""),msgAuthoritativeEngineBoots:n.msgAuthoritativeEngineBoots||0,msgAuthoritativeEngineTime:n.msgAuthoritativeEngineTime||0,msgUserName:e.name||"",msgAuthenticationParameters:"",msgPrivacyParameters:""},i.pdu=r,i},fe.createDiscoveryV3=function(e){var t={msgAuthoritativeEngineID:Buffer.from(""),msgAuthoritativeEngineBoots:0,msgAuthoritativeEngineTime:0};return fe.createRequestV3({name:"",level:S.noAuthNoPriv},t,e)},fe.createFromBuffer=function(e,t){var n=new r.Reader(e),i=new fe;if(n.readSequence(),i.version=$(n),3!=i.version)i.community=n.readString(),i.pdu=pe(n,!1);else{i.msgGlobalData={},n.readSequence(),i.msgGlobalData.msgID=$(n),i.msgGlobalData.msgMaxSize=$(n),i.msgGlobalData.msgFlags=n.readString(r.OctetString,!0)[0],i.msgGlobalData.msgSecurityModel=$(n),i.msgSecurityParameters={};var s=new r.Reader(n.readString(r.OctetString,!0));s.readSequence(),i.msgSecurityParameters.msgAuthoritativeEngineID=s.readString(r.OctetString,!0),i.msgSecurityParameters.msgAuthoritativeEngineBoots=$(s),i.msgSecurityParameters.msgAuthoritativeEngineTime=$(s),i.msgSecurityParameters.msgUserName=s.readString(),i.msgSecurityParameters.msgAuthenticationParameters=s.readString(r.OctetString,!0),i.msgSecurityParameters.msgPrivacyParameters=Buffer.from(s.readString(r.OctetString,!0)),i.hasPrivacy()?(i.encryptedPdu=n.readString(r.OctetString,!0),i.pdu=null):i.pdu=pe(n,!0)}return i.buffer=e,i};var ge=function(e,t,n,r,i){this.message=t,this.responseCb=r,this.retries=e.retries,this.timeout=e.timeout,this.backoff=e.backoff,this.onResponse=e.onSimpleGetResponse,this.feedCb=n,this.port=i&&i.port?i.port:e.port,this.context=e.context};ge.prototype.getId=function(){return this.message.getReqId()};var me=function(e,t,n){this.target=e||"127.0.0.1",n=n||{},this.version=n.version?n.version:0,3==this.version?this.user=t:this.community=t||"public",this.transport=n.transport?n.transport:"udp4",this.port=n.port?n.port:161,this.trapPort=n.trapPort?n.trapPort:162,this.retries=n.retries||0==n.retries?n.retries:1,this.timeout=n.timeout?n.timeout:5e3,this.backoff=n.backoff>=1?n.backoff:1,this.sourceAddress=n.sourceAddress?n.sourceAddress:void 0,this.sourcePort=n.sourcePort?parseInt(n.sourcePort):void 0,this.idBitsSize=n.idBitsSize?parseInt(n.idBitsSize):32,this.context=n.context?n.context:"",this.backwardsGetNexts=void 0===n.backwardsGetNexts||n.backwardsGetNexts,this.reportOidMismatchErrors=void 0!==n.reportOidMismatchErrors&&n.reportOidMismatchErrors,p=n.debug,this.engine=new Ie(n.engineID),this.reqs={},this.reqCount=0,this.dgram=s.createSocket(this.transport),this.dgram.unref();var r=this;this.dgram.on("message",r.onMsg.bind(r)),this.dgram.on("close",r.onClose.bind(r)),this.dgram.on("error",r.onError.bind(r)),(this.sourceAddress||this.sourcePort)&&this.dgram.bind(this.sourcePort,this.sourceAddress)};function ye(e){return 16===e?Math.floor(1e4*Math.random())%65535:Math.floor(1e8*Math.random())%4294967295}function _e(e,t){for(var n=0,r=t.length;r>0;r--)q(e.baseOid,t[r-1].oid)||(n=1,t.pop());if(t.length>0&&e.feedCb(t),n)return!0}function be(e,t){if(t)e.responseCb(t);else if(e.error)e.responseCb(e.error);else if(e.columns.length>0){var n=e.columns.pop();this.subtree(e.rowOid+n,e.maxRepetitions,ve.bind(this,e),be.bind(this,e))}else e.responseCb(null,e.table)}function ve(e,t){for(var n=0;n<t.length;n++){if(G(t[n]))return e.error=new F(j(t[n])),!0;var r=t[n].oid.replace(e.rowOid,"");if(r&&r!=t[n].oid){var i=r.match(/^(\d+)\.(.+)$/);i&&i[1]>0&&(e.table[i[2]]||(e.table[i[2]]={}),e.table[i[2]][i[1]]=t[n].value)}}}function Ee(e,t){t?e.responseCb(t):e.error?e.responseCb(e.error):e.responseCb(null,e.table)}function Se(e,t){for(var n=0;n<t.length;n++){if(G(t[n]))return e.error=new F(j(t[n])),!0;var r=t[n].oid.replace(e.rowOid,"");if(r&&r!=t[n].oid){var i=r.match(/^(\d+)\.(.+)$/);i&&i[1]>0&&(e.table[i[2]]||(e.table[i[2]]={}),e.table[i[2]][i[1]]=t[n].value)}}}function we(e,t,n){var r,i=0;if(t){if(!(t instanceof F))return void e.doneCb(t);if(t.status!=_.NoSuchName)return void e.doneCb(t);i=1}if(n&&n.length){if(1==this.version||3==this.version){for(var s=n[0].length;s>0;s--)n[0][s-1].type==b.EndOfMibView&&(n[0].pop(),i=1);e.feedCb(n[0])&&(i=1),i||(r=n[0][n[0].length-1].oid)}else i||(e.feedCb(n)?i=1:r=n[0].oid);i?e.doneCb(null):this.walk(r,e.maxRepetitions,e.feedCb,e.doneCb,e.baseOid)}else e.doneCb(null)}c.inherits(me,a.EventEmitter),me.prototype.close=function(){return this.dgram.close(),this},me.prototype.cancelRequests=function(e){var t;for(t in this.reqs){var n=this.reqs[t];this.unregisterRequest(n.getId()),n.responseCb(e)}},me.prototype.get=function(e,t){for(var n=this.reportOidMismatchErrors,r=[],i=0;i<e.length;i++){var s={oid:e[i]};r.push(s)}return this.simpleGet(re,(function(e,t){var r=t.pdu,i=[];if(e.message.pdu.varbinds.length!=r.varbinds.length)e.responseCb(new B("Requested OIDs do not match response OIDs",R.EReqResOidNoMatch));else{for(var s=0;s<e.message.pdu.varbinds.length;s++){if(n&&e.message.pdu.varbinds[s].oid!=r.varbinds[s].oid)return void e.responseCb(new B("OID '"+e.message.pdu.varbinds[s].oid+"' in request at position '"+s+"' does not match OID '"+r.varbinds[s].oid+"' in response at position '"+s+"'",R.EReqResOidNoMatch));i.push(r.varbinds[s])}e.responseCb(null,i)}}),r,t),this},me.prototype.getBulk=function(){var e,t,n,r,i=this.reportOidMismatchErrors,s=this.backwardsGetNexts;arguments.length>=4?(e=arguments[0],t=arguments[1],n=arguments[2],r=arguments[3]):arguments.length>=3?(e=arguments[0],t=arguments[1],n=10,r=arguments[2]):(e=arguments[0],t=0,n=10,r=arguments[1]);for(var o=[],a=0;a<e.length;a++){var c={oid:e[a]};o.push(c)}var u={nonRepeaters:t,maxRepetitions:n};return this.simpleGet(te,(function(e,n){for(var r=n.pdu,o=e.message.pdu.varbinds,a=[],c=0;c<o.length&&c<r.varbinds.length;c++){if(G(r.varbinds[c])){if(i&&o[c].oid!=r.varbinds[c].oid)return void e.responseCb(new B("OID '"+o[c].oid+"' in request at position '"+c+"' does not match OID '"+r.varbinds[c].oid+"' in response at position '"+c+"'",R.EReqResOidNoMatch))}else if(!s&&!V(o[c].oid,r.varbinds[c].oid))return void e.responseCb(new B("OID '"+o[c].oid+"' in request at positiion '"+c+"' does not precede OID '"+r.varbinds[c].oid+"' in response at position '"+c+"'",R.EOutOfOrder));c<t?a.push(r.varbinds[c]):a.push([r.varbinds[c]])}for(var u=o.length-t;c<r.varbinds.length;c++){var l=(c-t)%u+t,p=c-u,d=r.varbinds[p].oid;if(G(r.varbinds[c])){if(i&&d!=r.varbinds[c].oid)return void e.responseCb(new B("OID '"+d+"' in response at position '"+p+"' does not match OID '"+r.varbinds[c].oid+"' in response at position '"+c+"'",R.EReqResOidNoMatch))}else if(!s&&!V(d,r.varbinds[c].oid))return void e.responseCb(new B("OID '"+d+"' in response at positiion '"+p+"' does not precede OID '"+r.varbinds[c].oid+"' in response at position '"+c+"'",R.EOutOfOrder));a[l].push(r.varbinds[c])}e.responseCb(null,a)}),o,r,u),this},me.prototype.getNext=function(e,t){for(var n=this.backwardsGetNexts,r=[],i=0;i<e.length;i++){var s={oid:e[i]};r.push(s)}return this.simpleGet(ne,(function(e,t){var r=t.pdu,i=[];if(e.message.pdu.varbinds.length!=r.varbinds.length)e.responseCb(new B("Requested OIDs do not match response OIDs",R.EReqResOidNoMatch));else{for(var s=0;s<e.message.pdu.varbinds.length;s++)if(G(r.varbinds[s]))i.push(r.varbinds[s]);else{if(!n&&!V(e.message.pdu.varbinds[s].oid,r.varbinds[s].oid))return void e.responseCb(new B("OID '"+e.message.pdu.varbinds[s].oid+"' in request at positiion '"+s+"' does not precede OID '"+r.varbinds[s].oid+"' in response at position '"+s+"'",R.OutOfOrder));i.push(r.varbinds[s])}e.responseCb(null,i)}}),r,t),this},me.prototype.inform=function(){var e,t,n=arguments[0],r={};if(arguments.length>=4?(e=arguments[1],r=arguments[2],t=arguments[3]):arguments.length>=3?arguments[1].constructor!=Array?(e=[],r=arguments[1],t=arguments[2]):(e=arguments[1],t=arguments[2]):(e=[],t=arguments[1]),0!=this.version){"string"!=typeof n&&(n="1.3.6.1.6.3.1.1.5."+(n+1));for(var i=[{oid:"1.3.6.1.2.1.1.3.0",type:b.TimeTicks,value:r.upTime||Math.floor(100*process.uptime())},{oid:"1.3.6.1.6.3.1.1.4.1.0",type:b.OID,value:n}],s=0;s<e.length;s++){var o={oid:e[s].oid,type:e[s].type,value:e[s].value};i.push(o)}return r.port=this.trapPort,this.simpleGet(ie,(function(e,t){var n=t.pdu,r=[];if(e.message.pdu.varbinds.length!=n.varbinds.length)e.responseCb(new B("Inform OIDs do not match response OIDs",R.EReqResOidNoMatch));else{for(var i=0;i<e.message.pdu.varbinds.length;i++){if(e.message.pdu.varbinds[i].oid!=n.varbinds[i].oid)return void e.responseCb(new B("OID '"+e.message.pdu.varbinds[i].oid+"' in inform at positiion '"+i+"' does not match OID '"+n.varbinds[i].oid+"' in response at position '"+i+"'",R.EReqResOidNoMatch));r.push(n.varbinds[i])}e.responseCb(null,r)}}),i,t,r),this}t(new U("Inform not allowed for SNMPv1"))},me.prototype.onClose=function(){this.cancelRequests(new Error("Socket forcibly closed")),this.emit("close")},me.prototype.onError=function(e){this.emit(e)},me.prototype.onMsg=function(e){try{var t=fe.createFromBuffer(e)}catch(e){return void this.emit("error",e)}var n=this.unregisterRequest(t.getReqId());if(n&&t.processIncomingSecurity(this.user,n.responseCb))if(t.version!=n.message.version)n.responseCb(new B("Version in request '"+n.message.version+"' does not match version in response '"+t.version+"'",R.EVersionNoMatch));else if(t.community!=n.message.community)n.responseCb(new B("Community '"+n.message.community+"' in request does not match community '"+t.community+"' in response",R.ECommunityNoMatch));else if(t.pdu.type==v.Report)if(this.msgSecurityParameters={msgAuthoritativeEngineID:t.msgSecurityParameters.msgAuthoritativeEngineID,msgAuthoritativeEngineBoots:t.msgSecurityParameters.msgAuthoritativeEngineBoots,msgAuthoritativeEngineTime:t.msgSecurityParameters.msgAuthoritativeEngineTime},this.proxy)this.msgSecurityParameters.msgUserName=this.proxy.user.name,this.msgSecurityParameters.msgAuthenticationParameters="",this.msgSecurityParameters.msgPrivacyParameters="";else{if(!n.originalPdu||!n.allowReport)return Array.isArray(t.pdu.varbinds)&&t.pdu.varbinds[0]&&0===t.pdu.varbinds[0].oid.indexOf(T)?void this.userSecurityModelError(n,t.pdu.varbinds[0].oid):void n.responseCb(new B("Unexpected Report PDU",R.EUnexpectedReport));n.originalPdu.contextName=this.context;var r=!t.msgSecurityParameters.msgAuthoritativeEngineBoots&&!t.msgSecurityParameters.msgAuthoritativeEngineTime;this.sendV3Req(n.originalPdu,n.feedCb,n.responseCb,n.options,n.port,r)}else this.proxy?this.onProxyResponse(n,t):t.pdu.type==v.GetResponse?n.onResponse(n,t):n.responseCb(new B("Unknown PDU type '"+t.pdu.type+"' in response",R.EUnknownPduType))},me.prototype.onSimpleGetResponse=function(e,t){var n=t.pdu;if(n.errorStatus>0){var r=_[n.errorStatus]||_.GeneralError,i=_[r]||_[_.GeneralError];if(n.errorIndex<=0||n.errorIndex>n.varbinds.length)e.responseCb(new F(r,i));else{var s=new F(r+": "+n.varbinds[n.errorIndex-1].oid,i);e.responseCb(s)}}else e.feedCb(e,t)},me.prototype.registerRequest=function(e){this.reqs[e.getId()]||(this.reqs[e.getId()]=e,this.reqCount<=0&&this.dgram.ref(),this.reqCount++);var t=this;e.timer=setTimeout((function(){e.retries-- >0?t.send(e):(t.unregisterRequest(e.getId()),e.responseCb(new L("Request timed out")))}),e.timeout),e.backoff&&e.backoff>=1&&(e.timeout*=e.backoff)},me.prototype.send=function(e,t){try{var n=this,r=e.message.toBuffer();this.dgram.send(r,0,r.length,e.port,this.target,(function(r,i){r?e.responseCb(r):t?e.responseCb(null):n.registerRequest(e)}))}catch(t){e.responseCb(t)}return this},me.prototype.set=function(e,t){for(var n=this.reportOidMismatchErrors,r=[],i=0;i<e.length;i++){var s={oid:e[i].oid,type:e[i].type,value:e[i].value};r.push(s)}return this.simpleGet(se,(function(e,t){var r=t.pdu,i=[];if(e.message.pdu.varbinds.length!=r.varbinds.length)e.responseCb(new B("Requested OIDs do not match response OIDs",R.EReqResOidNoMatch));else{for(var s=0;s<e.message.pdu.varbinds.length;s++){if(n&&e.message.pdu.varbinds[s].oid!=r.varbinds[s].oid)return void e.responseCb(new B("OID '"+e.message.pdu.varbinds[s].oid+"' in request at position '"+s+"' does not match OID '"+r.varbinds[s].oid+"' in response at position '"+s+"'",R.EReqResOidNoMatch));i.push(r.varbinds[s])}e.responseCb(null,i)}}),r,t),this},me.prototype.simpleGet=function(e,t,n,r,i){var s=ye(this.idBitsSize);i=Object.assign({},i,{context:this.context});var o,a,c=ee.createFromVariables(e,s,n,i);3==this.version?this.msgSecurityParameters?this.sendV3Req(c,t,r,i,this.port,!0):this.sendV3Discovery(c,t,r,i):(o=fe.createCommunity(this.version,this.community,c),a=new ge(this,o,t,r,i),this.send(a))},me.prototype.subtree=function(){var e,t,n,r=arguments[0];arguments.length<4?(e=20,t=arguments[1],n=arguments[2]):(e=arguments[1],t=arguments[2],n=arguments[3]);var i={feedCb:t,doneCb:n,maxRepetitions:e,baseOid:r};return this.walk(r,e,_e.bind(this,i),n),this},me.prototype.tableColumns=function(){var e,t,n=arguments[0];arguments.length<4?(t=arguments[2],e=20):(e=arguments[2],t=arguments[3]);var r={responseCb:t,maxRepetitions:e,baseOid:n,rowOid:n+".1.",columns:arguments[1].slice(0),table:{}};if(r.columns.length>0){var i=r.columns.pop();this.subtree(r.rowOid+i,e,ve.bind(this,r),be.bind(this,r))}return this},me.prototype.table=function(){var e,t,n=arguments[0];arguments.length<3?(t=arguments[1],e=20):(e=arguments[1],t=arguments[2]);var r={responseCb:t,maxRepetitions:e,baseOid:n,rowOid:n+".1.",table:{}};return this.subtree(n,e,Se.bind(this,r),Ee.bind(this,r)),this},me.prototype.trap=function(){var e,t,n,r,i=arguments[0],s={};arguments.length>=4?(t=arguments[1],"string"==typeof arguments[2]?s.agentAddr=arguments[2]:arguments[2].constructor!=Array&&(s=arguments[2]),n=arguments[3]):arguments.length>=3?("string"==typeof arguments[1]?(t=[],s.agentAddr=arguments[1]):arguments[1].constructor!=Array?(t=[],s=arguments[1]):(t=arguments[1],s.agentAddr=null),n=arguments[2]):(t=[],n=arguments[1]);for(var o,a=[],c=0;c<t.length;c++){var u={oid:t[c].oid,type:t[c].type,value:t[c].value};a.push(u)}var l=ye(this.idBitsSize);if(1==this.version||3==this.version?("string"!=typeof i&&(i="1.3.6.1.6.3.1.1.5."+(i+1)),a.unshift({oid:"1.3.6.1.2.1.1.3.0",type:b.TimeTicks,value:s.upTime||Math.floor(100*process.uptime())},{oid:"1.3.6.1.6.3.1.1.4.1.0",type:b.OID,value:i}),o=ae.createFromVariables(l,a,s)):o=oe.createFromVariables(i,a,s),3==this.version){var p={msgAuthoritativeEngineID:this.engine.engineID,msgAuthoritativeEngineBoots:0,msgAuthoritativeEngineTime:0};r=fe.createRequestV3(this.user,p,o)}else r=fe.createCommunity(this.version,this.community,o);return e={id:l,message:r,responseCb:n,port:this.trapPort},this.send(e,!0),this},me.prototype.unregisterRequest=function(e){var t=this.reqs[e];return t?(delete this.reqs[e],clearTimeout(t.timer),delete t.timer,this.reqCount--,this.reqCount<=0&&this.dgram.unref(),t):null},me.prototype.walk=function(){var e,t,n,r=arguments[0];arguments.length<4?(e=20,t=arguments[1],n=arguments[2]):(e=arguments[1],t=arguments[2],n=arguments[3]);var i={maxRepetitions:e,feedCb:t,doneCb:n};return 1==this.version||3==this.version?this.getBulk([r],0,e,we.bind(this,i)):this.getNext([r],we.bind(this,i)),this},me.prototype.sendV3Req=function(e,t,n,r,i,s){var o=fe.createRequestV3(this.user,this.msgSecurityParameters,e),a=new ge(this,o,t,n,r||{});a.port=i,a.originalPdu=e,a.allowReport=s,this.send(a)},me.prototype.sendV3Discovery=function(e,t,n,r){var i,s=(i=this.context,re.createFromVariables(ye(),[],{context:i})),o=fe.createDiscoveryV3(s),a=new ge(this,o,t,n,r);a.originalPdu=e,a.allowReport=!0,this.send(a)},me.prototype.userSecurityModelError=function(e,t){var n=t.replace(T+".","").replace(/\.0$/,""),r=O[n]||"Unexpected Report PDU";e.responseCb(new B(r,R.EAuthFailure))},me.prototype.onProxyResponse=function(e,t){3==t.version?(t.pdu.contextName=this.proxy.context,t.user=e.proxiedUser,t.setAuthentication(!(e.proxiedUser.level==S.noAuthNoPriv)),t.setPrivacy(e.proxiedUser.level==S.authPriv),t.msgSecurityParameters={msgAuthoritativeEngineID:e.proxiedEngine.engineID,msgAuthoritativeEngineBoots:e.proxiedEngine.engineBoots,msgAuthoritativeEngineTime:e.proxiedEngine.engineTime,msgUserName:e.proxiedUser.name,msgAuthenticationParameters:"",msgPrivacyParameters:""},t.buffer=null,t.pdu.contextEngineID=t.msgSecurityParameters.msgAuthoritativeEngineID,t.pdu.contextName=this.proxy.context,t.pdu.id=e.proxiedPduId,this.proxy.listener.send(t,e.proxiedRinfo)):this.callback(new F("Only SNMP version 3 contexts are supported"))},me.create=function(e,t,n){var r=n&&n.version?n.version:0;if(0!=r&&1!=r)throw new B("SNMP community session requested but version '"+n.version+"' specified in options not valid",R.EVersionNoMatch);return n||(n={}),n.version=r,new me(e,t,n)},me.createV3=function(e,t,n){if(n&&n.version&&3!=n.version)throw new B("SNMPv3 session requested but version '"+n.version+"' specified in options",R.EVersionNoMatch);return n||(n={}),n.version=3,new me(e,t,n)};var Ie=function(e,t,n){e?e instanceof Buffer?this.engineID=e:(e=e.replace("0x",""),this.engineID=Buffer.from((e.toString().length%2==1?"0":"")+e.toString(),"hex")):this.generateEngineID(),this.engineBoots=0,this.engineTime=10};Ie.prototype.generateEngineID=function(){this.engineID=Buffer.alloc(17),this.engineID.fill("8000B98380","hex",0,5),this.engineID.fill(u.randomBytes(12),5,17,"hex")};var Te=function(e,t){this.receiver=t,this.callback=t.onMsg,this.family=e.transport||"udp4",this.port=e.port||161,this.address=e.address,this.disableAuthorization=e.disableAuthorization||!1};Te.prototype.startListening=function(){var e=this;this.dgram=s.createSocket(this.family),this.dgram.on("error",e.receiver.callback),this.dgram.bind(this.port,this.address),this.dgram.on("message",e.callback.bind(e.receiver))},Te.prototype.send=function(e,t){var n=e.toBuffer();this.dgram.send(n,0,n.length,t.port,t.address,(function(e,t){e&&console.error("Error sending: "+e.message)}))},Te.formatCallbackData=function(e,t){return e.contextEngineID&&(e.contextEngineID=e.contextEngineID.toString("hex")),delete e.nonRepeaters,delete e.maxRepetitions,{pdu:e,rinfo:t}},Te.processIncoming=function(e,t,n){var r=fe.createFromBuffer(e);if(3==r.version){if(r.user=t.users.filter((e=>e.name==r.msgSecurityParameters.msgUserName))[0],r.disableAuthentication=t.disableAuthorization,!r.user){if(""!=r.msgSecurityParameters.msgUserName&&!t.disableAuthorization)return void n(new F("Local user not found for message with user "+r.msgSecurityParameters.msgUserName));if(r.hasAuthentication())return void n(new F("Local user not found and message requires authentication with user "+r.msgSecurityParameters.msgUserName));r.user={name:"",level:S.noAuthNoPriv}}if((r.user.level==S.authNoPriv||r.user.level==S.authPriv)&&!r.hasAuthentication())return void n(new F("Local user "+r.msgSecurityParameters.msgUserName+" requires authentication but message does not provide it"));if(r.user.level==S.authPriv&&!r.hasPrivacy())return void n(new F("Local user "+r.msgSecurityParameters.msgUserName+" requires privacy but message does not provide it"));if(!r.processIncomingSecurity(r.user,n))return}else if(!t.communities.filter((e=>e==r.community))[0]&&!t.disableAuthorization)return void n(new F("Local community not found for message with community "+r.community));return r},Te.prototype.close=function(){this.dgram&&this.dgram.close()};var Oe=function(e){this.communities=[],this.users=[],this.disableAuthorization=e.disableAuthorization,this.accessControlModelType=e.accessControlModelType||D.None,this.accessControlModelType==D.None?this.accessControlModel=null:this.accessControlModelType==D.Simple&&(this.accessControlModel=new Ce)};Oe.prototype.addCommunity=function(e){this.getCommunity(e)||(this.communities.push(e),this.accessControlModelType==D.Simple&&this.accessControlModel.setCommunityAccess(e,A.ReadOnly))},Oe.prototype.getCommunity=function(e){return this.communities.filter((t=>t==e))[0]||null},Oe.prototype.getCommunities=function(){return this.communities},Oe.prototype.deleteCommunity=function(e){var t=this.communities.indexOf(e);t>-1&&this.communities.splice(t,1)},Oe.prototype.addUser=function(e){this.getUser(e.name)&&this.deleteUser(e.name),this.users.push(e),this.accessControlModelType==D.Simple&&this.accessControlModel.setUserAccess(e.name,A.ReadOnly)},Oe.prototype.getUser=function(e){return this.users.filter((t=>t.name==e))[0]||null},Oe.prototype.getUsers=function(){return this.users},Oe.prototype.deleteUser=function(e){var t=this.users.findIndex((t=>t.name==e));t>-1&&this.users.splice(t,1)},Oe.prototype.getAccessControlModelType=function(){return this.accessControlModelType},Oe.prototype.getAccessControlModel=function(){return this.accessControlModel},Oe.prototype.isAccessAllowed=function(e,t,n){return!this.accessControlModel||this.accessControlModel.isAccessAllowed(e,t,n)};var Ce=function(){this.communitiesAccess=[],this.usersAccess=[]};Ce.prototype.getCommunityAccess=function(e){return this.communitiesAccess.find((t=>t.community==e))},Ce.prototype.getCommunityAccessLevel=function(e){var t=this.getCommunityAccess(e);return t?t.level:A.None},Ce.prototype.getCommunitiesAccess=function(){return this.communitiesAccess},Ce.prototype.setCommunityAccess=function(e,t){let n=this.getCommunityAccess(e);n?n.level=t:(this.communitiesAccess.push({community:e,level:t}),this.communitiesAccess.sort(((e,t)=>e.community>t.community?1:-1)))},Ce.prototype.removeCommunityAccess=function(e){this.communitiesAccess.splice(this.communitiesAccess.findIndex((t=>t.community==e)),1)},Ce.prototype.getUserAccess=function(e){return this.usersAccess.find((t=>t.userName==e))},Ce.prototype.getUserAccessLevel=function(e){var t=this.getUserAccess(e);return t?t.level:A.None},Ce.prototype.getUsersAccess=function(){return this.usersAccess},Ce.prototype.setUserAccess=function(e,t){let n=this.getUserAccess(e);n?n.level=t:(this.usersAccess.push({userName:e,level:t}),this.usersAccess.sort(((e,t)=>e.userName>t.userName?1:-1)))},Ce.prototype.removeUserAccess=function(e){this.usersAccess.splice(this.usersAccess.findIndex((t=>t.userName==e)),1)},Ce.prototype.isAccessAllowed=function(e,t,n){var r,i;switch(e){case 0:case 1:r=this.getCommunityAccessLevel(t);break;case 3:r=this.getUserAccessLevel(t)}switch(n){case v.SetRequest:i=A.ReadWrite;break;case v.GetRequest:case v.GetNextRequest:case v.GetBulkRequest:i=A.ReadOnly;break;default:i=A.None}switch(i){case A.ReadWrite:return r==A.ReadWrite;case A.ReadOnly:return r==A.ReadWrite||r==A.ReadOnly;case A.None:return!0;default:return!1}};var Ne=function(e,t){p=e.debug,this.listener=new Te(e,this),this.authorizer=new Oe(e),this.engine=new Ie(e.engineID),this.engineBoots=0,this.engineTime=10,this.disableAuthorization=!1,this.callback=t,this.family=e.transport||"udp4",this.port=e.port||162,e.port=this.port,this.disableAuthorization=e.disableAuthorization||!1,this.includeAuthentication=e.includeAuthentication||!1,this.context=e&&e.context?e.context:"",this.listener=new Te(e,this)};Ne.prototype.getAuthorizer=function(){return this.authorizer},Ne.prototype.onMsg=function(e,t){let n;try{n=Te.processIncoming(e,this.authorizer,this.callback)}catch(n){return void this.callback(new M("Failure to process incoming message",n,t,e))}if(n)if(n.pdu.type!=v.GetRequest)n.pdu.type==v.Trap||n.pdu.type==v.TrapV2?this.callback(null,this.formatCallbackData(n,t)):n.pdu.type==v.InformRequest?(n.pdu.type=v.GetResponse,n.buffer=null,n.setReportable(!1),this.listener.send(n,t),n.pdu.type=v.InformRequest,this.callback(null,this.formatCallbackData(n,t))):this.callback(new U("Unexpected PDU type "+n.pdu.type+" ("+v[n.pdu.type]+")"));else{if(3!=n.version)return void this.callback(new U("Only SNMPv3 discovery GetRequests are supported"));if(n.hasAuthentication())return void this.callback(new U("Only discovery (noAuthNoPriv) GetRequests are supported but this message has authentication"));if(!n.isReportable())return void this.callback(new U("Only discovery GetRequests are supported and this message does not have the reportable flag set"));let e=n.createReportResponseMessage(this.engine,this.context);this.listener.send(e,t)}},Ne.prototype.formatCallbackData=function(e,t){e.pdu.contextEngineID&&(e.pdu.contextEngineID=e.pdu.contextEngineID.toString("hex")),delete e.pdu.nonRepeaters,delete e.pdu.maxRepetitions;const n={pdu:e.pdu,rinfo:t};return this.includeAuthentication&&(e.community?n.pdu.community=e.community:e.user&&(n.pdu.user=e.user.name)),n},Ne.prototype.close=function(){this.listener.close()},Ne.create=function(e,t){var n=new Ne(e,t);return n.listener.startListening(),n};var De=function(){this.parser=l()};De.prototype.getSyntaxTypes=function(){var e={};for(var t of(Object.assign(e,b),Object.values(this.parser.Modules)))for(var n of Object.values(t))"TEXTUAL-CONVENTION"==n.MACRO&&n.SYNTAX&&!e[n.ObjectName]&&("object"==typeof n.SYNTAX?e[n.ObjectName]=n.SYNTAX:e[n.ObjectName]=e[n.SYNTAX]);return e},De.prototype.loadFromFile=function(e){this.parser.Import(e),this.parser.Serialize()},De.prototype.getModule=function(e){return this.parser.Modules[e]},De.prototype.getModules=function(e){var t={};for(var n of Object.keys(this.parser.Modules))(e||-1==De.BASE_MODULES.indexOf(n))&&(t[n]=this.parser.Modules[n]);return t},De.prototype.getModuleNames=function(e){var t=[];for(var n of Object.keys(this.parser.Modules))(e||-1==De.BASE_MODULES.indexOf(n))&&t.push(n);return t},De.prototype.getProvidersForModule=function(e){var t,n,r,i,s,o,a,c=this.parser.Modules[e],u=[],l=[];if(!c)throw new ReferenceError("MIB module "+e+" not loaded");n=this.getSyntaxTypes(),r=Object.values(c);for(var p=0;p<r.length;p++){var d=(t=r[p]).SYNTAX,h=t.ACCESS,f=void 0!==t["MAX-ACCESS"]?t["MAX-ACCESS"]:h?P[h]:"not-accessible",g=t.DEFVAL;if(d)if(d=(o=De.getConstraintsFromSyntax(d,n)).syntax,a=o.constraints,d.startsWith("SEQUENCE OF"))for((i={tableName:t.ObjectName,type:C.Table,tableColumns:[],tableIndex:[1]}).maxAccess=x[f];i||p>=r.length;){if(!(t=r[++p])){l.push(i),i=null,p--;break}if(d=t.SYNTAX,h=t.ACCESS,f=void 0!==t["MAX-ACCESS"]?t["MAX-ACCESS"]:h?P[h]:"not-accessible",g=t.DEFVAL,d=(o=De.getConstraintsFromSyntax(d,n)).syntax,a=o.constraints,"SEQUENCE"==t.MACRO);else if(t["OBJECT IDENTIFIER"])if((s=t["OBJECT IDENTIFIER"].split(" ")[0])==i.tableName){if(i.name=t.ObjectName,i.oid=t.OID,t.INDEX)for(var m of(i.tableIndex=[],t.INDEX))(m=m.trim()).includes(" ")?"IMPLIED"==m.split(" ")[0]?i.tableIndex.push({columnName:m.split(" ")[1],implied:!0}):i.tableIndex.push({columnName:m.split(" ").slice(-1)[0]}):i.tableIndex.push({columnName:m});t.AUGMENTS&&(i.tableAugments=t.AUGMENTS[0].trim(),i.tableIndex=null)}else if(s==i.name){var y={number:parseInt(t["OBJECT IDENTIFIER"].split(" ")[1]),name:t.ObjectName,type:n[d],maxAccess:x[f]};a&&(y.constraints=a),g&&(y.defVal=g),"RowStatus"==d&&"IMPORTS"in c&&Array.isArray(c.IMPORTS["SNMPv2-TC"])&&c.IMPORTS["SNMPv2-TC"].includes("RowStatus")&&(y.rowStatus=!0),i.tableColumns.push(y)}else l.push(i),i=null,p--}else if("OBJECT-TYPE"==t.MACRO){let e=n[d];"object"==typeof e&&(e=n[Object.keys(e)[0]]);var _={name:t.ObjectName,type:C.Scalar,oid:t.OID,scalarType:e,maxAccess:x[f]};g&&(_.defVal=g),a&&(_.constraints=a),u.push(_)}}return u.concat(l)},De.prototype.loadBaseModules=function(){for(var e of De.BASE_MODULES)this.parser.Import(__dirname+"/lib/mibs/"+e+".mib");this.parser.Serialize()},De.getConstraintsFromSyntax=function(e,t){let n;if("object"==typeof t[e]&&(e=t[e]),"object"==typeof e){let t=e[Object.keys(e)[0]];t.ranges?(n={ranges:t.ranges},e=Object.keys(e)[0]):t.sizes?(n={sizes:t.sizes},e=Object.keys(e)[0]):(n={enumeration:e.INTEGER},e="INTEGER")}else n=null;return{constraints:n,syntax:e}},De.create=function(){var e=new De;return e.loadBaseModules(),e},De.BASE_MODULES=["RFC1155-SMI","RFC1158-MIB","RFC-1212","RFC1213-MIB","SNMPv2-SMI","SNMPv2-CONF","SNMPv2-TC","SNMPv2-MIB"];var Ae=function(e,t){this.address=e,this.oid=this.address.join("."),this.parent=t,this.children={}};Ae.prototype.child=function(e){return this.children[e]},Ae.prototype.listChildren=function(e){var t=[];return e=e||0,this.children.forEach((function(n,r){r>=e&&t.push(r)})),t.sort((function(e,t){return e-t})),t},Ae.prototype.findChildImmediatelyBefore=function(e){var t=Object.keys(this.children).sort((function(e,t){return e-t}));if(0===t.length)return null;for(var n=0;n<t.length;n++)if(e<t[n])return 0===n?null:this.children[t[n-1]];return this.children[t[t.length-1]]},Ae.prototype.isDescendant=function(e){return Ae.oidIsDescended(this.address,e)},Ae.prototype.isAncestor=function(e){return Ae.oidIsDescended(e,this.address)},Ae.prototype.getAncestorProvider=function(){return this.provider?this:this.parent?this.parent.getAncestorProvider():null},Ae.prototype.getTableColumnFromInstanceNode=function(){return this.parent&&this.parent.provider?this.address[this.address.length-1]:this.parent?this.parent.getTableColumnFromInstanceNode():null},Ae.prototype.getConstraintsFromProvider=function(){var e=this.getAncestorProvider();if(!e)return null;var t=e.provider;if(t.type==C.Scalar)return t.constraints;if(t.type==C.Table){var n=this.getTableColumnFromInstanceNode();if(!n)return null;var r=t.tableColumns.filter((e=>e.number==n))[0];return r?r.constraints:null}return null},Ae.prototype.setValue=function(e){var t,n,r,i,s=!1,o=this.getConstraintsFromProvider();if(!o)return this.value=e,!0;if(o.enumeration){if(!o.enumeration[e])return!1}else if(o.ranges){for(i of o.ranges)if(n="min"in i?i.min:Number.MIN_SAFE_INTEGER,r="max"in i?i.max:Number.MAX_SAFE_INTEGER,e>=n&&e<=r){s=!0;break}if(!s)return!1}else if(o.sizes){if(void 0===e.length)return!1;for(i of(t=e.length,o.sizes))if(n="min"in i?i.min:Number.MIN_SAFE_INTEGER,r="max"in i?i.max:Number.MAX_SAFE_INTEGER,t>=n&&t<=r){s=!0;break}if(!s)return!1}return this.value=e,!0},Ae.prototype.getInstanceNodeForTableRow=function(){var e=Object.keys(this.children).length;return 0==e?null!=this.value?this:null:1==e?this.children[0].getInstanceNodeForTableRow():e>1?null:void 0},Ae.prototype.getInstanceNodeForTableRowIndex=function(e){var t;if(0==Object.keys(this.children).length)return null!=this.value?this:null;if(0==e.length)return this.getInstanceNodeForTableRow();var n=e[0];return null==n?null:(t=e.slice(1),this.children[n]?this.children[n].getInstanceNodeForTableRowIndex(t):null)},Ae.prototype.getInstanceNodesForColumn=function(){for(var e=this,t=this,n=[];t&&(t==e||e.isAncestor(t.address));)(t=t.getNextInstanceNode())&&e.isAncestor(t.address)&&n.push(t);return n},Ae.prototype.getNextInstanceNode=function(){var e,t,n=this;if(null!=this.value)for(n=this;n;){if(e=n.address.slice(-1)[0],!(n=n.parent))return null;var r=(t=Object.keys(n.children).sort(((e,t)=>e-t))).indexOf(e.toString());if(r+1<t.length){n=n.children[t[r+1]];break}}for(;n;){if(null!=n.value)return n;if(t=Object.keys(n.children).sort(((e,t)=>e-t)),!(n=n.children[t[0]]))return null}},Ae.prototype.delete=function(){if(Object.keys(this.children)>0)throw new Error("Cannot delete non-leaf MIB node");var e=this.address.slice(-1)[0];delete this.parent.children[e],this.parent=null},Ae.prototype.pruneUpwards=function(){if(this.parent&&0==Object.keys(this.children).length){var e=this.address.splice(-1)[0].toString();delete this.parent.children[e],this.parent.pruneUpwards(),this.parent=null}},Ae.prototype.dump=function(e){var t;for(var n of(e.leavesOnly&&!e.showProviders||!this.provider?e.leavesOnly&&0!=Object.keys(this.children).length||(null!=this.value?(t=" = ",t+=e.showTypes?b[this.valueType]+": ":"",t+=e.showValues?this.value:""):t="",console.log(this.oid+t)):console.log(this.oid+" ["+C[this.provider.type]+": "+this.provider.name+"]"),Object.keys(this.children).sort(((e,t)=>e-t))))this.children[n].dump(e)},Ae.oidIsDescended=function(e,t){var n=xe.convertOidToAddress(t),r=xe.convertOidToAddress(e),i=!0;return!(r.length<=n.length)&&(n.forEach((function(e,t){r[t]!==n[t]&&(i=!1)})),i)};var xe=function(){var e;this.root=new Ae([],null),this.providerNodes={},e=this.providersByOid={},this.providers=new Proxy({},{set:function(t,n,r){t[n]=r,e[r.oid]=r},deleteProperty:function(t,n){delete e[t[n].oid],delete t[n]}})};xe.prototype.addNodesForOid=function(e){var t=xe.convertOidToAddress(e);return this.addNodesForAddress(t)},xe.prototype.addNodesForAddress=function(e){var t,n;for(t=this.root,n=0;n<e.length;n++)t.children.hasOwnProperty(e[n])||(t.children[e[n]]=new Ae(e.slice(0,n+1),t)),t=t.children[e[n]];return t},xe.prototype.lookup=function(e){var t;return t=xe.convertOidToAddress(e),this.lookupAddress(t)},xe.prototype.lookupAddress=function(e){var t,n;for(n=this.root,t=0;t<e.length;t++){if(!n.children.hasOwnProperty(e[t]))return null;n=n.children[e[t]]}return n},xe.prototype.getTreeNode=function(e){var t,n=xe.convertOidToAddress(e);if(t=this.lookupAddress(n))return t;for(;n.length>0;){var r=n.pop(),i=this.lookupAddress(n);if(i){if(!(t=i.findChildImmediatelyBefore(r)))return i;for(;;){var s=Object.keys(t.children).sort(((e,t)=>e-t));if(0==s.length)return t;t=t.children[s[s.length-1]]}}}return this.root},xe.prototype.getProviderNodeForInstance=function(e){return e.provider?null:e.getAncestorProvider()},xe.prototype.addProviderToNode=function(e){var t=this.addNodesForOid(e.oid);return t.provider=e,e.type==C.Table&&(e.tableIndex||(e.tableIndex=[1])),this.providerNodes[e.name]=t,t},xe.prototype.getColumnFromProvider=function(e,t){var n=null;return t.columnName?n=e.tableColumns.filter((e=>e.name==t.columnName))[0]:void 0!==t.columnNumber&&null!==t.columnNumber&&(n=e.tableColumns.filter((e=>e.number==t.columnNumber))[0]),n},xe.prototype.populateIndexEntryFromColumn=function(e,t,n){var r=null;if(!t.columnName&&!t.columnNumber)throw new Error("Index entry "+n+": does not have either a columnName or columnNumber");if(t.foreign)r=this.getColumnFromProvider(this.providers[t.foreign],t);else if(!(r=this.getColumnFromProvider(e,t)))for(var i of Object.values(this.providers).filter((e=>e.type==C.Table)))if(r=this.getColumnFromProvider(i,t)){t.foreign=i.name;break}if(!r)throw new Error("Could not find column for index entry with column "+t.columnName);if(t.columnName&&t.columnName!=r.name)throw new Error("Index entry "+n+": Calculated column name "+r.name+"does not match supplied column name "+t.columnName);if(t.columnNumber&&t.columnNumber!=r.number)throw new Error("Index entry "+n+": Calculated column number "+r.number+" does not match supplied column number "+t.columnNumber);t.columnName||(t.columnName=r.name),t.columnNumber||(t.columnNumber=r.number),t.type=r.type},xe.prototype.registerProvider=function(e){if(this.providers[e.name]=e,e.type==C.Table)if(e.tableAugments){if(e.tableAugments==e.name)throw new Error("Table "+e.name+" cannot augment itself");var t=this.providers[e.tableAugments];if(!t)throw new Error("Cannot find base table "+e.tableAugments+" to augment");e.tableIndex=JSON.parse(JSON.stringify(t.tableIndex)),e.tableIndex.map((e=>e.foreign=t.name))}else{e.tableIndex||(e.tableIndex=[1]);for(var n=0;n<e.tableIndex.length;n++){var r=e.tableIndex[n];"number"==typeof r?e.tableIndex[n]={columnNumber:r}:"string"==typeof r&&(e.tableIndex[n]={columnName:r}),r=e.tableIndex[n],this.populateIndexEntryFromColumn(e,r,n)}}},xe.prototype.setScalarDefaultValue=function(e,t){this.getProvider(e).defVal=t},xe.prototype.setTableRowDefaultValues=function(e,t){let n=this.getProvider(e).tableColumns;if(t.length!=n.length)throw new Error(`Incorrect values length: got ${t.length}; expected ${n.length}`);n.forEach(((e,n)=>{void 0!==t[n]&&(e.defVal=t[n])}))},xe.prototype.setScalarRanges=function(e,t){this.getProvider(e).constraints={ranges:t}},xe.prototype.setTableColumnRanges=function(e,t,n){this.getProvider(e).tableColumns[t].constraints={ranges:n}},xe.prototype.setScalarSizes=function(e,t){this.getProvider(e).constraints={sizes:t}},xe.prototype.setTableColumnSizes=function(e,t,n){this.getProvider(e).tableColumns[t].constraints={sizes:n}},xe.prototype.registerProviders=function(e){for(var t of e)this.registerProvider(t)},xe.prototype.unregisterProvider=function(e){var t=this.providerNodes[e];if(t){var n=t.parent;t.delete(),n.pruneUpwards(),delete this.providerNodes[e]}delete this.providers[e]},xe.prototype.getProvider=function(e){return this.providers[e]},xe.prototype.getProviders=function(){return this.providers},xe.prototype.dumpProviders=function(){var e;for(var t of Object.values(this.providers))e=t.type==C.Scalar?b[t.scalarType]:"Columns = "+t.tableColumns.length,console.log(C[t.type]+": "+t.name+" ("+t.oid+"): "+e)},xe.prototype.getScalarValue=function(e){var t=this.providerNodes[e];if(!t||!t.provider||t.provider.type!=C.Scalar)throw new ReferenceError("Failed to get node for registered MIB provider "+e);var n=t.address.concat([0]);if(!this.lookup(n))throw new Error("Failed created instance node for registered MIB provider "+e);return this.lookup(n).value},xe.prototype.setScalarValue=function(e,t){var n,r,i;if(!this.providers[e])throw new ReferenceError("Provider "+e+" not registered with this MIB");if((n=this.providerNodes[e])||(n=this.addProviderToNode(this.providers[e])),i=n.provider,!n||!i||i.type!=C.Scalar)throw new ReferenceError("Could not find MIB node for registered provider "+e);var s=n.address.concat([0]);(r=this.lookup(s))||(this.addNodesForAddress(s),(r=this.lookup(s)).valueType=i.scalarType),r.value=t},xe.prototype.getProviderNodeForTable=function(e){var t,n;if(!(t=this.providerNodes[e]))throw new ReferenceError("No MIB provider registered for "+e);if(n=t.provider,!t)throw new ReferenceError("No MIB provider definition for registered provider "+e);if(n.type!=C.Table)throw new TypeError("Registered MIB provider "+e+" is not of the correct type (is type "+C[n.type]+")");return t},xe.prototype.getOidAddressFromValue=function(e,t){var n;switch(t.type){case b.OID:n=e.split(".");break;case b.OctetString:n=e instanceof Buffer?Array.prototype.slice.call(e):[...e].map((e=>e.charCodeAt()));break;case b.IpAddress:return e.split(".");default:return[e]}return t.implied||t.length||n.unshift(n.length),n},xe.prototype.getTableRowInstanceFromRow=function(e,t){var n,r,i,s=[];n=e.tableIndex.filter((e=>e.foreign));for(var o=0;o<n.length;o++)i=this.getOidAddressFromValue(t[o],n[o]),s=s.concat(i);for(var a of e.tableIndex.filter((e=>!e.foreign)))r=e.tableColumns.findIndex((e=>e.number==a.columnNumber)),i=this.getOidAddressFromValue(t[n.length+r],a),s=s.concat(i);return s},xe.getRowIndexFromOid=function(e,t){var n,r=e.split("."),i=0,s=[];for(var o of t)switch(o.type){case b.OID:i=o.implied?r.length:r.shift(),n=r.splice(0,i),s.push(n.join("."));break;case b.IpAddress:i=4,n=r.splice(0,i),s.push(n.join("."));break;case b.OctetString:i=o.implied?r.length:r.shift(),n=(n=r.splice(0,i)).map((e=>String.fromCharCode(e))).join(""),s.push(n);break;default:s.push(parseInt(r.shift()))}return s},xe.prototype.getTableRowInstanceFromRowIndex=function(e,t){for(var n,r,i=[],s=0;s<e.tableIndex.length;s++)n=e.tableIndex[s],r=t[s],i=i.concat(this.getOidAddressFromValue(r,n));return i},xe.prototype.addTableRow=function(e,t){var n,r,i,s,o,a;this.providers[e]&&!this.providerNodes[e]&&this.addProviderToNode(this.providers[e]),a=(r=(n=this.getProviderNodeForTable(e)).provider).tableIndex.filter((e=>e.foreign)).length,i=this.getTableRowInstanceFromRow(r,t);for(var c=0;c<r.tableColumns.length;c++){var u=r.tableColumns[c];(!r.tableIndex.some((e=>e.columnNumber==u.number))||u.maxAccess!==x["not-accessible"]&&u.maxAccess!==x["accessible-for-notify"])&&(s=n.address.concat(u.number).concat(i),this.addNodesForAddress(s),(o=this.lookup(s)).valueType=u.type,o.value=t[a+c])}},xe.prototype.getTableColumnDefinitions=function(e){return this.getProviderNodeForTable(e).provider.tableColumns},xe.prototype.getTableColumnCells=function(e,t,n){var r=this.providers[e].tableIndex,i=this.getProviderNodeForTable(e).children[t];if(!i)return null;var s,o=i.getInstanceNodesForColumn(),a=[],c=[];for(var u of o)s=xe.getSubOidFromBaseOid(u.oid,i.oid),a.push(xe.getRowIndexFromOid(s,r)),c.push(u.value);return n?[a,c]:c},xe.prototype.getTableRowCells=function(e,t){var n,r,i,s,o,a=[],c=!1;for(var u of(n=this.providers[e],r=this.getProviderNodeForTable(e),s=this.getTableRowInstanceFromRowIndex(n,t),Object.keys(r.children)))(i=r.children[u])&&(o=i.getInstanceNodeForTableRowIndex(s))?(a.push(o.value),c=!0):a.push(null);return c?a:null},xe.prototype.getTableCells=function(e,t,n){var r,i,s=[];for(var o of(r=this.getProviderNodeForTable(e),Object.keys(r.children)))i=this.getTableColumnCells(e,o,n),n?(s.push(...i),n=!1):s.push(i);return t?Object.keys(s[0]).map((function(e){return s.map((function(t){return t[e]}))})):s},xe.prototype.getTableSingleCell=function(e,t,n){var r,i,s;return r=this.providers[e],i=this.getProviderNodeForTable(e),s=this.getTableRowInstanceFromRowIndex(r,n),i.children[t].getInstanceNodeForTableRowIndex(s).value},xe.prototype.setTableSingleCell=function(e,t,n,r){var i,s,o;i=this.providers[e],s=this.getProviderNodeForTable(e),o=this.getTableRowInstanceFromRowIndex(i,n),s.children[t].getInstanceNodeForTableRowIndex(o).value=r},xe.prototype.deleteTableRow=function(e,t){var n,r,i,s,o;for(var a of(n=this.providers[e],r=this.getProviderNodeForTable(e),i=this.getTableRowInstanceFromRowIndex(n,t),Object.keys(r.children))){if(!(s=r.children[a].getInstanceNodeForTableRowIndex(i)))throw new ReferenceError("Cannot find row for index "+t+" at registered provider "+e);o=s.parent,s.delete(),o.pruneUpwards()}return 0===Object.keys(this.providerNodes[e].children).length&&delete this.providerNodes[e],!0},xe.prototype.dump=function(e){e||(e={});var t={leavesOnly:void 0===e.leavesOnly||e.leavesOnly,showProviders:void 0===e.showProviders||e.showProviders,showValues:void 0===e.showValues||e.showValues,showTypes:void 0===e.showTypes||e.showTypes};this.root.dump(t)},xe.convertOidToAddress=function(e){var t,n,r;if("object"==typeof e&&c.isArray(e))t=e;else{if("string"!=typeof e)throw new TypeError("oid (string or array) is required");t=e.split(".")}if(t.length<1)throw new RangeError("object identifier is too short");for(n=[],r=0;r<t.length;r++){var i;if(""!==t[r]){if(!0===t[r]||!1===t[r])throw new TypeError("object identifier component "+t[r]+" is malformed");if(i=Number(t[r]),isNaN(i))throw new TypeError("object identifier component "+t[r]+" is malformed");if(i%1!=0)throw new TypeError("object identifier component "+t[r]+" is not an integer");if(0===r&&i>2)throw new RangeError("object identifier does not begin with 0, 1, or 2");if(1===r&&i>39)throw new RangeError("object identifier second component "+i+" exceeds encoding limit of 39");if(i<0)throw new RangeError("object identifier component "+t[r]+" is negative");if(i>h)throw new RangeError("object identifier component "+t[r]+" is too large");n.push(i)}}return n},xe.getSubOidFromBaseOid=function(e,t){return e.substring(t.length+1)},xe.create=function(){return new xe};var Pe=function(e){this.operation=e.operation,this.address=xe.convertOidToAddress(e.oid),this.oid=this.address.join("."),this.providerNode=e.providerNode,this.instanceNode=e.instanceNode};Pe.prototype.isScalar=function(){return this.providerNode&&this.providerNode.provider&&this.providerNode.provider.type==C.Scalar},Pe.prototype.isTabular=function(){return this.providerNode&&this.providerNode.provider&&this.providerNode.provider.type==C.Table};var ke=function(e,t,n){p=e.debug,this.listener=new Te(e,this),this.engine=new Ie(e.engineID),this.authorizer=new Oe(e),this.callback=t||function(){},this.mib=n||new xe,this.context="",this.forwarder=new Re(this.listener,this.callback)};ke.prototype.getMib=function(){return this.mib},ke.prototype.setMib=function(e){this.mib=e},ke.prototype.getAuthorizer=function(){return this.authorizer},ke.prototype.registerProvider=function(e){this.mib.registerProvider(e)},ke.prototype.registerProviders=function(e){this.mib.registerProviders(e)},ke.prototype.unregisterProvider=function(e){this.mib.unregisterProvider(e)},ke.prototype.getProvider=function(e){return this.mib.getProvider(e)},ke.prototype.getProviders=function(){return this.mib.getProviders()},ke.prototype.scalarReadCreateHandlerInternal=function(e){let t=e.provider;if(t&&void 0!==t.defVal)return t.defVal},ke.prototype.tableRowStatusHandlerInternal=function(e){let t=e.provider,n=e.action,r=e.row,i=[],s=!1,o=Array.isArray(r)?r.slice(0):[r];return t.tableColumns.forEach((e=>{let r;r=t.tableIndex.filter((t=>e.number===t.columnNumber)),r.length>0?i.push(o.shift()):e.rowStatus?i.push(k[n]):"defVal"in e?i.push(e.defVal):(console.log("No defVal defined for column:",e),s=!0,i.push(void 0))})),s?void 0:i},ke.prototype.onMsg=function(e,t){let n;try{n=Te.processIncoming(e,this.authorizer,this.callback)}catch(n){return void this.callback(new M("Failure to process incoming message",n,t,e))}if(n)if(3!=n.version||n.pdu.type!=v.GetRequest||n.hasAuthoritativeEngineID()||!n.isReportable())n.pdu.contextName&&""!=n.pdu.contextName?this.onProxyRequest(n,t):n.pdu.type==v.GetRequest?this.getRequest(n,t):n.pdu.type==v.SetRequest?this.setRequest(n,t):n.pdu.type==v.GetNextRequest?this.getNextRequest(n,t):n.pdu.type==v.GetBulkRequest?this.getBulkRequest(n,t):this.callback(new U("Unexpected PDU type "+n.pdu.type+" ("+v[n.pdu.type]+")"));else{let e=n.createReportResponseMessage(this.engine,this.context);this.listener.send(e,t)}},ke.prototype.castSetValue=function(e,t){switch(e){case b.Boolean:return!!t;case b.Integer:if("number"!=typeof t&&"string"!=typeof t)throw new Error("Invalid Integer",t);return"number"==typeof t?t:parseInt(t,10);case b.OctetString:if(t instanceof Buffer)return t.toString();if("string"!=typeof t)throw new Error("Invalid OctetString",t);return t;case b.OID:if("string"!=typeof t||!t.match(/[0-9]+\([.][0-9]+\)+/))throw new Error("Invalid OID",t);return t;case b.Counter:case b.Counter64:return 0;case b.IpAddress:var n=t.split(".");if("string"!=typeof t||4!=n.length)throw new Error("Invalid IpAddress",t);return t;default:return t}},ke.prototype.tryCreateInstance=function(e,t){var n,r,i,s,o,a,c,u,l,p=this.mib.providersByOid,d=e.oid;for(a=xe.convertOidToAddress(d).slice(0);a.length>0;a.pop())if(s=a.join("."),u=p[s]){if(u.type===C.Scalar){if(u.maxAccess!=x["read-create"])return;if(null===u.createHandler)return;if(l={provider:u},void 0===(i=(u.createHandler||this.scalarReadCreateHandlerInternal)(l)))return;return i=this.castSetValue(u.scalarType,i),this.mib.setScalarValue(u.name,i),{instanceNode:this.mib.lookup(d),providerType:C.Scalar}}if(o=(s=xe.getSubOidFromBaseOid(d,u.oid)).split("."),r=parseInt(o.shift(),10),n=xe.getRowIndexFromOid(o.join("."),u.tableIndex),c=u.tableColumns.reduce(((e,t)=>t.rowStatus?t.number:e),null),t===v.SetRequest&&"number"==typeof c&&r===c&&(e.value===k.createAndGo||e.value===k.createAndWait)&&null!==u.createHandler){if(l={provider:u,action:k[e.value],row:n},void 0===(i=(u.createHandler||this.tableRowStatusHandlerInternal)(l)))return;if(!Array.isArray(i))throw new Error("createHandler must return an array or undefined; got",i);if(i.length!=u.tableColumns.length)throw new Error("createHandler's returned array must contain a value for for each column");return i=i.map(((e,t)=>this.castSetValue(u.tableColumns[t].type,e))),this.mib.addTableRow(u.name,i),{instanceNode:this.mib.lookup(d),providerType:C.Table,action:k[e.value],rowIndex:n,row:i}}return}},ke.prototype.isAllowed=function(e,t,n){var r,i,s;switch(t.type===C.Scalar?i=t.maxAccess:(r=n.getTableColumnFromInstanceNode(),i=(s=t.tableColumns.find((e=>e.number===r)))&&s.maxAccess||x["not-accessible"]),v[e]){case"SetRequest":return i>=x["read-write"];case"GetRequest":case"GetNextRequest":case"GetBulkRequest":return i>=x["read-only"];default:return!1}},ke.prototype.request=function(e,t){var n=this,r=0,i=e.pdu,s=i.varbinds.length,o=i.getResponsePduForRequest(),a=[],c=[],u=[],l=[],p=3==e.version?e.user.name:e.community;for(let d=0;d<i.varbinds.length;d++){let h,f,g,m=this.mib.lookup(i.varbinds[d].oid);if(m||(u[d]=this.tryCreateInstance(i.varbinds[d],i.type),u[d]&&(m=u[d].instanceNode)),i.varbinds[d].oid.split(".").length<4&&(i.varbinds[d].oid="1.3.6.1"),m){if(h=this.mib.getProviderNodeForInstance(m),h&&void 0!==m.value)if(this.isAllowed(i.type,h.provider,m))if(this.authorizer.getAccessControlModelType()!=D.Simple||this.authorizer.getAccessControlModel().isAccessAllowed(e.version,p,e.pdu.type)){if(i.type===v.SetRequest&&h.provider.type==C.Table&&"number"==typeof(f=h.provider.tableColumns.reduce(((e,t)=>t.rowStatus?t.number:e),null))&&m.getTableColumnFromInstanceNode()===f)switch(g=function(e){e.done({errorStatus:_.InconsistentValue,type:b.Null,value:null})},i.varbinds[d].requestValue=this.castSetValue(i.varbinds[d].type,i.varbinds[d].value),i.varbinds[d].value){case k.active:case k.notInService:case k.destroy:break;case k.createAndGo:m.value===k.createAndGo?i.varbinds[d].value=k.active:(a[d]=new Pe({operation:i.type,oid:i.varbinds[d].oid}),c[d]=g);break;case k.createAndWait:m.value===k.createAndWait?i.varbinds[d].value=k.notInService:(a[d]=new Pe({operation:i.type,oid:i.varbinds[d].oid}),c[d]=g);break;default:a[d]=new Pe({operation:i.type,oid:i.varbinds[d].oid}),c[d]=g}}else a[d]=new Pe({operation:i.type,oid:i.varbinds[d].oid}),c[d]=function(e){e.done({errorStatus:_.NoAccess,type:b.Null,value:null})};else a[d]=new Pe({operation:i.type,oid:i.varbinds[d].oid}),c[d]=function(e){e.done({errorStatus:_.NoAccess,type:b.Null,value:null})};else a[d]=new Pe({operation:i.type,oid:i.varbinds[d].oid}),c[d]=function(e){e.done({errorStatus:_.NoError,type:b.NoSuchInstance,value:null})};i.type!==v.SetRequest||u[d]||(l[d]=m.value),c[d]||(a[d]=new Pe({operation:i.type,providerNode:h,instanceNode:m,oid:i.varbinds[d].oid}),i.type==v.SetRequest&&(a[d].setType=i.varbinds[d].type,a[d].setValue=i.varbinds[d].requestValue||i.varbinds[d].value),c[d]=h.provider.handler)}else a[d]=new Pe({operation:i.type,oid:i.varbinds[d].oid}),c[d]=function(e){e.done({errorStatus:_.NoError,type:b.NoSuchObject,value:null})};!function(c){let p;a[c].done=function(d){let f=null,g=null,y=!1,E=-1;if(p={oid:a[c].oid},d)void 0!==o.errorStatus&&o.errorStatus!=_.NoError||d.errorStatus==_.NoError||(o.errorStatus=d.errorStatus,o.errorIndex=c+1),p.type=d.type||b.Null,p.value=d.value||null,d.errorStatus!=_.NoError&&(p.errorStatus=d.errorStatus);else{let e,t,r=h?h.provider:null,s=r?r.name:null;if(h&&h.provider&&h.provider.type==C.Table&&(E=m.getTableColumnFromInstanceNode(),e=xe.getSubOidFromBaseOid(m.oid,r.oid),t=e.split("."),t.shift(),f=xe.getRowIndexFromOid(t.join("."),r.tableIndex),g=n.mib.getTableRowCells(s,f)),i.type==v.SetRequest){let e=r.type==C.Table?r.tableColumns.reduce(((e,t)=>t.rowStatus?t.number:e),null):null;i.varbinds[c].value===k.destroy&&"number"==typeof e&&E===e?(n.mib.deleteTableRow(s,f),y=!0):a[c].instanceNode.setValue(n.castSetValue(i.varbinds[c].type,i.varbinds[c].value))||(void 0!==o.errorStatus&&o.errorStatus!=_.NoError||(o.errorStatus=_.WrongValue,o.errorIndex=c+1),p.errorStatus=_.WrongValue)}i.type!=v.GetNextRequest&&i.type!=v.GetBulkRequest||i.varbinds[c].type!=b.EndOfMibView?p.type=a[c].instanceNode.valueType:p.type=b.EndOfMibView,p.value=a[c].instanceNode.value}h&&h.provider&&h.provider.name&&(p.providerName=h.provider.name),i.type!=v.GetNextRequest&&i.type!=v.GetNextRequest||(p.previousOid=i.varbinds[c].previousOid),i.type==v.SetRequest&&(void 0!==l[c]&&(p.oldValue=l[c]),p.requestType=i.varbinds[c].type,i.varbinds[c].requestValue?p.requestValue=n.castSetValue(i.varbinds[c].type,i.varbinds[c].requestValue):p.requestValue=n.castSetValue(i.varbinds[c].type,i.varbinds[c].value)),u[c]?p.autoCreated=!0:y&&(p.deleted=!0),h&&h.provider.type==C.Table&&(p.column=E,p.columnPosition=h.provider.tableColumns.findIndex((e=>e.number==E)),p.rowIndex=f,!y&&f&&(g=n.mib.getTableRowCells(h.provider.name,f)),p.row=g),n.setSingleVarbind(o,c,p),++r==s&&n.sendResponse.call(n,t,e,o)}}(d),c[d]?c[d](a[d]):a[d].done()}},ke.prototype.getRequest=function(e,t){this.request(e,t)},ke.prototype.setRequest=function(e,t){this.request(e,t)},ke.prototype.addGetNextVarbind=function(e,t){var n,r;try{n=this.mib.lookup(t)}catch(e){t="1.3.6.1",n=this.mib.lookup(t)}return n||(n=this.mib.getTreeNode(t)),(r=n.getNextInstanceNode())?e.push({previousOid:t,oid:r.oid,type:r.valueType,value:r.value}):e.push({previousOid:t,oid:t,type:b.EndOfMibView,value:null}),r},ke.prototype.getNextRequest=function(e,t){for(var n=e.pdu,r=n.varbinds.length,i=[],s=0;s<r;s++)this.addGetNextVarbind(i,n.varbinds[s].oid);e.pdu.varbinds=i,this.request(e,t)},ke.prototype.getBulkRequest=function(e,t){for(var n,r=e.pdu,i=r.varbinds,s=[],o=[],a=!1,c=0;c<Math.min(r.nonRepeaters,i.length);c++)this.addGetNextVarbind(s,i[c].oid);if(r.nonRepeaters<i.length){for(var u=r.nonRepeaters;u<i.length;u++)o.push(i[u].oid);for(;s.length<r.maxRepetitions&&!a;)for(var l=r.nonRepeaters;l<i.length;l++)s.length<r.maxRepetitions&&(n=this.addGetNextVarbind(s,o[l-r.nonRepeaters]))&&(o[l-r.nonRepeaters]=n.oid,n.type==b.EndOfMibView&&(a=!0))}e.pdu.varbinds=s,this.request(e,t)},ke.prototype.setSingleVarbind=function(e,t,n){e.varbinds[t]=n},ke.prototype.sendResponse=function(e,t,n){var r=t.createResponseForRequest(n);this.listener.send(r,e),this.callback(null,Te.formatCallbackData(r.pdu,e))},ke.prototype.onProxyRequest=function(e,t){var n,r,i,s=e.pdu.contextName;if(3==e.version)if(n=this.forwarder.getProxy(s))if(n.session.msgSecurityParameters){e.msgSecurityParameters=n.session.msgSecurityParameters,e.setAuthentication(!(n.user.level==S.noAuthNoPriv)),e.setPrivacy(n.user.level==S.authPriv),i=e.user,e.user=n.user,e.buffer=null,e.pdu.contextEngineID=n.session.msgSecurityParameters.msgAuthoritativeEngineID,e.pdu.contextName="",r=e.pdu.id,e.pdu.id=ye();var o=new ge(n.session,e,null,this.callback,{},!0);o.port=n.port,o.proxiedRinfo=t,o.proxiedPduId=r,o.proxiedUser=i,o.proxiedEngine=this.engine,n.session.send(o)}else n.session.sendV3Discovery(null,null,this.callback,{});else this.callback(new F("No proxy found for message received with context "+s));else this.callback(new F("Only SNMP version 3 contexts are supported"))},ke.prototype.getForwarder=function(){return this.forwarder},ke.prototype.close=function(){this.listener.close()},ke.create=function(e,t,n){var r=new ke(e,t,n);return r.listener.startListening(),r};var Re=function(e,t){this.proxies={},this.listener=e,this.callback=t};Re.prototype.addProxy=function(e){var t={version:3,port:e.port,transport:e.transport};e.session=me.createV3(e.target,e.user,t),e.session.proxy=e,e.session.proxy.listener=this.listener,this.proxies[e.context]=e,e.session.sendV3Discovery(null,null,this.callback)},Re.prototype.deleteProxy=function(e){var t=this.proxies[e];t&&t.session&&t.session.close(),delete this.proxies[e]},Re.prototype.getProxy=function(e){return this.proxies[e]},Re.prototype.getProxies=function(){return this.proxies},Re.prototype.dumpProxies=function(){var e={};for(var t of Object.values(this.proxies))e[t.context]={context:t.context,target:t.target,user:t.user,port:t.port};console.log(JSON.stringify(e,null,2))};var Be=function(){};Be.prototype.toBuffer=function(){var e=new i.SmartBuffer;switch(this.writeHeader(e),this.pduType){case N.Open:e.writeUInt32BE(this.timeout),Be.writeOid(e,this.oid),Be.writeOctetString(e,this.descr);break;case N.Close:e.writeUInt8(5),e.writeUInt8(0),e.writeUInt8(0),e.writeUInt8(0);break;case N.Register:e.writeUInt8(this.timeout),e.writeUInt8(this.priority),e.writeUInt8(this.rangeSubid),e.writeUInt8(0),Be.writeOid(e,this.oid);break;case N.Unregister:e.writeUInt8(0),e.writeUInt8(this.priority),e.writeUInt8(this.rangeSubid),e.writeUInt8(0),Be.writeOid(e,this.oid);break;case N.AddAgentCaps:Be.writeOid(e,this.oid),Be.writeOctetString(e,this.descr);break;case N.RemoveAgentCaps:Be.writeOid(e,this.oid);break;case N.Notify:Be.writeVarbinds(e,this.varbinds);break;case N.Ping:break;case N.Response:e.writeUInt32BE(this.sysUpTime),e.writeUInt16BE(this.error),e.writeUInt16BE(this.index),Be.writeVarbinds(e,this.varbinds)}return e.writeUInt32BE(e.length-20,16),e.toBuffer()},Be.prototype.writeHeader=function(e){return this.flags=16|this.flags,e.writeUInt8(1),e.writeUInt8(this.pduType),e.writeUInt8(this.flags),e.writeUInt8(0),e.writeUInt32BE(this.sessionID),e.writeUInt32BE(this.transactionID),e.writeUInt32BE(this.packetID),e.writeUInt32BE(0),e},Be.prototype.readHeader=function(e){this.version=e.readUInt8(),this.pduType=e.readUInt8(),this.flags=e.readUInt8(),e.readUInt8(),this.sessionID=e.readUInt32BE(),this.transactionID=e.readUInt32BE(),this.packetID=e.readUInt32BE(),this.payloadLength=e.readUInt32BE()},Be.createFromVariables=function(e){var t=new Be;switch(t.flags=e.flags?16|e.flags:16,t.pduType=e.pduType||N.Open,t.sessionID=e.sessionID||0,t.transactionID=e.transactionID||0,t.packetID=e.packetID||++Be.packetID,t.pduType){case N.Open:t.timeout=e.timeout||0,t.oid=e.oid||null,t.descr=e.descr||null;break;case N.Close:break;case N.Register:t.timeout=e.timeout||0,t.oid=e.oid||null,t.priority=e.priority||127,t.rangeSubid=e.rangeSubid||0;break;case N.Unregister:t.oid=e.oid||null,t.priority=e.priority||127,t.rangeSubid=e.rangeSubid||0;break;case N.AddAgentCaps:t.oid=e.oid,t.descr=e.descr;break;case N.RemoveAgentCaps:t.oid=e.oid;break;case N.Notify:t.varbinds=e.varbinds;break;case N.Ping:break;case N.Response:t.sysUpTime=e.sysUpTime||0,t.error=e.error||0,t.index=e.index||0,t.varbinds=e.varbinds||null;break;default:throw new U("Unknown PDU type '"+t.pduType+"' in created PDU")}return t},Be.createFromBuffer=function(e){var t=new Be,n=i.SmartBuffer.fromBuffer(e);switch(t.readHeader(n),t.pduType){case N.Response:t.sysUpTime=n.readUInt32BE(),t.error=n.readUInt16BE(),t.index=n.readUInt16BE();break;case N.Get:case N.GetNext:t.searchRangeList=Be.readSearchRangeList(n,t.payloadLength);break;case N.GetBulk:t.nonRepeaters=n.readUInt16BE(),t.maxRepetitions=n.readUInt16BE(),t.searchRangeList=Be.readSearchRangeList(n,t.payloadLength-4);break;case N.TestSet:t.varbinds=Be.readVarbinds(n,t.payloadLength);break;case N.CommitSet:case N.UndoSet:case N.CleanupSet:break;default:throw new U("Unknown PDU type '"+t.pduType+"' in request")}return t},Be.writeOid=function(e,t,n=0){var r;if(t){var i=t.split(".").map(Number);i.length>=5&&"1.3.6.1"==i.slice(0,4).join(".")?(r=i[4],i=i.slice(5)):r=0,e.writeUInt8(i.length),e.writeUInt8(r),e.writeUInt8(n),e.writeUInt8(0);for(let t of i)e.writeUInt32BE(t)}else e.writeUInt32BE(0)},Be.writeOctetString=function(e,t){e.writeUInt32BE(t.length),e.writeString(t);var n=(4-t.length%4)%4;for(let t=0;t<n;t++)e.writeUInt8(0)},Be.writeVarBind=function(e,t){if(e.writeUInt16BE(t.type),e.writeUInt16BE(0),Be.writeOid(e,t.oid),t.type&&t.oid)switch(t.type){case b.Integer:case b.Counter:case b.Gauge:case b.TimeTicks:e.writeUInt32BE(t.value);break;case b.OctetString:case b.Opaque:Be.writeOctetString(e,t.value);break;case b.OID:Be.writeOid(e,t.value);break;case b.IpAddress:var n=t.value.split(".");if(4!=n.length)throw new U("Invalid IP address '"+t.value+"'");e.writeOctetString(e,Buffer.from(n));break;case b.Counter64:e.writeUint64(t.value);break;case b.Null:case b.EndOfMibView:case b.NoSuchObject:case b.NoSuchInstance:break;default:throw new U("Unknown type '"+t.type+"' in request")}},Be.writeVarbinds=function(e,t){if(t)for(var n=0;n<t.length;n++){var r=t[n];Be.writeVarBind(e,r)}},Be.readOid=function(e){var t=e.readUInt8(),n=e.readUInt8(),r=e.readUInt8();if(e.readUInt8(),0==t&&0==n&&0==r)return null;var i=[];i=0==n?[]:[1,3,6,1,n];for(let n=0;n<t;n++)i.push(e.readUInt32BE());return i.join(".")},Be.readSearchRange=function(e){return{start:Be.readOid(e),end:Be.readOid(e)}},Be.readSearchRangeList=function(e,t){for(var n=t,r=e.readOffset+1,i=[];n>0;)i.push(Be.readSearchRange(e)),n-=e.readOffset+1-r,r=e.readOffset+1;return i},Be.readOctetString=function(e){var t=e.readUInt32BE(),n=(4-t%4)%4,r=e.readString(t);return e.readString(n),r},Be.readVarbind=function(e){var t=e.readUInt16BE();e.readUInt16BE();var n,r=Be.readOid(e);switch(t){case b.Integer:case b.Counter:case b.Gauge:case b.TimeTicks:n=e.readUInt32BE();break;case b.OctetString:case b.IpAddress:case b.Opaque:n=Be.readOctetString(e);break;case b.OID:n=Be.readOid(e);break;case b.Counter64:n=z(e);break;case b.Null:case b.NoSuchObject:case b.NoSuchInstance:case b.EndOfMibView:n=null;break;default:throw new U("Unknown type '"+t+"' in varbind")}return{type:t,oid:r,value:n}},Be.readVarbinds=function(e,t){for(var n=t,r=e.readOffset+1,i=[];n>0;)i.push(Be.readVarbind(e)),n-=e.readOffset+1-r,r=e.readOffset+1;return i},Be.packetID=1;var Ue=function(e){p=e.debug,this.mib=new xe,this.master=e.master||"localhost",this.masterPort=e.masterPort||705,this.timeout=e.timeout||0,this.descr=e.description||"Node net-snmp AgentX sub-agent",this.sessionID=0,this.transactionID=0,this.packetID=ye(),this.requestPdus={},this.setTransactions={}};c.inherits(Ue,a.EventEmitter),Ue.prototype.onClose=function(){this.emit("close")},Ue.prototype.onError=function(e){this.emit("error",e)},Ue.prototype.getMib=function(){return this.mib},Ue.prototype.connectSocket=function(){var e=this;this.socket=new o.Socket,this.socket.connect(this.masterPort,this.master,(function(){m("Connected to '"+e.master+"' on port "+e.masterPort)})),this.socket.on("data",e.onMsg.bind(e)),this.socket.on("error",e.onError.bind(e)),this.socket.on("close",e.onClose.bind(e))},Ue.prototype.open=function(e){var t=Be.createFromVariables({pduType:N.Open,timeout:this.timeout,oid:this.oid,descr:this.descr});this.sendPdu(t,e)},Ue.prototype.close=function(e){var t=Be.createFromVariables({pduType:N.Close,sessionID:this.sessionID});this.sendPdu(t,e)},Ue.prototype.registerProvider=function(e,t){var n=Be.createFromVariables({pduType:N.Register,sessionID:this.sessionID,rangeSubid:0,timeout:5,priority:127,oid:e.oid});this.mib.registerProvider(e),this.sendPdu(n,t)},Ue.prototype.unregisterProvider=function(e,t){var n=this.getProvider(e),r=Be.createFromVariables({pduType:N.Unregister,sessionID:this.sessionID,rangeSubid:0,priority:127,oid:n.oid});this.mib.unregisterProvider(e),this.sendPdu(r,t)},Ue.prototype.registerProviders=function(e,t){for(var n of e)this.registerProvider(n,t)},Ue.prototype.getProvider=function(e){return this.mib.getProvider(e)},Ue.prototype.getProviders=function(){return this.mib.getProviders()},Ue.prototype.addAgentCaps=function(e,t,n){var r=Be.createFromVariables({pduType:N.AddAgentCaps,sessionID:this.sessionID,oid:e,descr:t});this.sendPdu(r,n)},Ue.prototype.removeAgentCaps=function(e,t){var n=Be.createFromVariables({pduType:N.RemoveAgentCaps,sessionID:this.sessionID,oid:e});this.sendPdu(n,t)},Ue.prototype.notify=function(e,t,n){t=t||[],"string"!=typeof e&&(e="1.3.6.1.6.3.1.1.5."+(e+1));var r=[{oid:"1.3.6.1.2.1.1.3.0",type:b.TimeTicks,value:Math.floor(100*process.uptime())},{oid:"1.3.6.1.6.3.1.1.4.1.0",type:b.OID,value:e}];r=r.concat(t);var i=Be.createFromVariables({pduType:N.Notify,sessionID:this.sessionID,varbinds:r});this.sendPdu(i,n)},Ue.prototype.ping=function(e){var t=Be.createFromVariables({pduType:N.Ping,sessionID:this.sessionID});this.sendPdu(t,e)},Ue.prototype.sendPdu=function(e,t){m("Sending AgentX "+N[e.pduType]+" PDU"),m(e);var n=e.toBuffer();this.socket.write(n),e.pduType==N.Response||this.requestPdus[e.packetID]||(e.callback=t,this.requestPdus[e.packetID]=e)},Ue.prototype.onMsg=function(e,t){var n=Be.createFromBuffer(e);switch(m("Received AgentX "+N[n.pduType]+" PDU"),m(n),n.pduType){case N.Response:this.response(n);break;case N.Get:this.getRequest(n);break;case N.GetNext:this.getNextRequest(n);break;case N.GetBulk:this.getBulkRequest(n);break;case N.TestSet:this.testSet(n);break;case N.CommitSet:this.commitSet(n);break;case N.UndoSet:this.undoSet(n);break;case N.CleanupSet:this.cleanupSet(n);break;default:throw new U("Unknown PDU type '"+n.pduType+"' in request")}},Ue.prototype.response=function(e){var t=this.requestPdus[e.packetID];if(!t)throw new B("Unexpected Response PDU with packetID "+e.packetID,R.EUnexpectedResponse);switch(delete this.requestPdus[e.packetID],t.pduType){case N.Open:this.sessionID=e.sessionID;break;case N.Close:this.socket.end();break;case N.Register:case N.Unregister:case N.AddAgentCaps:case N.RemoveAgentCaps:case N.Notify:case N.Ping:break;default:throw new B("Response PDU for type '"+t.pduType+"' not handled",R.EResponseNotHandled)}t.callback&&t.callback(null,e)},Ue.prototype.request=function(e,t){for(var n=this,r=0,i=t.length,s=[],o=0;o<t.length;o++){var a,c,u,l,p=t[o],d=this.mib.lookup(p.oid);d?(a=this.mib.getProviderNodeForInstance(d))?(c=new Pe({operation:e.pduType,providerNode:a,instanceNode:d,oid:p.oid}),e.pduType==N.TestSet&&(c.setType=p.type,c.setValue=p.value),u=a.provider.handler):(c=new Pe({operation:e.pduType,oid:p.oid}),u=function(e){e.done({errorStatus:_.NoError,errorIndex:0,type:b.NoSuchInstance,value:null})}):(c=new Pe({operation:e.pduType,oid:p.oid}),u=function(e){e.done({errorStatus:_.NoError,errorIndex:0,type:b.NoSuchObject,value:null})}),function(t){var o;c.done=function(a){a?o={oid:c.oid,type:a.type||b.Null,value:a.value||null}:(e.pduType==N.TestSet||(e.pduType==N.CommitSet?(n.setTransactions[e.transactionID].originalValue=c.instanceNode.value,c.instanceNode.value=p.value):e.pduType==N.UndoSet&&(c.instanceNode.value=n.setTransactions[e.transactionID].originalValue)),l=e.pduType!=N.GetNext&&e.pduType!=N.GetBulk||p.type!=b.EndOfMibView?c.instanceNode.valueType:b.EndOfMibView,o={oid:c.oid,type:l,value:c.instanceNode.value}),s[t]=o,++r==i&&(e.pduType==N.TestSet||e.pduType==N.CommitSet||e.pduType==N.UndoSet?n.sendSetResponse.call(n,e):n.sendGetResponse.call(n,e,s))}}(o),u?u(c):c.done()}},Ue.prototype.addGetNextVarbind=function(e,t){var n,r;try{n=this.mib.lookup(t)}catch(e){t="1.3.6.1",n=this.mib.lookup(t)}return n||(n=this.mib.getTreeNode(t)),(r=n.getNextInstanceNode())?e.push({oid:r.oid,type:r.valueType,value:r.value}):e.push({oid:t,type:b.EndOfMibView,value:null}),r},Ue.prototype.getRequest=function(e){for(var t=[],n=0;n<e.searchRangeList.length;n++)t.push({oid:e.searchRangeList[n].start,value:null,type:null});this.request(e,t)},Ue.prototype.getNextRequest=function(e){for(var t=[],n=0;n<e.searchRangeList.length;n++)this.addGetNextVarbind(t,e.searchRangeList[n].start);this.request(e,t)},Ue.prototype.getBulkRequest=function(e){for(var t,n=[],r=[],i=!1,s=0;s<e.nonRepeaters;s++)this.addGetNextVarbind(n,e.searchRangeList[s].start);for(var o=e.nonRepeaters;o<e.searchRangeList.length;o++)r.push(e.searchRangeList[o].oid);for(;n.length<e.maxRepetitions&&!i;)for(var a=e.nonRepeaters;a<e.searchRangeList.length;a++)n.length<e.maxRepetitions&&(t=this.addGetNextVarbind(n,r[a-e.nonRepeaters]))&&(r[a-e.nonRepeaters]=t.oid,t.type==b.EndOfMibView&&(i=!0));this.request(e,n)},Ue.prototype.sendGetResponse=function(e,t){var n=Be.createFromVariables({pduType:N.Response,sessionID:e.sessionID,transactionID:e.transactionID,packetID:e.packetID,sysUpTime:0,error:0,index:0,varbinds:t});this.sendPdu(n,null)},Ue.prototype.sendSetResponse=function(e){var t=Be.createFromVariables({pduType:N.Response,sessionID:e.sessionID,transactionID:e.transactionID,packetID:e.packetID,sysUpTime:0,error:0,index:0});this.sendPdu(t,null)},Ue.prototype.testSet=function(e){this.setTransactions[e.transactionID]=e,this.request(e,e.varbinds)},Ue.prototype.commitSet=function(e){if(!this.setTransactions[e.transactionID])throw new U("Unexpected CommitSet PDU with transactionID "+e.transactionID);this.request(e,this.setTransactions[e.transactionID].varbinds)},Ue.prototype.undoSet=function(e){if(!this.setTransactions[e.transactionID])throw new U("Unexpected UndoSet PDU with transactionID "+e.transactionID);this.request(e,this.setTransactions[e.transactionID].varbinds)},Ue.prototype.cleanupSet=function(e){if(!this.setTransactions[e.transactionID])throw new U("Unexpected CleanupSet PDU with transactionID "+e.transactionID);delete this.setTransactions[e.transactionID]},Ue.create=function(e){var t=new Ue(e);return t.connectSocket(),t},t.Session=me,t.createSession=me.create,t.createV3Session=me.createV3,t.createReceiver=Ne.create,t.createAgent=ke.create,t.createModuleStore=De.create,t.createSubagent=Ue.create,t.createMib=xe.create,t.isVarbindError=G,t.varbindError=j,t.Version1=0,t.Version2c=1,t.Version3=3,t.Version={1:0,"2c":1,3:3},t.ErrorStatus=_,t.TrapType=E,t.ObjectType=b,t.PduType=v,t.AgentXPduType=N,t.MibProviderType=C,t.SecurityLevel=S,t.AuthProtocols=w,t.PrivProtocols=I,t.AccessControlModelType=D,t.AccessLevel=A,t.MaxAccess=x,t.RowStatus=k,t.ResponseInvalidCode=R,t.ResponseInvalidError=B,t.RequestInvalidError=U,t.RequestFailedError=F,t.RequestTimedOutError=L,t.ObjectParser={readInt32:$,readUint32:Y,readVarbindValue:K},t.Authentication=de,t.Encryption=he},5398:(e,t,n)=>{var r=n(7147),i=function(e){var t=function(e){return Object.assign(e,{logit:!1,lastChar:"",state:"",open:!1,CurrentSymbol:"",nested:0,isComment:!1,isEqual:!1,isOID:!1,isList:!1,isString:!1,inComment:!1,inGroup:0,builder:"",ColumnIndex:0,RowIndex:0,PreviousRow:0})},n={directory:e||"",SymbolBuffer:{},StringBuffer:"",Modules:{},Objects:{},MACROS:[],CurrentObject:null,TempObject:{},CurrentClause:"",WaitFor:"",CharBuffer:{Table:{},ModuleName:{},Append:function(e){this.builder+=e},Fill:function(e,t,n){if(0!=this.builder.length){this.builder.length;var r=this.builder.toString().trim();this.builder="",this.builder.length=0,this.Table[e]?this.PreviousRow<t&&(this.RowIndex++,this.ColumnIndex=0,this.PreviousRow=t):this.Table[e]=[];var i=this.RowIndex,s=this.ColumnIndex;switch(this.Table[e][i]&&0!==s||(this.Table[e][i]=Object.defineProperty([],"line",{enumerable:!1,value:t+1})),this.isEqual=!1,r){case")":this.Table[e][i][s]=r,this.ColumnIndex++,this.logit=!1;break;case"(":this.Table[e][i][s]=r,this.ColumnIndex++,this.logit=!0;break;case"DEFINITIONS":this.ModuleName[e]=0==s?this.Table[e][i-1][s]:this.Table[e][i][s-1],this.Table[e][i][s]=r,this.ColumnIndex++;break;case"::=":this.Table[e][i][s]=r,this.ColumnIndex++,this.isEqual=!0;break;case"{":"::="!=this.Table[e][i][s-1]&&(this.isList=!0),this.Table[e][i][s]=r,this.ColumnIndex++;break;case"NOTATION":"TYPE"!=this.Table[e][i][s-1]&&"VALUE"!=this.Table[e][i][s-1]||(this.Table[e][i][s-1]+=" NOTATION");break;case"OF":"SEQUENCE"==this.Table[e][i][s-1]&&(this.Table[e][i][s-1]="SEQUENCE OF");break;case"IDENTIFIER":"OBJECT"==this.Table[e][i][s-1]&&(this.Table[e][i][s-1]="OBJECT IDENTIFIER");break;case"STRING":"OCTET"==this.Table[e][i][s-1]&&(this.Table[e][i][s-1]="OCTET STRING");break;default:this.Table[e][i][s]=r,this.ColumnIndex++}}}},Import:function(e){this.ParseModule(e.split("/")[e.split("/").length-1].split(".")[0],r.readFileSync(e).toString())},ParseModule:function(e,n){t(this.CharBuffer);for(var r=n.split("\n"),i="",s=0;null!=(i=r[s])&&s<=r.length;)this.ParseLine(e,i,s),s++},ParseLine:function(e,t,n){let r=t.length;"\r"===t[r-1]&&--r;for(var i=0;i<r;i++){var s=t.charAt(i);this.ParseChar(e,s,n,i)}this.ParseChar(e,"\n",n,r)},ParseChar:function(e,t,n,r){switch(t){case"\r":case"\n":this.CharBuffer.isString?this.CharBuffer.isString&&this.CharBuffer.isComment&&this.CharBuffer.Append(t):(this.CharBuffer.Fill(e,n,r),this.CharBuffer.isComment=!1,this.CharBuffer.inGroup=0);break;case"{":!this.CharBuffer.isComment&&this.CharBuffer.isEqual&&(this.CharBuffer.isOID=!0);case"[":case"(":this.CharBuffer.isComment||this.CharBuffer.isString||(this.CharBuffer.nested++,"("!=t&&"{"!=t||(1===this.CharBuffer.nested&&this.CharBuffer.Fill(e,n,r),this.CharBuffer.inGroup++)),this.CharBuffer.isComment||(this.CharBuffer.isOID||this.CharBuffer.nested>0)&&(!this.CharBuffer.isList||this.CharBuffer.inGroup>0)?this.CharBuffer.Append(t):(this.CharBuffer.Fill(e,n,r),this.CharBuffer.Append(t),this.CharBuffer.Fill(e,n,r));break;case"}":case"]":case")":this.CharBuffer.isComment||this.CharBuffer.isString||(this.CharBuffer.nested--,this.CharBuffer.nested<0&&(this.CharBuffer.nested=0),")"==t&&(this.CharBuffer.inGroup--,this.CharBuffer.inGroup<0&&(this.CharBuffer.inGroup=0))),this.CharBuffer.isComment||(this.CharBuffer.isOID||this.CharBuffer.nested>=0)&&(!this.CharBuffer.isList||this.CharBuffer.inGroup>=0)?this.CharBuffer.Append(t):(this.CharBuffer.Fill(e,n,r),this.CharBuffer.Append(t),this.CharBuffer.Fill(e,n,r)),"}"==t&&(this.CharBuffer.isOID=!1,this.CharBuffer.isList=!1);break;case",":case";":this.CharBuffer.isComment?this.CharBuffer.Append(t):(this.CharBuffer.Fill(e,n,r),this.CharBuffer.Append(t),this.CharBuffer.Fill(e,n,r));break;case" ":case"\t":this.CharBuffer.isComment||(this.CharBuffer.isOID||this.CharBuffer.nested>0)&&(!this.CharBuffer.isList||this.CharBuffer.inGroup>0)?this.CharBuffer.Append(t):this.CharBuffer.Fill(e,n,r);break;case"-":this.CharBuffer.Append(t),this.CharBuffer.isString||"-"!=this.CharBuffer.lastChar||(this.CharBuffer.isComment=!0,this.CharBuffer.builder=this.CharBuffer.builder.split("--")[0],this.CharBuffer.Fill(e,n,r),this.CharBuffer.builder="--");break;case'"':!this.CharBuffer.isComment||this.CharBuffer.isString||this.CharBuffer.inComment?this.CharBuffer.isComment||this.CharBuffer.isString||this.CharBuffer.inComment?this.CharBuffer.isComment&&this.CharBuffer.isString&&!this.CharBuffer.inComment?(this.CharBuffer.isComment=!1,this.CharBuffer.isString=!1,this.CharBuffer.inComment=!1):this.CharBuffer.isComment&&!this.CharBuffer.isString&&this.CharBuffer.inComment&&(this.CharBuffer.isComment=!0,this.CharBuffer.isString=!1,this.CharBuffer.inComment=!1):(this.CharBuffer.isComment=!0,this.CharBuffer.isString=!0,this.CharBuffer.inComment=!1,this.CharBuffer.Fill(e,n,r)):(this.CharBuffer.isComment=!0,this.CharBuffer.isString=!1,this.CharBuffer.inComment=!0),this.CharBuffer.isComment?this.CharBuffer.Append(t):(this.CharBuffer.Append(t),this.CharBuffer.Fill(e,n,r));break;default:this.CharBuffer.Append(t)}this.CharBuffer.lastChar=t},Serialize:function(){var e=this.CharBuffer.Table,t="";for(var n in e){t=this.CharBuffer.ModuleName[n],this.SymbolBuffer[t]=[];for(var r=!1,i=["none"],s=e[n],o=0;o<s.length;o++)for(var a=s[o],c=0;c<a.length;c++){var u=a[c],l=!0;switch(u){case"END":r=!0;break;case"::=":r=!1,i=a;break;default:u.startsWith("--")?l=!1:r=!1}l&&this.SymbolBuffer[t].push(u)}r||console.warn('[%s]: Incorrect formatting: no END statement found - last good declaration "%s" (line %s)',t,i.join(" "),i.line)}this.Compile()},Compile:function(){for(var e in this.SymbolBuffer)if(this.SymbolBuffer.hasOwnProperty(e)){this.Modules[e]||(this.Modules[e]={});for(var t=this.Modules[e],n=this.SymbolBuffer[e],r=t,i="",s=0;s<n.length;s++)switch(n[s]){case"::=":if(0==n[s+1].indexOf("{")){for(var o=s-1,a=!1;!a&&o>0;){o--;for(var c=0;c<this.MACROS.length;c++)if(n[o]==this.MACROS[c]){a=!0;break}}if("OBJECT IDENTIFIER"==n[s-1])r[n[s-2]]={},r[n[s-2]].ObjectName=n[s-2],r[n[s-2]].ModuleName=e,r[n[s-2]]["OBJECT IDENTIFIER"]=n[s+1].replace("{","").replace("}","").trim().replace(/\s+/," "),"0 0"==r[n[s-2]]["OBJECT IDENTIFIER"]?(r[n[s-2]].OID="0.0",r[n[s-2]].NameSpace="null"):this.OID(r[n[s-2]]["OBJECT IDENTIFIER"],"",n[s-2],"",(function(e,t){r[n[s-2]].OID=e,r[n[s-2]].NameSpace=t}));else{var u=n[o-1];r[u]={},r[u].ObjectName=u,r[u].ModuleName=e,r[u].MACRO=n[o];var l,p=this[n[o]],d=o,h=[];for(var f in h.push("DESCRIPTION"),p["TYPE NOTATION"])l=f,null==p["TYPE NOTATION"][f]&&(l=p[f].MACRO.replace(/"/g,"")),h.push(l);for(;d<s-1;){d++,l=n[d];var g=/\(([^)]+)\)/;if(h.indexOf(l)>-1||"REVISION"==l){var m=n[d+1].replace(/"/g,"");if(0==m.indexOf("{")){for(d++;-1==n[d].indexOf("}");)d++,m+=n[d];m="DEFVAL"==l?m.replace(/^{/,"").replace(/}$/,"").trim():m.replace("{","").replace("}","").split(",")}switch(l){case"SYNTAX":switch(m){case"BITS":case"INTEGER":case"Integer32":if(0==n[d+2].indexOf("{")){var y,_,b=m;for((m={})[b]={},d+=1;-1==n[d].indexOf("}");){d++;var v=!1;0==n[d].indexOf("(")&&n[d].length>1?(y=g.exec(n[d]),_=n[d-1],v=!0):n[d].indexOf("(")>0&&(y=g.exec(n[d]),_=n[d].split("(")[0],v=!0),_&&0==_.indexOf("{")&&(_=_.split("{")[1].trim()),v&&(m[b][y[1]]=_)}}else if(0==n[d+2].indexOf("(")){let e=m;(m={})[e]={ranges:this.GetRanges(n[d+2])}}break;case"OCTET STRING":case"DisplayString":if(n[d+2].replace(/ */g,"").startsWith("(SIZE")){let e=m;(m={})[e]={sizes:this.GetRanges(n[d+2])}}break;case"SEQUENCE OF":m+=" "+n[d+2],d+=2}r[u][l]=m;break;case"DESCRIPTION":r[u][l]||(r[u][l]=m),r[u]["REVISIONS-DESCRIPTIONS"]||(r[u]["REVISIONS-DESCRIPTIONS"]=[]),r[u]["REVISIONS-DESCRIPTIONS"].push({type:"DESCRIPTION",value:m});break;case"REVISION":r[u]["REVISIONS-DESCRIPTIONS"]||(r[u]["REVISIONS-DESCRIPTIONS"]=[]),r[u]["REVISIONS-DESCRIPTIONS"].push({type:"REVISION",value:m});break;default:r[u][l]=m}}}r[n[o-1]].ObjectName=n[o-1],r[n[o-1]].ModuleName=e,r[n[o-1]]["OBJECT IDENTIFIER"]=n[s+1].replace("{","").replace("}","").trim().replace(/\s+/," "),"0 0"==r[n[o-1]]["OBJECT IDENTIFIER"]?(r[n[o-1]].OID="0.0",r[n[o-1]].NameSpace="null"):this.OID(r[n[o-1]]["OBJECT IDENTIFIER"],"",n[o-1],"",(function(e,t){r[n[o-1]].OID=e,r[n[o-1]].NameSpace=t})),r[n[o-1]]["REVISIONS-DESCRIPTIONS"]&&1==r[n[o-1]]["REVISIONS-DESCRIPTIONS"].length&&"DESCRIPTION"==r[n[o-1]]["REVISIONS-DESCRIPTIONS"][0].type&&delete r[n[o-1]]["REVISIONS-DESCRIPTIONS"]}}else switch(n[s-1]){case"DEFINITIONS":case"OBJECT IDENTIFIER":break;case"MACRO":r=r[n[s-2]]={},i=n[s-2];break;case"VALUE NOTATION":case"TYPE NOTATION":r[n[s-1]]={};for(var E=s+1;"::="!=n[E+1]&&"END"!=n[E+1];){if(0==n[E].indexOf('"')){var S=n[E+1],w=E+1;0==n[E+2].indexOf("(")&&(S=n[E+2],w=E+2),r[n[s-1]][n[E].replace(/"/g,"")]=S,E=w}else r[n[s-1]][n[E]]=null,0==n[E+1].indexOf("(")&&(r[n[s-1]][n[E]]=n[E+1],E++);E++}"SNMPv2-SMI"==e?(r["TYPE NOTATION"].INDEX="Index",r["TYPE NOTATION"].AUGMENTS="Augments",r["TYPE NOTATION"].ACCESS="Access"):"RFC-1212"==e&&(r["TYPE NOTATION"].INDEX="Index",r["TYPE NOTATION"].ACCESS="Access");break;default:r[n[s-1]]={},r[n[s-1]].ObjectName=n[s-1],r[n[s-1]].ModuleName=e,r[n[s-1]].MACRO=n[s+1],this.BuildObject(r,n[s-1],n[s+1],s,n)}break;case"END":""!=i&&(this[i]=r,this.MACROS.push(i)),r=t,i="";break;case"IMPORTS":t.IMPORTS={};for(var I=s+1,T=[];";"!=n[I];){if("FROM"==n[I]){var O=n[I+1];this.Modules[O]||(console.log(e+": Can not find "+O+"!!!!!!!!!!!!!!!!!!!!!"),console.log(e+": Can not import ",T)),t.IMPORTS[O]=T,I++,T=[]}else","!=n[I]&&T.push(n[I]);I++}}}},GetRanges:function(e){let t=e.replace(/ */g,"").replace(/\(SIZE/,"").replace(/\)/,"").replace(/\(/,"").replace(/\)/,"").split("|"),n=[];for(let e of t)if(e.includes("..")){let t=e.split("..");n.push({min:parseInt(t[0],10),max:parseInt(t[1],10)})}else n.push({min:parseInt(e,10),max:parseInt(e,10)});return n},BuildObject:function(e,t,n,r,i){var s=i.indexOf("SYNTAX",r),o=s-r,a=s+1,c=i[a],u=i[a+1];if(this.MACROS.indexOf(n)>-1&&o<10)if("{"===u[0]){for(a++;-1==i[a].indexOf("}");)u+=i[++a].trim();u=u.replace("{","").replace("}","").split(","),e[t].SYNTAX={},e[t].SYNTAX[c]={};for(var l=0;l<u.length;l++){let n=u[l].split(/\s*\(\s*/);e[t].SYNTAX[c][n[1].replace(/\s*\)\s*$/,"")]=n[0].trimStart()}}else if("("===u[0]){const n=u.startsWith("(SIZE")?"sizes":"ranges";e[t].SYNTAX={},e[t].SYNTAX[c]={[n]:this.GetRanges(u)}}else e[t].SYNTAX=c},GetSummary:function(e){var t="";for(var n in this.Modules)if(this.Modules.hasOwnProperty(n))for(var r in this.Modules[n])this.Modules[n].hasOwnProperty(r)&&this.Modules[n][r].OID&&(t+=this.Modules[n][r].OID+" : "+r+"\r\n");e(t)},OID:function(e,t,n,r,i){let s=e.split(" "),o=s.shift(),a=s.pop();if("iso"==o){let e=["1"],o=["iso"];for(let t of s){let n=t.match(/(.*)\((.+)\)$/);e.push(n[2]),o.push(n[1])}return e.push(a),""!=t&&e.push(t),""!=r&&o.push(r),o.push(n),void i(e.join("."),o.join("."))}for(var c in t=""==t?a:[a,t].join("."),r=""==r?o:[o,r].join("."),this.Modules)if(this.Modules.hasOwnProperty(c)&&this.Modules[c][o]){this.OID(this.Modules[c][o]["OBJECT IDENTIFIER"],t,n,r,i);break}}};return t(n.CharBuffer),n};e.exports=t=i,t.MIB=i,t.native=void 0},9646:(e,t,n)=>{var r=n(938).http,i=n(938).https,s=n(7310),o=n(3837),a=n(2361),c=n(9796),u=n(5158)("NRC");t.K=function(e){var t=this,r=n(8180)(),i=n(6310)(),c=new l(this,r),u=function(e,n){var r=function(e){return function(){try{return e.apply(this,arguments)}catch(e){t.emit("error",e)}}},i={parsers:{},serializers:{}};return i.parsers.add=r(e.add),i.parsers.remove=r(e.remove),i.parsers.find=r(e.find),i.parsers.getAll=r(e.getAll),i.parsers.getDefault=r(e.getDefault),i.parsers.clean=r(e.clean),i.serializers.add=r(n.add),i.serializers.remove=r(n.remove),i.serializers.find=r(n.find),i.serializers.getAll=r(n.getAll),i.serializers.getDefault=r(n.getDefault),i.serializers.clean=r(n.clean),i}(r,i),d="Content-Length";t.options=e||{},t.useProxy=!!t.options.proxy,t.useProxyTunnel=!(!t.useProxy||void 0===t.options.proxy.tunnel)&&t.options.proxy.tunnel,t.proxy=t.options.proxy,t.connection=t.options.connection||{},t.mimetypes=t.options.mimetypes||{},t.requestConfig=t.options.requestConfig||{},t.responseConfig=t.options.responseConfig||{},this.methods={},this.parsers={},this.serializers={};var h=function(){a.EventEmitter.call(this)};o.inherits(h,a.EventEmitter),h.prototype.end=function(){this._httpRequest&&this._httpRequest.end()},h.prototype.setHttpRequest=function(e){this._httpRequest=e};var f={createProxyPath:function(e){var t=e.host;return"https:"===e.protocol&&(t=-1==e.host.indexOf(":")?e.hostname+":443":e.host),t},createProxyHeaders:function(e){var n={};return t.proxy.user&&t.proxy.password&&(n["Proxy-Authorization"]="Basic "+new Buffer([t.proxy.user,t.proxy.password].join(":")).toString("base64")),t.useProxyTunnel||(n.host=e.host),n},createConnectOptions:function(e,n){p("connect URL = ",e);var r=s.parse(e),i={},o=-1==r.protocol.indexOf(":")?r.protocol:r.protocol.substring(0,r.protocol.indexOf(":")),a="http"===o?80:443;if(i={host:-1==r.host.indexOf(":")?r.host:r.host.substring(0,r.host.indexOf(":")),port:void 0===r.port?a:r.port,path:r.path,protocol:o,href:r.href},t.useProxy&&(i.agent=!1),t.options.user&&t.options.password?i.auth=[t.options.user,t.options.password].join(":"):t.options.user&&!t.options.password&&(i.auth=t.options.user+":"),t.useProxy&&(i.proxy={host:t.proxy.host,port:t.proxy.port,method:t.useProxyTunnel?"CONNECT":n,path:t.useProxyTunnel?this.createProxyPath(r):e,headers:this.createProxyHeaders(r)}),t.connection&&"object"==typeof t.connection)for(var c in t.connection)i[c]=t.connection[c];if(!t.useProxyTunnel){for(var u in i.proxy)i[u]=i.proxy[u];delete i.proxy}return i.requestConfig=t.requestConfig,i.responseConfig=t.responseConfig,i},decodeQueryFromURL:function(e){for(var t,n=s.parse(e).query.substring(1).split("&"),r={},i=0;i<n.length;i++)r[(t=n[i].split("="))[0]]=decodeURIComponent(t[1]);return r},serializeEncodeQueryFromArgs:function(e){return p("args is",e),e&&"object"!=typeof e&&t.emit("error","cannot serialize parameters: invalid type "+typeof e+" should be an object type"),function e(t,n){var r,i=[];for(r in t)if(t.hasOwnProperty(r)){var s=n?n+"["+r+"]":r,o=t[r];i.push(null!==o&&"object"==typeof o?e(o,s):encodeURIComponent(s)+"="+encodeURIComponent(o))}return i.join("&")}(e)},parsePathParameters:function(e,t){var n=t;if(!e||!e.path)return t;for(var r in e.path){var i=new RegExp("\\$\\{"+r+"\\}","i");n=n.replace(i,e.path[r])}return n},overrideClientConfig:function(e,t){function n(e){return e&&"object"==typeof e}n(t.requestConfig)&&o._extend(e.requestConfig,t.requestConfig),n(t.responseConfig)&&o._extend(e.responseConfig,t.responseConfig)},connect:function(e,n,r,s,o){s&&r&&"object"!=typeof r&&t.emit("error","args should be and object");var a,u=this.createConnectOptions(this.parsePathParameters(r,n),e);if(p("options pre connect",u),u.method=e,o.href=u.href,u.clientRequest=o,u.headers=u.headers||{},p("args = ",r),p("args.data = ",void 0!==r?r.data:void 0),"function"==typeof r)s=r,"POST"!==e&&"PUT"!==e&&"DELETE"!==e&&"PATCH"!==e||(u.headers[d]=0);else if("object"==typeof r){if(r.headers)for(var l in r.headers)r.headers.hasOwnProperty(l)&&(u.headers[l]=r.headers[l]);if(r.parameters&&Object.keys(r.parameters).length>0){var h=u.path.length,g=u.path.indexOf("?");g>=0&&g!==h-1&&t.emit("error","parameters argument cannot be used if parameters are already defined in URL "+u.path),u.path+="?"===u.path.charAt(h-1)?"":"?",u.path=u.path.concat(f.serializeEncodeQueryFromArgs(r.parameters)),p("options.path after request parameters = ",u.path)}this.overrideClientConfig(u,r),void 0===r.data||u.headers.hasOwnProperty(d)?u.headers[d]=0:i.get(u).serialize(r.data,(a=t,function(e,t){a.emit(e,t)}),(function(e){u.data=e,u.headers[d]=Buffer.byteLength(u.data,"utf8")}))}p("options post connect",u),p("FINAL SELF object  ====>",t),t.useProxy&&t.useProxyTunnel?c.proxy(u,s):c.normal(u,s)},mergeMimeTypes:function(e){if(e&&"object"==typeof e)try{e.json&&e.json instanceof Array&&e.json.length>0?r.find("JSON").contentTypes=e.json:e.xml&&e.xml instanceof Array&&e.xml.length>0&&(r.find("XML").contentTypes=e.xml)}catch(e){t.emit("error","cannot assign custom content types to parser, cause: "+e)}},createHttpMethod:function(e){return function(t,n,r){var i=new h;return f.connect(e.toUpperCase(),t,n,r,i),i}}},g=function(e,n){var r=t[n.toLowerCase()];return function(t,n){return"function"==typeof t&&(n=t,t={}),r(e,t,n)}};this.get=f.createHttpMethod("get"),this.post=f.createHttpMethod("post"),this.put=f.createHttpMethod("put"),this.delete=f.createHttpMethod("delete"),this.patch=f.createHttpMethod("patch"),this.registerMethod=function(e,t,n){this.methods[e]=new g(t,n)},this.unregisterMethod=function(e){delete this.methods[e]},this.addCustomHttpMethod=function(e){t[e.toLowerCase()]=f.createHttpMethod(e)},this.parsers=u.parsers,this.serializers=u.serializers,f.mergeMimeTypes(t.mimetypes),p("ConnectManager",c)};var l=function(e,t){this.configureRequest=function(e,t,n){t.timeout&&e.setTimeout(t.timeout,(function(){n.emit("requestTimeout",e)})),t.noDelay&&e.setNoDelay(t.noDelay),t.keepAlive&&e.setSocketKeepAlive(t.noDelay,t.keepAliveDelay||0)},this.configureResponse=function(e,t,n){t.timeout&&e.setTimeout(t.timeout,(function(){n.emit("responseTimeout",e),e.close()}))},this.configureOptions=function(e){!function(t,n){for(var r in t)n.hasOwnProperty(t[r])&&(e[t[r]]=n[t[r]])}(["followRedirects","maxRedirects"],e.requestConfig),delete e.protocol,delete e.clientRequest,delete e.requestConfig,delete e.responseConfig,p("options pre connect",e)},this.handleEnd=function(e,t,n){var r=this,i=e.headers["content-type"],s=e.headers["content-encoding"];p("content-type: ",i),p("content-encoding: ",s),void 0!==s&&s.indexOf("gzip")>=0?(p("gunzip"),c.gunzip(Buffer.concat(t),(function(t,i){r.handleResponse(e,i,n)}))):void 0!==s&&s.indexOf("deflate")>=0?(p("inflate"),c.inflate(Buffer.concat(t),(function(t,i){r.handleResponse(e,i,n)}))):(p("not compressed"),r.handleResponse(e,Buffer.concat(t),n))},this.handleResponse=function(n,r,i){t.get(n).parse(r,function(e){return function(t,n){e.emit(t,n)}}(e),(function(e){i(e,n)}))},this.prepareData=function(e){return e instanceof Buffer||"object"!=typeof e?e:JSON.stringify(e)},this.proxy=function(t,n){p("proxy options",t.proxy);var s=r.request(t.proxy),o=this;s.on("connect",(function(s,a,c){p("proxy connected",a),t.socket=a;var u=[],l="http"==t.protocol?r:i,d=t.clientRequest,h=t.requestConfig,f=t.responseConfig;o.configureOptions(t),d.options=t;var g=l.request(t,(function(t){o.configureResponse(t,f,d),t.on("data",(function(e){u.push(Buffer.from(e))})),t.on("end",(function(){o.handleEnd(t,u,n)})),t.on("error",(function(n){void 0!==d&&"object"==typeof d?(n.request=d,n.response=t,d.emit("error",n)):e.emit("error",n)}))}));o.configureRequest(g,h,d),d.setHttpRequest(g),t.data&&g.write(t.data),g.end(),g.on("error",(function(t){void 0!==d&&"object"==typeof d?(t.request=d,d.emit("error",t)):e.emit("error",t)}))})),s.on("error",(function(t){e.emit("error",t)})),s.end()},this.normal=function(t,n){var s=[],o="http"===t.protocol?r:i,a=t.clientRequest,c=t.requestConfig,u=t.responseConfig,l=this;l.configureOptions(t),a.options=t;var d=o.request(t,(function(t){l.configureResponse(t,u,a),t.on("data",(function(e){s.push(Buffer.from(e))})),t.on("end",(function(){l.handleEnd(t,s,n)})),t.on("error",(function(n){void 0!==a&&"object"==typeof a?(n.request=a,n.response=t,a.emit("error",n)):e.emit("error",n)}))}));l.configureRequest(d,c,a),p("clientRequest",a),a.setHttpRequest(d),p("options data",t.data),t.data&&d.write(t.data),d.end(),d.on("error",(function(t){void 0!==a&&"object"==typeof a?(t.request=a,a.emit("error",t)):e.emit("error",t)}))}};o.inherits(t.K,a.EventEmitter);var p=function(){if(process.env.DEBUG){var e=new Date,t=e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()+" [NRC CLIENT]"+arguments.callee.caller.name+" -> ",n=Array.prototype.slice.call(arguments);n.splice(0,0,t),u.apply(console,n)}}},8180:(e,t,n)=>{var r=function(){var e={},t=null;this.add=function(n){if(!function(e){function t(e,t){var n=!0;for(var r in t){var i=t[r].split(":");if(!e.hasOwnProperty([i[0]])||typeof e[i[0]]!==i[1]){n=!1;break}}return n}return result=t(e,["name:string","parse:function","isDefault:boolean"]),result&&!e.isDefault&&(result=t(e,["match:function"])),result}(n))throw"parser cannot be added: invalid parser definition";n.isDefault?t=n:e[n.name]=n},this.remove=function(t){if(!e[t])throw"cannot remove parser: "+t+" doesn't exists";delete e[t]},this.clean=function(){e={}},this.find=function(t){var n=e[t];if(!n)throw"cannot find parser: "+t+" doesn't exists ";return n},this.getDefault=function(){return t},this.get=function(n){var r=null;for(var i in e)if(e[i].match(n)){r=e[i];break}return null===r?t:r},this.getAll=function(){var t=[];for(var n in e)t.push(e[n]);return t}};e.exports=function(){var e=new r,t={isDefault:!1,match:function(e){var t=!1,n=e.headers["content-type"]&&e.headers["content-type"].replace(/ /g,"");if(!n)return t;for(var r=0;r<this.contentTypes.length&&!(t=this.contentTypes[r].trim().toLowerCase()===n.trim().toLowerCase());r++);return t}};return e.add(Object.assign({name:"XML",options:{explicitArray:!1},contentTypes:["application/xml","application/xml;charset=utf-8","text/xml","text/xml;charset=utf-8"],parseString:n(5055).parseString,parse:function(e,t,n){this.parseString(e.toString(),this.options,(function(e,t){n(t)}))}},t)),e.add(Object.assign({name:"JSON",contentTypes:["application/json","application/json;charset=utf-8"],isValidData:function(e){return void 0!==e&&void 0!==e.length&&e.length>0},parse:function(e,t,n){var r,i=e.toString();try{r=this.isValidData(i)?JSON.parse(i):i}catch(e){t("error","Error parsing response. response: ["+i+"], error: ["+e+"]")}n(r)}},t)),e.add({name:"DEFAULT",isDefault:!0,parse:function(e,t,n){n(e)}}),e}},6310:(e,t,n)=>{var r=n(5055),i=function(){var e={},t=null;this.add=function(n){if(!function(e){function t(e,t){var n=!0;for(var r in t){var i=t[r].split(":");if(!e.hasOwnProperty([i[0]])||typeof e[i[0]]!==i[1]){n=!1;break}}return n}return result=t(e,["name:string","serialize:function","isDefault:boolean"]),result&&!e.isDefault&&(result=t(e,["match:function"])),result}(n))throw"serializer cannot be added: invalid serializer definition";n.isDefault?t=n:e[n.name]=n},this.remove=function(t){if(!e[t])throw"cannot remove serializer: "+t+" doesn't exists";delete e[t]},this.find=function(t){var n=e[t];if(!n)throw"cannot find serializer: "+t+" doesn't exists";return n},this.clean=function(){e={}},this.get=function(n){var r=null;for(var i in e)if(e[i].match(n)){r=e[i];break}return null===r?t:r},this.getAll=function(){var t=[];for(var n in e)t.push(e[n]);return t},this.getDefault=function(){return t}};e.exports=function(){var e=new i,t={isDefault:!1,match:function(e){var t=!1,n=e.headers["Content-Type"]&&e.headers["Content-Type"].replace(/ /g,"");if(!n)return t;for(var r=0;r<this.contentTypes.length&&!(t=this.contentTypes[r].trim().toLowerCase()===n.trim().toLowerCase());r++);return t}};return e.add(Object.assign({name:"XML",options:{},contentTypes:["application/xml","application/xml;charset=utf-8","text/xml","text/xml;charset=utf-8"],xmlSerializer:new r.Builder(this.options),serialize:function(e,t,n){"object"==typeof e&&(e=xmlSerializer.buildObject(e)),n(e)}},t)),e.add(Object.assign({name:"JSON",contentTypes:["application/json","application/json;charset=utf-8"],serialize:function(e,t,n){"object"==typeof e&&(e=JSON.stringify(e)),n(e)}},t)),e.add(Object.assign({name:"FORM-ENCODED",contentTypes:["application/x-www-form-urlencoded","multipart/form-data","text/plain"],encode:function(e,t){var n,r=[];for(n in e)if(e.hasOwnProperty(n)){var i=t?t+"["+n+"]":n,s=e[n];r.push(null!==s&&"object"==typeof s?serialize(s,i):encodeURIComponent(i)+"="+encodeURIComponent(s))}return r.join("&")},serialize:function(e,t,n){"object"==typeof e&&(e=this.encode(e)),n(e)}},t)),e.add({name:"DEFAULT",isDefault:!0,serialize:function(e,t,n){n(e.toString())}}),e}},7345:e=>{"use strict";e.exports=(e,t)=>(t=t||(()=>{}),e.then((e=>new Promise((e=>{e(t())})).then((()=>e))),(e=>new Promise((e=>{e(t())})).then((()=>{throw e})))))},5860:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(6729),i=n(6512),s=n(6506),o=()=>{},a=new i.TimeoutError;t.default=class extends r{constructor(e){var t,n,r,i;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=o,this._resolveIdle=o,!("number"==typeof(e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:s.default},e)).intervalCap&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!==(n=null===(t=e.intervalCap)||void 0===t?void 0:t.toString())&&void 0!==n?n:""}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!==(i=null===(r=e.interval)||void 0===r?void 0:r.toString())&&void 0!==i?i:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||0===e.interval,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=!0===e.throwOnTimeout,this._isPaused=!1===e.autoStart}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=o,0===this._pendingCount&&(this._resolveIdle(),this._resolveIdle=o,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const e=Date.now();if(void 0===this._intervalId){const t=this._intervalEnd-e;if(!(t<0))return void 0===this._timeoutId&&(this._timeoutId=setTimeout((()=>{this._onResumeInterval()}),t)),!0;this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0}return!1}_tryToStartAnother(){if(0===this._queue.size)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const t=this._queue.dequeue();return!!t&&(this.emit("active"),t(),e&&this._initializeIntervalIfNeeded(),!0)}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||void 0!==this._intervalId||(this._intervalId=setInterval((()=>{this._onInterval()}),this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){0===this._intervalCount&&0===this._pendingCount&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!("number"==typeof e&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,t={}){return new Promise(((n,r)=>{this._queue.enqueue((async()=>{this._pendingCount++,this._intervalCount++;try{const s=void 0===this._timeout&&void 0===t.timeout?e():i.default(Promise.resolve(e()),void 0===t.timeout?this._timeout:t.timeout,(()=>{(void 0===t.throwOnTimeout?this._throwOnTimeout:t.throwOnTimeout)&&r(a)}));n(await s)}catch(e){r(e)}this._next()}),t),this._tryToStartAnother(),this.emit("add")}))}async addAll(e,t){return Promise.all(e.map((async e=>this.add(e,t))))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(0!==this._queue.size)return new Promise((e=>{const t=this._resolveEmpty;this._resolveEmpty=()=>{t(),e()}}))}async onIdle(){if(0!==this._pendingCount||0!==this._queue.size)return new Promise((e=>{const t=this._resolveIdle;this._resolveIdle=()=>{t(),e()}}))}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}}},7489:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){let r=0,i=e.length;for(;i>0;){const s=i/2|0;let o=r+s;n(e[o],t)<=0?(r=++o,i-=s+1):i=s}return r}},6506:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(7489);t.default=class{constructor(){this._queue=[]}enqueue(e,t){const n={priority:(t=Object.assign({priority:0},t)).priority,run:e};if(this.size&&this._queue[this.size-1].priority>=t.priority)return void this._queue.push(n);const i=r.default(this._queue,n,((e,t)=>t.priority-e.priority));this._queue.splice(i,0,n)}dequeue(){const e=this._queue.shift();return null==e?void 0:e.run}filter(e){return this._queue.filter((t=>t.priority===e.priority)).map((e=>e.run))}get size(){return this._queue.length}}},6512:(e,t,n)=>{"use strict";const r=n(7345);class i extends Error{constructor(e){super(e),this.name="TimeoutError"}}const s=(e,t,n)=>new Promise(((s,o)=>{if("number"!=typeof t||t<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(t===1/0)return void s(e);const a=setTimeout((()=>{if("function"==typeof n){try{s(n())}catch(e){o(e)}return}const r=n instanceof Error?n:new i("string"==typeof n?n:`Promise timed out after ${t} milliseconds`);"function"==typeof e.cancel&&e.cancel(),o(r)}),t);r(e.then(s,o),(()=>{clearTimeout(a)}))}));e.exports=s,e.exports.default=s,e.exports.TimeoutError=i},2351:(e,t,n)=>{"use strict";var r=n(7147),i=n(2037),s=n(1808),o=n(1017),a=n(1195),c=n(9367),u=n(1890).mkdirp,l=c("portfinder:testPort"),p=c("portfinder:getPort"),d=c("portfinder:defaultHosts"),h={testPort:function(e,n){function r(){l("done w/ testPort(): OK",e.host,"port",e.port),e.server.removeListener("error",i),e.server.close(),n(null,e.port)}function i(i){if(l("done w/ testPort(): failed",e.host,"w/ port",e.port,"with error",i.code),e.server.removeListener("listening",r),"EADDRINUSE"!=i.code&&"EACCES"!=i.code)return n(i);var s=t.nextPort(e.port);if(s>t.highestPort)return n(new Error("No open ports available"));h.testPort({port:s,host:e.host,server:e.server},n)}n||(n=e,e={}),e.server=e.server||s.createServer((function(){})),l("entered testPort(): trying",e.host,"port",e.port),e.server.once("error",i),e.server.once("listening",r),e.host?e.server.listen(e.port,e.host):e.server.listen(e.port)}};t.basePort=8e3,t.setBasePort=function(e){t.basePort=e},t.highestPort=65535,t.setHighestPort=function(e){t.highestPort=e},t.basePath="/tmp/portfinder",t.getPort=function(e,n){if(n||(n=e,e={}),e.port=Number(e.port)||Number(t.basePort),e.host=e.host||null,e.stopPort=Number(e.stopPort)||Number(t.highestPort),!e.startPort){if(e.startPort=Number(e.port),e.startPort<0)throw Error("Provided options.startPort("+e.startPort+") is less than 0, which are cannot be bound.");if(e.stopPort<e.startPort)throw Error("Provided options.stopPort("+e.stopPort+"is less than options.startPort ("+e.startPort+")")}e.host&&-1!==t._defaultHosts.indexOf(e.host)&&t._defaultHosts.push(e.host);var r,i=[];return a.eachSeries(t._defaultHosts,(function(t,n){return p("in eachSeries() iteration callback: host is",t),h.testPort({host:t,port:e.port},(function(e,s){return e?(p("in eachSeries() iteration callback testPort() callback","with an err:",e.code),r=t,n(e)):(p("in eachSeries() iteration callback testPort() callback","with a success for port",s),i.push(s),n())}))}),(function(s){if(s){if(p("in eachSeries() result callback: err is",s),"EADDRNOTAVAIL"===s.code||"EINVAL"===s.code){if(e.host===r){var o="Provided host "+e.host+" could NOT be bound. Please provide a different host address or hostname";return n(Error(o))}var a=t._defaultHosts.indexOf(r);return t._defaultHosts.splice(a,1),t.getPort(e,n)}return n(s)}return i.sort((function(e,t){return e-t})),p("in eachSeries() result callback: openPorts is",i),i[0]===i[i.length-1]?i[0]<=e.stopPort?n(null,i[0]):(o="No open ports found in between "+e.startPort+" and "+e.stopPort,n(Error(o))):t.getPort({port:i.pop(),host:e.host,startPort:e.startPort,stopPort:e.stopPort},n)}))},t.getPortPromise=function(e){if("function"!=typeof Promise)throw Error("Native promise support is not available in this version of node.Please install a polyfill and assign Promise to global.Promise before calling this method");return e||(e={}),new Promise((function(n,r){t.getPort(e,(function(e,t){if(e)return r(e);n(t)}))}))},t.getPorts=function(e,n,r){r||(r=n,n={});var i=null;a.timesSeries(e,(function(e,r){i&&(n.port=t.nextPort(i)),t.getPort(n,(function(e,t){e?r(e):(i=t,r(null,t))}))}),r)},t.getSocket=function(e,n){function i(){r.stat(e.path,(function(r){r?"ENOENT"==r.code?n(null,e.path):n(r):(e.path=t.nextSocket(e.path),t.getSocket(e,n))}))}return n||(n=e,e={}),e.mod=e.mod||parseInt(755,8),e.path=e.path||t.basePath+".sock",e.exists?i():(s=o.dirname(e.path),void r.stat(s,(function(t,r){if(t||!r.isDirectory())return function(t){u(t,e.mod,(function(t){if(t)return n(t);e.exists=!0,i()}))}(s);e.exists=!0,i()})));var s},t.nextPort=function(e){return e+1},t.nextSocket=function(e){var t=o.dirname(e),n=o.basename(e,".sock").match(/^([a-zA-z]+)(\d*)$/i),r=parseInt(n[2]),i=n[1];return isNaN(r)&&(r=0),r+=1,o.join(t,i+r+".sock")},t._defaultHosts=function(){var e={};try{e=i.networkInterfaces()}catch(e){if("uv_interface_addresses"!==e.syscall)throw e}for(var t=Object.keys(e),n=["0.0.0.0"],r=0;r<t.length;r++)for(var s=e[t[r]],o=0;o<s.length;o++){var a=s[o];n.push(a.address)}return n.push(null),d("exports._defaultHosts is: %o",n),n}()},392:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}t.log=function(){var e;return"object"===("undefined"==typeof console?"undefined":r(console))&&console.log&&(e=console).log.apply(e,arguments)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),this.useColors){var n="color: "+this.color;t.splice(1,0,n,"color: inherit");var r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(r++,"%c"===e&&(i=r))})),t.splice(i,0,n)}},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){var e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=n(2843)(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},2843:(e,t,n)=>{"use strict";e.exports=function(e){function t(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){var n;function o(){if(o.enabled){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var s=o,a=Number(new Date),c=a-(n||a);s.diff=c,s.prev=n,s.curr=a,n=a,t[0]=r.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");var u=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(function(e,n){if("%%"===e)return e;u++;var i=r.formatters[n];if("function"==typeof i){var o=t[u];e=i.call(s,o),t.splice(u,1),u--}return e})),r.formatArgs.call(s,t),(s.log||r.log).apply(s,t)}}return o.namespace=e,o.enabled=r.enabled(e),o.useColors=r.useColors(),o.color=t(e),o.destroy=i,o.extend=s,"function"==typeof r.init&&r.init(o),r.instances.push(o),o}function i(){var e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function s(e,t){return r(this.namespace+(void 0===t?":":t)+e)}return r.debug=r,r.default=r,r.coerce=function(e){return e instanceof Error?e.stack||e.message:e},r.disable=function(){r.enable("")},r.enable=function(e){var t;r.save(e),r.names=[],r.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){var s=r.instances[t];s.enabled=r.enabled(s.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;var t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=n(4540),Object.keys(e).forEach((function(t){r[t]=e[t]})),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=t,r.enable(r.load()),r}},9367:(e,t,n)=>{"use strict";"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=n(392):e.exports=n(896)},896:(e,t,n)=>{"use strict";var r=n(6224),i=n(3837);t.init=function(e){e.inspectOpts={};for(var n=Object.keys(t.inspectOpts),r=0;r<n.length;r++)e.inspectOpts[n[r]]=t.inspectOpts[n[r]]},t.log=function(){return process.stderr.write(i.format.apply(i,arguments)+"\n")},t.formatArgs=function(n){var r=this.namespace;if(this.useColors){var i=this.color,s="[3"+(i<8?i:"8;5;"+i),o="  ".concat(s,";1m").concat(r," [0m");n[0]=o+n[0].split("\n").join("\n"+o),n.push(s+"m+"+e.exports.humanize(this.diff)+"[0m")}else n[0]=(t.inspectOpts.hideDate?"":(new Date).toISOString()+" ")+r+" "+n[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):r.isatty(process.stderr.fd)},t.colors=[6,2,3,4,5,1];try{var s=n(2130);s&&(s.stderr||s).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter((function(e){return/^debug_/i.test(e)})).reduce((function(e,t){var n=t.substring(6).toLowerCase().replace(/_([a-z])/g,(function(e,t){return t.toUpperCase()})),r=process.env[t];return r=!!/^(yes|on|true|enabled)$/i.test(r)||!/^(no|off|false|disabled)$/i.test(r)&&("null"===r?null:Number(r)),e[n]=r,e}),{}),e.exports=n(2843)(t);var o=e.exports.formatters;o.o=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts).split("\n").map((function(e){return e.trim()})).join(" ")},o.O=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts)}},4540:e=>{var t=1e3,n=60*t,r=60*n,i=24*r;function s(e,t,n,r){var i=t>=1.5*n;return Math.round(e/n)+" "+r+(i?"s":"")}e.exports=function(e,o){o=o||{};var a,c,u=typeof e;if("string"===u&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var s=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(s){var o=parseFloat(s[1]);switch((s[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"weeks":case"week":case"w":return 6048e5*o;case"days":case"day":case"d":return o*i;case"hours":case"hour":case"hrs":case"hr":case"h":return o*r;case"minutes":case"minute":case"mins":case"min":case"m":return o*n;case"seconds":case"second":case"secs":case"sec":case"s":return o*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}(e);if("number"===u&&isFinite(e))return o.long?(a=e,(c=Math.abs(a))>=i?s(a,c,i,"day"):c>=r?s(a,c,r,"hour"):c>=n?s(a,c,n,"minute"):c>=t?s(a,c,t,"second"):a+" ms"):function(e){var s=Math.abs(e);return s>=i?Math.round(e/i)+"d":s>=r?Math.round(e/r)+"h":s>=n?Math.round(e/n)+"m":s>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},6099:(e,t,n)=>{!function(e){e.parser=function(e,t){return new i(e,t)},e.SAXParser=i,e.SAXStream=o,e.createStream=function(e,t){return new o(e,t)},e.MAX_BUFFER_LENGTH=65536;var t,r=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function i(t,n){if(!(this instanceof i))return new i(t,n);var s=this;!function(e){for(var t=0,n=r.length;t<n;t++)e[r[t]]=""}(s),s.q=s.c="",s.bufferCheckPosition=e.MAX_BUFFER_LENGTH,s.opt=n||{},s.opt.lowercase=s.opt.lowercase||s.opt.lowercasetags,s.looseCase=s.opt.lowercase?"toLowerCase":"toUpperCase",s.tags=[],s.closed=s.closedRoot=s.sawRoot=!1,s.tag=s.error=null,s.strict=!!t,s.noscript=!(!t&&!s.opt.noscript),s.state=I.BEGIN,s.strictEntities=s.opt.strictEntities,s.ENTITIES=s.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES),s.attribList=[],s.opt.xmlns&&(s.ns=Object.create(p)),s.trackPosition=!1!==s.opt.position,s.trackPosition&&(s.position=s.line=s.column=0),O(s,"onready")}e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t}),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}),i.prototype={end:function(){x(this)},write:function(t){var n=this;if(this.error)throw this.error;if(n.closed)return A(n,"Cannot write after close. Assign an onready handler.");if(null===t)return x(n);"object"==typeof t&&(t=t.toString());for(var i=0,s="";s=G(t,i++),n.c=s,s;)switch(n.trackPosition&&(n.position++,"\n"===s?(n.line++,n.column=0):n.column++),n.state){case I.BEGIN:if(n.state=I.BEGIN_WHITESPACE,"\ufeff"===s)continue;M(n,s);continue;case I.BEGIN_WHITESPACE:M(n,s);continue;case I.TEXT:if(n.sawRoot&&!n.closedRoot){for(var o=i-1;s&&"<"!==s&&"&"!==s;)(s=G(t,i++))&&n.trackPosition&&(n.position++,"\n"===s?(n.line++,n.column=0):n.column++);n.textNode+=t.substring(o,i-1)}"<"!==s||n.sawRoot&&n.closedRoot&&!n.strict?(m(s)||n.sawRoot&&!n.closedRoot||P(n,"Text data outside of root node."),"&"===s?n.state=I.TEXT_ENTITY:n.textNode+=s):(n.state=I.OPEN_WAKA,n.startTagPosition=n.position);continue;case I.SCRIPT:"<"===s?n.state=I.SCRIPT_ENDING:n.script+=s;continue;case I.SCRIPT_ENDING:"/"===s?n.state=I.CLOSE_TAG:(n.script+="<"+s,n.state=I.SCRIPT);continue;case I.OPEN_WAKA:if("!"===s)n.state=I.SGML_DECL,n.sgmlDecl="";else if(m(s));else if(b(d,s))n.state=I.OPEN_TAG,n.tagName=s;else if("/"===s)n.state=I.CLOSE_TAG,n.tagName="";else if("?"===s)n.state=I.PROC_INST,n.procInstName=n.procInstBody="";else{if(P(n,"Unencoded <"),n.startTagPosition+1<n.position){var u=n.position-n.startTagPosition;s=new Array(u).join(" ")+s}n.textNode+="<"+s,n.state=I.TEXT}continue;case I.SGML_DECL:(n.sgmlDecl+s).toUpperCase()===a?(C(n,"onopencdata"),n.state=I.CDATA,n.sgmlDecl="",n.cdata=""):n.sgmlDecl+s==="--"?(n.state=I.COMMENT,n.comment="",n.sgmlDecl=""):(n.sgmlDecl+s).toUpperCase()===c?(n.state=I.DOCTYPE,(n.doctype||n.sawRoot)&&P(n,"Inappropriately located doctype declaration"),n.doctype="",n.sgmlDecl=""):">"===s?(C(n,"onsgmldeclaration",n.sgmlDecl),n.sgmlDecl="",n.state=I.TEXT):y(s)?(n.state=I.SGML_DECL_QUOTED,n.sgmlDecl+=s):n.sgmlDecl+=s;continue;case I.SGML_DECL_QUOTED:s===n.q&&(n.state=I.SGML_DECL,n.q=""),n.sgmlDecl+=s;continue;case I.DOCTYPE:">"===s?(n.state=I.TEXT,C(n,"ondoctype",n.doctype),n.doctype=!0):(n.doctype+=s,"["===s?n.state=I.DOCTYPE_DTD:y(s)&&(n.state=I.DOCTYPE_QUOTED,n.q=s));continue;case I.DOCTYPE_QUOTED:n.doctype+=s,s===n.q&&(n.q="",n.state=I.DOCTYPE);continue;case I.DOCTYPE_DTD:n.doctype+=s,"]"===s?n.state=I.DOCTYPE:y(s)&&(n.state=I.DOCTYPE_DTD_QUOTED,n.q=s);continue;case I.DOCTYPE_DTD_QUOTED:n.doctype+=s,s===n.q&&(n.state=I.DOCTYPE_DTD,n.q="");continue;case I.COMMENT:"-"===s?n.state=I.COMMENT_ENDING:n.comment+=s;continue;case I.COMMENT_ENDING:"-"===s?(n.state=I.COMMENT_ENDED,n.comment=D(n.opt,n.comment),n.comment&&C(n,"oncomment",n.comment),n.comment=""):(n.comment+="-"+s,n.state=I.COMMENT);continue;case I.COMMENT_ENDED:">"!==s?(P(n,"Malformed comment"),n.comment+="--"+s,n.state=I.COMMENT):n.state=I.TEXT;continue;case I.CDATA:"]"===s?n.state=I.CDATA_ENDING:n.cdata+=s;continue;case I.CDATA_ENDING:"]"===s?n.state=I.CDATA_ENDING_2:(n.cdata+="]"+s,n.state=I.CDATA);continue;case I.CDATA_ENDING_2:">"===s?(n.cdata&&C(n,"oncdata",n.cdata),C(n,"onclosecdata"),n.cdata="",n.state=I.TEXT):"]"===s?n.cdata+="]":(n.cdata+="]]"+s,n.state=I.CDATA);continue;case I.PROC_INST:"?"===s?n.state=I.PROC_INST_ENDING:m(s)?n.state=I.PROC_INST_BODY:n.procInstName+=s;continue;case I.PROC_INST_BODY:if(!n.procInstBody&&m(s))continue;"?"===s?n.state=I.PROC_INST_ENDING:n.procInstBody+=s;continue;case I.PROC_INST_ENDING:">"===s?(C(n,"onprocessinginstruction",{name:n.procInstName,body:n.procInstBody}),n.procInstName=n.procInstBody="",n.state=I.TEXT):(n.procInstBody+="?"+s,n.state=I.PROC_INST_BODY);continue;case I.OPEN_TAG:b(h,s)?n.tagName+=s:(k(n),">"===s?U(n):"/"===s?n.state=I.OPEN_TAG_SLASH:(m(s)||P(n,"Invalid character in tag name"),n.state=I.ATTRIB));continue;case I.OPEN_TAG_SLASH:">"===s?(U(n,!0),F(n)):(P(n,"Forward-slash in opening tag not followed by >"),n.state=I.ATTRIB);continue;case I.ATTRIB:if(m(s))continue;">"===s?U(n):"/"===s?n.state=I.OPEN_TAG_SLASH:b(d,s)?(n.attribName=s,n.attribValue="",n.state=I.ATTRIB_NAME):P(n,"Invalid attribute name");continue;case I.ATTRIB_NAME:"="===s?n.state=I.ATTRIB_VALUE:">"===s?(P(n,"Attribute without value"),n.attribValue=n.attribName,B(n),U(n)):m(s)?n.state=I.ATTRIB_NAME_SAW_WHITE:b(h,s)?n.attribName+=s:P(n,"Invalid attribute name");continue;case I.ATTRIB_NAME_SAW_WHITE:if("="===s)n.state=I.ATTRIB_VALUE;else{if(m(s))continue;P(n,"Attribute without value"),n.tag.attributes[n.attribName]="",n.attribValue="",C(n,"onattribute",{name:n.attribName,value:""}),n.attribName="",">"===s?U(n):b(d,s)?(n.attribName=s,n.state=I.ATTRIB_NAME):(P(n,"Invalid attribute name"),n.state=I.ATTRIB)}continue;case I.ATTRIB_VALUE:if(m(s))continue;y(s)?(n.q=s,n.state=I.ATTRIB_VALUE_QUOTED):(P(n,"Unquoted attribute value"),n.state=I.ATTRIB_VALUE_UNQUOTED,n.attribValue=s);continue;case I.ATTRIB_VALUE_QUOTED:if(s!==n.q){"&"===s?n.state=I.ATTRIB_VALUE_ENTITY_Q:n.attribValue+=s;continue}B(n),n.q="",n.state=I.ATTRIB_VALUE_CLOSED;continue;case I.ATTRIB_VALUE_CLOSED:m(s)?n.state=I.ATTRIB:">"===s?U(n):"/"===s?n.state=I.OPEN_TAG_SLASH:b(d,s)?(P(n,"No whitespace between attributes"),n.attribName=s,n.attribValue="",n.state=I.ATTRIB_NAME):P(n,"Invalid attribute name");continue;case I.ATTRIB_VALUE_UNQUOTED:if(!_(s)){"&"===s?n.state=I.ATTRIB_VALUE_ENTITY_U:n.attribValue+=s;continue}B(n),">"===s?U(n):n.state=I.ATTRIB;continue;case I.CLOSE_TAG:if(n.tagName)">"===s?F(n):b(h,s)?n.tagName+=s:n.script?(n.script+="</"+n.tagName,n.tagName="",n.state=I.SCRIPT):(m(s)||P(n,"Invalid tagname in closing tag"),n.state=I.CLOSE_TAG_SAW_WHITE);else{if(m(s))continue;v(d,s)?n.script?(n.script+="</"+s,n.state=I.SCRIPT):P(n,"Invalid tagname in closing tag."):n.tagName=s}continue;case I.CLOSE_TAG_SAW_WHITE:if(m(s))continue;">"===s?F(n):P(n,"Invalid characters in closing tag");continue;case I.TEXT_ENTITY:case I.ATTRIB_VALUE_ENTITY_Q:case I.ATTRIB_VALUE_ENTITY_U:var l,p;switch(n.state){case I.TEXT_ENTITY:l=I.TEXT,p="textNode";break;case I.ATTRIB_VALUE_ENTITY_Q:l=I.ATTRIB_VALUE_QUOTED,p="attribValue";break;case I.ATTRIB_VALUE_ENTITY_U:l=I.ATTRIB_VALUE_UNQUOTED,p="attribValue"}";"===s?(n[p]+=L(n),n.entity="",n.state=l):b(n.entity.length?g:f,s)?n.entity+=s:(P(n,"Invalid character in entity name"),n[p]+="&"+n.entity+s,n.entity="",n.state=l);continue;default:throw new Error(n,"Unknown state: "+n.state)}return n.position>=n.bufferCheckPosition&&function(t){for(var n=Math.max(e.MAX_BUFFER_LENGTH,10),i=0,s=0,o=r.length;s<o;s++){var a=t[r[s]].length;if(a>n)switch(r[s]){case"textNode":N(t);break;case"cdata":C(t,"oncdata",t.cdata),t.cdata="";break;case"script":C(t,"onscript",t.script),t.script="";break;default:A(t,"Max buffer length exceeded: "+r[s])}i=Math.max(i,a)}var c=e.MAX_BUFFER_LENGTH-i;t.bufferCheckPosition=c+t.position}(n),n},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var e;N(e=this),""!==e.cdata&&(C(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(C(e,"onscript",e.script),e.script="")}};try{t=n(2781).Stream}catch(e){t=function(){}}var s=e.EVENTS.filter((function(e){return"error"!==e&&"end"!==e}));function o(e,n){if(!(this instanceof o))return new o(e,n);t.apply(this),this._parser=new i(e,n),this.writable=!0,this.readable=!0;var r=this;this._parser.onend=function(){r.emit("end")},this._parser.onerror=function(e){r.emit("error",e),r._parser.error=null},this._decoder=null,s.forEach((function(e){Object.defineProperty(r,"on"+e,{get:function(){return r._parser["on"+e]},set:function(t){if(!t)return r.removeAllListeners(e),r._parser["on"+e]=t,t;r.on(e,t)},enumerable:!0,configurable:!1})}))}o.prototype=Object.create(t.prototype,{constructor:{value:o}}),o.prototype.write=function(e){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(e)){if(!this._decoder){var t=n(1576).StringDecoder;this._decoder=new t("utf8")}e=this._decoder.write(e)}return this._parser.write(e.toString()),this.emit("data",e),!0},o.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},o.prototype.on=function(e,n){var r=this;return r._parser["on"+e]||-1===s.indexOf(e)||(r._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),r.emit.apply(r,t)}),t.prototype.on.call(r,e,n)};var a="[CDATA[",c="DOCTYPE",u="http://www.w3.org/XML/1998/namespace",l="http://www.w3.org/2000/xmlns/",p={xml:u,xmlns:l},d=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,h=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,f=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,g=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function m(e){return" "===e||"\n"===e||"\r"===e||"\t"===e}function y(e){return'"'===e||"'"===e}function _(e){return">"===e||m(e)}function b(e,t){return e.test(t)}function v(e,t){return!b(e,t)}var E,S,w,I=0;for(var T in e.STATE={BEGIN:I++,BEGIN_WHITESPACE:I++,TEXT:I++,TEXT_ENTITY:I++,OPEN_WAKA:I++,SGML_DECL:I++,SGML_DECL_QUOTED:I++,DOCTYPE:I++,DOCTYPE_QUOTED:I++,DOCTYPE_DTD:I++,DOCTYPE_DTD_QUOTED:I++,COMMENT_STARTING:I++,COMMENT:I++,COMMENT_ENDING:I++,COMMENT_ENDED:I++,CDATA:I++,CDATA_ENDING:I++,CDATA_ENDING_2:I++,PROC_INST:I++,PROC_INST_BODY:I++,PROC_INST_ENDING:I++,OPEN_TAG:I++,OPEN_TAG_SLASH:I++,ATTRIB:I++,ATTRIB_NAME:I++,ATTRIB_NAME_SAW_WHITE:I++,ATTRIB_VALUE:I++,ATTRIB_VALUE_QUOTED:I++,ATTRIB_VALUE_CLOSED:I++,ATTRIB_VALUE_UNQUOTED:I++,ATTRIB_VALUE_ENTITY_Q:I++,ATTRIB_VALUE_ENTITY_U:I++,CLOSE_TAG:I++,CLOSE_TAG_SAW_WHITE:I++,SCRIPT:I++,SCRIPT_ENDING:I++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach((function(t){var n=e.ENTITIES[t],r="number"==typeof n?String.fromCharCode(n):n;e.ENTITIES[t]=r})),e.STATE)e.STATE[e.STATE[T]]=T;function O(e,t,n){e[t]&&e[t](n)}function C(e,t,n){e.textNode&&N(e),O(e,t,n)}function N(e){e.textNode=D(e.opt,e.textNode),e.textNode&&O(e,"ontext",e.textNode),e.textNode=""}function D(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function A(e,t){return N(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,O(e,"onerror",t),e}function x(e){return e.sawRoot&&!e.closedRoot&&P(e,"Unclosed root tag"),e.state!==I.BEGIN&&e.state!==I.BEGIN_WHITESPACE&&e.state!==I.TEXT&&A(e,"Unexpected end"),N(e),e.c="",e.closed=!0,O(e,"onend"),i.call(e,e.strict,e.opt),e}function P(e,t){if("object"!=typeof e||!(e instanceof i))throw new Error("bad call to strictFail");e.strict&&A(e,t)}function k(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,n=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(n.ns=t.ns),e.attribList.length=0,C(e,"onopentagstart",n)}function R(e,t){var n=e.indexOf(":")<0?["",e]:e.split(":"),r=n[0],i=n[1];return t&&"xmlns"===e&&(r="xmlns",i=""),{prefix:r,local:i}}function B(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName))e.attribName=e.attribValue="";else{if(e.opt.xmlns){var t=R(e.attribName,!0),n=t.prefix,r=t.local;if("xmlns"===n)if("xml"===r&&e.attribValue!==u)P(e,"xml: prefix must be bound to "+u+"\nActual: "+e.attribValue);else if("xmlns"===r&&e.attribValue!==l)P(e,"xmlns: prefix must be bound to "+l+"\nActual: "+e.attribValue);else{var i=e.tag,s=e.tags[e.tags.length-1]||e;i.ns===s.ns&&(i.ns=Object.create(s.ns)),i.ns[r]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,C(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}}function U(e,t){if(e.opt.xmlns){var n=e.tag,r=R(e.tagName);n.prefix=r.prefix,n.local=r.local,n.uri=n.ns[r.prefix]||"",n.prefix&&!n.uri&&(P(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),n.uri=r.prefix);var i=e.tags[e.tags.length-1]||e;n.ns&&i.ns!==n.ns&&Object.keys(n.ns).forEach((function(t){C(e,"onopennamespace",{prefix:t,uri:n.ns[t]})}));for(var s=0,o=e.attribList.length;s<o;s++){var a=e.attribList[s],c=a[0],u=a[1],l=R(c,!0),p=l.prefix,d=l.local,h=""===p?"":n.ns[p]||"",f={name:c,value:u,prefix:p,local:d,uri:h};p&&"xmlns"!==p&&!h&&(P(e,"Unbound namespace prefix: "+JSON.stringify(p)),f.uri=p),e.tag.attributes[c]=f,C(e,"onattribute",f)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),C(e,"onopentag",e.tag),t||(e.noscript||"script"!==e.tagName.toLowerCase()?e.state=I.TEXT:e.state=I.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function F(e){if(!e.tagName)return P(e,"Weird empty close tag."),e.textNode+="</>",void(e.state=I.TEXT);if(e.script){if("script"!==e.tagName)return e.script+="</"+e.tagName+">",e.tagName="",void(e.state=I.SCRIPT);C(e,"onscript",e.script),e.script=""}var t=e.tags.length,n=e.tagName;e.strict||(n=n[e.looseCase]());for(var r=n;t--&&e.tags[t].name!==r;)P(e,"Unexpected close tag");if(t<0)return P(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",void(e.state=I.TEXT);e.tagName=n;for(var i=e.tags.length;i-- >t;){var s=e.tag=e.tags.pop();e.tagName=e.tag.name,C(e,"onclosetag",e.tagName);var o={};for(var a in s.ns)o[a]=s.ns[a];var c=e.tags[e.tags.length-1]||e;e.opt.xmlns&&s.ns!==c.ns&&Object.keys(s.ns).forEach((function(t){var n=s.ns[t];C(e,"onclosenamespace",{prefix:t,uri:n})}))}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=I.TEXT}function L(e){var t,n=e.entity,r=n.toLowerCase(),i="";return e.ENTITIES[n]?e.ENTITIES[n]:e.ENTITIES[r]?e.ENTITIES[r]:("#"===(n=r).charAt(0)&&("x"===n.charAt(1)?(n=n.slice(2),i=(t=parseInt(n,16)).toString(16)):(n=n.slice(1),i=(t=parseInt(n,10)).toString(10))),n=n.replace(/^0+/,""),isNaN(t)||i.toLowerCase()!==n?(P(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(t))}function M(e,t){"<"===t?(e.state=I.OPEN_WAKA,e.startTagPosition=e.position):m(t)||(P(e,"Non-whitespace before first tag."),e.textNode=t,e.state=I.TEXT)}function G(e,t){var n="";return t<e.length&&(n=e.charAt(t)),n}I=e.STATE,String.fromCodePoint||(E=String.fromCharCode,S=Math.floor,w=function(){var e,t,n=[],r=-1,i=arguments.length;if(!i)return"";for(var s="";++r<i;){var o=Number(arguments[r]);if(!isFinite(o)||o<0||o>1114111||S(o)!==o)throw RangeError("Invalid code point: "+o);o<=65535?n.push(o):(e=55296+((o-=65536)>>10),t=o%1024+56320,n.push(e,t)),(r+1===i||n.length>16384)&&(s+=E.apply(null,n),n.length=0)}return s},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:w,configurable:!0,writable:!0}):String.fromCodePoint=w)}(t)},3717:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(4624);class i{constructor(e){if(this.length=0,this._encoding="utf8",this._writeOffset=0,this._readOffset=0,i.isSmartBufferOptions(e))if(e.encoding&&(r.checkEncoding(e.encoding),this._encoding=e.encoding),e.size){if(!(r.isFiniteInteger(e.size)&&e.size>0))throw new Error(r.ERRORS.INVALID_SMARTBUFFER_SIZE);this._buff=Buffer.allocUnsafe(e.size)}else if(e.buff){if(!Buffer.isBuffer(e.buff))throw new Error(r.ERRORS.INVALID_SMARTBUFFER_BUFFER);this._buff=e.buff,this.length=e.buff.length}else this._buff=Buffer.allocUnsafe(4096);else{if(void 0!==e)throw new Error(r.ERRORS.INVALID_SMARTBUFFER_OBJECT);this._buff=Buffer.allocUnsafe(4096)}}static fromSize(e,t){return new this({size:e,encoding:t})}static fromBuffer(e,t){return new this({buff:e,encoding:t})}static fromOptions(e){return new this(e)}static isSmartBufferOptions(e){const t=e;return t&&(void 0!==t.encoding||void 0!==t.size||void 0!==t.buff)}readInt8(e){return this._readNumberValue(Buffer.prototype.readInt8,1,e)}readInt16BE(e){return this._readNumberValue(Buffer.prototype.readInt16BE,2,e)}readInt16LE(e){return this._readNumberValue(Buffer.prototype.readInt16LE,2,e)}readInt32BE(e){return this._readNumberValue(Buffer.prototype.readInt32BE,4,e)}readInt32LE(e){return this._readNumberValue(Buffer.prototype.readInt32LE,4,e)}readBigInt64BE(e){return r.bigIntAndBufferInt64Check("readBigInt64BE"),this._readNumberValue(Buffer.prototype.readBigInt64BE,8,e)}readBigInt64LE(e){return r.bigIntAndBufferInt64Check("readBigInt64LE"),this._readNumberValue(Buffer.prototype.readBigInt64LE,8,e)}writeInt8(e,t){return this._writeNumberValue(Buffer.prototype.writeInt8,1,e,t),this}insertInt8(e,t){return this._insertNumberValue(Buffer.prototype.writeInt8,1,e,t)}writeInt16BE(e,t){return this._writeNumberValue(Buffer.prototype.writeInt16BE,2,e,t)}insertInt16BE(e,t){return this._insertNumberValue(Buffer.prototype.writeInt16BE,2,e,t)}writeInt16LE(e,t){return this._writeNumberValue(Buffer.prototype.writeInt16LE,2,e,t)}insertInt16LE(e,t){return this._insertNumberValue(Buffer.prototype.writeInt16LE,2,e,t)}writeInt32BE(e,t){return this._writeNumberValue(Buffer.prototype.writeInt32BE,4,e,t)}insertInt32BE(e,t){return this._insertNumberValue(Buffer.prototype.writeInt32BE,4,e,t)}writeInt32LE(e,t){return this._writeNumberValue(Buffer.prototype.writeInt32LE,4,e,t)}insertInt32LE(e,t){return this._insertNumberValue(Buffer.prototype.writeInt32LE,4,e,t)}writeBigInt64BE(e,t){return r.bigIntAndBufferInt64Check("writeBigInt64BE"),this._writeNumberValue(Buffer.prototype.writeBigInt64BE,8,e,t)}insertBigInt64BE(e,t){return r.bigIntAndBufferInt64Check("writeBigInt64BE"),this._insertNumberValue(Buffer.prototype.writeBigInt64BE,8,e,t)}writeBigInt64LE(e,t){return r.bigIntAndBufferInt64Check("writeBigInt64LE"),this._writeNumberValue(Buffer.prototype.writeBigInt64LE,8,e,t)}insertBigInt64LE(e,t){return r.bigIntAndBufferInt64Check("writeBigInt64LE"),this._insertNumberValue(Buffer.prototype.writeBigInt64LE,8,e,t)}readUInt8(e){return this._readNumberValue(Buffer.prototype.readUInt8,1,e)}readUInt16BE(e){return this._readNumberValue(Buffer.prototype.readUInt16BE,2,e)}readUInt16LE(e){return this._readNumberValue(Buffer.prototype.readUInt16LE,2,e)}readUInt32BE(e){return this._readNumberValue(Buffer.prototype.readUInt32BE,4,e)}readUInt32LE(e){return this._readNumberValue(Buffer.prototype.readUInt32LE,4,e)}readBigUInt64BE(e){return r.bigIntAndBufferInt64Check("readBigUInt64BE"),this._readNumberValue(Buffer.prototype.readBigUInt64BE,8,e)}readBigUInt64LE(e){return r.bigIntAndBufferInt64Check("readBigUInt64LE"),this._readNumberValue(Buffer.prototype.readBigUInt64LE,8,e)}writeUInt8(e,t){return this._writeNumberValue(Buffer.prototype.writeUInt8,1,e,t)}insertUInt8(e,t){return this._insertNumberValue(Buffer.prototype.writeUInt8,1,e,t)}writeUInt16BE(e,t){return this._writeNumberValue(Buffer.prototype.writeUInt16BE,2,e,t)}insertUInt16BE(e,t){return this._insertNumberValue(Buffer.prototype.writeUInt16BE,2,e,t)}writeUInt16LE(e,t){return this._writeNumberValue(Buffer.prototype.writeUInt16LE,2,e,t)}insertUInt16LE(e,t){return this._insertNumberValue(Buffer.prototype.writeUInt16LE,2,e,t)}writeUInt32BE(e,t){return this._writeNumberValue(Buffer.prototype.writeUInt32BE,4,e,t)}insertUInt32BE(e,t){return this._insertNumberValue(Buffer.prototype.writeUInt32BE,4,e,t)}writeUInt32LE(e,t){return this._writeNumberValue(Buffer.prototype.writeUInt32LE,4,e,t)}insertUInt32LE(e,t){return this._insertNumberValue(Buffer.prototype.writeUInt32LE,4,e,t)}writeBigUInt64BE(e,t){return r.bigIntAndBufferInt64Check("writeBigUInt64BE"),this._writeNumberValue(Buffer.prototype.writeBigUInt64BE,8,e,t)}insertBigUInt64BE(e,t){return r.bigIntAndBufferInt64Check("writeBigUInt64BE"),this._insertNumberValue(Buffer.prototype.writeBigUInt64BE,8,e,t)}writeBigUInt64LE(e,t){return r.bigIntAndBufferInt64Check("writeBigUInt64LE"),this._writeNumberValue(Buffer.prototype.writeBigUInt64LE,8,e,t)}insertBigUInt64LE(e,t){return r.bigIntAndBufferInt64Check("writeBigUInt64LE"),this._insertNumberValue(Buffer.prototype.writeBigUInt64LE,8,e,t)}readFloatBE(e){return this._readNumberValue(Buffer.prototype.readFloatBE,4,e)}readFloatLE(e){return this._readNumberValue(Buffer.prototype.readFloatLE,4,e)}writeFloatBE(e,t){return this._writeNumberValue(Buffer.prototype.writeFloatBE,4,e,t)}insertFloatBE(e,t){return this._insertNumberValue(Buffer.prototype.writeFloatBE,4,e,t)}writeFloatLE(e,t){return this._writeNumberValue(Buffer.prototype.writeFloatLE,4,e,t)}insertFloatLE(e,t){return this._insertNumberValue(Buffer.prototype.writeFloatLE,4,e,t)}readDoubleBE(e){return this._readNumberValue(Buffer.prototype.readDoubleBE,8,e)}readDoubleLE(e){return this._readNumberValue(Buffer.prototype.readDoubleLE,8,e)}writeDoubleBE(e,t){return this._writeNumberValue(Buffer.prototype.writeDoubleBE,8,e,t)}insertDoubleBE(e,t){return this._insertNumberValue(Buffer.prototype.writeDoubleBE,8,e,t)}writeDoubleLE(e,t){return this._writeNumberValue(Buffer.prototype.writeDoubleLE,8,e,t)}insertDoubleLE(e,t){return this._insertNumberValue(Buffer.prototype.writeDoubleLE,8,e,t)}readString(e,t){let n;"number"==typeof e?(r.checkLengthValue(e),n=Math.min(e,this.length-this._readOffset)):(t=e,n=this.length-this._readOffset),void 0!==t&&r.checkEncoding(t);const i=this._buff.slice(this._readOffset,this._readOffset+n).toString(t||this._encoding);return this._readOffset+=n,i}insertString(e,t,n){return r.checkOffsetValue(t),this._handleString(e,!0,t,n)}writeString(e,t,n){return this._handleString(e,!1,t,n)}readStringNT(e){void 0!==e&&r.checkEncoding(e);let t=this.length;for(let e=this._readOffset;e<this.length;e++)if(0===this._buff[e]){t=e;break}const n=this._buff.slice(this._readOffset,t);return this._readOffset=t+1,n.toString(e||this._encoding)}insertStringNT(e,t,n){return r.checkOffsetValue(t),this.insertString(e,t,n),this.insertUInt8(0,t+e.length),this}writeStringNT(e,t,n){return this.writeString(e,t,n),this.writeUInt8(0,"number"==typeof t?t+e.length:this.writeOffset),this}readBuffer(e){void 0!==e&&r.checkLengthValue(e);const t="number"==typeof e?e:this.length,n=Math.min(this.length,this._readOffset+t),i=this._buff.slice(this._readOffset,n);return this._readOffset=n,i}insertBuffer(e,t){return r.checkOffsetValue(t),this._handleBuffer(e,!0,t)}writeBuffer(e,t){return this._handleBuffer(e,!1,t)}readBufferNT(){let e=this.length;for(let t=this._readOffset;t<this.length;t++)if(0===this._buff[t]){e=t;break}const t=this._buff.slice(this._readOffset,e);return this._readOffset=e+1,t}insertBufferNT(e,t){return r.checkOffsetValue(t),this.insertBuffer(e,t),this.insertUInt8(0,t+e.length),this}writeBufferNT(e,t){return void 0!==t&&r.checkOffsetValue(t),this.writeBuffer(e,t),this.writeUInt8(0,"number"==typeof t?t+e.length:this._writeOffset),this}clear(){return this._writeOffset=0,this._readOffset=0,this.length=0,this}remaining(){return this.length-this._readOffset}get readOffset(){return this._readOffset}set readOffset(e){r.checkOffsetValue(e),r.checkTargetOffset(e,this),this._readOffset=e}get writeOffset(){return this._writeOffset}set writeOffset(e){r.checkOffsetValue(e),r.checkTargetOffset(e,this),this._writeOffset=e}get encoding(){return this._encoding}set encoding(e){r.checkEncoding(e),this._encoding=e}get internalBuffer(){return this._buff}toBuffer(){return this._buff.slice(0,this.length)}toString(e){const t="string"==typeof e?e:this._encoding;return r.checkEncoding(t),this._buff.toString(t,0,this.length)}destroy(){return this.clear(),this}_handleString(e,t,n,i){let s=this._writeOffset,o=this._encoding;"number"==typeof n?s=n:"string"==typeof n&&(r.checkEncoding(n),o=n),"string"==typeof i&&(r.checkEncoding(i),o=i);const a=Buffer.byteLength(e,o);return t?this.ensureInsertable(a,s):this._ensureWriteable(a,s),this._buff.write(e,s,a,o),t?this._writeOffset+=a:"number"==typeof n?this._writeOffset=Math.max(this._writeOffset,s+a):this._writeOffset+=a,this}_handleBuffer(e,t,n){const r="number"==typeof n?n:this._writeOffset;return t?this.ensureInsertable(e.length,r):this._ensureWriteable(e.length,r),e.copy(this._buff,r),t?this._writeOffset+=e.length:"number"==typeof n?this._writeOffset=Math.max(this._writeOffset,r+e.length):this._writeOffset+=e.length,this}ensureReadable(e,t){let n=this._readOffset;if(void 0!==t&&(r.checkOffsetValue(t),n=t),n<0||n+e>this.length)throw new Error(r.ERRORS.INVALID_READ_BEYOND_BOUNDS)}ensureInsertable(e,t){r.checkOffsetValue(t),this._ensureCapacity(this.length+e),t<this.length&&this._buff.copy(this._buff,t+e,t,this._buff.length),t+e>this.length?this.length=t+e:this.length+=e}_ensureWriteable(e,t){const n="number"==typeof t?t:this._writeOffset;this._ensureCapacity(n+e),n+e>this.length&&(this.length=n+e)}_ensureCapacity(e){const t=this._buff.length;if(e>t){let n=this._buff,r=3*t/2+1;r<e&&(r=e),this._buff=Buffer.allocUnsafe(r),n.copy(this._buff,0,0,t)}}_readNumberValue(e,t,n){this.ensureReadable(t,n);const r=e.call(this._buff,"number"==typeof n?n:this._readOffset);return void 0===n&&(this._readOffset+=t),r}_insertNumberValue(e,t,n,i){return r.checkOffsetValue(i),this.ensureInsertable(t,i),e.call(this._buff,n,i),this._writeOffset+=t,this}_writeNumberValue(e,t,n,i){if("number"==typeof i){if(i<0)throw new Error(r.ERRORS.INVALID_WRITE_BEYOND_BOUNDS);r.checkOffsetValue(i)}const s="number"==typeof i?i:this._writeOffset;return this._ensureWriteable(t,s),e.call(this._buff,n,s),"number"==typeof i?this._writeOffset=Math.max(this._writeOffset,s+t):this._writeOffset+=t,this}}t.SmartBuffer=i},4624:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(8709),i={INVALID_ENCODING:"Invalid encoding provided. Please specify a valid encoding the internal Node.js Buffer supports.",INVALID_SMARTBUFFER_SIZE:"Invalid size provided. Size must be a valid integer greater than zero.",INVALID_SMARTBUFFER_BUFFER:"Invalid Buffer provided in SmartBufferOptions.",INVALID_SMARTBUFFER_OBJECT:"Invalid SmartBufferOptions object supplied to SmartBuffer constructor or factory methods.",INVALID_OFFSET:"An invalid offset value was provided.",INVALID_OFFSET_NON_NUMBER:"An invalid offset value was provided. A numeric value is required.",INVALID_LENGTH:"An invalid length value was provided.",INVALID_LENGTH_NON_NUMBER:"An invalid length value was provived. A numeric value is required.",INVALID_TARGET_OFFSET:"Target offset is beyond the bounds of the internal SmartBuffer data.",INVALID_TARGET_LENGTH:"Specified length value moves cursor beyong the bounds of the internal SmartBuffer data.",INVALID_READ_BEYOND_BOUNDS:"Attempted to read beyond the bounds of the managed data.",INVALID_WRITE_BEYOND_BOUNDS:"Attempted to write beyond the bounds of the managed data."};function s(e){return"number"==typeof e&&isFinite(e)&&function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}(e)}function o(e,t){if("number"!=typeof e)throw new Error(t?i.INVALID_OFFSET_NON_NUMBER:i.INVALID_LENGTH_NON_NUMBER);if(!s(e)||e<0)throw new Error(t?i.INVALID_OFFSET:i.INVALID_LENGTH)}t.ERRORS=i,t.checkEncoding=function(e){if(!r.Buffer.isEncoding(e))throw new Error(i.INVALID_ENCODING)},t.isFiniteInteger=s,t.checkLengthValue=function(e){o(e,!1)},t.checkOffsetValue=function(e){o(e,!0)},t.checkTargetOffset=function(e,t){if(e<0||e>t.length)throw new Error(i.INVALID_TARGET_OFFSET)},t.bigIntAndBufferInt64Check=function(e){if("undefined"==typeof BigInt)throw new Error("Platform does not support JS BigInt type.");if(void 0===r.Buffer.prototype[e])throw new Error(`Platform does not support Buffer.prototype.${e}.`)}},2130:(e,t,n)=>{"use strict";const r=n(2037),i=n(6224),s=n(6560),{env:o}=process;let a;function c(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function u(e,t){if(0===a)return 0;if(s("color=16m")||s("color=full")||s("color=truecolor"))return 3;if(s("color=256"))return 2;if(e&&!t&&void 0===a)return 0;const n=a||0;if("dumb"===o.TERM)return n;if("win32"===process.platform){const e=r.release().split(".");return Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in o)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some((e=>e in o))||"codeship"===o.CI_NAME?1:n;if("TEAMCITY_VERSION"in o)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(o.TEAMCITY_VERSION)?1:0;if("truecolor"===o.COLORTERM)return 3;if("TERM_PROGRAM"in o){const e=parseInt((o.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(o.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(o.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(o.TERM)||"COLORTERM"in o?1:n}s("no-color")||s("no-colors")||s("color=false")||s("color=never")?a=0:(s("color")||s("colors")||s("color=true")||s("color=always"))&&(a=1),"FORCE_COLOR"in o&&(a="true"===o.FORCE_COLOR?1:"false"===o.FORCE_COLOR?0:0===o.FORCE_COLOR.length?1:Math.min(parseInt(o.FORCE_COLOR,10),3)),e.exports={supportsColor:function(e){return c(u(e,e&&e.isTTY))},stdout:c(u(!0,i.isatty(1))),stderr:c(u(!0,i.isatty(2)))}},306:function(e,t){(function(){"use strict";t.stripBOM=function(e){return"\ufeff"===e[0]?e.substring(1):e}}).call(this)},4096:function(e,t,n){(function(){"use strict";var e,r,i,s,o,a={}.hasOwnProperty;e=n(5532),r=n(8381).defaults,s=function(e){return"string"==typeof e&&(e.indexOf("&")>=0||e.indexOf(">")>=0||e.indexOf("<")>=0)},o=function(e){return"<![CDATA["+i(e)+"]]>"},i=function(e){return e.replace("]]>","]]]]><![CDATA[>")},t.Builder=function(){function t(e){var t,n,i;for(t in this.options={},n=r[.2])a.call(n,t)&&(i=n[t],this.options[t]=i);for(t in e)a.call(e,t)&&(i=e[t],this.options[t]=i)}return t.prototype.buildObject=function(t){var n,i,c,u,l,p;return n=this.options.attrkey,i=this.options.charkey,1===Object.keys(t).length&&this.options.rootName===r[.2].rootName?t=t[l=Object.keys(t)[0]]:l=this.options.rootName,p=this,c=function(e,t){var r,u,l,d,h,f;if("object"!=typeof t)p.options.cdata&&s(t)?e.raw(o(t)):e.txt(t);else if(Array.isArray(t)){for(d in t)if(a.call(t,d))for(h in u=t[d])l=u[h],e=c(e.ele(h),l).up()}else for(h in t)if(a.call(t,h))if(u=t[h],h===n){if("object"==typeof u)for(r in u)f=u[r],e=e.att(r,f)}else if(h===i)e=p.options.cdata&&s(u)?e.raw(o(u)):e.txt(u);else if(Array.isArray(u))for(d in u)a.call(u,d)&&(e="string"==typeof(l=u[d])?p.options.cdata&&s(l)?e.ele(h).raw(o(l)).up():e.ele(h,l).up():c(e.ele(h),l).up());else"object"==typeof u?e=c(e.ele(h),u).up():"string"==typeof u&&p.options.cdata&&s(u)?e=e.ele(h).raw(o(u)).up():(null==u&&(u=""),e=e.ele(h,u.toString()).up());return e},u=e.create(l,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),c(u,t).end(this.options.renderOpts)},t}()}).call(this)},8381:function(e,t){(function(){t.defaults={.1:{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},.2:{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:"\n"},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(this)},9082:function(e,t,n){(function(){"use strict";var e,r,i,s,o,a,c,u,l,p=function(e,t){return function(){return e.apply(t,arguments)}},d={}.hasOwnProperty;u=n(6099),i=n(2361),e=n(306),c=n(7526),l=n(9512).setImmediate,r=n(8381).defaults,s=function(e){return"object"==typeof e&&null!=e&&0===Object.keys(e).length},o=function(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e},a=function(e,t,n){var r,i;for(r=0,i=e.length;r<i;r++)t=(0,e[r])(t,n);return t},t.Parser=function(n){function i(e){var n,i,s;if(this.parseStringPromise=p(this.parseStringPromise,this),this.parseString=p(this.parseString,this),this.reset=p(this.reset,this),this.assignOrPush=p(this.assignOrPush,this),this.processAsync=p(this.processAsync,this),!(this instanceof t.Parser))return new t.Parser(e);for(n in this.options={},i=r[.2])d.call(i,n)&&(s=i[n],this.options[n]=s);for(n in e)d.call(e,n)&&(s=e[n],this.options[n]=s);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(c.normalize)),this.reset()}return function(e,t){for(var n in t)d.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(i,n),i.prototype.processAsync=function(){var e,t;try{return this.remaining.length<=this.options.chunkSize?(e=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(e),this.saxParser.close()):(e=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(e),l(this.processAsync))}catch(e){if(t=e,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(t)}},i.prototype.assignOrPush=function(e,t,n){if(o(t))return t in e?(e[t]instanceof Array||(e[t]=[e[t]]),e[t].push(n)):this.options.explicitArray?e[t]=[n]:e[t]=n},i.prototype.reset=function(){var e,t,n,r,i;return this.removeAllListeners(),this.saxParser=u.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=(i=this,function(e){if(i.saxParser.resume(),!i.saxParser.errThrown)return i.saxParser.errThrown=!0,i.emit("error",e)}),this.saxParser.onend=function(e){return function(){if(!e.saxParser.ended)return e.saxParser.ended=!0,e.emit("end",e.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,r=[],e=this.options.attrkey,t=this.options.charkey,this.saxParser.onopentag=function(n){return function(i){var s,c,u,l,p;if((u={})[t]="",!n.options.ignoreAttrs)for(s in p=i.attributes)d.call(p,s)&&(e in u||n.options.mergeAttrs||(u[e]={}),c=n.options.attrValueProcessors?a(n.options.attrValueProcessors,i.attributes[s],s):i.attributes[s],l=n.options.attrNameProcessors?a(n.options.attrNameProcessors,s):s,o(l)&&(n.options.mergeAttrs?n.assignOrPush(u,l,c):u[e][l]=c));return u["#name"]=n.options.tagNameProcessors?a(n.options.tagNameProcessors,i.name):i.name,n.options.xmlns&&(u[n.options.xmlnskey]={uri:i.uri,local:i.local}),r.push(u)}}(this),this.saxParser.onclosetag=function(e){return function(){var n,i,c,u,l,p,h,f,g,m;if(p=r.pop(),l=p["#name"],e.options.explicitChildren&&e.options.preserveChildrenOrder||delete p["#name"],!0===p.cdata&&(n=p.cdata,delete p.cdata),g=r[r.length-1],p[t].match(/^\s*$/)&&!n?(i=p[t],delete p[t]):(e.options.trim&&(p[t]=p[t].trim()),e.options.normalize&&(p[t]=p[t].replace(/\s{2,}/g," ").trim()),p[t]=e.options.valueProcessors?a(e.options.valueProcessors,p[t],l):p[t],1===Object.keys(p).length&&t in p&&!e.EXPLICIT_CHARKEY&&(p=p[t])),s(p)&&(p="function"==typeof e.options.emptyTag?e.options.emptyTag():""!==e.options.emptyTag?e.options.emptyTag:i),null!=e.options.validator&&(m="/"+function(){var e,t,n;for(n=[],e=0,t=r.length;e<t;e++)u=r[e],n.push(u["#name"]);return n}().concat(l).join("/"),function(){var t;try{return p=e.options.validator(m,g&&g[l],p)}catch(n){return t=n,e.emit("error",t)}}()),e.options.explicitChildren&&!e.options.mergeAttrs&&"object"==typeof p)if(e.options.preserveChildrenOrder){if(g){for(c in g[e.options.childkey]=g[e.options.childkey]||[],h={},p)d.call(p,c)&&o(c)&&(h[c]=p[c]);g[e.options.childkey].push(h),delete p["#name"],1===Object.keys(p).length&&t in p&&!e.EXPLICIT_CHARKEY&&(p=p[t])}}else u={},e.options.attrkey in p&&(u[e.options.attrkey]=p[e.options.attrkey],delete p[e.options.attrkey]),!e.options.charsAsChildren&&e.options.charkey in p&&(u[e.options.charkey]=p[e.options.charkey],delete p[e.options.charkey]),Object.getOwnPropertyNames(p).length>0&&(u[e.options.childkey]=p),p=u;return r.length>0?e.assignOrPush(g,l,p):(e.options.explicitRoot&&(f=p,(p={})[l]=f),e.resultObject=p,e.saxParser.ended=!0,e.emit("end",e.resultObject))}}(this),n=function(e){return function(n){var i,s;if(s=r[r.length-1])return s[t]+=n,e.options.explicitChildren&&e.options.preserveChildrenOrder&&e.options.charsAsChildren&&(e.options.includeWhiteChars||""!==n.replace(/\\n/g,"").trim())&&(s[e.options.childkey]=s[e.options.childkey]||[],(i={"#name":"__text__"})[t]=n,e.options.normalize&&(i[t]=i[t].replace(/\s{2,}/g," ").trim()),s[e.options.childkey].push(i)),s}}(this),this.saxParser.ontext=n,this.saxParser.oncdata=function(e){var t;if(t=n(e))return t.cdata=!0}},i.prototype.parseString=function(t,n){var r;null!=n&&"function"==typeof n&&(this.on("end",(function(e){return this.reset(),n(null,e)})),this.on("error",(function(e){return this.reset(),n(e)})));try{return""===(t=t.toString()).trim()?(this.emit("end",null),!0):(t=e.stripBOM(t),this.options.async?(this.remaining=t,l(this.processAsync),this.saxParser):this.saxParser.write(t).close())}catch(e){if(r=e,!this.saxParser.errThrown&&!this.saxParser.ended)return this.emit("error",r),this.saxParser.errThrown=!0;if(this.saxParser.ended)throw r}},i.prototype.parseStringPromise=function(e){return new Promise((t=this,function(n,r){return t.parseString(e,(function(e,t){return e?r(e):n(t)}))}));var t},i}(i),t.parseString=function(e,n,r){var i,s;return null!=r?("function"==typeof r&&(i=r),"object"==typeof n&&(s=n)):("function"==typeof n&&(i=n),s={}),new t.Parser(s).parseString(e,i)},t.parseStringPromise=function(e,n){var r;return"object"==typeof n&&(r=n),new t.Parser(r).parseStringPromise(e)}}).call(this)},7526:function(e,t){(function(){"use strict";var e;e=new RegExp(/(?!xmlns)^.*:/),t.normalize=function(e){return e.toLowerCase()},t.firstCharLowerCase=function(e){return e.charAt(0).toLowerCase()+e.slice(1)},t.stripPrefix=function(t){return t.replace(e,"")},t.parseNumbers=function(e){return isNaN(e)||(e=e%1==0?parseInt(e,10):parseFloat(e)),e},t.parseBooleans=function(e){return/^(?:true|false)$/i.test(e)&&(e="true"===e.toLowerCase()),e}}).call(this)},5055:function(e,t,n){(function(){"use strict";var e,r,i,s,o={}.hasOwnProperty;r=n(8381),e=n(4096),i=n(9082),s=n(7526),t.defaults=r.defaults,t.processors=s,t.ValidationError=function(e){function t(e){this.message=e}return function(e,t){for(var n in t)o.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(t,Error),t}(),t.Builder=e.Builder,t.Parser=i.Parser,t.parseString=i.parseString,t.parseStringPromise=i.parseStringPromise}).call(this)},7557:function(e){(function(){e.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(this)},9335:function(e){(function(){e.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(this)},8369:function(e){(function(){var t,n,r,i,s,o,a,c=[].slice,u={}.hasOwnProperty;t=function(){var e,t,n,r,i,o;if(o=arguments[0],i=2<=arguments.length?c.call(arguments,1):[],s(Object.assign))Object.assign.apply(null,arguments);else for(e=0,n=i.length;e<n;e++)if(null!=(r=i[e]))for(t in r)u.call(r,t)&&(o[t]=r[t]);return o},s=function(e){return!!e&&"[object Function]"===Object.prototype.toString.call(e)},o=function(e){var t;return!!e&&("function"==(t=typeof e)||"object"===t)},r=function(e){return s(Array.isArray)?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},i=function(e){var t;if(r(e))return!e.length;for(t in e)if(u.call(e,t))return!1;return!0},a=function(e){var t,n;return o(e)&&(n=Object.getPrototypeOf(e))&&(t=n.constructor)&&"function"==typeof t&&t instanceof t&&Function.prototype.toString.call(t)===Function.prototype.toString.call(Object)},n=function(e){return s(e.valueOf)?e.valueOf():e},e.exports.assign=t,e.exports.isFunction=s,e.exports.isObject=o,e.exports.isArray=r,e.exports.isEmpty=i,e.exports.isPlainObject=a,e.exports.getValue=n}).call(this)},594:function(e){(function(){e.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(this)},2750:function(e,t,n){(function(){var t;t=n(9335),n(2026),e.exports=function(){function e(e,n,r){if(this.parent=e,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),null==n)throw new Error("Missing attribute name. "+this.debugInfo(n));this.name=this.stringify.name(n),this.value=this.stringify.attValue(r),this.type=t.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(e.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(e.prototype,"textContent",{get:function(){return this.value},set:function(e){return this.value=e||""}}),Object.defineProperty(e.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(e.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(e.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(e.prototype,"specified",{get:function(){return!0}}),e.prototype.clone=function(){return Object.create(this)},e.prototype.toString=function(e){return this.options.writer.attribute(this,this.options.writer.filterOptions(e))},e.prototype.debugInfo=function(e){return null==(e=e||this.name)?"parent: <"+this.parent.name+">":"attribute: {"+e+"}, parent: <"+this.parent.name+">"},e.prototype.isEqualNode=function(e){return e.namespaceURI===this.namespaceURI&&e.prefix===this.prefix&&e.localName===this.localName&&e.value===this.value},e}()}).call(this)},6170:function(e,t,n){(function(){var t,r,i={}.hasOwnProperty;t=n(9335),r=n(6488),e.exports=function(e){function n(e,r){if(n.__super__.constructor.call(this,e),null==r)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=t.CData,this.value=this.stringify.cdata(r)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(n,e),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(e){return this.options.writer.cdata(this,this.options.writer.filterOptions(e))},n}(r)}).call(this)},6488:function(e,t,n){(function(){var t,r={}.hasOwnProperty;t=n(2026),e.exports=function(e){function t(e){t.__super__.constructor.call(this,e),this.value=""}return function(e,t){for(var n in t)r.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this.value},set:function(e){return this.value=e||""}}),Object.defineProperty(t.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(t.prototype,"textContent",{get:function(){return this.value},set:function(e){return this.value=e||""}}),t.prototype.clone=function(){return Object.create(this)},t.prototype.substringData=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.appendData=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.insertData=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.deleteData=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.replaceData=function(e,t,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.isEqualNode=function(e){return!!t.__super__.isEqualNode.apply(this,arguments).isEqualNode(e)&&e.data===this.data},t}(t)}).call(this)},2096:function(e,t,n){(function(){var t,r,i={}.hasOwnProperty;t=n(9335),r=n(6488),e.exports=function(e){function n(e,r){if(n.__super__.constructor.call(this,e),null==r)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=t.Comment,this.value=this.stringify.comment(r)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(n,e),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(e){return this.options.writer.comment(this,this.options.writer.filterOptions(e))},n}(r)}).call(this)},383:function(e,t,n){(function(){var t,r;t=n(3933),r=n(6210),e.exports=function(){function e(){this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new t,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=Object.create(this.defaultParams)}return Object.defineProperty(e.prototype,"parameterNames",{get:function(){return new r(Object.keys(this.defaultParams))}}),e.prototype.getParameter=function(e){return this.params.hasOwnProperty(e)?this.params[e]:null},e.prototype.canSetParameter=function(e,t){return!0},e.prototype.setParameter=function(e,t){return null!=t?this.params[e]=t:delete this.params[e]},e}()}).call(this)},3933:function(e){(function(){e.exports=function(){function e(){}return e.prototype.handleError=function(e){throw new Error(e)},e}()}).call(this)},1770:function(e){(function(){e.exports=function(){function e(){}return e.prototype.hasFeature=function(e,t){return!0},e.prototype.createDocumentType=function(e,t,n){throw new Error("This DOM method is not implemented.")},e.prototype.createDocument=function(e,t,n){throw new Error("This DOM method is not implemented.")},e.prototype.createHTMLDocument=function(e){throw new Error("This DOM method is not implemented.")},e.prototype.getFeature=function(e,t){throw new Error("This DOM method is not implemented.")},e}()}).call(this)},6210:function(e){(function(){e.exports=function(){function e(e){this.arr=e||[]}return Object.defineProperty(e.prototype,"length",{get:function(){return this.arr.length}}),e.prototype.item=function(e){return this.arr[e]||null},e.prototype.contains=function(e){return-1!==this.arr.indexOf(e)},e}()}).call(this)},1179:function(e,t,n){(function(){var t,r,i={}.hasOwnProperty;r=n(2026),t=n(9335),e.exports=function(e){function n(e,r,i,s,o,a){if(n.__super__.constructor.call(this,e),null==r)throw new Error("Missing DTD element name. "+this.debugInfo());if(null==i)throw new Error("Missing DTD attribute name. "+this.debugInfo(r));if(!s)throw new Error("Missing DTD attribute type. "+this.debugInfo(r));if(!o)throw new Error("Missing DTD attribute default. "+this.debugInfo(r));if(0!==o.indexOf("#")&&(o="#"+o),!o.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(r));if(a&&!o.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(r));this.elementName=this.stringify.name(r),this.type=t.AttributeDeclaration,this.attributeName=this.stringify.name(i),this.attributeType=this.stringify.dtdAttType(s),a&&(this.defaultValue=this.stringify.dtdAttDefault(a)),this.defaultValueType=o}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(n,e),n.prototype.toString=function(e){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(e))},n}(r)}).call(this)},6347:function(e,t,n){(function(){var t,r,i={}.hasOwnProperty;r=n(2026),t=n(9335),e.exports=function(e){function n(e,r,i){if(n.__super__.constructor.call(this,e),null==r)throw new Error("Missing DTD element name. "+this.debugInfo());i||(i="(#PCDATA)"),Array.isArray(i)&&(i="("+i.join(",")+")"),this.name=this.stringify.name(r),this.type=t.ElementDeclaration,this.value=this.stringify.dtdElementValue(i)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(n,e),n.prototype.toString=function(e){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(e))},n}(r)}).call(this)},9078:function(e,t,n){(function(){var t,r,i,s={}.hasOwnProperty;i=n(8369).isObject,r=n(2026),t=n(9335),e.exports=function(e){function n(e,r,s,o){if(n.__super__.constructor.call(this,e),null==s)throw new Error("Missing DTD entity name. "+this.debugInfo(s));if(null==o)throw new Error("Missing DTD entity value. "+this.debugInfo(s));if(this.pe=!!r,this.name=this.stringify.name(s),this.type=t.EntityDeclaration,i(o)){if(!o.pubID&&!o.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(s));if(o.pubID&&!o.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(s));if(this.internal=!1,null!=o.pubID&&(this.pubID=this.stringify.dtdPubID(o.pubID)),null!=o.sysID&&(this.sysID=this.stringify.dtdSysID(o.sysID)),null!=o.nData&&(this.nData=this.stringify.dtdNData(o.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(s))}else this.value=this.stringify.dtdEntityValue(o),this.internal=!0}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(n,e),Object.defineProperty(n.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(n.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(n.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(n.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(n.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(n.prototype,"xmlVersion",{get:function(){return null}}),n.prototype.toString=function(e){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(e))},n}(r)}).call(this)},4777:function(e,t,n){(function(){var t,r,i={}.hasOwnProperty;r=n(2026),t=n(9335),e.exports=function(e){function n(e,r,i){if(n.__super__.constructor.call(this,e),null==r)throw new Error("Missing DTD notation name. "+this.debugInfo(r));if(!i.pubID&&!i.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(r));this.name=this.stringify.name(r),this.type=t.NotationDeclaration,null!=i.pubID&&(this.pubID=this.stringify.dtdPubID(i.pubID)),null!=i.sysID&&(this.sysID=this.stringify.dtdSysID(i.sysID))}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(n,e),Object.defineProperty(n.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(n.prototype,"systemId",{get:function(){return this.sysID}}),n.prototype.toString=function(e){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(e))},n}(r)}).call(this)},9077:function(e,t,n){(function(){var t,r,i,s={}.hasOwnProperty;i=n(8369).isObject,r=n(2026),t=n(9335),e.exports=function(e){function n(e,r,s,o){var a;n.__super__.constructor.call(this,e),i(r)&&(r=(a=r).version,s=a.encoding,o=a.standalone),r||(r="1.0"),this.type=t.Declaration,this.version=this.stringify.xmlVersion(r),null!=s&&(this.encoding=this.stringify.xmlEncoding(s)),null!=o&&(this.standalone=this.stringify.xmlStandalone(o))}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(n,e),n.prototype.toString=function(e){return this.options.writer.declaration(this,this.options.writer.filterOptions(e))},n}(r)}).call(this)},6544:function(e,t,n){(function(){var t,r,i,s,o,a,c,u,l={}.hasOwnProperty;u=n(8369).isObject,c=n(2026),t=n(9335),r=n(1179),s=n(9078),i=n(6347),o=n(4777),a=n(663),e.exports=function(e){function n(e,r,i){var s,o,a,c,l,p;if(n.__super__.constructor.call(this,e),this.type=t.DocType,e.children)for(o=0,a=(c=e.children).length;o<a;o++)if((s=c[o]).type===t.Element){this.name=s.name;break}this.documentObject=e,u(r)&&(r=(l=r).pubID,i=l.sysID),null==i&&(i=(p=[r,i])[0],r=p[1]),null!=r&&(this.pubID=this.stringify.dtdPubID(r)),null!=i&&(this.sysID=this.stringify.dtdSysID(i))}return function(e,t){for(var n in t)l.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(n,e),Object.defineProperty(n.prototype,"entities",{get:function(){var e,n,r,i,s;for(i={},n=0,r=(s=this.children).length;n<r;n++)(e=s[n]).type!==t.EntityDeclaration||e.pe||(i[e.name]=e);return new a(i)}}),Object.defineProperty(n.prototype,"notations",{get:function(){var e,n,r,i,s;for(i={},n=0,r=(s=this.children).length;n<r;n++)(e=s[n]).type===t.NotationDeclaration&&(i[e.name]=e);return new a(i)}}),Object.defineProperty(n.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(n.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(n.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),n.prototype.element=function(e,t){var n;return n=new i(this,e,t),this.children.push(n),this},n.prototype.attList=function(e,t,n,i,s){var o;return o=new r(this,e,t,n,i,s),this.children.push(o),this},n.prototype.entity=function(e,t){var n;return n=new s(this,!1,e,t),this.children.push(n),this},n.prototype.pEntity=function(e,t){var n;return n=new s(this,!0,e,t),this.children.push(n),this},n.prototype.notation=function(e,t){var n;return n=new o(this,e,t),this.children.push(n),this},n.prototype.toString=function(e){return this.options.writer.docType(this,this.options.writer.filterOptions(e))},n.prototype.ele=function(e,t){return this.element(e,t)},n.prototype.att=function(e,t,n,r,i){return this.attList(e,t,n,r,i)},n.prototype.ent=function(e,t){return this.entity(e,t)},n.prototype.pent=function(e,t){return this.pEntity(e,t)},n.prototype.not=function(e,t){return this.notation(e,t)},n.prototype.up=function(){return this.root()||this.documentObject},n.prototype.isEqualNode=function(e){return!!n.__super__.isEqualNode.apply(this,arguments).isEqualNode(e)&&e.name===this.name&&e.publicId===this.publicId&&e.systemId===this.systemId},n}(c)}).call(this)},6934:function(e,t,n){(function(){var t,r,i,s,o,a,c,u={}.hasOwnProperty;c=n(8369).isPlainObject,i=n(1770),r=n(383),s=n(2026),t=n(9335),a=n(5549),o=n(6434),e.exports=function(e){function n(e){n.__super__.constructor.call(this,null),this.name="#document",this.type=t.Document,this.documentURI=null,this.domConfig=new r,e||(e={}),e.writer||(e.writer=new o),this.options=e,this.stringify=new a(e)}return function(e,t){for(var n in t)u.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(n,e),Object.defineProperty(n.prototype,"implementation",{value:new i}),Object.defineProperty(n.prototype,"doctype",{get:function(){var e,n,r,i;for(n=0,r=(i=this.children).length;n<r;n++)if((e=i[n]).type===t.DocType)return e;return null}}),Object.defineProperty(n.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(n.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(n.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(n.prototype,"xmlEncoding",{get:function(){return 0!==this.children.length&&this.children[0].type===t.Declaration?this.children[0].encoding:null}}),Object.defineProperty(n.prototype,"xmlStandalone",{get:function(){return 0!==this.children.length&&this.children[0].type===t.Declaration&&"yes"===this.children[0].standalone}}),Object.defineProperty(n.prototype,"xmlVersion",{get:function(){return 0!==this.children.length&&this.children[0].type===t.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(n.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(n.prototype,"origin",{get:function(){return null}}),Object.defineProperty(n.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(n.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(n.prototype,"contentType",{get:function(){return null}}),n.prototype.end=function(e){var t;return t={},e?c(e)&&(t=e,e=this.options.writer):e=this.options.writer,e.document(this,e.filterOptions(t))},n.prototype.toString=function(e){return this.options.writer.document(this,this.options.writer.filterOptions(e))},n.prototype.createElement=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createTextNode=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createComment=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createCDATASection=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createProcessingInstruction=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createAttribute=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createEntityReference=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getElementsByTagName=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.importNode=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createElementNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createAttributeNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getElementsByTagNameNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getElementById=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.adoptNode=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.renameNode=function(e,t,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getElementsByClassName=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createEvent=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createNodeIterator=function(e,t,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.createTreeWalker=function(e,t,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},n}(s)}).call(this)},9227:function(e,t,n){(function(){var t,r,i,s,o,a,c,u,l,p,d,h,f,g,m,y,_,b,v,E,S,w,I,T={}.hasOwnProperty;I=n(8369),S=I.isObject,E=I.isFunction,w=I.isPlainObject,v=I.getValue,t=n(9335),h=n(6934),f=n(2161),s=n(6170),o=n(2096),m=n(9406),b=n(3595),g=n(4981),p=n(9077),d=n(6544),a=n(1179),u=n(9078),c=n(6347),l=n(4777),i=n(2750),_=n(5549),y=n(6434),r=n(594),e.exports=function(){function e(e,n,r){var i;this.name="?xml",this.type=t.Document,e||(e={}),i={},e.writer?w(e.writer)&&(i=e.writer,e.writer=new y):e.writer=new y,this.options=e,this.writer=e.writer,this.writerOptions=this.writer.filterOptions(i),this.stringify=new _(e),this.onDataCallback=n||function(){},this.onEndCallback=r||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return e.prototype.createChildNode=function(e){var n,r,i,s,o,a,c,u;switch(e.type){case t.CData:this.cdata(e.value);break;case t.Comment:this.comment(e.value);break;case t.Element:for(r in i={},c=e.attribs)T.call(c,r)&&(n=c[r],i[r]=n.value);this.node(e.name,i);break;case t.Dummy:this.dummy();break;case t.Raw:this.raw(e.value);break;case t.Text:this.text(e.value);break;case t.ProcessingInstruction:this.instruction(e.target,e.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+e.constructor.name)}for(o=0,a=(u=e.children).length;o<a;o++)s=u[o],this.createChildNode(s),s.type===t.Element&&this.up();return this},e.prototype.dummy=function(){return this},e.prototype.node=function(e,t,n){var r;if(null==e)throw new Error("Missing node name.");if(this.root&&-1===this.currentLevel)throw new Error("Document can only have one root node. "+this.debugInfo(e));return this.openCurrent(),e=v(e),null==t&&(t={}),t=v(t),S(t)||(n=(r=[t,n])[0],t=r[1]),this.currentNode=new f(this,e,t),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,null!=n&&this.text(n),this},e.prototype.element=function(e,n,r){var i,s,o,a,c,u;if(this.currentNode&&this.currentNode.type===t.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(e)||S(e)||E(e))for(a=this.options.noValidation,this.options.noValidation=!0,(u=new h(this.options).element("TEMP_ROOT")).element(e),this.options.noValidation=a,s=0,o=(c=u.children).length;s<o;s++)i=c[s],this.createChildNode(i),i.type===t.Element&&this.up();else this.node(e,n,r);return this},e.prototype.attribute=function(e,t){var n,r;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(e));if(null!=e&&(e=v(e)),S(e))for(n in e)T.call(e,n)&&(r=e[n],this.attribute(n,r));else E(t)&&(t=t.apply()),this.options.keepNullAttributes&&null==t?this.currentNode.attribs[e]=new i(this,e,""):null!=t&&(this.currentNode.attribs[e]=new i(this,e,t));return this},e.prototype.text=function(e){var t;return this.openCurrent(),t=new b(this,e),this.onData(this.writer.text(t,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.cdata=function(e){var t;return this.openCurrent(),t=new s(this,e),this.onData(this.writer.cdata(t,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.comment=function(e){var t;return this.openCurrent(),t=new o(this,e),this.onData(this.writer.comment(t,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.raw=function(e){var t;return this.openCurrent(),t=new m(this,e),this.onData(this.writer.raw(t,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.instruction=function(e,t){var n,r,i,s,o;if(this.openCurrent(),null!=e&&(e=v(e)),null!=t&&(t=v(t)),Array.isArray(e))for(n=0,s=e.length;n<s;n++)r=e[n],this.instruction(r);else if(S(e))for(r in e)T.call(e,r)&&(i=e[r],this.instruction(r,i));else E(t)&&(t=t.apply()),o=new g(this,e,t),this.onData(this.writer.processingInstruction(o,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},e.prototype.declaration=function(e,t,n){var r;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return r=new p(this,e,t,n),this.onData(this.writer.declaration(r,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.doctype=function(e,t,n){if(this.openCurrent(),null==e)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new d(this,t,n),this.currentNode.rootNodeName=e,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},e.prototype.dtdElement=function(e,t){var n;return this.openCurrent(),n=new c(this,e,t),this.onData(this.writer.dtdElement(n,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.attList=function(e,t,n,r,i){var s;return this.openCurrent(),s=new a(this,e,t,n,r,i),this.onData(this.writer.dtdAttList(s,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.entity=function(e,t){var n;return this.openCurrent(),n=new u(this,!1,e,t),this.onData(this.writer.dtdEntity(n,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.pEntity=function(e,t){var n;return this.openCurrent(),n=new u(this,!0,e,t),this.onData(this.writer.dtdEntity(n,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.notation=function(e,t){var n;return this.openCurrent(),n=new l(this,e,t),this.onData(this.writer.dtdNotation(n,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},e.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},e.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},e.prototype.openNode=function(e){var n,i,s,o;if(!e.isOpen){if(this.root||0!==this.currentLevel||e.type!==t.Element||(this.root=e),i="",e.type===t.Element){for(s in this.writerOptions.state=r.OpenTag,i=this.writer.indent(e,this.writerOptions,this.currentLevel)+"<"+e.name,o=e.attribs)T.call(o,s)&&(n=o[s],i+=this.writer.attribute(n,this.writerOptions,this.currentLevel));i+=(e.children?">":"/>")+this.writer.endline(e,this.writerOptions,this.currentLevel),this.writerOptions.state=r.InsideTag}else this.writerOptions.state=r.OpenTag,i=this.writer.indent(e,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+e.rootNodeName,e.pubID&&e.sysID?i+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.sysID&&(i+=' SYSTEM "'+e.sysID+'"'),e.children?(i+=" [",this.writerOptions.state=r.InsideTag):(this.writerOptions.state=r.CloseTag,i+=">"),i+=this.writer.endline(e,this.writerOptions,this.currentLevel);return this.onData(i,this.currentLevel),e.isOpen=!0}},e.prototype.closeNode=function(e){var n;if(!e.isClosed)return"",this.writerOptions.state=r.CloseTag,n=e.type===t.Element?this.writer.indent(e,this.writerOptions,this.currentLevel)+"</"+e.name+">"+this.writer.endline(e,this.writerOptions,this.currentLevel):this.writer.indent(e,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(e,this.writerOptions,this.currentLevel),this.writerOptions.state=r.None,this.onData(n,this.currentLevel),e.isClosed=!0},e.prototype.onData=function(e,t){return this.documentStarted=!0,this.onDataCallback(e,t+1)},e.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},e.prototype.debugInfo=function(e){return null==e?"":"node: <"+e+">"},e.prototype.ele=function(){return this.element.apply(this,arguments)},e.prototype.nod=function(e,t,n){return this.node(e,t,n)},e.prototype.txt=function(e){return this.text(e)},e.prototype.dat=function(e){return this.cdata(e)},e.prototype.com=function(e){return this.comment(e)},e.prototype.ins=function(e,t){return this.instruction(e,t)},e.prototype.dec=function(e,t,n){return this.declaration(e,t,n)},e.prototype.dtd=function(e,t,n){return this.doctype(e,t,n)},e.prototype.e=function(e,t,n){return this.element(e,t,n)},e.prototype.n=function(e,t,n){return this.node(e,t,n)},e.prototype.t=function(e){return this.text(e)},e.prototype.d=function(e){return this.cdata(e)},e.prototype.c=function(e){return this.comment(e)},e.prototype.r=function(e){return this.raw(e)},e.prototype.i=function(e,t){return this.instruction(e,t)},e.prototype.att=function(){return this.currentNode&&this.currentNode.type===t.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},e.prototype.a=function(){return this.currentNode&&this.currentNode.type===t.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},e.prototype.ent=function(e,t){return this.entity(e,t)},e.prototype.pent=function(e,t){return this.pEntity(e,t)},e.prototype.not=function(e,t){return this.notation(e,t)},e}()}).call(this)},8833:function(e,t,n){(function(){var t,r,i={}.hasOwnProperty;r=n(2026),t=n(9335),e.exports=function(e){function n(e){n.__super__.constructor.call(this,e),this.type=t.Dummy}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(n,e),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(e){return""},n}(r)}).call(this)},2161:function(e,t,n){(function(){var t,r,i,s,o,a,c,u,l={}.hasOwnProperty;u=n(8369),c=u.isObject,a=u.isFunction,o=u.getValue,s=n(2026),t=n(9335),r=n(2750),i=n(663),e.exports=function(e){function n(e,r,i){var s,o,a,c;if(n.__super__.constructor.call(this,e),null==r)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(r),this.type=t.Element,this.attribs={},this.schemaTypeInfo=null,null!=i&&this.attribute(i),e.type===t.Document&&(this.isRoot=!0,this.documentObject=e,e.rootObject=this,e.children))for(o=0,a=(c=e.children).length;o<a;o++)if((s=c[o]).type===t.DocType){s.name=this.name;break}}return function(e,t){for(var n in t)l.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(n,e),Object.defineProperty(n.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(n.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(n.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(n.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(n.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(n.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(n.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(n.prototype,"attributes",{get:function(){return this.attributeMap&&this.attributeMap.nodes||(this.attributeMap=new i(this.attribs)),this.attributeMap}}),n.prototype.clone=function(){var e,t,n,r;for(t in(n=Object.create(this)).isRoot&&(n.documentObject=null),n.attribs={},r=this.attribs)l.call(r,t)&&(e=r[t],n.attribs[t]=e.clone());return n.children=[],this.children.forEach((function(e){var t;return(t=e.clone()).parent=n,n.children.push(t)})),n},n.prototype.attribute=function(e,t){var n,i;if(null!=e&&(e=o(e)),c(e))for(n in e)l.call(e,n)&&(i=e[n],this.attribute(n,i));else a(t)&&(t=t.apply()),this.options.keepNullAttributes&&null==t?this.attribs[e]=new r(this,e,""):null!=t&&(this.attribs[e]=new r(this,e,t));return this},n.prototype.removeAttribute=function(e){var t,n,r;if(null==e)throw new Error("Missing attribute name. "+this.debugInfo());if(e=o(e),Array.isArray(e))for(n=0,r=e.length;n<r;n++)t=e[n],delete this.attribs[t];else delete this.attribs[e];return this},n.prototype.toString=function(e){return this.options.writer.element(this,this.options.writer.filterOptions(e))},n.prototype.att=function(e,t){return this.attribute(e,t)},n.prototype.a=function(e,t){return this.attribute(e,t)},n.prototype.getAttribute=function(e){return this.attribs.hasOwnProperty(e)?this.attribs[e].value:null},n.prototype.setAttribute=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getAttributeNode=function(e){return this.attribs.hasOwnProperty(e)?this.attribs[e]:null},n.prototype.setAttributeNode=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.removeAttributeNode=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getElementsByTagName=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getAttributeNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.setAttributeNS=function(e,t,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.removeAttributeNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getAttributeNodeNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.setAttributeNodeNS=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getElementsByTagNameNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.hasAttribute=function(e){return this.attribs.hasOwnProperty(e)},n.prototype.hasAttributeNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.setIdAttribute=function(e,t){return this.attribs.hasOwnProperty(e)?this.attribs[e].isId:t},n.prototype.setIdAttributeNS=function(e,t,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.setIdAttributeNode=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getElementsByTagName=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getElementsByTagNameNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.getElementsByClassName=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.isEqualNode=function(e){var t,r,i;if(!n.__super__.isEqualNode.apply(this,arguments).isEqualNode(e))return!1;if(e.namespaceURI!==this.namespaceURI)return!1;if(e.prefix!==this.prefix)return!1;if(e.localName!==this.localName)return!1;if(e.attribs.length!==this.attribs.length)return!1;for(t=r=0,i=this.attribs.length-1;0<=i?r<=i:r>=i;t=0<=i?++r:--r)if(!this.attribs[t].isEqualNode(e.attribs[t]))return!1;return!0},n}(s)}).call(this)},663:function(e){(function(){e.exports=function(){function e(e){this.nodes=e}return Object.defineProperty(e.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.getNamedItem=function(e){return this.nodes[e]},e.prototype.setNamedItem=function(e){var t;return t=this.nodes[e.nodeName],this.nodes[e.nodeName]=e,t||null},e.prototype.removeNamedItem=function(e){var t;return t=this.nodes[e],delete this.nodes[e],t||null},e.prototype.item=function(e){return this.nodes[Object.keys(this.nodes)[e]]||null},e.prototype.getNamedItemNS=function(e,t){throw new Error("This DOM method is not implemented.")},e.prototype.setNamedItemNS=function(e){throw new Error("This DOM method is not implemented.")},e.prototype.removeNamedItemNS=function(e,t){throw new Error("This DOM method is not implemented.")},e}()}).call(this)},2026:function(e,t,n){(function(){var t,r,i,s,o,a,c,u,l,p,d,h,f,g,m,y,_,b={}.hasOwnProperty;_=n(8369),y=_.isObject,m=_.isFunction,g=_.isEmpty,f=_.getValue,u=null,i=null,s=null,o=null,a=null,d=null,h=null,p=null,c=null,r=null,l=null,t=null,e.exports=function(){function e(e){this.parent=e,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,u||(u=n(2161),i=n(6170),s=n(2096),o=n(9077),a=n(6544),d=n(9406),h=n(3595),p=n(4981),c=n(8833),r=n(9335),l=n(2390),n(663),t=n(7557))}return Object.defineProperty(e.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(e.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(e.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(e.prototype,"childNodes",{get:function(){return this.childNodeList&&this.childNodeList.nodes||(this.childNodeList=new l(this.children)),this.childNodeList}}),Object.defineProperty(e.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(e.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){var e;return e=this.parent.children.indexOf(this),this.parent.children[e-1]||null}}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){var e;return e=this.parent.children.indexOf(this),this.parent.children[e+1]||null}}),Object.defineProperty(e.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(e.prototype,"textContent",{get:function(){var e,t,n,i,s;if(this.nodeType===r.Element||this.nodeType===r.DocumentFragment){for(s="",t=0,n=(i=this.children).length;t<n;t++)(e=i[t]).textContent&&(s+=e.textContent);return s}return null},set:function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),e.prototype.setParent=function(e){var t,n,r,i,s;for(this.parent=e,e&&(this.options=e.options,this.stringify=e.stringify),s=[],n=0,r=(i=this.children).length;n<r;n++)t=i[n],s.push(t.setParent(this));return s},e.prototype.element=function(e,t,n){var r,i,s,o,a,c,u,l,p,d,h;if(c=null,null===t&&null==n&&(t=(p=[{},null])[0],n=p[1]),null==t&&(t={}),t=f(t),y(t)||(n=(d=[t,n])[0],t=d[1]),null!=e&&(e=f(e)),Array.isArray(e))for(s=0,u=e.length;s<u;s++)i=e[s],c=this.element(i);else if(m(e))c=this.element(e.apply());else if(y(e)){for(a in e)if(b.call(e,a))if(h=e[a],m(h)&&(h=h.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&0===a.indexOf(this.stringify.convertAttKey))c=this.attribute(a.substr(this.stringify.convertAttKey.length),h);else if(!this.options.separateArrayItems&&Array.isArray(h)&&g(h))c=this.dummy();else if(y(h)&&g(h))c=this.element(a);else if(this.options.keepNullNodes||null!=h)if(!this.options.separateArrayItems&&Array.isArray(h))for(o=0,l=h.length;o<l;o++)i=h[o],(r={})[a]=i,c=this.element(r);else y(h)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===a.indexOf(this.stringify.convertTextKey)?c=this.element(h):(c=this.element(a)).element(h):c=this.element(a,h);else c=this.dummy()}else c=this.options.keepNullNodes||null!==n?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===e.indexOf(this.stringify.convertTextKey)?this.text(n):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&0===e.indexOf(this.stringify.convertCDataKey)?this.cdata(n):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&0===e.indexOf(this.stringify.convertCommentKey)?this.comment(n):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&0===e.indexOf(this.stringify.convertRawKey)?this.raw(n):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&0===e.indexOf(this.stringify.convertPIKey)?this.instruction(e.substr(this.stringify.convertPIKey.length),n):this.node(e,t,n):this.dummy();if(null==c)throw new Error("Could not create any elements with: "+e+". "+this.debugInfo());return c},e.prototype.insertBefore=function(e,t,n){var r,i,s,o,a;if(null!=e?e.type:void 0)return o=t,(s=e).setParent(this),o?(i=children.indexOf(o),a=children.splice(i),children.push(s),Array.prototype.push.apply(children,a)):children.push(s),s;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(e));return i=this.parent.children.indexOf(this),a=this.parent.children.splice(i),r=this.parent.element(e,t,n),Array.prototype.push.apply(this.parent.children,a),r},e.prototype.insertAfter=function(e,t,n){var r,i,s;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(e));return i=this.parent.children.indexOf(this),s=this.parent.children.splice(i+1),r=this.parent.element(e,t,n),Array.prototype.push.apply(this.parent.children,s),r},e.prototype.remove=function(){var e;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return e=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[e,e-e+1].concat([])),this.parent},e.prototype.node=function(e,t,n){var r,i;return null!=e&&(e=f(e)),t||(t={}),t=f(t),y(t)||(n=(i=[t,n])[0],t=i[1]),r=new u(this,e,t),null!=n&&r.text(n),this.children.push(r),r},e.prototype.text=function(e){var t;return y(e)&&this.element(e),t=new h(this,e),this.children.push(t),this},e.prototype.cdata=function(e){var t;return t=new i(this,e),this.children.push(t),this},e.prototype.comment=function(e){var t;return t=new s(this,e),this.children.push(t),this},e.prototype.commentBefore=function(e){var t,n;return t=this.parent.children.indexOf(this),n=this.parent.children.splice(t),this.parent.comment(e),Array.prototype.push.apply(this.parent.children,n),this},e.prototype.commentAfter=function(e){var t,n;return t=this.parent.children.indexOf(this),n=this.parent.children.splice(t+1),this.parent.comment(e),Array.prototype.push.apply(this.parent.children,n),this},e.prototype.raw=function(e){var t;return t=new d(this,e),this.children.push(t),this},e.prototype.dummy=function(){return new c(this)},e.prototype.instruction=function(e,t){var n,r,i,s,o;if(null!=e&&(e=f(e)),null!=t&&(t=f(t)),Array.isArray(e))for(s=0,o=e.length;s<o;s++)n=e[s],this.instruction(n);else if(y(e))for(n in e)b.call(e,n)&&(r=e[n],this.instruction(n,r));else m(t)&&(t=t.apply()),i=new p(this,e,t),this.children.push(i);return this},e.prototype.instructionBefore=function(e,t){var n,r;return n=this.parent.children.indexOf(this),r=this.parent.children.splice(n),this.parent.instruction(e,t),Array.prototype.push.apply(this.parent.children,r),this},e.prototype.instructionAfter=function(e,t){var n,r;return n=this.parent.children.indexOf(this),r=this.parent.children.splice(n+1),this.parent.instruction(e,t),Array.prototype.push.apply(this.parent.children,r),this},e.prototype.declaration=function(e,t,n){var i,s;return i=this.document(),s=new o(i,e,t,n),0===i.children.length?i.children.unshift(s):i.children[0].type===r.Declaration?i.children[0]=s:i.children.unshift(s),i.root()||i},e.prototype.dtd=function(e,t){var n,i,s,o,c,u,l,p,d;for(n=this.document(),i=new a(n,e,t),s=o=0,u=(p=n.children).length;o<u;s=++o)if(p[s].type===r.DocType)return n.children[s]=i,i;for(s=c=0,l=(d=n.children).length;c<l;s=++c)if(d[s].isRoot)return n.children.splice(s,0,i),i;return n.children.push(i),i},e.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},e.prototype.root=function(){var e;for(e=this;e;){if(e.type===r.Document)return e.rootObject;if(e.isRoot)return e;e=e.parent}},e.prototype.document=function(){var e;for(e=this;e;){if(e.type===r.Document)return e;e=e.parent}},e.prototype.end=function(e){return this.document().end(e)},e.prototype.prev=function(){var e;if((e=this.parent.children.indexOf(this))<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[e-1]},e.prototype.next=function(){var e;if(-1===(e=this.parent.children.indexOf(this))||e===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[e+1]},e.prototype.importDocument=function(e){var t;return(t=e.root().clone()).parent=this,t.isRoot=!1,this.children.push(t),this},e.prototype.debugInfo=function(e){var t,n;return null!=(e=e||this.name)||(null!=(t=this.parent)?t.name:void 0)?null==e?"parent: <"+this.parent.name+">":(null!=(n=this.parent)?n.name:void 0)?"node: <"+e+">, parent: <"+this.parent.name+">":"node: <"+e+">":""},e.prototype.ele=function(e,t,n){return this.element(e,t,n)},e.prototype.nod=function(e,t,n){return this.node(e,t,n)},e.prototype.txt=function(e){return this.text(e)},e.prototype.dat=function(e){return this.cdata(e)},e.prototype.com=function(e){return this.comment(e)},e.prototype.ins=function(e,t){return this.instruction(e,t)},e.prototype.doc=function(){return this.document()},e.prototype.dec=function(e,t,n){return this.declaration(e,t,n)},e.prototype.e=function(e,t,n){return this.element(e,t,n)},e.prototype.n=function(e,t,n){return this.node(e,t,n)},e.prototype.t=function(e){return this.text(e)},e.prototype.d=function(e){return this.cdata(e)},e.prototype.c=function(e){return this.comment(e)},e.prototype.r=function(e){return this.raw(e)},e.prototype.i=function(e,t){return this.instruction(e,t)},e.prototype.u=function(){return this.up()},e.prototype.importXMLBuilder=function(e){return this.importDocument(e)},e.prototype.replaceChild=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.removeChild=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.appendChild=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.hasChildNodes=function(){return 0!==this.children.length},e.prototype.cloneNode=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.isSupported=function(e,t){return!0},e.prototype.hasAttributes=function(){return 0!==this.attribs.length},e.prototype.compareDocumentPosition=function(e){var n,r;return(n=this)===e?0:this.document()!==e.document()?(r=t.Disconnected|t.ImplementationSpecific,Math.random()<.5?r|=t.Preceding:r|=t.Following,r):n.isAncestor(e)?t.Contains|t.Preceding:n.isDescendant(e)?t.Contains|t.Following:n.isPreceding(e)?t.Preceding:t.Following},e.prototype.isSameNode=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.lookupPrefix=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.isDefaultNamespace=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.lookupNamespaceURI=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.isEqualNode=function(e){var t,n,r;if(e.nodeType!==this.nodeType)return!1;if(e.children.length!==this.children.length)return!1;for(t=n=0,r=this.children.length-1;0<=r?n<=r:n>=r;t=0<=r?++n:--n)if(!this.children[t].isEqualNode(e.children[t]))return!1;return!0},e.prototype.getFeature=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.setUserData=function(e,t,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.getUserData=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.contains=function(e){return!!e&&(e===this||this.isDescendant(e))},e.prototype.isDescendant=function(e){var t,n,r,i;for(n=0,r=(i=this.children).length;n<r;n++){if(e===(t=i[n]))return!0;if(t.isDescendant(e))return!0}return!1},e.prototype.isAncestor=function(e){return e.isDescendant(this)},e.prototype.isPreceding=function(e){var t,n;return t=this.treePosition(e),n=this.treePosition(this),-1!==t&&-1!==n&&t<n},e.prototype.isFollowing=function(e){var t,n;return t=this.treePosition(e),n=this.treePosition(this),-1!==t&&-1!==n&&t>n},e.prototype.treePosition=function(e){var t,n;return n=0,t=!1,this.foreachTreeNode(this.document(),(function(r){if(n++,!t&&r===e)return t=!0})),t?n:-1},e.prototype.foreachTreeNode=function(e,t){var n,r,i,s,o;for(e||(e=this.document()),r=0,i=(s=e.children).length;r<i;r++){if(o=t(n=s[r]))return o;if(o=this.foreachTreeNode(n,t))return o}},e}()}).call(this)},2390:function(e){(function(){e.exports=function(){function e(e){this.nodes=e}return Object.defineProperty(e.prototype,"length",{get:function(){return this.nodes.length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.item=function(e){return this.nodes[e]||null},e}()}).call(this)},4981:function(e,t,n){(function(){var t,r,i={}.hasOwnProperty;t=n(9335),r=n(6488),e.exports=function(e){function n(e,r,i){if(n.__super__.constructor.call(this,e),null==r)throw new Error("Missing instruction target. "+this.debugInfo());this.type=t.ProcessingInstruction,this.target=this.stringify.insTarget(r),this.name=this.target,i&&(this.value=this.stringify.insValue(i))}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(n,e),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(e){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(e))},n.prototype.isEqualNode=function(e){return!!n.__super__.isEqualNode.apply(this,arguments).isEqualNode(e)&&e.target===this.target},n}(r)}).call(this)},9406:function(e,t,n){(function(){var t,r,i={}.hasOwnProperty;t=n(9335),r=n(2026),e.exports=function(e){function n(e,r){if(n.__super__.constructor.call(this,e),null==r)throw new Error("Missing raw text. "+this.debugInfo());this.type=t.Raw,this.value=this.stringify.raw(r)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(n,e),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(e){return this.options.writer.raw(this,this.options.writer.filterOptions(e))},n}(r)}).call(this)},1996:function(e,t,n){(function(){var t,r,i,s={}.hasOwnProperty;t=n(9335),i=n(751),r=n(594),e.exports=function(e){function n(e,t){this.stream=e,n.__super__.constructor.call(this,t)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(n,e),n.prototype.endline=function(e,t,i){return e.isLastRootNode&&t.state===r.CloseTag?"":n.__super__.endline.call(this,e,t,i)},n.prototype.document=function(e,t){var n,r,i,s,o,a,c,u,l;for(r=i=0,o=(c=e.children).length;i<o;r=++i)(n=c[r]).isLastRootNode=r===e.children.length-1;for(t=this.filterOptions(t),l=[],s=0,a=(u=e.children).length;s<a;s++)n=u[s],l.push(this.writeChildNode(n,t,0));return l},n.prototype.attribute=function(e,t,r){return this.stream.write(n.__super__.attribute.call(this,e,t,r))},n.prototype.cdata=function(e,t,r){return this.stream.write(n.__super__.cdata.call(this,e,t,r))},n.prototype.comment=function(e,t,r){return this.stream.write(n.__super__.comment.call(this,e,t,r))},n.prototype.declaration=function(e,t,r){return this.stream.write(n.__super__.declaration.call(this,e,t,r))},n.prototype.docType=function(e,t,n){var i,s,o,a;if(n||(n=0),this.openNode(e,t,n),t.state=r.OpenTag,this.stream.write(this.indent(e,t,n)),this.stream.write("<!DOCTYPE "+e.root().name),e.pubID&&e.sysID?this.stream.write(' PUBLIC "'+e.pubID+'" "'+e.sysID+'"'):e.sysID&&this.stream.write(' SYSTEM "'+e.sysID+'"'),e.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(e,t,n)),t.state=r.InsideTag,s=0,o=(a=e.children).length;s<o;s++)i=a[s],this.writeChildNode(i,t,n+1);t.state=r.CloseTag,this.stream.write("]")}return t.state=r.CloseTag,this.stream.write(t.spaceBeforeSlash+">"),this.stream.write(this.endline(e,t,n)),t.state=r.None,this.closeNode(e,t,n)},n.prototype.element=function(e,n,i){var o,a,c,u,l,p,d,h,f;for(d in i||(i=0),this.openNode(e,n,i),n.state=r.OpenTag,this.stream.write(this.indent(e,n,i)+"<"+e.name),h=e.attribs)s.call(h,d)&&(o=h[d],this.attribute(o,n,i));if(u=0===(c=e.children.length)?null:e.children[0],0===c||e.children.every((function(e){return(e.type===t.Text||e.type===t.Raw)&&""===e.value})))n.allowEmpty?(this.stream.write(">"),n.state=r.CloseTag,this.stream.write("</"+e.name+">")):(n.state=r.CloseTag,this.stream.write(n.spaceBeforeSlash+"/>"));else if(!n.pretty||1!==c||u.type!==t.Text&&u.type!==t.Raw||null==u.value){for(this.stream.write(">"+this.endline(e,n,i)),n.state=r.InsideTag,l=0,p=(f=e.children).length;l<p;l++)a=f[l],this.writeChildNode(a,n,i+1);n.state=r.CloseTag,this.stream.write(this.indent(e,n,i)+"</"+e.name+">")}else this.stream.write(">"),n.state=r.InsideTag,n.suppressPrettyCount++,this.writeChildNode(u,n,i+1),n.suppressPrettyCount--,n.state=r.CloseTag,this.stream.write("</"+e.name+">");return this.stream.write(this.endline(e,n,i)),n.state=r.None,this.closeNode(e,n,i)},n.prototype.processingInstruction=function(e,t,r){return this.stream.write(n.__super__.processingInstruction.call(this,e,t,r))},n.prototype.raw=function(e,t,r){return this.stream.write(n.__super__.raw.call(this,e,t,r))},n.prototype.text=function(e,t,r){return this.stream.write(n.__super__.text.call(this,e,t,r))},n.prototype.dtdAttList=function(e,t,r){return this.stream.write(n.__super__.dtdAttList.call(this,e,t,r))},n.prototype.dtdElement=function(e,t,r){return this.stream.write(n.__super__.dtdElement.call(this,e,t,r))},n.prototype.dtdEntity=function(e,t,r){return this.stream.write(n.__super__.dtdEntity.call(this,e,t,r))},n.prototype.dtdNotation=function(e,t,r){return this.stream.write(n.__super__.dtdNotation.call(this,e,t,r))},n}(i)}).call(this)},6434:function(e,t,n){(function(){var t,r={}.hasOwnProperty;t=n(751),e.exports=function(e){function t(e){t.__super__.constructor.call(this,e)}return function(e,t){for(var n in t)r.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.document=function(e,t){var n,r,i,s,o;for(t=this.filterOptions(t),s="",r=0,i=(o=e.children).length;r<i;r++)n=o[r],s+=this.writeChildNode(n,t,0);return t.pretty&&s.slice(-t.newline.length)===t.newline&&(s=s.slice(0,-t.newline.length)),s},t}(t)}).call(this)},5549:function(e){(function(){var t=function(e,t){return function(){return e.apply(t,arguments)}},n={}.hasOwnProperty;e.exports=function(){function e(e){var r,i,s;for(r in this.assertLegalName=t(this.assertLegalName,this),this.assertLegalChar=t(this.assertLegalChar,this),e||(e={}),this.options=e,this.options.version||(this.options.version="1.0"),i=e.stringify||{})n.call(i,r)&&(s=i[r],this[r]=s)}return e.prototype.name=function(e){return this.options.noValidation?e:this.assertLegalName(""+e||"")},e.prototype.text=function(e){return this.options.noValidation?e:this.assertLegalChar(this.textEscape(""+e||""))},e.prototype.cdata=function(e){return this.options.noValidation?e:(e=(e=""+e||"").replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(e))},e.prototype.comment=function(e){if(this.options.noValidation)return e;if((e=""+e||"").match(/--/))throw new Error("Comment text cannot contain double-hypen: "+e);return this.assertLegalChar(e)},e.prototype.raw=function(e){return this.options.noValidation?e:""+e||""},e.prototype.attValue=function(e){return this.options.noValidation?e:this.assertLegalChar(this.attEscape(e=""+e||""))},e.prototype.insTarget=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},e.prototype.insValue=function(e){if(this.options.noValidation)return e;if((e=""+e||"").match(/\?>/))throw new Error("Invalid processing instruction value: "+e);return this.assertLegalChar(e)},e.prototype.xmlVersion=function(e){if(this.options.noValidation)return e;if(!(e=""+e||"").match(/1\.[0-9]+/))throw new Error("Invalid version number: "+e);return e},e.prototype.xmlEncoding=function(e){if(this.options.noValidation)return e;if(!(e=""+e||"").match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+e);return this.assertLegalChar(e)},e.prototype.xmlStandalone=function(e){return this.options.noValidation?e:e?"yes":"no"},e.prototype.dtdPubID=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},e.prototype.dtdSysID=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},e.prototype.dtdElementValue=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},e.prototype.dtdAttType=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},e.prototype.dtdAttDefault=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},e.prototype.dtdEntityValue=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},e.prototype.dtdNData=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},e.prototype.convertAttKey="@",e.prototype.convertPIKey="?",e.prototype.convertTextKey="#text",e.prototype.convertCDataKey="#cdata",e.prototype.convertCommentKey="#comment",e.prototype.convertRawKey="#raw",e.prototype.assertLegalChar=function(e){var t,n;if(this.options.noValidation)return e;if(t="","1.0"===this.options.version){if(t=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,n=e.match(t))throw new Error("Invalid character in string: "+e+" at index "+n.index)}else if("1.1"===this.options.version&&(t=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,n=e.match(t)))throw new Error("Invalid character in string: "+e+" at index "+n.index);return e},e.prototype.assertLegalName=function(e){var t;if(this.options.noValidation)return e;if(this.assertLegalChar(e),t=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!e.match(t))throw new Error("Invalid character in name");return e},e.prototype.textEscape=function(e){var t;return this.options.noValidation?e:(t=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,e.replace(t,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))},e.prototype.attEscape=function(e){var t;return this.options.noValidation?e:(t=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,e.replace(t,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))},e}()}).call(this)},3595:function(e,t,n){(function(){var t,r,i={}.hasOwnProperty;t=n(9335),r=n(6488),e.exports=function(e){function n(e,r){if(n.__super__.constructor.call(this,e),null==r)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=t.Text,this.value=this.stringify.text(r)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(n,e),Object.defineProperty(n.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(n.prototype,"wholeText",{get:function(){var e,t,n;for(n="",t=this.previousSibling;t;)n=t.data+n,t=t.previousSibling;for(n+=this.data,e=this.nextSibling;e;)n+=e.data,e=e.nextSibling;return n}}),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(e){return this.options.writer.text(this,this.options.writer.filterOptions(e))},n.prototype.splitText=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.replaceWholeText=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n}(r)}).call(this)},751:function(e,t,n){(function(){var t,r,i,s={}.hasOwnProperty;i=n(8369).assign,t=n(9335),n(9077),n(6544),n(6170),n(2096),n(2161),n(9406),n(3595),n(4981),n(8833),n(1179),n(6347),n(9078),n(4777),r=n(594),e.exports=function(){function e(e){var t,n,r;for(t in e||(e={}),this.options=e,n=e.writer||{})s.call(n,t)&&(r=n[t],this["_"+t]=this[t],this[t]=r)}return e.prototype.filterOptions=function(e){var t,n,s,o,a,c,u,l;return e||(e={}),e=i({},this.options,e),(t={writer:this}).pretty=e.pretty||!1,t.allowEmpty=e.allowEmpty||!1,t.indent=null!=(n=e.indent)?n:"  ",t.newline=null!=(s=e.newline)?s:"\n",t.offset=null!=(o=e.offset)?o:0,t.dontPrettyTextNodes=null!=(a=null!=(c=e.dontPrettyTextNodes)?c:e.dontprettytextnodes)?a:0,t.spaceBeforeSlash=null!=(u=null!=(l=e.spaceBeforeSlash)?l:e.spacebeforeslash)?u:"",!0===t.spaceBeforeSlash&&(t.spaceBeforeSlash=" "),t.suppressPrettyCount=0,t.user={},t.state=r.None,t},e.prototype.indent=function(e,t,n){var r;return!t.pretty||t.suppressPrettyCount?"":t.pretty&&(r=(n||0)+t.offset+1)>0?new Array(r).join(t.indent):""},e.prototype.endline=function(e,t,n){return!t.pretty||t.suppressPrettyCount?"":t.newline},e.prototype.attribute=function(e,t,n){var r;return this.openAttribute(e,t,n),r=" "+e.name+'="'+e.value+'"',this.closeAttribute(e,t,n),r},e.prototype.cdata=function(e,t,n){var i;return this.openNode(e,t,n),t.state=r.OpenTag,i=this.indent(e,t,n)+"<![CDATA[",t.state=r.InsideTag,i+=e.value,t.state=r.CloseTag,i+="]]>"+this.endline(e,t,n),t.state=r.None,this.closeNode(e,t,n),i},e.prototype.comment=function(e,t,n){var i;return this.openNode(e,t,n),t.state=r.OpenTag,i=this.indent(e,t,n)+"\x3c!-- ",t.state=r.InsideTag,i+=e.value,t.state=r.CloseTag,i+=" --\x3e"+this.endline(e,t,n),t.state=r.None,this.closeNode(e,t,n),i},e.prototype.declaration=function(e,t,n){var i;return this.openNode(e,t,n),t.state=r.OpenTag,i=this.indent(e,t,n)+"<?xml",t.state=r.InsideTag,i+=' version="'+e.version+'"',null!=e.encoding&&(i+=' encoding="'+e.encoding+'"'),null!=e.standalone&&(i+=' standalone="'+e.standalone+'"'),t.state=r.CloseTag,i+=t.spaceBeforeSlash+"?>",i+=this.endline(e,t,n),t.state=r.None,this.closeNode(e,t,n),i},e.prototype.docType=function(e,t,n){var i,s,o,a,c;if(n||(n=0),this.openNode(e,t,n),t.state=r.OpenTag,a=this.indent(e,t,n),a+="<!DOCTYPE "+e.root().name,e.pubID&&e.sysID?a+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.sysID&&(a+=' SYSTEM "'+e.sysID+'"'),e.children.length>0){for(a+=" [",a+=this.endline(e,t,n),t.state=r.InsideTag,s=0,o=(c=e.children).length;s<o;s++)i=c[s],a+=this.writeChildNode(i,t,n+1);t.state=r.CloseTag,a+="]"}return t.state=r.CloseTag,a+=t.spaceBeforeSlash+">",a+=this.endline(e,t,n),t.state=r.None,this.closeNode(e,t,n),a},e.prototype.element=function(e,n,i){var o,a,c,u,l,p,d,h,f,g,m,y,_,b;for(f in i||(i=0),g=!1,m="",this.openNode(e,n,i),n.state=r.OpenTag,m+=this.indent(e,n,i)+"<"+e.name,y=e.attribs)s.call(y,f)&&(o=y[f],m+=this.attribute(o,n,i));if(u=0===(c=e.children.length)?null:e.children[0],0===c||e.children.every((function(e){return(e.type===t.Text||e.type===t.Raw)&&""===e.value})))n.allowEmpty?(m+=">",n.state=r.CloseTag,m+="</"+e.name+">"+this.endline(e,n,i)):(n.state=r.CloseTag,m+=n.spaceBeforeSlash+"/>"+this.endline(e,n,i));else if(!n.pretty||1!==c||u.type!==t.Text&&u.type!==t.Raw||null==u.value){if(n.dontPrettyTextNodes)for(l=0,d=(_=e.children).length;l<d;l++)if(((a=_[l]).type===t.Text||a.type===t.Raw)&&null!=a.value){n.suppressPrettyCount++,g=!0;break}for(m+=">"+this.endline(e,n,i),n.state=r.InsideTag,p=0,h=(b=e.children).length;p<h;p++)a=b[p],m+=this.writeChildNode(a,n,i+1);n.state=r.CloseTag,m+=this.indent(e,n,i)+"</"+e.name+">",g&&n.suppressPrettyCount--,m+=this.endline(e,n,i),n.state=r.None}else m+=">",n.state=r.InsideTag,n.suppressPrettyCount++,g=!0,m+=this.writeChildNode(u,n,i+1),n.suppressPrettyCount--,g=!1,n.state=r.CloseTag,m+="</"+e.name+">"+this.endline(e,n,i);return this.closeNode(e,n,i),m},e.prototype.writeChildNode=function(e,n,r){switch(e.type){case t.CData:return this.cdata(e,n,r);case t.Comment:return this.comment(e,n,r);case t.Element:return this.element(e,n,r);case t.Raw:return this.raw(e,n,r);case t.Text:return this.text(e,n,r);case t.ProcessingInstruction:return this.processingInstruction(e,n,r);case t.Dummy:return"";case t.Declaration:return this.declaration(e,n,r);case t.DocType:return this.docType(e,n,r);case t.AttributeDeclaration:return this.dtdAttList(e,n,r);case t.ElementDeclaration:return this.dtdElement(e,n,r);case t.EntityDeclaration:return this.dtdEntity(e,n,r);case t.NotationDeclaration:return this.dtdNotation(e,n,r);default:throw new Error("Unknown XML node type: "+e.constructor.name)}},e.prototype.processingInstruction=function(e,t,n){var i;return this.openNode(e,t,n),t.state=r.OpenTag,i=this.indent(e,t,n)+"<?",t.state=r.InsideTag,i+=e.target,e.value&&(i+=" "+e.value),t.state=r.CloseTag,i+=t.spaceBeforeSlash+"?>",i+=this.endline(e,t,n),t.state=r.None,this.closeNode(e,t,n),i},e.prototype.raw=function(e,t,n){var i;return this.openNode(e,t,n),t.state=r.OpenTag,i=this.indent(e,t,n),t.state=r.InsideTag,i+=e.value,t.state=r.CloseTag,i+=this.endline(e,t,n),t.state=r.None,this.closeNode(e,t,n),i},e.prototype.text=function(e,t,n){var i;return this.openNode(e,t,n),t.state=r.OpenTag,i=this.indent(e,t,n),t.state=r.InsideTag,i+=e.value,t.state=r.CloseTag,i+=this.endline(e,t,n),t.state=r.None,this.closeNode(e,t,n),i},e.prototype.dtdAttList=function(e,t,n){var i;return this.openNode(e,t,n),t.state=r.OpenTag,i=this.indent(e,t,n)+"<!ATTLIST",t.state=r.InsideTag,i+=" "+e.elementName+" "+e.attributeName+" "+e.attributeType,"#DEFAULT"!==e.defaultValueType&&(i+=" "+e.defaultValueType),e.defaultValue&&(i+=' "'+e.defaultValue+'"'),t.state=r.CloseTag,i+=t.spaceBeforeSlash+">"+this.endline(e,t,n),t.state=r.None,this.closeNode(e,t,n),i},e.prototype.dtdElement=function(e,t,n){var i;return this.openNode(e,t,n),t.state=r.OpenTag,i=this.indent(e,t,n)+"<!ELEMENT",t.state=r.InsideTag,i+=" "+e.name+" "+e.value,t.state=r.CloseTag,i+=t.spaceBeforeSlash+">"+this.endline(e,t,n),t.state=r.None,this.closeNode(e,t,n),i},e.prototype.dtdEntity=function(e,t,n){var i;return this.openNode(e,t,n),t.state=r.OpenTag,i=this.indent(e,t,n)+"<!ENTITY",t.state=r.InsideTag,e.pe&&(i+=" %"),i+=" "+e.name,e.value?i+=' "'+e.value+'"':(e.pubID&&e.sysID?i+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.sysID&&(i+=' SYSTEM "'+e.sysID+'"'),e.nData&&(i+=" NDATA "+e.nData)),t.state=r.CloseTag,i+=t.spaceBeforeSlash+">"+this.endline(e,t,n),t.state=r.None,this.closeNode(e,t,n),i},e.prototype.dtdNotation=function(e,t,n){var i;return this.openNode(e,t,n),t.state=r.OpenTag,i=this.indent(e,t,n)+"<!NOTATION",t.state=r.InsideTag,i+=" "+e.name,e.pubID&&e.sysID?i+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.pubID?i+=' PUBLIC "'+e.pubID+'"':e.sysID&&(i+=' SYSTEM "'+e.sysID+'"'),t.state=r.CloseTag,i+=t.spaceBeforeSlash+">"+this.endline(e,t,n),t.state=r.None,this.closeNode(e,t,n),i},e.prototype.openNode=function(e,t,n){},e.prototype.closeNode=function(e,t,n){},e.prototype.openAttribute=function(e,t,n){},e.prototype.closeAttribute=function(e,t,n){},e}()}).call(this)},5532:function(e,t,n){(function(){var t,r,i,s,o,a,c,u,l,p;p=n(8369),u=p.assign,l=p.isFunction,i=n(1770),s=n(6934),o=n(9227),c=n(6434),a=n(1996),t=n(9335),r=n(594),e.exports.create=function(e,t,n,r){var i,o;if(null==e)throw new Error("Root element needs a name.");return r=u({},t,n,r),o=(i=new s(r)).element(e),r.headless||(i.declaration(r),null==r.pubID&&null==r.sysID||i.dtd(r)),o},e.exports.begin=function(e,t,n){var r;return l(e)&&(t=(r=[e,t])[0],n=r[1],e={}),t?new o(e,t,n):new s(e)},e.exports.stringWriter=function(e){return new c(e)},e.exports.streamWriter=function(e,t){return new a(e,t)},e.exports.implementation=new i,e.exports.nodeType=t,e.exports.writerState=r}).call(this)},5144:e=>{e.exports={initActions(){let e=this,t={};"usp3"==e.config.model&&(t.setGPO={name:"Set GPO On/Off",options:[{type:"dropdown",label:"GPO Number",id:"gpo",default:this.GPO_LIST[0].id,choices:this.GPO_LIST},{type:"dropdown",label:"GPO State",id:"state",default:"1",choices:[{id:"1",label:"On"},{id:"0",label:"Off"}]}],callback:async t=>{e.sendUSPCommand(`GPO_${t.options.gpo}:${t.options.state}`)}},t.setGPOAll={name:"Set All GPO On/Off",options:[{type:"dropdown",label:"GPO State",id:"state",default:"1",choices:[{id:"1",label:"On"},{id:"0",label:"Off"}]}],callback:async t=>{e.sendUSPCommand(`GPO_00:${t.options.state}`)}},0==this.config.use_as_surface&&(t.pressKey={name:"Press Key",options:[{type:"dropdown",label:"Key Number",id:"key",default:this.KEY_LIST[0].id,choices:this.KEY_LIST}],callback:async t=>{e.sendUSPCommand(`KYP_${t.options.key}:1`)}},t.setKeyText={name:"Set Key Text",options:[{type:"dropdown",label:"Key Number",id:"key",default:this.KEY_LIST[0].id,choices:this.KEY_LIST},{type:"textinput",label:"Text",id:"text",default:""}],callback:async t=>{void 0===e.config.font_size&&(e.config.font_size=0);let n=e.config.font_size,r=t.options.key,i=await e.parseVariablesInString(t.options.text);i.length>0?(i.includes("\\n")&&(i=i.split("\\n").join(" ")),i.includes("_")&&(i=i.split("_").join(" "))):i=" ","auto"==n&&(n=i.length<4?2:i.length<8?1:0),e.sendUSPCommand(`TXT_${String(r).padStart(2,"0")}:${n}_${i}`)}})),this.setActionDefinitions(t)}}},9182:(e,t,n)=>{const{Regex:r}=n(8049);e.exports={getConfigFields:()=>[{type:"static-text",id:"info1",width:12,label:"Information",value:"This module will allow you to use a TSL Products or DNF Controls Universal Switch Panel with Companion.<hr />"},{type:"dropdown",id:"model",label:"Model of USP Panel",width:12,default:"usp3",choices:[{id:"usp3",label:"TSL Products USP3 Panels"},{id:"usp_legacy",label:"DNF Controls USP-8 or USP-16 Panel"}]},{type:"textinput",id:"host_usp",label:"IP Address of USP Panel",width:3,default:"",regex:r.IP},{type:"static-text",id:"info3",width:12,label:"",value:"<hr />"},{type:"static-text",id:"satellite_surface_info_usp_legacy",width:12,label:"Companion Satellite Surface Configuration",value:"This module allows you to use your DNF Controls USP panel as a satellite surface in Companion.",isVisible:e=>"usp_legacy"==e.model},{type:"static-text",id:"satellite_surface_info_usp3",width:12,label:"Companion Satellite Surface Configuration",value:"This module allows you to use your TSL Products USP3 panel as a satellite surface in Companion. If disabled, you can use Companion to send commands to the USP3 panel instead.",isVisible:e=>"usp3"==e.model},{type:"checkbox",id:"use_as_surface",label:"Use as a Satellite Surface in Companion",width:3,default:!0,isVisible:e=>"usp3"==e.model},{type:"textinput",id:"port_companion",label:"TCP Port configured for Companion Satellite (default: 16622)",width:3,default:"16622",regex:r.PORT,isVisible:e=>1==e.use_as_surface},{type:"checkbox",id:"auto_configure",label:"Auto-Configure USP Panel to work as a surface in Companion",width:12,default:!0,isVisible:e=>1==e.use_as_surface},{type:"checkbox",id:"already_configured",label:"Already Auto-Configured",width:12,default:!1,isVisible:e=>!1},{type:"static-text",id:"already_configured_info",width:12,label:"",value:"This panel has already been auto-configured to work as a surface in Companion.",isVisible:e=>1==e.already_configured&&1==e.use_as_surface&&1==e.auto_configure},{type:"checkbox",id:"rerun_configuration",label:"Re-run auto configuration of Panel upon saving module config",width:12,default:!1,isVisible:e=>1==e.use_as_surface&&1==e.auto_configure&&1==e.already_configured},{type:"dropdown",id:"port_usp",label:"Remote Device Port as configured on USP3 Panel",width:6,default:"50001",choices:[{id:"50001",label:"Remote Device 1: 50001"},{id:"50002",label:"Remote Device 2: 50002"},{id:"50003",label:"Remote Device 3: 50003"},{id:"50004",label:"Remote Device 4: 50004"},{id:"50005",label:"Remote Device 5: 50005"},{id:"50006",label:"Remote Device 6: 50006"},{id:"50007",label:"Remote Device 7: 50007"},{id:"50008",label:"Remote Device 8: 50008"}],isVisible:e=>"usp3"==e.model&&(0==e.auto_configure||0==e.use_as_surface)},{type:"dropdown",id:"usp_device_id",label:"Device ID to use for Remote Device Assignment",width:6,default:"0",choices:[{id:"0",label:"Device #1"},{id:"1",label:"Device #2"},{id:"2",label:"Device #3"},{id:"3",label:"Device #4"},{id:"4",label:"Device #5"},{id:"5",label:"Device #6"},{id:"6",label:"Device #7"},{id:"7",label:"Device #8"},{id:"8",label:"Device #9"},{id:"9",label:"Device #10"},{id:"10",label:"Device #11"},{id:"11",label:"Device #12"},{id:"12",label:"Device #13"},{id:"13",label:"Device #14"},{id:"14",label:"Device #15"},{id:"15",label:"Device #16"},{id:"16",label:"Device #17"},{id:"17",label:"Device #18"},{id:"18",label:"Device #19"},{id:"19",label:"Device #20"}],isVisible:e=>"usp_legacy"==e.model&&1==e.use_as_surface&&1==e.auto_configure&&!0!==e.already_configured},{type:"textinput",id:"port_usp_legacy",label:"UDP Port (SNMP) as configured on Panel to send data back to Companion",width:3,default:"1024",regex:r.Port,isVisible:e=>"usp_legacy"==e.model&&0==e.auto_configure},{type:"static-text",id:"info4",width:12,label:"Setting the USP Port",value:"This Port must be unique for each panel and Companion module instance. The commands are sent over UDP, so make sure the panel and Companion are able to communicate over the same subnet.",isVisible:e=>"usp_legacy"==e.model&&0==e.auto_configure},{type:"dropdown",id:"font_size",label:"Preferred Font Size to use on Buttons. Remember that the amount of text that can fit on a button is limited.",width:12,default:"auto",choices:[{id:"auto",label:"Auto Scale"},{id:"0",label:"Small"},{id:"1",label:"Medium"},{id:"2",label:"Large"}],isVisible:e=>1==e.use_as_surface},{type:"static-text",id:"info5",width:12,label:"",value:"<hr />",isVisible:e=>0==e.use_as_surface},{type:"checkbox",id:"polling",label:"Enable Polling - This will poll the USP panel for button states and update Companion with the current state of the panel.",width:6,default:!1,isVisible:e=>0==e.use_as_surface&&"usp3"==e.model},{type:"number",id:"poll_interval",label:"Polling Interval (ms)",min:50,max:3e4,default:1e3,width:6,isVisible:e=>1==e.polling&&0==e.use_as_surface},{type:"static-text",id:"info6",width:12,label:"",value:"<hr />"},{type:"checkbox",id:"verbose",label:"Enable Verbose Logging - This will log all commands sent to the USP panel and all responses received from the panel.",width:12},{type:"static-text",id:"info7",width:12,label:"",value:"<hr />"},{type:"checkbox",id:"advanced_config",label:"Show Advanced Configuration Options",width:12,default:!1},{type:"static-text",id:"advanced_config_info",width:12,label:"",value:"Only change these settings if you know what you are doing. These settings are not required for normal operation."},{type:"static-text",id:"advanced_config_no_settings",width:6,label:"",value:"There are no advanced settings available when not using the USP panel as a surface.",isVisible:e=>1==e.advanced_config&&0==e.use_as_surface},{type:"number",id:"advanced_config_usp_legacy_panel_delay_time",label:"DNF Controls USP Panel Delay Time between Updates (ms)",min:100,max:3e4,default:3e3,width:6,isVisible:e=>1==e.advanced_config&&"usp_legacy"==e.model},{type:"static-text",id:"advanced_config_usp_legacy_panel_delay_time_info",width:6,label:"",value:"This is the amount of time between updates sent to the DNF Controls USP panel. This older USP panel can only handle a certain amount of data at a time without crashing, so this setting can be used to slow down the updates to the panel. The default value is 3000ms (3 seconds).",isVisible:e=>1==e.advanced_config&&"usp_legacy"==e.model},{type:"dropdown",id:"advanced_usp_panel_default_unsupported_color",label:"USP Panel Default Unsupported Button Color",default:2,choices:[{id:0,label:"Dark"},{id:1,label:"Red"},{id:2,label:"Green"},{id:3,label:"Amber"}],width:6,isVisible:e=>1==e.advanced_config&&1==e.use_as_surface},{type:"static-text",id:"advanced_config_usp_panel_default_unsupported_color_info",width:6,label:"",value:"This is the default color to use for button colors that are not supported on the panel. The default value is Green.",isVisible:e=>1==e.advanced_config&&1==e.use_as_surface},{type:"dropdown",id:"advanced_usp_panel_default_dark_color",label:"USP Panel Replace Dark Button Color",default:0,choices:[{id:0,label:"Leave Dark"},{id:1,label:"Red"},{id:2,label:"Green"},{id:3,label:"Amber"}],width:6,isVisible:e=>1==e.advanced_config&&1==e.use_as_surface},{type:"static-text",id:"advanced_config_usp_panel_default_dark_color_info",width:6,label:"",value:"This is the replacement color to use for button colors when the button in Companion is set to a dark color, which can be difficult to read on the USP panel.",isVisible:e=>1==e.advanced_config&&1==e.use_as_surface}]}},5279:e=>{e.exports={GPI_LIST:[{id:"01",label:"GPI 1"},{id:"02",label:"GPI 2"},{id:"03",label:"GPI 3"},{id:"04",label:"GPI 4"},{id:"05",label:"GPI 5"},{id:"06",label:"GPI 6"},{id:"07",label:"GPI 7"},{id:"08",label:"GPI 8"},{id:"09",label:"GPI 9"},{id:"10",label:"GPI 10"},{id:"11",label:"GPI 11"},{id:"12",label:"GPI 12"},{id:"13",label:"GPI 13"},{id:"14",label:"GPI 14"},{id:"15",label:"GPI 15"},{id:"16",label:"GPI 16"}],GPO_LIST:[{id:"01",label:"GPO 1"},{id:"02",label:"GPO 2"},{id:"03",label:"GPO 3"},{id:"04",label:"GPO 4"},{id:"05",label:"GPO 5"},{id:"06",label:"GPO 6"},{id:"07",label:"GPO 7"},{id:"08",label:"GPO 8"},{id:"09",label:"GPO 9"},{id:"10",label:"GPO 10"},{id:"11",label:"GPO 11"},{id:"12",label:"GPO 12"},{id:"13",label:"GPO 13"},{id:"14",label:"GPO 14"},{id:"15",label:"GPO 15"},{id:"16",label:"GPO 16"}],MEM_LIST:[{id:"01",label:"MEM 1"},{id:"02",label:"MEM 2"},{id:"03",label:"MEM 3"},{id:"04",label:"MEM 4"},{id:"05",label:"MEM 5"},{id:"06",label:"MEM 6"},{id:"07",label:"MEM 7"},{id:"08",label:"MEM 8"},{id:"09",label:"MEM 9"},{id:"10",label:"MEM 10"},{id:"11",label:"MEM 11"},{id:"12",label:"MEM 12"},{id:"13",label:"MEM 13"},{id:"14",label:"MEM 14"},{id:"15",label:"MEM 15"},{id:"16",label:"MEM 16"}],KEY_LIST:[{id:"01",label:"KEY 1"},{id:"02",label:"KEY 2"},{id:"03",label:"KEY 3"},{id:"04",label:"KEY 4"},{id:"05",label:"KEY 5"},{id:"06",label:"KEY 6"},{id:"07",label:"KEY 7"},{id:"08",label:"KEY 8"},{id:"09",label:"KEY 9"},{id:"10",label:"KEY 10"},{id:"11",label:"KEY 11"},{id:"12",label:"KEY 12"},{id:"13",label:"KEY 13"},{id:"14",label:"KEY 14"},{id:"15",label:"KEY 15"},{id:"16",label:"KEY 16"}],COLORS:[{id:"00",label:"SOLID_DARK",hex:"#000000"},{id:"01",label:"SOLID_RED",hex:"#FF0000"},{id:"02",label:"SOLID_GREEN",hex:"#00FF00"},{id:"03",label:"SOLID_AMBER",hex:"#FF8000"},{id:"38",label:"SOLID_AQUA",hex:"#00FFFF"},{id:"20",label:"SOLID_BLUE",hex:"#0000FF"},{id:"32",label:"SOLID_PURPLE",hex:"#FF00FF"},{id:"26",label:"SOLID_WHITE",hex:"#FFFFFF"},{id:"04",label:"BLINKING_RED_FAST"},{id:"05",label:"BLINKING_RED_SLOW"},{id:"06",label:"BLINKING_GREEN_FAST"},{id:"07",label:"BLINKING_GREEN_SLOW"},{id:"08",label:"BLINKING_AMBER_FAST"},{id:"09",label:"BLINKING_AMBER_SLOW"},{id:"39",label:"BLINKING_AQUA_FAST"},{id:"40",label:"BLINKING_AQUA_SLOW"},{id:"21",label:"BLINKING_BLUE_FAST"},{id:"22",label:"BLINKING_BLUE_SLOW"},{id:"33",label:"BLINKING_PURPLE_FAST"},{id:"34",label:"BLINKING_PURPLE_SLOW"},{id:"27",label:"BLINKING_WHITE_FAST"},{id:"28",label:"BLINKING_WHITE_SLOW"},{id:"10",label:"SOLID_RED_DIM"},{id:"11",label:"SOLID_GREEN_DIM"},{id:"12",label:"SOLID_AMBER_DIM"},{id:"41",label:"SOLID_AQUA_DIM"},{id:"23",label:"SOLID_BLUE_DIM"},{id:"35",label:"SOLID_PURPLE_DIM"},{id:"29",label:"SOLID_WHITE_DIM"},{id:"13",label:"BLINKING_RED_FAST_DIM"},{id:"14",label:"BLINKING_RED_SLOW_DIM"},{id:"15",label:"BLINKING_GREEN_FAST_DIM"},{id:"16",label:"BLINKING_GREEN_SLOW_DIM"},{id:"17",label:"BLINKING_AMBER_FAST_DIM"},{id:"18",label:"BLINKING_AMBER_SLOW_DIM"},{id:"42",label:"BLINKING_AQUA_FAST_DIM"},{id:"43",label:"BLINKING_AQUA_SLOW_DIM"},{id:"24",label:"BLINKING_BLUE_FAST_DIM"},{id:"25",label:"BLINKING_BLUE_SLOW_DIM"},{id:"36",label:"BLINKING_PURPLE_FAST_DIM"},{id:"37",label:"BLINKING_PURPLE_SLOW_DIM"},{id:"30",label:"BLINKING_WHITE_FAST_DIM"},{id:"31",label:"BLINKING_WHITE_SLOW_DIM"}]}},7417:(e,t,n)=>{const{combineRgb:r}=n(8049);e.exports={initFeedbacks(){let e=this,t={};"usp3"==e.config.model&&(t.gpiState={type:"boolean",name:"GPI Number is in X State",description:"Show feedback for GPI State",options:[{type:"dropdown",label:"GPI Number",id:"gpi",default:this.GPI_LIST[0].id,choices:this.GPI_LIST},{type:"dropdown",label:"State",id:"state",default:"1",choices:[{id:"1",label:"On"},{id:"0",label:"Off"}]}],defaultStyle:{color:r(0,0,0),bgcolor:r(255,0,0)},callback:t=>{let n=t.options,r=e.DATA.gpiStates.find((e=>e.id==n.gpi));return!(!r||r.state!=parseInt(n.state))}},t.gpoState={type:"boolean",name:"GPO Number is in X State",description:"Show feedback for GPO State",options:[{type:"dropdown",label:"GPO Number",id:"gpo",default:this.GPO_LIST[0].id,choices:this.GPO_LIST},{type:"dropdown",label:"State",id:"state",default:"1",choices:[{id:"1",label:"On"},{id:"0",label:"Off"}]}],defaultStyle:{color:r(0,0,0),bgcolor:r(255,0,0)},callback:t=>{let n=t.options,r=e.DATA.gpoStates.find((e=>e.id==n.gpo));return!(!r||r.state!=parseInt(n.state))}},t.memState={type:"boolean",name:"Mem Number is in X State",description:"Show feedback for Mem State",options:[{type:"dropdown",label:"Mem Number",id:"mem",default:this.MEM_LIST[0].id,choices:this.MEM_LIST},{type:"dropdown",label:"State",id:"state",default:"1",choices:[{id:"1",label:"On"},{id:"0",label:"Off"}]}],defaultStyle:{color:r(0,0,0),bgcolor:r(255,0,0)},callback:t=>{let n=t.options,r=e.DATA.memStates.find((e=>e.id==n.mem));return!(!r||r.state!=parseInt(n.state))}},0==e.config.use_as_surface&&(t.keyState={type:"boolean",name:"Key Number is in X State",description:"Show feedback for Key State",options:[{type:"dropdown",label:"Key Number",id:"key",default:this.KEY_LIST[0].id,choices:this.KEY_LIST},{type:"dropdown",label:"State",id:"state",default:"1",choices:[{id:"1",label:"Pressed"},{id:"0",label:"Not Pressed"}]}],defaultStyle:{color:r(0,0,0),bgcolor:r(255,0,0)},callback:t=>{let n=t.options,r=e.DATA.keyStates.find((e=>e.id==n.key));return!(!r||r.state!=parseInt(n.state))}})),e.setFeedbackDefinitions(t)}}},3125:(e,t,n)=>{const{combineRgb:r}=n(8049);e.exports={initPresets(){let e=this,t=[];if("usp3"==e.config.model){if(0==e.config.use_as_surface)for(var n=0;n<this.KEY_LIST.length;n++){let e=this.KEY_LIST[n],i={type:"button",category:"Key Press",name:e.label,style:{text:e.label,size:"12",color:r(255,255,255),bgcolor:r(0,0,0)},steps:[{down:[{actionId:"pressKey",options:{key:e.id}}],up:[]}],feedbacks:[{feedbackId:"keyState",options:{key:e.id,state:"1"},style:{bgcolor:r(255,0,0)}}]};t.push(i)}for(n=0;n<this.GPI_LIST.length;n++){let e=this.GPI_LIST[n],i={type:"button",category:"GPI States",name:e.label,style:{text:e.label,size:"12",color:r(255,255,255),bgcolor:r(0,0,0)},steps:[{down:[],up:[]}],feedbacks:[{feedbackId:"gpiState",options:{gpi:e.id,state:"1"},style:{bgcolor:r(255,0,0)}}]};t.push(i)}for(n=0;n<this.GPO_LIST.length;n++){let e=this.GPO_LIST[n],i={type:"button",category:"GPO Control - ON",name:e.label,style:{text:e.label+" ON",size:"12",color:r(255,255,255),bgcolor:r(0,0,0)},steps:[{down:[{actionId:"setGPO",options:{gpo:e.id,state:"1"}}],up:[]}],feedbacks:[{feedbackId:"gpoState",options:{gpo:e.id,state:"1"},style:{bgcolor:r(255,0,0)}}]};t.push(i)}let i={type:"button",category:"GPO Control - ON",name:"All GPO ON",style:{text:"All GPO ON",size:"12",color:r(255,255,255),bgcolor:r(0,0,0)},steps:[{down:[{actionId:"setGPOAll",options:{state:"1"}}],up:[]}],feedbacks:[]};for(t.push(i),n=0;n<this.GPO_LIST.length;n++){let e=this.GPO_LIST[n],i={type:"button",category:"GPO Control - OFF",name:e.label,style:{text:e.label+" OFF",size:"12",color:r(255,255,255),bgcolor:r(0,0,0)},steps:[{down:[{actionId:"setGPO",options:{gpo:e.id,state:"0"}}],up:[]}],feedbacks:[{feedbackId:"gpoState",options:{gpi:e.id,state:"0"},style:{bgcolor:r(255,0,0)}}]};t.push(i)}let s={type:"button",category:"GPO Control - OFF",name:"All GPO OFF",style:{text:"All GPO OFF",size:"12",color:r(255,255,255),bgcolor:r(0,0,0)},steps:[{down:[{actionId:"setGPOAll",options:{state:"0"}}],up:[]}],feedbacks:[]};t.push(s)}this.setPresetDefinitions(t)}}},4556:e=>{e.exports=[function(e,t){return{updatedConfig:null,updatedActions:[],updatedFeedbacks:[]}}]},603:(e,t,n)=>{const{InstanceStatus:r,TCPHelper:i}=n(8049),s=n(9646).K;e.exports={getClosestUSPColor(e){let t=this;function n(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,r){return t+t+n+n+r+r}));let t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}return function(e){let r,i=Number.POSITIVE_INFINITY,s=0;return t.COLORS.forEach(((t,o)=>{var a,c;void 0!==t.hex&&(a=n(e),c=n(t.hex),r=Math.sqrt(Math.pow(a.r-c.r,2)+Math.pow(a.g-c.g,2)+Math.pow(a.b-c.b,2)),r<i&&(i=r,s=o))})),t.COLORS[s]}(e)},initUSP(){let e=this;""!==e.config.host_usp&&(1==e.config.auto_configure&&!0!==e.config.already_configured||1==e.config.rerun_configuration?e.autoConfigurePanel():(e.log("info","USP3 panel already configured, skipping auto-configuration."),e.initUSP_Connection()))},autoConfigurePanel:async function(){let e=this;e.log("info","Attempting to auto-configure USP3 panel...");let t="";try{let n=e.config.host_usp.split("."),i=n[0]+"."+n[1]+"."+n[2]+".",s=(await e.parseVariablesInString("$(internal:all_ip)")).split("\\n");for(let e=0;e<s.length;e++){let n=s[e];if(n.startsWith(i)){t=n;break}}if(""==t){for(let e=0;e<s.length;e++){let n=s[e];if(0==n.startsWith("0.0.0")&&0==n.startsWith("127.0.0")){t=n;break}}if(""==t)return e.log("error","Could not find a suitable IP for Companion to use as a satellite surface. Turn off Auto-Configure and manually configure the panel."),void e.updateStatus(r.ConnectionFailure);e.log("info","Using IP "+t+" for Companion while auto configuring the panel.")}}catch(t){return e.log("error","Error finding network interfaces: "+t),void e.updateStatus(r.Error)}e.log("info","Configuring Remote Device Assignment Page...");try{let n="";n+=`r${e.config.usp_device_id}c0=Bitfocus+Companion`,n+=`&r${e.config.usp_device_id}c1=14`,n+=`&r${e.config.usp_device_id}c5=${t}`,n+=`&r${e.config.usp_device_id}c7=4`;let r={data:n,headers:{"Content-Type":"application/x-www-form-urlencoded"}};(new s).post("http://"+e.config.host_usp+"/rd_list.htm",r,(function(t,n){e.log("info","Remote Device Assignment Page configured successfully! Now configuring Tally Assignment Page..."),e.autoConfigurePanelSwitches.bind(e)()})).on("error",(function(t){e.log("error","Error auto configuring USP3 panel: "+t)}))}catch(t){return e.log("error","Error configuring Remote Device Assignment Page: "+t),void e.updateStatus(r.Error)}},autoConfigurePanelSwitches:function(){let e=this;e.log("info","Configuring Tally Assignment Page...");try{let t="";for(let e=0;e<16;e++)""!==t&&(t+="&"),t+=`r${5*e}c1=2`,t+="&",t+=`r${5*e}c2=12`,t+="&",t+=`r${5*e}c4=0`;let n={data:t,headers:{"Content-Type":"application/x-www-form-urlencoded"}};(new s).post("http://"+e.config.host_usp+"/tally.htm",n,(function(t,n){e.config.already_configured=!0,e.saveConfig(e.config),e.log("info","USP3 panel auto-configured successfully!"),e.initUSP_Connection()})).on("error",(function(t){e.log("error","Error auto configuring USP panel: "+t)}))}catch(t){return e.log("error","Error configuring Tally Assignment Page: "+t),void e.updateStatus(r.Error)}},initUSP_Connection(){let e=this;try{void 0!==e.SOCKET_USP&&(e.SOCKET_USP.destroy(),delete e.SOCKET_USP),void 0===e.config.port_usp&&(e.config.port_usp=50001),e.config.host_usp&&(e.log("info",`Opening Connection to USP3: ${e.config.host_usp}:${e.config.port_usp}`),e.SOCKET_USP=new i(e.config.host_usp,e.config.port_usp),e.SOCKET_USP.on("error",(t=>{e.log("error","Network error with USP3: "+t.message),e.updateStatus(r.ConnectionFailure),clearInterval(e.USP_INTERVAL),e.SOCKET_USP.destroy(),e.SOCKET_USP,e.DATA.uspConnected=!1,e.checkVariables(),e.log("warn","Connection lost. Attempting to reconnect to USP3 in 5 seconds..."),setTimeout((()=>{e.updateStatus(r.Connecting,"Attempting to Reconnect to Panel..."),e.log("info","Attempting to reconnect to USP3."),e.initUSP_Connection()}),5e3)})),e.SOCKET_USP.on("connect",(()=>{e.log("info",`Connected to USP3 Panel at ${e.config.host_usp}:${e.config.port_usp}`),e.getUSPInformation(),e.initUSPPolling(),1==e.config.use_as_surface&&this.initCompanionSatellite(),e.updateStatus(r.Ok),e.DATA.uspConnected=!0,e.checkVariables()})),e.SOCKET_USP.on("data",(t=>{let n=t.toString("utf8");e.processUSPData(n)})),e.SOCKET_USP.on("close",(()=>{e.updateStatus(r.Warning,"Connection to USP3 lost"),e.DATA.uspConnected=!1,e.checkVariables(),clearInterval(e.USP_INTERVAL),setTimeout((()=>{e.initUSP_Connection()}),5e3)})))}catch(t){e.log("error","Error opening connection to USP3: "+t),e.updateStatus(r.Error)}},processUSPData(e){let t=this;t.log("debug","Received TCP Data from USP3: "+e);try{let n=e.split("\n");for(let e=0;e<n.length;e++)if(n[e].indexOf(",")>-1){let r=n[e].split(",");for(let e=0;e<r.length;e++)r[e].indexOf("COL")>-1?t.processUSP_COLData(r[e]):r[e].indexOf("KEY")>-1||r[e].indexOf("KYP")>-1?t.processUSP_KeyData(r[e]):r[e].indexOf("GPI")>-1?t.processUSP_GPIData(r[e]):r[e].indexOf("GPO")>-1?t.processUSP_GPOData(r[e]):r[e].indexOf("MEM")>-1?t.processUSP_MEMData(r[e]):console.log("Unknown USP3 response: "+r[e])}else n[e].indexOf("COL")>-1?t.processUSP_COLData(n[e]):n[e].indexOf("KEY")>-1||n[e].indexOf("KYP")>-1?t.processUSP_KeyData(n[e]):n[e].indexOf("GPI")>-1?t.processUSP_GPIData(n[e]):n[e].indexOf("GPO")>-1?t.processUSP_GPOData(n[e]):n[e].indexOf("MEM")>-1&&t.processUSP_MEMData(n[e])}catch(e){t.log("error","Error processing USP3 data: "+e.toString())}},processUSP_COLData(e){e.indexOf("ACK")>-1||e.indexOf("NAK")},processUSP_KeyData(e){let t=this;if(!(e.indexOf("ACK")>-1||e.indexOf("NAK")>-1))try{let n=e.substring(e.indexOf("_")+1,e.lastIndexOf(":")),r="1"==e[e.length-1],i={id:n,state:r},s=!1,o=!0;for(let e=0;e<t.DATA.keyStates.length;e++)if(t.DATA.keyStates[e].id==n){t.DATA.keyStates[e].state==r&&(o=!1),t.DATA.keyStates[e].state=r,s=!0;break}s||t.DATA.keyStates.push(i),t.config.use_as_surface&&o&&(n=parseInt(n)-1,t.sendCompanionSatelliteCommand(`KEY-PRESS DEVICEID=${t.DEVICE_ID} KEY=${n} PRESSED=${r}`)),t.checkVariables(),t.checkFeedbacks()}catch(e){t.log("error","Error processing USP3 Key Data: "+e)}},processUSP_GPIData(e){let t=this;if(!(e.indexOf("ACK")>-1||e.indexOf("NAK")>-1))try{let n=e.substring(e.indexOf("_")+1,e.lastIndexOf(":")),r="1"==e[e.length-1],i={id:n,state:r},s=!1;for(let e=0;e<t.DATA.gpiStates.length;e++)if(t.DATA.gpiStates[e].id==n){t.DATA.gpiStates[e].state=r,s=!0;break}s||t.DATA.gpiStates.push(i),t.checkVariables(),t.checkFeedbacks()}catch(e){t.log("error","Error processing USP3 GPI Data: "+e)}},processUSP_GPOData(e){let t=this;if(!(e.indexOf("ACK")>-1))if(e.indexOf("NAK")>-1)t.log("error","Error setting GPO state.");else try{let n=e.substring(e.indexOf("_")+1,e.lastIndexOf(":")),r="1"==e[e.length-1],i={id:n,state:r},s=!1;for(let e=0;e<t.DATA.gpoStates.length;e++)if(t.DATA.gpoStates[e].id==n){t.DATA.gpoStates[e].state=r,s=!0;break}s||t.DATA.gpoStates.push(i),t.checkVariables(),t.checkFeedbacks()}catch(e){t.log("error","Error processing USP3 GPO Data: "+e)}},processUSP_MEMData(e){let t=this;if(!(e.indexOf("ACK")>-1||e.indexOf("NAK")>-1))try{let n=e.substring(e.indexOf("_")+1,e.lastIndexOf(":")),r="1"==e[e.length-1],i={id:n,state:r},s=!1;for(let e=0;e<t.DATA.memStates.length;e++)if(t.DATA.memStates[e].id==n){t.DATA.memStates[e].state=r,s=!0;break}s||t.DATA.memStates.push(i),t.checkVariables(),t.checkFeedbacks()}catch(e){t.log("error","Error processing USP3 MEM Data: "+e)}},sendUSPCommand(e){let t=this;try{void 0!==t.config.host_usp&&""!==t.config.host_usp&&void 0!==t.config.port_usp&&""!==t.config.port_usp&&(void 0!==t.SOCKET_USP&&t.SOCKET_USP.isConnected?(t.config.verbose&&t.log("debug","Sending Command to USP3: "+e),t.SOCKET_USP.send(Buffer.from(e+"\n"))):t.config.verbose&&t.log("debug","TCP Socket to USP3 not open."))}catch(e){t.log("error","Error sending command to USP3: "+e)}},getUSPInformation(){let e=this;e.SOCKET_USP.isConnected&&(e.sendUSPCommand("KEY?"),e.sendUSPCommand("GPI?"),e.sendUSPCommand("GPS?"))},initUSPPolling(){let e=this;void 0!==e.USP_INTERVAL&&(clearInterval(e.USP_INTERVAL),delete e.USP_INTERVAL),(e.config.polling||1==e.config.use_as_surface)&&(e.config.poll_interval=5e3,e.USP_INTERVAL=setInterval((()=>{e.getUSPInformation()}),e.config.poll_interval))}}},7061:(e,t,n)=>{const{InstanceStatus:r}=n(8049),i=n(2351),s=n(3398),o=n(9646).K,a=[{oid:"1.3.6.1.4.1.21541.2.1.0",button:1},{oid:"1.3.6.1.4.1.21541.2.2.0",button:2},{oid:"1.3.6.1.4.1.21541.2.3.0",button:3},{oid:"1.3.6.1.4.1.21541.2.4.0",button:4},{oid:"1.3.6.1.4.1.21541.2.5.0",button:5},{oid:"1.3.6.1.4.1.21541.2.6.0",button:6},{oid:"1.3.6.1.4.1.21541.2.7.0",button:7},{oid:"1.3.6.1.4.1.21541.2.8.0",button:8},{oid:"1.3.6.1.4.1.21541.2.9.0",button:9},{oid:"1.3.6.1.4.1.21541.2.10.0",button:10},{oid:"1.3.6.1.4.1.21541.2.11.0",button:11},{oid:"1.3.6.1.4.1.21541.2.12.0",button:12},{oid:"1.3.6.1.4.1.21541.2.13.0",button:13},{oid:"1.3.6.1.4.1.21541.2.14.0",button:14},{oid:"1.3.6.1.4.1.21541.2.15.0",button:15},{oid:"1.3.6.1.4.1.21541.2.16.0",button:16}];e.exports={initUSP_Legacy:function(){let e=this;1==e.config.auto_configure&&!0!==e.config.already_configured||1==e.config.rerun_configuration?e.autoConfigureLegacyPanel():e.setupSNMP()},autoConfigureLegacyPanel:async function(){let e=this;e.log("info","Attempting to auto-configure USP legacy panel...");let t="";try{let n=e.config.host_usp.split("."),i=n[0]+"."+n[1]+"."+n[2]+".",s=(await e.parseVariablesInString("$(internal:all_ip)")).split("\\n");for(let e=0;e<s.length;e++){let n=s[e];if(n.startsWith(i)){t=n;break}}if(""==t)return e.log("error","Could not find a network interface on the same subnet as the panel - unable to auto-configure."),void e.updateStatus(r.ConnectionFailure,"See log for details.")}catch(t){return e.log("error","Error auto configuring USP legacy panel: "+t),void e.updateStatus(r.ConnectionFailure,"See log for details.")}try{i.getPortPromise({port:161,stopport:200}).then((n=>{e.log("info","Configuring Remote Device Assignment Page...");let r="";r+=`r${e.config.usp_device_id}c0=Bitfocus+Companion`,r+=`&r${e.config.usp_device_id}c1=${t}`,r+=`&r${e.config.usp_device_id}c3=${n}`,r+=`&r${e.config.usp_device_id}c2=19`;let i={data:r,headers:{"Content-Type":"application/x-www-form-urlencoded"}};(new o).post("http://"+e.config.host_usp+"/gtp_hb.htm",i,(function(t,r){e.autoConfigureLegacyPanelSwitches.bind(e)(n)})).on("error",(function(t){e.log("error","Error auto configuring USP legacy panel: "+t)}))})).catch((t=>{e.log("error","Error auto configuring USP legacy panel: "+t)}))}catch(t){return e.log("error","Error auto configuring USP legacy panel: "+t),void e.updateStatus(r.Error)}},autoConfigureLegacyPanelSwitches:function(e){let t=this;t.log("info","Configuring Switch Assignment Page...");try{let n="";for(let e=0;e<16;e++)""!==n&&(n+="&"),n+=`r${e}c0=${e}`,n+="&",n+=`r${e}c1=0`,n+="&",n+=`r${e}c2=1`,n+="&",n+=`r${e}c4=${e}`;let r={data:n,headers:{"Content-Type":"application/x-www-form-urlencoded"}};(new o).post("http://"+t.config.host_usp+"/switch.htm",r,(function(n,r){t.config.port_usp_legacy=e,t.config.already_configured=!0,t.saveConfig(t.config),t.log("info","USP legacy panel auto-configured successfully!"),t.setupSNMP.bind(t)()})).on("error",(function(e){t.log("error","Error auto configuring USP legacy panel: "+e)}))}catch(e){return t.log("error","Error auto configuring USP legacy panel: "+e),void t.updateStatus(r.Error)}},setupSNMP:function(){let e=this;try{if(""!=e.config.port_usp&&null!=e.config.port_usp){e.log("info","Initializing USP Legacy SNMP Agent"),e.log("debug","USP Legacy SNMP Agent listening on port "+e.config.port_usp_legacy);try{e.USP_LEGACY_SNMP_AGENT&&(e.USP_LEGACY_SNMP_AGENT.close(),e.USP_LEGACY_SNMP_AGENT=null),e.USP_LEGACY_SNMP_AGENT=s.createAgent({port:e.config.port_usp_legacy,accessControlModelType:s.AccessControlModelType.Simple},(function(t,n){t?(console.error(t),setTimeout(e.setupSNMP.bind(e),5e3)):e.processUSPLegacyData(n)})),this.USP_LEGACY_SNMP_AGENT.getAuthorizer().addCommunity("public");for(let t=0;t<e.DATA.keys.length;t++)e.DATA.keys[t].changed=!0;let t=e.buildKeysObj();e.currentlyUpdatingLegacyPanel=!0,e.sendUSPLegacyKeysUpdate(t),e.updateStatus(r.Ok)}catch(t){e.updateStatus(r.Error),e.log("error","Error initializing USP Legacy SNMP Agent: "+t)}}else e.updateStatus(r.Warning,"No USP port specified")}catch(t){e.updateStatus(r.Error),e.log("error","Error initializing USP SNMP Agent: "+t)}},processUSPLegacyData:function(e){let t=this;try{for(var n=0;n<e.pdu.varbinds.length;n++){let r=e.pdu.varbinds[n];if("1.3.6.1.4.1.21541.8.1.0"===r.oid)t.DATA.uspConnected=!0,t.checkVariables();else{let e=a.find((e=>e.oid==r.oid));if(e){let n=e.button,i=""==r.requestValue;if(t.config.use_as_surface)n-=1,t.sendCompanionSatelliteCommand(`KEY-PRESS DEVICEID=${t.DEVICE_ID} KEY=${n} PRESSED=${i}`);else{let e={id:n,state:i},r=!1;for(let e=0;e<t.DATA.keyStates.length;e++)if(t.DATA.keyStates[e].id==n){t.DATA.keyStates[e].state=i,r=!0;break}r||t.DATA.keyStates.push(e),t.checkVariables(),t.checkFeedbacks()}}else t.log("debug","Unknown OID: "+r.oid)}}}catch(e){t.log("error","Error processing USP Legacy data: "+e)}},updateLegacyKeys:function(e){let t=this;try{let n=!1,r=t.DATA.keys.find((t=>t.number==e.number));r&&r.text===e.text&&r.color===e.color||(n=!0),n=!0,n&&e.number<=16&&(e.changed=!0,t.updateInternalKey(e),t.queueLegacyKeyUpdate())}catch(e){t.log("error","Error updating USP legacy keys: "+e)}},queueLegacyKeyUpdate:function(){let e=this;try{e.legacy_key_interval&&(clearInterval(e.legacy_key_interval),e.legacy_key_interval=null);let t=100;1==e.currentlyUpdatingLegacyPanel&&(t=e.config.advanced_config_usp_legacy_panel_delay_time),e.legacy_key_interval=setTimeout((function(){e.log("debug","Updating USP legacy keys...");let t=e.buildKeysObj();e.currentlyUpdatingLegacyPanel=!0,e.sendUSPLegacyKeysUpdate(t)}),t)}catch(t){e.log("error","Error queuing USP legacy key update: "+t)}},buildKeysObj:function(){let e=this,t="";try{for(let n=0;n<e.DATA.keys.length;n++){let r=e.DATA.keys[n],i=r.number-1;r.number<=16&&(""!==t&&(t+="&"),t+=`r${i}c0=0`,t+="&",t+=`r${i}c2=${r.text}`,t+="&",t+=`r${i}c3=${r.text}`,t+="&",t+=`r${i}c4=${r.fontSize}`,t+="&",t+=`r${i}c5=${r.fontSize}`,t+="&",t+=`r${i}c6=${r.uspColorLegacy}`,t+="&",t+=`r${i}c7=${r.uspColorLegacy}`,t+="&",t+=`r${i}c8=0`,t+="&",t+=`r${i}c9=2`),r.changed=!1}}catch(t){e.log("error","Error building USP legacy keys: "+t)}return t},sendUSPLegacyKeysUpdate:function(e){let t=this;try{if(""!==t.config.host_usp&&void 0!==t.config.host_usp){let n={data:e,headers:{"Content-Type":"application/x-www-form-urlencoded"}};(new o).post("http://"+t.config.host_usp+"/tally.htm",n,(function(e,n){setTimeout(t.updateCurrentlyUpdatingVariable.bind(t),t.config.advanced_config_usp_legacy_panel_delay_time,!1)})).on("error",(function(e){console.log("request error",e),t.log("error","Error updating USP legacy keys: "+e)}))}else t.log("error","No USP legacy host specified, unable to update keys.")}catch(e){t.log("error","Error sending USP legacy keys update: "+e)}},updateCurrentlyUpdatingVariable:function(e){this.currentlyUpdatingLegacyPanel=e},periodicallyUpdatePanel:function(){let e=this;e.USP_LEGACY_PERIODIC_UPDATE&&(clearInterval(e.USP_LEGACY_PERIODIC_UPDATE),e.USP_LEGACY_PERIODIC_UPDATE=null),e.USP_LEGACY_PERIODIC_UPDATE=setInterval(e.queueLegacyKeyUpdate.bind(e),1e4)}}},3555:(e,t,n)=>{const{InstanceStatus:r,TCPHelper:i}=n(8049);e.exports={initCompanionSatellite(){let e=this;try{void 0!==e.SOCKET_COMPANION&&(e.SOCKET_COMPANION.destroy(),delete e.SOCKET_COMPANION),void 0===e.config.host_companion&&(e.config.host_companion="127.0.0.1"),void 0===e.config.port_companion&&(e.config.port_companion=16622)}catch(t){e.log("error","Error initializing Companion Satellite API: "+t.toString())}if(void 0!==e.config.host_companion)try{e.log("info",`Opening Connection to Companion Satellite API: ${e.config.host_companion}:${e.config.port_companion}`),e.SOCKET_COMPANION=new i(e.config.host_companion,e.config.port_companion),e.SOCKET_COMPANION.on("error",(t=>{e.log("error","Network error with Companion Satellite API: "+t.message),setTimeout((()=>{e.initCompanionSatellite()}),1e4)})),e.SOCKET_COMPANION.on("connect",(()=>{e.log("info","Connected to Companion Satellite API")})),e.SOCKET_COMPANION.on("data",(function(t){e.processCompanionData(t)}))}catch(t){e.log("error","Error initializing Companion Satellite API: "+t.toString())}},CompanionSatellite_Close(){let e=this;try{void 0!==e.SOCKET_COMPANION&&(e.sendCompanionSatelliteCommand(`REMOVE-DEVICE DEVICEID=${this.DEVICE_ID}`),e.sendCompanionSatelliteCommand("QUIT"),e.SOCKET_COMPANION.destroy(),delete e.SOCKET_COMPANION)}catch(t){e.log("error","Error closing Companion Satellite API: "+t.toString())}},processCompanionData(e){let t=this;try{let n=String(e).trim().split("\n");for(let e=0;e<n.length;e++){let r=n[e].split(" "),i=r[0];if("BEGIN"!=i)if("ADD-DEVICE"!=i)if("BRIGHTNESS"!=i)if("KEY-STATE"!=i);else{let e={number:0,type:"BUTTON",color:"",text:"",pressed:!1},n=parseInt(r[2].replace("KEY=",""));switch(e.number=1+n,e.type=r[3].replace("TYPE=",""),e.color=r[5].replace("COLOR=",""),e.text=new Buffer.from(r[6].replace("TEXT=",""),"base64").toString("ascii"),e.type){case"BUTTON":default:break;case"PAGEUP":"usp3"==t.config.model?(e.text="~UPARROW~",e.color="#00FF00"):(e.text=" ^",e.color="#00FF00");break;case"PAGEDOWN":"usp3"==t.config.model?(e.text="~DNARROW~",e.color="#00FF00"):(e.text=" v",e.color="#00FF00");break;case"PAGENUM":e.text="Pg "+e.text,e.color="#00FF00",e.fontSize=0}e.pressed="true"==r[7].replace("PRESSED=","");let i=t.getClosestUSPColor(e.color);if(i&&i.id?e.uspColor=i.id:(e.uspColor="00",i=t.COLORS[0]),t.DATA.brightness<=50){let n=t.COLORS.find((e=>e.label==i.label+"_DIM"));n&&(e.uspColor=n.id)}if("usp3"==t.config.model){let n=parseInt(e.uspColor);switch(n){case 0:0!==t.config.advanced_usp_panel_default_dark_color&&(e.uspColor=t.config.advanced_usp_panel_default_dark_color);break;case 1:case 2:case 3:case 10:case 11:case 12:case 38:case 20:case 32:case 26:case 41:case 23:case 35:case 29:e.uspColor=n;break;default:e.uspColor=t.config.advanced_usp_panel_default_unsupported_color}}else if("usp_legacy"==t.config.model){let n=parseInt(e.uspColor);switch(n){case 0:0!==t.config.advanced_usp_panel_default_dark_color&&(e.uspColorLegacy=t.config.advanced_usp_panel_default_dark_color);break;case 1:case 2:case 3:case 10:case 11:case 12:e.uspColorLegacy=n;break;default:e.uspColorLegacy=t.config.advanced_usp_panel_default_unsupported_color}}let s=e.text;s.length>0?(s.includes("\\n")&&(s=s.split("\\n").join(" ")),s.includes("_")&&(s=s.split("_").join(" "))):s="  ",e.text=s,void 0===t.config.font_size&&(t.config.font_size=0);let o=t.config.font_size;null==e.fontSize&&("auto"==o&&(o=s.length<4?2:s.length<8?1:0),e.fontSize=o),e.uspColor=String(e.uspColor).padStart(2,"0"),"usp3"==t.config.model?(e.number<=16&&(t.sendUSPCommand(`COL_${String(e.number).padStart(2,"0")}:${e.uspColor}`),t.sendUSPCommand(`TXT_${String(e.number).padStart(2,"0")}:${o}_${s}`)),t.updateInternalKey(e)):"usp_legacy"==t.config.model&&t.updateLegacyKeys(e)}else t.DATA.brightness=r[2].replace("VALUE=","");else"OK"==r[1]?(t.DATA.satelliteConnected=!0,t.checkVariables(),t.startCompanionSatellitePing()):(t.log("error","Error adding device to Companion Satellite API: "+r[1]),t.DATA.satelliteConnected=!1,t.checkVariables());else{let e="";e="usp3"==t.config.model?"TSL Products USP3":"usp_legacy"==t.config.model?"DNF Controls USP":"Unknown USP Type",t.sendCompanionSatelliteCommand(`ADD-DEVICE DEVICEID=${t.DEVICE_ID} PRODUCT_NAME="${e}" BITMAPS=false COLORS=true TEXT=true`)}}}catch(e){t.log("error","Error processing Companion Satellite API data: "+e.toString()),console.log(e)}},updateInternalKey(e){let t=this;t.config.verbose&&t.log("debug",`Updating key ${e.number}: ${e.text} ${e.color} pressed: ${e.pressed}`);for(let n=0;n<t.DATA.keys.length;n++)if(t.DATA.keys[n].number==e.number){t.DATA.keys[n]=e;break}t.DATA.keys.push(e)},startCompanionSatellitePing(){let e=this;e.COMPANION_PING_INTERVAL=setInterval((function(){e.sendCompanionSatelliteCommand("PING")}),100)},sendCompanionSatelliteCommand(e){let t=this;try{void 0!==t.SOCKET_COMPANION&&t.SOCKET_COMPANION.isConnected&&(t.config.verbose&&"PING"!==e&&t.log("debug","Sending Companion Satellite API Command: "+e),t.SOCKET_COMPANION.send(e+"\n"))}catch(e){t.log("error","Error sending Companion Satellite API Command: "+e.toString())}}}},4049:e=>{e.exports={initVariables(){let e=this,t=[];if(t.push({variableId:"usp_connected",name:"Connected to USP Panel"}),1==e.config.use_as_surface&&t.push({variableId:"companion_connected",name:"Connected to Companion Satellite API"}),"usp3"==e.config.model){for(let e=0;e<this.GPI_LIST.length;e++){let n=this.GPI_LIST[e];t.push({variableId:`gpi_${n.id}`,name:`GPI ${n.id} State`})}for(let e=0;e<this.GPO_LIST.length;e++){let n=this.GPO_LIST[e];t.push({variableId:`gpo_${n.id}`,name:`GPO ${n.id} State`})}for(let e=0;e<this.MEM_LIST.length;e++){let n=this.MEM_LIST[e];t.push({variableId:`mem_${n.id}`,name:`MEM ${n.id} State`})}if(!e.config.use_as_surface)for(let e=0;e<this.KEY_LIST.length;e++){let n=this.KEY_LIST[e];t.push({variableId:`key_${n.id}`,name:`KEY ${n.id} State`})}}e.setVariableDefinitions(t)},checkVariables(){let e=this;try{let t={};if(void 0!==e.DATA.uspConnected?t.usp_connected=e.DATA.uspConnected?"True":"False":t.usp_connected="",e.config.use_as_surface&&(void 0!==e.DATA.satelliteConnected?t.companion_connected=e.DATA.satelliteConnected?"True":"False":t.companion_connected=""),"usp3"==e.config.model){for(let n=0;n<e.DATA.gpiStates.length;n++){let r=e.DATA.gpiStates[n];t[`gpi_${r.id}`]=r.state?"On":"Off"}for(let n=0;n<e.DATA.gpoStates.length;n++){let r=e.DATA.gpoStates[n];t[`gpo_${r.id}`]=r.state?"On":"Off"}for(let n=0;n<e.DATA.memStates.length;n++){let r=e.DATA.memStates[n];t[`mem_${r.id}`]=r.state?"On":"Off"}if(!e.config.use_as_surface)for(let n=0;n<e.DATA.keyStates.length;n++){let r=e.DATA.keyStates[n];t[`key_${r.id}`]=r.state?"On":"Off"}}e.setVariableValues(t)}catch(t){e.log("error",`Error checking variables: ${t.toString()}`)}}}},9491:e=>{"use strict";e.exports=require("assert")},8709:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},1891:e=>{"use strict";e.exports=require("dgram")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3292:e=>{"use strict";e.exports=require("fs/promises")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1405:e=>{"use strict";e.exports=require("inspector")},1808:e=>{"use strict";e.exports=require("net")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},1576:e=>{"use strict";e.exports=require("string_decoder")},9512:e=>{"use strict";e.exports=require("timers")},4404:e=>{"use strict";e.exports=require("tls")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},2764:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},7359:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.runEntrypoint=void 0;const r=n(6066),i=n(9913),s=r.__importDefault(n(3292)),o=n(2068),a=n(450);n(5605);const c=n(8221),u=r.__importDefault(n(1017));let l,p=!1;t.runEntrypoint=function(e,t){Promise.resolve().then((async()=>{if(p)throw new Error("runEntrypoint can only be called once");p=!0;const n=process.env.MODULE_MANIFEST;if(!n)throw new Error("Module initialise is missing MODULE_MANIFEST");const r=await s.default.readFile(n),d=JSON.parse(r.toString());if(d.runtime?.api!==i.HostApiNodeJsIpc)throw new Error("Module manifest 'api' mismatch");if(!d.runtime.apiVersion)throw new Error("Module manifest 'apiVersion' missing");let h=d.runtime.apiVersion;if("0.0.0"===h)try{const e=await s.default.readFile(u.default.join(__dirname,"../package.json")),t=JSON.parse(e.toString());"@companion-module/base"===t.name&&(h=t.version)}catch(e){throw new Error("Failed to determine module api version")}if(!process.send)throw new Error("Module is not being run with ipc");console.log(`Starting up module class: ${e.name}`);const f=process.env.CONNECTION_ID;if("string"!=typeof f||!f)throw new Error("Module initialise is missing CONNECTION_ID");const g=process.env.VERIFICATION_TOKEN;if("string"!=typeof g||!g)throw new Error("Module initialise is missing VERIFICATION_TOKEN");const m=process.env.SENTRY_DSN,y=process.env.SENTRY_USERID,_=process.env.SENTRY_COMPANION_VERSION;m&&y&&"https://"==m.substring(0,8)?(console.log("Sentry enabled"),(0,a.init)({dsn:m,release:`${d.name}@${d.version}`,beforeSend:e=>(e.exception&&console.log("sentry","error",e.exception),e)}),(0,a.configureScope)((e=>{e.setUser({id:y}),e.setTag("companion",_)}))):console.log("Sentry disabled");const b=new c.IpcWrapper({},(e=>{process.send(e)}),5e3);process.once("message",(e=>{b.receivedMessage(e)})),l=new e((0,o.literal)({id:f,upgradeScripts:t,_isInstanceBaseProps:!0})),b.sendWithCb("register",{apiVersion:h,connectionId:f,verificationToken:g}).then((()=>{console.log("Module-host accepted registration")}),(e=>{console.error("Module registration failed",e),process.exit(11)}))})).catch((e=>{console.error("Failed to startup module:"),console.error(e.stack||e.message),process.exit(1)}))}},1972:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UDPHelper=t.TelnetHelper=t.TCPHelper=void 0;var r=n(9159);Object.defineProperty(t,"TCPHelper",{enumerable:!0,get:function(){return r.TCPHelper}});var i=n(6226);Object.defineProperty(t,"TelnetHelper",{enumerable:!0,get:function(){return i.TelnetHelper}});var s=n(8473);Object.defineProperty(t,"UDPHelper",{enumerable:!0,get:function(){return s.UDPHelper}})},9159:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TCPHelper=void 0;const r=n(6066).__importDefault(n(1808)),i=n(6729),s=n(609);class o extends i.EventEmitter{#e;#t;_socket;#n;#r=!1;#i=!1;#s=!1;#o;#a;get isConnected(){return this.#r}get isConnecting(){return this.#i}get isDestroyed(){return this.#s}constructor(e,t,n){super(),this.#e=e,this.#t=t,this.#n={reconnect_interval:2e3,reconnect:!0,...n},this._socket=new r.default.Socket,this._socket.setKeepAlive(!0),this._socket.setNoDelay(!0),this._socket.on("error",(e=>{this.#i=!1,this.#r=!1,this.#n.reconnect&&this.#c(),this.#u(s.InstanceStatus.UnknownError,e.message),this.emit("error",e)})),this._socket.on("ready",(()=>{this.#r=!0,this.#i=!1,this.#u(s.InstanceStatus.Ok),this.emit("connect")})),this._socket.on("end",(()=>{this.#r=!1,this.#u(s.InstanceStatus.Disconnected),!this.#i&&this.#n.reconnect&&this.#c(),this.emit("end")})),this._socket.on("data",(e=>this.emit("data",e))),this._socket.on("drain",(()=>this.emit("drain"))),setImmediate((()=>this.connect())),setTimeout((()=>{this.#s||this.listenerCount("error")||console.error(`Danger: TCP client for ${this.#e}:${this.#t} is missing an error handler!`)}),5e3)}connect(){if(this.#s)throw new Error("Cannot connect destroyed socket");return!this.#i&&(this.#i=!0,this._socket.connect(this.#t,this.#e),!0)}async send(e){if(this.#s||this._socket.destroyed)throw new Error("Cannot write to destroyed socket");if(!e||!e.length)throw new Error("No message to send");if(!this.#r)return!1;try{return new Promise(((t,n)=>{this._socket.write(e,(e=>{e?n(e):t(!0)}))}))}catch(e){this.#r=!1;const t=e instanceof Error?e:new Error(`${e}`);throw this.#u(s.InstanceStatus.UnknownError,t.message),this.emit("error",t),t}}destroy(){this.#s=!0,void 0!==this.#a&&clearTimeout(this.#a),this._socket.removeAllListeners(),this.removeAllListeners(),this._socket.destroy()}#c(){void 0!==this.#a&&clearTimeout(this.#a),this.#a=setTimeout((()=>{this.#a=void 0,this.#u(s.InstanceStatus.Connecting),this.connect()}),this.#n.reconnect_interval)}#u(e,t){this.#o!=e&&(this.#o=e,this.emit("status_change",e,t))}}t.TCPHelper=o},6226:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TelnetHelper=void 0;const r=n(6066).__importDefault(n(6729)),i=n(2781),s=n(9159);class o extends r.default{#l;#p;get isConnected(){return this.#l.isConnected}get isConnecting(){return this.#l.isConnecting}get isDestroyed(){return this.#l.isDestroyed}constructor(e,t,n){super(),this.#l=new s.TCPHelper(e,t,n),this.#p=new a,this.#l._socket.pipe(this.#p),this.#l.on("connect",(()=>this.emit("connect"))),this.#l.on("end",(()=>this.emit("end"))),this.#l.on("error",(e=>this.emit("error",e))),this.#l.on("status_change",((e,t)=>this.emit("status_change",e,t))),this.#p.on("iac",((e,t)=>this.emit("iac",e,t))),this.#p.on("sb",(e=>this.emit("sb",e))),this.#p.on("data",(e=>this.emit("data",e))),this.#p.on("drain",(()=>this.emit("drain"))),setTimeout((()=>{this.isDestroyed||this.listenerCount("error")||console.error(`Danger: Telnet client for ${e}:${t} is missing an error handler!`)}),5e3)}connect(){return this.#l.connect()}async send(e){return this.#l.send(e)}destroy(){this.#l.destroy(),this.#p.removeAllListeners(),this.#p.destroy()}}t.TelnetHelper=o;class a extends i.Transform{#d;#h;#f;constructor(e){super(e),this.#d=Buffer.alloc(0),this.#h=Buffer.alloc(0),this.#f=0}_transform(e,t,n){for(let t=0;t<e.length;++t)this.#g(e[t]);const r=this.#m();r.length&&this.push(r),n()}#g(e){if(0===this.#f){if(255===e)return void(this.#f=255);this.#d=Buffer.concat([this.#d,Buffer.from([e])])}else if(255===this.#f)switch(e){case 250:case 251:case 252:case 253:case 254:this.#f=e;break;default:this.#f=0}else{if(this.#f>=251&&this.#f<=254){let t;switch(this.#f){case 251:t="WILL";break;case 252:t="WONT";break;case 253:t="DO";break;case 254:t="DONT";break;default:return}return this.emit("iac",t,e),void(this.#f=0)}if(250===this.#f){if(240===e)return this.emit("sb",this.#h),this.#f=0,void(this.#h=Buffer.alloc(0));this.#h=Buffer.concat([this.#h,Buffer.from([e])])}}}#m(){const e=this.#d;return this.#d=Buffer.alloc(0),e}}},8473:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UDPHelper=void 0;const r=n(6066).__importDefault(n(1891)),i=n(6729),s=n(609);class o extends i.EventEmitter{#e;#t;#y;#n;#s=!1;#o;get isDestroyed(){return this.#s}constructor(e,t,n){super(),this.#e=e,this.#t=t,this.#n={...n},this.#y=r.default.createSocket("udp4");try{this.#y.bind(this.#n.bind_port||0,this.#n.bind_ip)}catch(e){throw new Error(`Unable to bind to ip/port: ${this.#n.bind_ip}:${this.#n.bind_port}`)}this.#n.broadcast&&this.#y.setBroadcast(!0),void 0!==this.#n.ttl&&this.#y.setTTL(this.#n.ttl),void 0!==this.#n.multicast_ttl&&this.#y.setMulticastTTL(this.#n.multicast_ttl),this.#y.on("error",(e=>{this.#u(s.InstanceStatus.UnknownError,e.message),this.emit("error",e)})),this.#y.on("listening",(()=>{this.#n.multicast_interface&&this.#y.setMulticastInterface(this.#n.multicast_interface),this.#u(s.InstanceStatus.Ok),this.emit("listening")})),this.#y.on("message",(e=>this.emit("data",e))),setTimeout((()=>{this.#s||this.listenerCount("error")||console.error(`Danger: UDP socket for ${this.#e}:${this.#t} is missing an error handler!`)}),5e3)}async send(e){if(this.#s)throw new Error("Cannot write to destroyed socket");if(!e||!e.length)throw new Error("No message to send");return new Promise(((t,n)=>{this.#y.send(e,this.#t,this.#e,(e=>{e?n(e):t()}))}))}destroy(){this.#s=!0,this.#y.removeAllListeners(),this.#y.close(),this.removeAllListeners()}#u(e,t){this.#o!=e&&(this.#o=e,this.emit("status_change",e,t))}}t.UDPHelper=o},8221:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IpcWrapper=void 0;const r=n(6066),i=n(4300),s=n(2068),o=r.__importDefault(n(2559));t.IpcWrapper=class{#_;#b;#v;#E={};constructor(e,t,n){this.#_=e,this.#b=t,this.#v=n}async sendWithCb(e,t,n,r=0){r<=0&&(r=this.#v);const s={timeout:void 0,resolve:()=>null,reject:()=>null},a=new Promise(((e,t)=>{s.resolve=e,s.reject=t})),c=(0,i.nanoid)();this.#E[c]=s,this.#b({direction:"call",name:String(e),payload:o.default.stringify(t),callbackId:c});const u=new Error("Call timed out");return s.timeout=setTimeout((()=>{s.reject(n?n():u),delete this.#E[c]}),r),a}sendWithNoCb(e,t){this.#b({direction:"call",name:String(e),payload:o.default.stringify(t),callbackId:void 0})}receivedMessage(e){const t=e;switch(e.direction){case"call":{const t=this.#_[e.name];if(!t)return void(e.callbackId&&this.#b({direction:"response",callbackId:e.callbackId,success:!1,payload:o.default.stringify({message:`Unknown command "${e.name}"`})}));t(e.payload?o.default.parse(e.payload):void 0).then((t=>{e.callbackId&&this.#b({direction:"response",callbackId:e.callbackId,success:!0,payload:o.default.stringify(t)})}),(t=>{e.callbackId&&this.#b({direction:"response",callbackId:e.callbackId,success:!1,payload:t instanceof Error?JSON.stringify(t,Object.getOwnPropertyNames(t)):o.default.stringify(t)})}));break}case"response":{if(!e.callbackId)return void console.error("Ipc: Response message has no callbackId");const t=this.#E[e.callbackId];if(delete this.#E[e.callbackId],!t)return;clearTimeout(t.timeout);const n=e.payload?o.default.parse(e.payload):void 0;if(e.success)t.resolve(n);else{let e=n;n&&"message"in n&&(e=new Error(n.message),n.stack&&(e.stack=n.stack)),t.reject(e)}break}default:(0,s.assertNever)(e),console.error(`Ipc: Message of unknown direction "${t.direction}"`)}}}},9913:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HostApiNodeJsIpc=void 0,t.HostApiNodeJsIpc="nodejs-ipc"},8049:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.runEntrypoint=t.assertNever=t.splitRgb=t.combineRgb=t.literal=void 0;const r=n(6066);r.__exportStar(n(7517),t),r.__exportStar(n(4911),t),r.__exportStar(n(2764),t);var i=n(2068);Object.defineProperty(t,"literal",{enumerable:!0,get:function(){return i.literal}}),Object.defineProperty(t,"combineRgb",{enumerable:!0,get:function(){return i.combineRgb}}),Object.defineProperty(t,"splitRgb",{enumerable:!0,get:function(){return i.splitRgb}}),Object.defineProperty(t,"assertNever",{enumerable:!0,get:function(){return i.assertNever}}),r.__exportStar(n(1972),t);var s=n(7359);Object.defineProperty(t,"runEntrypoint",{enumerable:!0,get:function(){return s.runEntrypoint}})},4391:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionManager=void 0;const r=n(2557);function i(e){return{id:e.id,actionId:e.actionId,controlId:e.controlId,options:e.options}}t.ActionManager=class{#S;#w;#I;#T=new Map;#O=new Map;constructor(e,t,n){this.#S=e,this.#w=t,this.#I=n}async handleExecuteAction(e){const t=this.#T.get(e.action.actionId);if(!t)throw new Error(`Unknown action: ${e.action.actionId}`);const n={parseVariablesInString:async t=>(await this.#S({text:t,controlId:e.action.controlId,actionInstanceId:e.action.id,feedbackInstanceId:void 0})).text};await t.callback({id:e.action.id,actionId:e.action.actionId,controlId:e.action.controlId,options:e.action.options,surfaceId:e.surfaceId??e.deviceId,_deviceId:e.surfaceId??e.deviceId,_page:e.action.page,_bank:e.action.bank},n)}handleUpdateActions(e){for(const[t,n]of Object.entries(e)){const e=this.#O.get(t);if(e){const t=this.#T.get(e.actionId);if(t?.unsubscribe){const n={parseVariablesInString:async t=>(await this.#S({text:t,controlId:e.controlId,actionInstanceId:e.id,feedbackInstanceId:void 0})).text};Promise.resolve(t.unsubscribe(i(e),n)).catch((t=>{this.#I("error",`Action unsubscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}if(!n||n.disabled)this.#O.delete(t);else{this.#O.set(t,n);const e=this.#T.get(n.actionId);if(e?.subscribe){const t={parseVariablesInString:async e=>(await this.#S({text:e,controlId:n.controlId,actionInstanceId:n.id,feedbackInstanceId:void 0})).text};Promise.resolve(e.subscribe(i(n),t)).catch((e=>{this.#I("error",`Action subscribe failed: ${JSON.stringify(n)} - ${e?.message??e} ${e?.stack}`)}))}}}}async handleLearnAction(e){const t=this.#T.get(e.action.actionId);if(t&&t.learn){const n={parseVariablesInString:async t=>(await this.#S({text:t,controlId:e.action.controlId,actionInstanceId:e.action.id,feedbackInstanceId:void 0})).text};return{options:await t.learn({id:e.action.id,actionId:e.action.actionId,controlId:e.action.controlId,options:e.action.options,surfaceId:void 0,_deviceId:void 0,_page:e.action.page,_bank:e.action.bank},n)}}return{options:void 0}}setActionDefinitions(e){const t=[];this.#T.clear();for(const[n,i]of Object.entries(e))i&&(t.push({id:n,name:i.name,description:i.description,options:(0,r.serializeIsVisibleFn)(i.options),hasLearn:!!i.learn}),this.#T.set(n,i));this.#w({actions:t})}_getAllActions(){return Array.from(this.#O.values()).map((e=>({id:e.id,actionId:e.actionId,controlId:e.controlId,options:e.options})))}subscribeActions(e){let t=Array.from(this.#O.values());const n=new Set(e);n.size&&(t=t.filter((e=>n.has(e.actionId))));for(const e of t){const t=this.#T.get(e.actionId);if(t?.subscribe){const n={parseVariablesInString:async t=>(await this.#S({text:t,controlId:e.controlId,actionInstanceId:e.id,feedbackInstanceId:void 0})).text};Promise.resolve(t.subscribe(i(e),n)).catch((t=>{this.#I("error",`Action subscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}}unsubscribeActions(e){let t=Array.from(this.#O.values());const n=new Set(e);n.size&&(t=t.filter((e=>n.has(e.actionId))));for(const e of t){const t=this.#T.get(e.actionId);if(t&&t.unsubscribe){const n={parseVariablesInString:async t=>(await this.#S({text:t,controlId:e.controlId,actionInstanceId:e.id,feedbackInstanceId:void 0})).text};Promise.resolve(t.unsubscribe(i(e),n)).catch((t=>{this.#I("error",`Action unsubscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}}}},2557:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isInstanceBaseProps=t.serializeIsVisibleFn=void 0,t.serializeIsVisibleFn=function(e){return e.map((e=>"isVisible"in e&&"function"==typeof e.isVisible?{...e,isVisibleFn:e.isVisible.toString(),isVisible:void 0}:{...e,isVisibleFn:void 0}))},t.isInstanceBaseProps=function(e){const t=e;return"object"==typeof t&&"string"==typeof t.id&&!0===t._isInstanceBaseProps}},7550:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FeedbackManager=void 0;const r=n(6066),i=n(2557),s=r.__importDefault(n(7319));function o(e,t){return{type:e,id:t.id,feedbackId:t.feedbackId,controlId:t.controlId,options:t.options}}t.FeedbackManager=class{#S;#C;#N;#I;#D=new Map;#A=new Map;#x=new Map;#P=new Map;#k;get parseVariablesContext(){return this.#k}constructor(e,t,n,r){this.#S=e,this.#C=t,this.#N=n,this.#I=r}getDefinitionIds(){return Array.from(this.#D.keys())}getInstanceIds(){return Array.from(this.#A.keys())}handleUpdateFeedbacks(e){for(const[t,n]of Object.entries(e)){const e=this.#A.get(t);if(e){const t=this.#D.get(e.feedbackId);if(t?.unsubscribe){const n={parseVariablesInString:async t=>(await this.#S({text:t,controlId:e.controlId,actionInstanceId:void 0,feedbackInstanceId:e.id})).text};Promise.resolve(t.unsubscribe(o(t.type,e),n)).catch((t=>{this.#I("error",`Feedback unsubscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}if(!n||n.disabled)this.#A.delete(t);else{this.#A.set(t,{...n,referencedVariables:null});const e=this.#D.get(n.feedbackId);if(e?.subscribe){const t={parseVariablesInString:async e=>(await this.#S({text:e,controlId:n.controlId,actionInstanceId:void 0,feedbackInstanceId:n.id})).text};Promise.resolve(e.subscribe(o(e.type,n),t)).catch((e=>{this.#I("error",`Feedback subscribe failed: ${JSON.stringify(n)} - ${e?.message??e} ${e?.stack}`)}))}this.#R(t)}}}async handleLearnFeedback(e){const t=this.#D.get(e.feedback.feedbackId);if(t&&t.learn){const n={parseVariablesInString:async t=>(await this.#S({text:t,controlId:e.feedback.controlId,actionInstanceId:void 0,feedbackInstanceId:e.feedback.id})).text};return{options:await t.learn({id:e.feedback.id,feedbackId:e.feedback.feedbackId,controlId:e.feedback.controlId,options:e.feedback.options,type:t.type},n)}}return{options:void 0}}handleVariablesChanged(e){if(!e.variablesIds.length)return;const t=new Set(e.variablesIds);for(const t of this.#P.values())for(const n of e.variablesIds)t.changedVariables.add(n);const n=new Set;for(const e of this.#A.values())if(!this.#P.has(e.id)&&e.referencedVariables)for(const r of e.referencedVariables)if(t.has(r)){n.add(e.id);break}for(const e of n)setImmediate((()=>{this.#R(e)}))}#R(e){const t=this.#P.get(e);if(t)return void(t.needsRecheck=!0);const n=this.#A.get(e);if(!n)return;const r=n,i={needsRecheck:!1,changedVariables:new Set};this.#P.set(e,i),Promise.resolve().then((async()=>{const t=this.#D.get(r.feedbackId);let n;const i=new Set;if(t){this.#k=`Feedback ${r.feedbackId} (${e})`;const s={parseVariablesInString:async t=>{const n=await this.#S({text:t,controlId:r.controlId,actionInstanceId:void 0,feedbackInstanceId:e});if(n.variableIds&&n.variableIds.length)for(const e of n.variableIds)i.add(e);return n.text}};n="boolean"===t.type?t.callback({...o("boolean",r),type:"boolean",_rawBank:r.rawBank},s):t.callback({...o("advanced",r),type:"advanced",image:r.image,_page:r.page,_bank:r.bank,_rawBank:r.rawBank},s),this.#k=void 0}const s=await n;this.#x.set(e,{id:e,controlId:r.controlId,value:s}),this.#B(),r.referencedVariables=i.size>0?Array.from(i):null})).catch((e=>{console.error(`Feedback check failed: ${JSON.stringify(r)} - ${e?.message??e} ${e?.stack}`)})).finally((()=>{this.#k=void 0,this.#P.delete(e);let t=!1;if(r.referencedVariables)for(const e of r.referencedVariables)if(i.changedVariables.has(e)){t=!0;break}(t||i.needsRecheck)&&setImmediate((()=>{this.#R(e)}))}))}#B=(0,s.default)((()=>{const e=this.#x;this.#x=new Map,e.size>0&&this.#C({values:Array.from(e.values())})}),{wait:5,maxWait:25});setFeedbackDefinitions(e){const t=[];this.#D.clear();for(const[n,r]of Object.entries(e))r&&(t.push({id:n,name:r.name,description:r.description,options:(0,i.serializeIsVisibleFn)(r.options),type:r.type,defaultStyle:"defaultStyle"in r?r.defaultStyle:void 0,hasLearn:!!r.learn}),this.#D.set(n,r));this.#N({feedbacks:t})}checkFeedbacks(e){const t=new Set(e);for(const[e,n]of this.#A.entries())this.#D.get(n.feedbackId)&&(0===t.size||t.has(n.feedbackId))&&this.#R(e)}checkFeedbacksById(e){for(const t of e)this.#R(t)}_getAllFeedbacks(){return Array.from(this.#A.values()).map((e=>({id:e.id,feedbackId:e.feedbackId,controlId:e.controlId,options:e.options})))}subscribeFeedbacks(e){let t=Array.from(this.#A.values());const n=new Set(e);n.size&&(t=t.filter((e=>n.has(e.feedbackId))));for(const e of t){const t=this.#D.get(e.feedbackId);if(t?.subscribe){const n={parseVariablesInString:async t=>(await this.#S({text:t,controlId:e.controlId,actionInstanceId:void 0,feedbackInstanceId:e.id})).text};Promise.resolve(t.subscribe(o(t.type,e),n)).catch((t=>{this.#I("error",`Feedback subscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}}unsubscribeFeedbacks(e){let t=Array.from(this.#A.values());const n=new Set(e);n.size&&(t=t.filter((e=>n.has(e.feedbackId))));for(const e of t){const t=this.#D.get(e.feedbackId);if(t&&t.unsubscribe){const n={parseVariablesInString:async t=>(await this.#S({text:t,controlId:e.controlId,actionInstanceId:void 0,feedbackInstanceId:e.id})).text};Promise.resolve(t.unsubscribe(o(t.type,e),n)).catch((t=>{this.#I("error",`Feedback unsubscribe failed: ${JSON.stringify(e)} - ${t?.message??t} ${t?.stack}`)}))}}}}},1806:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.runThroughUpgradeScripts=void 0;const r=n(2068);function i(e){return JSON.parse(JSON.stringify(e))}t.runThroughUpgradeScripts=function(e,t,n,s,o,a){const c=new Map,u=e=>{let t=c.get(e);return t||(t={actions:[],feedbacks:[],config:!1},c.set(e,t)),t};for(const t of Object.values(e)){const e=t?.upgradeIndex??n;t&&"number"==typeof e&&u(e).actions.push(t.id)}for(const e of Object.values(t)){const t=e?.upgradeIndex??n;e&&"number"==typeof t&&u(t).feedbacks.push(e.id)}if(!a)for(let e=n??-1;e<s.length;e++)u(e).config=!0;const l={},p={};let d;if(c.size>0){const a=Array.from(c.keys()).sort(),u=Math.min(...a,n??-1)+1,h=[],f=[],g=s.length;for(let n=u;n<g;n++){const a=c.get(n-1);a&&(h.push(...a.actions),f.push(...a.feedbacks));const u=!!a?.config;if(!u&&0===h.length&&0===f.length)continue;const g=d??o,m=(0,s[n])({currentConfig:i(g)},{config:u?g:null,actions:h.map((t=>{const n=e[t];if(n)return(0,r.literal)({id:n.id,controlId:n.controlId,actionId:n.actionId,options:void 0!==n.options?i(n.options):{}})})).filter((e=>!!e)),feedbacks:f.map((e=>{const n=t[e];if(n)return(0,r.literal)({id:n.id,controlId:n.controlId,feedbackId:n.feedbackId,options:void 0!==n.options?i(n.options):{}})})).filter((e=>!!e))});u&&m.updatedConfig&&(d=m.updatedConfig);for(const t of m.updatedActions)if(t){const n=e[t.id];n&&(n.actionId=t.actionId,n.options=t.options,p[t.id]=n)}for(const e of m.updatedFeedbacks)if(e){const n=t[e.id];n&&(n.feedbackId=e.feedbackId,n.options=e.options,l[e.id]={...n,style:l[e.id]?.style??e.style})}}for(const[t,n]of Object.entries(e))p[t]||"number"!=typeof n?.upgradeIndex||(p[t]=n);for(const[e,n]of Object.entries(t))l[e]||"number"!=typeof n?.upgradeIndex||(l[e]=n)}return{updatedActions:p,updatedFeedbacks:l,updatedConfig:d}}},7517:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateManifest=void 0;const r=n(6066).__importDefault(n(4618));t.validateManifest=function(e){if(!(0,r.default)(e)){const e=r.default.errors;if(!e)throw new Error("Manifest failed validation with unknown reason");throw new Error(`Manifest validation failed: ${JSON.stringify(e)}`)}}},8322:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5203:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InstanceBase=void 0;const r=n(6066),i=n(2068),s=r.__importDefault(n(5860)),o=n(2557),a=n(1806),c=n(7550),u=n(8221),l=n(4391);t.InstanceBase=class{#U;#F;id;#L=new s.default({concurrency:1});#M=!1;#G=!1;#j={};#V;#q;#$=new Map;#Y=new Map;#n;#z;get instanceOptions(){return this.#n}get label(){return this.#z}constructor(e){if(!(0,o.isInstanceBaseProps)(e)||!e._isInstanceBaseProps)throw new Error("Module instance is being constructed incorrectly. Make sure you aren't trying to do this manually");this.#n={disableVariableValidation:!1},this.#U=new u.IpcWrapper({init:this._handleInit.bind(this),destroy:this._handleDestroy.bind(this),updateConfigAndLabel:this._handleConfigUpdateAndLabel.bind(this),updateConfig:async()=>{},executeAction:this._handleExecuteAction.bind(this),updateFeedbacks:this._handleUpdateFeedbacks.bind(this),updateActions:this._handleUpdateActions.bind(this),getConfigFields:this._handleGetConfigFields.bind(this),handleHttpRequest:this._handleHttpRequest.bind(this),learnAction:this._handleLearnAction.bind(this),learnFeedback:this._handleLearnFeedback.bind(this),startStopRecordActions:this._handleStartStopRecordActions.bind(this),variablesChanged:this._handleVariablesChanged.bind(this)},(e=>{process.send(e)}),5e3),process.on("message",(e=>{this.#U.receivedMessage(e)})),this.#V=new l.ActionManager((async e=>this.#U.sendWithCb("parseVariablesInString",e)),(e=>this.#U.sendWithNoCb("setActionDefinitions",e)),this.log.bind(this)),this.#q=new c.FeedbackManager((async e=>this.#U.sendWithCb("parseVariablesInString",e)),(e=>this.#U.sendWithNoCb("updateFeedbackValues",e)),(e=>this.#U.sendWithNoCb("setFeedbackDefinitions",e)),this.log.bind(this)),this.#F=e.upgradeScripts,this.id=e.id,this.#z=e.id,this.log("debug","Initializing")}async _handleInit(e){return this.#L.add((async()=>{if(this.#M)throw new Error("Already initialized");const t=e.actions,n=e.feedbacks;if(this.#j=e.config,this.#z=e.label,e.isFirstInit){const t={},n=this.getConfigFields();for(const e of n)"default"in e&&(t[e.id]=e.default);this.#j=t,this.saveConfig(this.#j),e.lastUpgradeIndex=this.#F.length-1}const{updatedActions:r,updatedFeedbacks:i,updatedConfig:s}=(0,a.runThroughUpgradeScripts)(t,n,e.lastUpgradeIndex,this.#F,this.#j,!1);this.#j=s??this.#j;const o=this.#U.sendWithCb("upgradedItems",{updatedActions:r,updatedFeedbacks:i});try{await this.init(this.#j,!!e.isFirstInit),this.#M=!0}catch(e){throw console.trace(`Init failed: ${e}`),e}finally{await o}return setImmediate((()=>{this._handleUpdateActions({actions:t},!0).catch((e=>{this.log("error",`Receive actions failed: ${e}`)})),this._handleUpdateFeedbacks({feedbacks:n},!0).catch((e=>{this.log("error",`Receive feedbacks failed: ${e}`)}))})),{hasHttpHandler:"function"==typeof this.handleHttpRequest,hasRecordActionsHandler:"function"==typeof this.handleStartStopRecordActions,newUpgradeIndex:this.#F.length-1,updatedConfig:this.#j}}))}async _handleDestroy(){await this.#L.add((async()=>{if(!this.#M)throw new Error("Not initialized");await this.destroy(),this.#M=!1}))}async _handleConfigUpdateAndLabel(e){await this.#L.add((async()=>{if(!this.#M)throw new Error("Not initialized");this.#z=e.label,this.#j=e.config,await this.configUpdated(this.#j)}))}async _handleExecuteAction(e){return this.#V.handleExecuteAction(e)}async _handleUpdateFeedbacks(e,t){if(!t){const t=(0,a.runThroughUpgradeScripts)({},e.feedbacks,null,this.#F,this.#j,!0);this.#U.sendWithCb("upgradedItems",{updatedActions:t.updatedActions,updatedFeedbacks:t.updatedFeedbacks}).catch((e=>{this.log("error",`Failed to save upgraded feedbacks: ${e}`)}))}this.#q.handleUpdateFeedbacks(e.feedbacks)}async _handleUpdateActions(e,t){if(!t){const t=(0,a.runThroughUpgradeScripts)(e.actions,{},null,this.#F,this.#j,!0);this.#U.sendWithCb("upgradedItems",{updatedActions:t.updatedActions,updatedFeedbacks:t.updatedFeedbacks}).catch((e=>{this.log("error",`Failed to save upgraded actions: ${e}`)}))}this.#V.handleUpdateActions(e.actions)}async _handleGetConfigFields(e){return{fields:(0,o.serializeIsVisibleFn)(this.getConfigFields())}}async _handleHttpRequest(e){if(!this.handleHttpRequest)throw new Error("handleHttpRequest is not supported!");return{response:await this.handleHttpRequest(e.request)}}async _handleLearnAction(e){return this.#V.handleLearnAction(e)}async _handleLearnFeedback(e){return this.#q.handleLearnFeedback(e)}async _handleStartStopRecordActions(e){if(e.recording){if(this.#G)return}else if(!this.#G)return;if(!this.handleStartStopRecordActions)throw this.#G=!1,new Error("Recording actions is not supported by this module!");this.#G=e.recording,this.handleStartStopRecordActions(this.#G)}async _handleVariablesChanged(e){this.#q.handleVariablesChanged(e)}saveConfig(e){this.#j=e,this.#U.sendWithNoCb("saveConfig",{config:e})}setActionDefinitions(e){this.#V.setActionDefinitions(e)}setFeedbackDefinitions(e){this.#q.setFeedbackDefinitions(e)}setPresetDefinitions(e){const t=[];for(const[n,r]of Object.entries(e))r&&t.push({...r,id:n});this.#U.sendWithNoCb("setPresetDefinitions",{presets:t})}setVariableDefinitions(e){const t=[];this.#$.clear();for(const n of e)t.push({id:n.variableId,name:n.name}),this.#$.set(n.variableId,n),this.#Y.has(n.variableId)||this.#Y.set(n.variableId,"");if(!this.#n.disableVariableValidation){const e=new Set(this.#$.keys());for(const t of this.#Y.keys())e.has(t)||this.#Y.delete(t)}this.#U.sendWithNoCb("setVariableDefinitions",{variables:t})}setVariableValues(e){const t=[];for(const[n,r]of Object.entries(e))this.#n.disableVariableValidation?(void 0===r?this.#Y.delete(n):this.#Y.set(n,r),t.push({id:n,value:r})):this.#$.has(n)?(this.#Y.set(n,r??""),t.push({id:n,value:r??""})):t.push({id:n,value:void 0});this.#U.sendWithNoCb("setVariableValues",{newValues:t})}getVariableValue(e){return this.#Y.get(e)}async parseVariablesInString(e){const t=this.#q.parseVariablesContext;return t&&this.log("debug",`parseVariablesInString called while in: ${t}. You should use the parseVariablesInString provided to the callback instead`),(await this.#U.sendWithCb("parseVariablesInString",{text:e,controlId:void 0,actionInstanceId:void 0,feedbackInstanceId:void 0})).text}checkFeedbacks(...e){this.#q.checkFeedbacks(e)}checkFeedbacksById(...e){this.#q.checkFeedbacksById(e)}_getAllActions(){return this.#V._getAllActions()}subscribeActions(...e){this.#V.subscribeActions(e)}unsubscribeActions(...e){this.#V.unsubscribeActions(e)}_getAllFeedbacks(){return this.#q._getAllFeedbacks()}subscribeFeedbacks(...e){this.#q.subscribeFeedbacks(e)}unsubscribeFeedbacks(...e){this.#q.unsubscribeFeedbacks(e)}recordAction(e,t){if(!this.#G)throw new Error("Not currently recording actions");this.#U.sendWithNoCb("recordAction",{uniquenessId:t??null,actionId:e.actionId,options:e.options})}setCustomVariableValue(e,t){this.#U.sendWithNoCb("setCustomVariable",{customVariableId:e,value:t})}oscSend(e,t,n,r){this.#U.sendWithNoCb("send-osc",(0,i.literal)({host:e,port:t,path:n,args:r}))}updateStatus(e,t){this.#U.sendWithNoCb("set-status",(0,i.literal)({status:e,message:t??null}))}log(e,t){this.#U.sendWithNoCb("log-message",(0,i.literal)({level:e,message:t}))}}},9051:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},609:(e,t)=>{"use strict";var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.Regex=t.InstanceStatus=void 0,(r=t.InstanceStatus||(t.InstanceStatus={})).Ok="ok",r.Connecting="connecting",r.Disconnected="disconnected",r.ConnectionFailure="connection_failure",r.BadConfig="bad_config",r.UnknownError="unknown_error",r.UnknownWarning="unknown_warning",(n=t.Regex||(t.Regex={})).IP="/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/",n.HOSTNAME="/^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]*[a-zA-Z0-9])\\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9-]*[A-Za-z0-9])$/",n.BOOLEAN="/^(true|false|0|1)$/i",n.PORT="/^([1-9]|[1-8][0-9]|9[0-9]|[1-8][0-9]{2}|9[0-8][0-9]|99[0-9]|[1-8][0-9]{3}|9[0-8][0-9]{2}|99[0-8][0-9]|999[0-9]|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-4])$/",n.PERCENT="/^(100|[0-9]|[0-9][0-9])$/",n.FLOAT="/^([0-9]*\\.)?[0-9]+$/",n.SIGNED_FLOAT="/^[+-]?([0-9]*\\.)?[0-9]+$/",n.FLOAT_OR_INT="/^([0-9]+)(\\.[0-9]+)?$/",n.NUMBER="/^\\d+$/",n.SIGNED_NUMBER="/^[+-]?\\d+$/",n.SOMETHING="/^.+$/",n.TIMECODE="/^(0*[0-9]|1[0-9]|2[0-4]):(0*[0-9]|[1-5][0-9]|60):(0*[0-9]|[1-5][0-9]|60):(0*[0-9]|[12][0-9]|30)$/"},4334:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2490:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4911:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(6066);r.__exportStar(n(8322),t),r.__exportStar(n(5203),t),r.__exportStar(n(9051),t),r.__exportStar(n(609),t),r.__exportStar(n(4334),t),r.__exportStar(n(2490),t),r.__exportStar(n(3646),t),r.__exportStar(n(3558),t),r.__exportStar(n(4788),t),r.__exportStar(n(521),t),r.__exportStar(n(6870),t)},3646:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3558:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4788:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},521:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CreateConvertToBooleanFeedbackUpgradeScript=t.EmptyUpgradeScript=void 0,t.EmptyUpgradeScript=()=>({updatedConfig:null,updatedActions:[],updatedFeedbacks:[]}),t.CreateConvertToBooleanFeedbackUpgradeScript=function(e){return(t,n)=>{const r=[];for(const t of n.feedbacks){let n=e[t.feedbackId];if(!0===n&&(n={bg:"bgcolor",bgcolor:"bgcolor",fg:"color",color:"color",png64:"png64",png:"png64"}),n){t.style||(t.style={});for(const[e,i]of Object.entries(n))void 0!==t.options[e]&&(t.style[i]=t.options[e],delete t.options[e],r.push(t))}}return{updatedConfig:null,updatedActions:[],updatedFeedbacks:r}}}},6870:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2068:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.splitRgb=t.combineRgb=t.assertNever=t.literal=void 0,t.literal=function(e){return e},t.assertNever=function(e){},t.combineRgb=function(e,t,n){return(255&e)<<16|(255&t)<<8|255&n},t.splitRgb=function(e){return{r:(16711680&e)>>16,g:(65280&e)>>8,b:255&e}}},4618:(e,t,n)=>{"use strict";e.exports=s,e.exports.default=s;const r={$schema:"http://json-schema.org/draft-07/schema#",type:"object",title:"ModuleManifest",properties:{id:{type:"string",description:"Unique identifier for the module"},name:{type:"string",description:"Name of the module"},shortname:{type:"string"},description:{type:"string",description:"Description of the module "},version:{type:"string",description:"Current version of the module"},license:{type:"string",description:"SPDX identifier for license of the module"},repository:{type:"string",description:"URL to the source repository"},bugs:{type:"string",description:"URL to bug tracker"},maintainers:{type:"array",description:"List of active maintiners",uniqueItems:!0,items:{type:"object",title:"ModuleManifestMaintainer",properties:{name:{type:"string"},email:{type:"string"},github:{type:"string"}},required:["name"]}},legacyIds:{type:"array",description:"If the module had a different unique identifier previously, then specify it here",uniqueItems:!0,items:{type:"string"}},runtime:{type:"object",title:"ModuleManifestRuntime",description:"Information on how to execute the module",properties:{type:{type:"string",description:"Type of the module. Must be: node18"},api:{type:"string",description:"Which host-api does it use. In the future alternate options will be allowed",enum:["nodejs-ipc"]},apiVersion:{type:"string",description:"The version of the host-api used"},entrypoint:{type:"string",description:"Entrypoint to pass to the runtime. eg index.js"}},required:["type","api","apiVersion","entrypoint"]},manufacturer:{type:"string"},products:{type:"array",uniqueItems:!0,items:{type:"string"}},keywords:{type:"array",uniqueItems:!0,items:{type:"string"}}},required:["id","name","shortname","description","version","license","repository","bugs","maintainers","legacyIds","runtime","manufacturer","products","keywords"]},i=n(7056).Z;function s(e,{instancePath:t="",parentData:n,parentDataProperty:o,rootData:a=e}={}){if(!e||"object"!=typeof e||Array.isArray(e))return s.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let n;if(void 0===e.id&&(n="id")||void 0===e.name&&(n="name")||void 0===e.shortname&&(n="shortname")||void 0===e.description&&(n="description")||void 0===e.version&&(n="version")||void 0===e.license&&(n="license")||void 0===e.repository&&(n="repository")||void 0===e.bugs&&(n="bugs")||void 0===e.maintainers&&(n="maintainers")||void 0===e.legacyIds&&(n="legacyIds")||void 0===e.runtime&&(n="runtime")||void 0===e.manufacturer&&(n="manufacturer")||void 0===e.products&&(n="products")||void 0===e.keywords&&(n="keywords"))return s.errors=[{instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:n},message:"must have required property '"+n+"'"}],!1;if(void 0!==e.id){const n=0;if("string"!=typeof e.id)return s.errors=[{instancePath:t+"/id",schemaPath:"#/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=0===n}else c=!0;if(c){if(void 0!==e.name){const n=0;if("string"!=typeof e.name)return s.errors=[{instancePath:t+"/name",schemaPath:"#/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;c=0===n}else c=!0;if(c){if(void 0!==e.shortname){const n=0;if("string"!=typeof e.shortname)return s.errors=[{instancePath:t+"/shortname",schemaPath:"#/properties/shortname/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;c=0===n}else c=!0;if(c){if(void 0!==e.description){const n=0;if("string"!=typeof e.description)return s.errors=[{instancePath:t+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;c=0===n}else c=!0;if(c){if(void 0!==e.version){const n=0;if("string"!=typeof e.version)return s.errors=[{instancePath:t+"/version",schemaPath:"#/properties/version/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;c=0===n}else c=!0;if(c){if(void 0!==e.license){const n=0;if("string"!=typeof e.license)return s.errors=[{instancePath:t+"/license",schemaPath:"#/properties/license/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;c=0===n}else c=!0;if(c){if(void 0!==e.repository){const n=0;if("string"!=typeof e.repository)return s.errors=[{instancePath:t+"/repository",schemaPath:"#/properties/repository/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;c=0===n}else c=!0;if(c){if(void 0!==e.bugs){const n=0;if("string"!=typeof e.bugs)return s.errors=[{instancePath:t+"/bugs",schemaPath:"#/properties/bugs/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;c=0===n}else c=!0;if(c){if(void 0!==e.maintainers){let n=e.maintainers;const r=0;if(0===r){if(!Array.isArray(n))return s.errors=[{instancePath:t+"/maintainers",schemaPath:"#/properties/maintainers/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;{var u=!0;const e=n.length;for(let r=0;r<e;r++){let e=n[r];const i=0;if(0===i){if(!e||"object"!=typeof e||Array.isArray(e))return s.errors=[{instancePath:t+"/maintainers/"+r,schemaPath:"#/properties/maintainers/items/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let n;if(void 0===e.name&&(n="name"))return s.errors=[{instancePath:t+"/maintainers/"+r,schemaPath:"#/properties/maintainers/items/required",keyword:"required",params:{missingProperty:n},message:"must have required property '"+n+"'"}],!1;if(void 0!==e.name){const n=0;if("string"!=typeof e.name)return s.errors=[{instancePath:t+"/maintainers/"+r+"/name",schemaPath:"#/properties/maintainers/items/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=0===n}else l=!0;if(l){if(void 0!==e.email){const n=0;if("string"!=typeof e.email)return s.errors=[{instancePath:t+"/maintainers/"+r+"/email",schemaPath:"#/properties/maintainers/items/properties/email/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;l=0===n}else l=!0;if(l)if(void 0!==e.github){const n=0;if("string"!=typeof e.github)return s.errors=[{instancePath:t+"/maintainers/"+r+"/github",schemaPath:"#/properties/maintainers/items/properties/github/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;l=0===n}else l=!0}}}if(!(u=0===i))break}if(u){let e,r=n.length;if(r>1)for(;r--;)for(e=r;e--;)if(i(n[r],n[e]))return s.errors=[{instancePath:t+"/maintainers",schemaPath:"#/properties/maintainers/uniqueItems",keyword:"uniqueItems",params:{i:r,j:e},message:"must NOT have duplicate items (items ## "+e+" and "+r+" are identical)"}],!1}}}c=0===r}else c=!0;if(c){if(void 0!==e.legacyIds){let n=e.legacyIds;const r=0;if(0===r){if(!Array.isArray(n))return s.errors=[{instancePath:t+"/legacyIds",schemaPath:"#/properties/legacyIds/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;{var p=!0;const e=n.length;for(let r=0;r<e;r++){const e=0;if("string"!=typeof n[r])return s.errors=[{instancePath:t+"/legacyIds/"+r,schemaPath:"#/properties/legacyIds/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(p=0===e))break}if(p){let e,r=n.length;if(r>1){const i={};for(;r--;){let o=n[r];if("string"==typeof o){if("number"==typeof i[o])return e=i[o],s.errors=[{instancePath:t+"/legacyIds",schemaPath:"#/properties/legacyIds/uniqueItems",keyword:"uniqueItems",params:{i:r,j:e},message:"must NOT have duplicate items (items ## "+e+" and "+r+" are identical)"}],!1;i[o]=r}}}}}}c=0===r}else c=!0;if(c){if(void 0!==e.runtime){let n=e.runtime;const i=0;if(0===i){if(!n||"object"!=typeof n||Array.isArray(n))return s.errors=[{instancePath:t+"/runtime",schemaPath:"#/properties/runtime/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let e;if(void 0===n.type&&(e="type")||void 0===n.api&&(e="api")||void 0===n.apiVersion&&(e="apiVersion")||void 0===n.entrypoint&&(e="entrypoint"))return s.errors=[{instancePath:t+"/runtime",schemaPath:"#/properties/runtime/required",keyword:"required",params:{missingProperty:e},message:"must have required property '"+e+"'"}],!1;if(void 0!==n.type){const e=0;if("string"!=typeof n.type)return s.errors=[{instancePath:t+"/runtime/type",schemaPath:"#/properties/runtime/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var d=0===e}else d=!0;if(d){if(void 0!==n.api){let e=n.api;const i=0;if("string"!=typeof e)return s.errors=[{instancePath:t+"/runtime/api",schemaPath:"#/properties/runtime/properties/api/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("nodejs-ipc"!==e)return s.errors=[{instancePath:t+"/runtime/api",schemaPath:"#/properties/runtime/properties/api/enum",keyword:"enum",params:{allowedValues:r.properties.runtime.properties.api.enum},message:"must be equal to one of the allowed values"}],!1;d=0===i}else d=!0;if(d){if(void 0!==n.apiVersion){const e=0;if("string"!=typeof n.apiVersion)return s.errors=[{instancePath:t+"/runtime/apiVersion",schemaPath:"#/properties/runtime/properties/apiVersion/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;d=0===e}else d=!0;if(d)if(void 0!==n.entrypoint){const e=0;if("string"!=typeof n.entrypoint)return s.errors=[{instancePath:t+"/runtime/entrypoint",schemaPath:"#/properties/runtime/properties/entrypoint/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;d=0===e}else d=!0}}}}c=0===i}else c=!0;if(c){if(void 0!==e.manufacturer){const n=0;if("string"!=typeof e.manufacturer)return s.errors=[{instancePath:t+"/manufacturer",schemaPath:"#/properties/manufacturer/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;c=0===n}else c=!0;if(c){if(void 0!==e.products){let n=e.products;const r=0;if(0===r){if(!Array.isArray(n))return s.errors=[{instancePath:t+"/products",schemaPath:"#/properties/products/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;{var h=!0;const e=n.length;for(let r=0;r<e;r++){const e=0;if("string"!=typeof n[r])return s.errors=[{instancePath:t+"/products/"+r,schemaPath:"#/properties/products/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(h=0===e))break}if(h){let e,r=n.length;if(r>1){const i={};for(;r--;){let o=n[r];if("string"==typeof o){if("number"==typeof i[o])return e=i[o],s.errors=[{instancePath:t+"/products",schemaPath:"#/properties/products/uniqueItems",keyword:"uniqueItems",params:{i:r,j:e},message:"must NOT have duplicate items (items ## "+e+" and "+r+" are identical)"}],!1;i[o]=r}}}}}}c=0===r}else c=!0;if(c)if(void 0!==e.keywords){let n=e.keywords;const r=0;if(0===r){if(!Array.isArray(n))return s.errors=[{instancePath:t+"/keywords",schemaPath:"#/properties/keywords/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;{var f=!0;const e=n.length;for(let r=0;r<e;r++){const e=0;if("string"!=typeof n[r])return s.errors=[{instancePath:t+"/keywords/"+r,schemaPath:"#/properties/keywords/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(f=0===e))break}if(f){let e,r=n.length;if(r>1){const i={};for(;r--;){let o=n[r];if("string"==typeof o){if("number"==typeof i[o])return e=i[o],s.errors=[{instancePath:t+"/keywords",schemaPath:"#/properties/keywords/uniqueItems",keyword:"uniqueItems",params:{i:r,j:e},message:"must NOT have duplicate items (items ## "+e+" and "+r+" are identical)"}],!1;i[o]=r}}}}}}c=0===r}else c=!0}}}}}}}}}}}}}return s.errors=null,!0}},4300:(e,t,n)=>{let r,i,s=n(6113),{urlAlphabet:o}=n(3792),a=e=>{!r||r.length<e?(r=Buffer.allocUnsafe(128*e),s.randomFillSync(r),i=0):i+e>r.length&&(s.randomFillSync(r),i=0),i+=e},c=e=>(a(e-=0),r.subarray(i-e,i)),u=(e,t,n)=>{let r=(2<<31-Math.clz32(e.length-1|1))-1,i=Math.ceil(1.6*r*t/e.length);return(s=t)=>{let o="";for(;;){let t=n(i),a=i;for(;a--;)if(o+=e[t[a]&r]||"",o.length===s)return o}}};e.exports={nanoid:(e=21)=>{a(e-=0);let t="";for(let n=i-e;n<i;n++)t+=o[63&r[n]];return t},customAlphabet:(e,t=21)=>u(e,t,c),customRandom:u,urlAlphabet:o,random:c}},3792:e=>{e.exports={urlAlphabet:"useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"}},6066:(e,t,n)=>{"use strict";n.r(t),n.d(t,{__assign:()=>s,__asyncDelegator:()=>T,__asyncGenerator:()=>I,__asyncValues:()=>O,__await:()=>w,__awaiter:()=>f,__classPrivateFieldGet:()=>x,__classPrivateFieldIn:()=>k,__classPrivateFieldSet:()=>P,__createBinding:()=>m,__decorate:()=>a,__esDecorate:()=>u,__exportStar:()=>y,__extends:()=>i,__generator:()=>g,__importDefault:()=>A,__importStar:()=>D,__makeTemplateObject:()=>C,__metadata:()=>h,__param:()=>c,__propKey:()=>p,__read:()=>b,__rest:()=>o,__runInitializers:()=>l,__setFunctionName:()=>d,__spread:()=>v,__spreadArray:()=>S,__spreadArrays:()=>E,__values:()=>_,default:()=>R});var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var s=function(){return s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)};function o(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function a(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}function c(e,t){return function(n,r){t(n,r,e)}}function u(e,t,n,r,i,s){function o(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var a,c=r.kind,u="getter"===c?"get":"setter"===c?"set":"value",l=!t&&e?r.static?e:e.prototype:null,p=t||(l?Object.getOwnPropertyDescriptor(l,r.name):{}),d=!1,h=n.length-1;h>=0;h--){var f={};for(var g in r)f[g]="access"===g?{}:r[g];for(var g in r.access)f.access[g]=r.access[g];f.addInitializer=function(e){if(d)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(e||null))};var m=(0,n[h])("accessor"===c?{get:p.get,set:p.set}:p[u],f);if("accessor"===c){if(void 0===m)continue;if(null===m||"object"!=typeof m)throw new TypeError("Object expected");(a=o(m.get))&&(p.get=a),(a=o(m.set))&&(p.set=a),(a=o(m.init))&&i.unshift(a)}else(a=o(m))&&("field"===c?i.unshift(a):p[u]=a)}l&&Object.defineProperty(l,r.name,p),d=!0}function l(e,t,n){for(var r=arguments.length>2,i=0;i<t.length;i++)n=r?t[i].call(e,n):t[i].call(e);return r?n:void 0}function p(e){return"symbol"==typeof e?e:"".concat(e)}function d(e,t,n){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function h(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function f(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))}function g(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}var m=Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]};function y(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||m(t,e,n)}function _(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function b(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,s=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o}function v(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(b(arguments[t]));return e}function E(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}function S(e,t,n){if(n||2===arguments.length)for(var r,i=0,s=t.length;i<s;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function w(e){return this instanceof w?(this.v=e,this):new w(e)}function I(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){s.push([e,t,n,r])>1||a(e,t)}))})}function a(e,t){try{(n=i[e](t)).value instanceof w?Promise.resolve(n.value.v).then(c,u):l(s[0][2],n)}catch(e){l(s[0][3],e)}var n}function c(e){a("next",e)}function u(e){a("throw",e)}function l(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}}function T(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:w(e[r](t)),done:!1}:i?i(t):t}:i}}function O(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=_(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){!function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}(r,i,(t=e[n](t)).done,t.value)}))}}}function C(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var N=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function D(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&m(t,e,n);return N(t,e),t}function A(e){return e&&e.__esModule?e:{default:e}}function x(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function P(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n}function k(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}const R={__extends:i,__assign:s,__rest:o,__decorate:a,__param:c,__metadata:h,__awaiter:f,__generator:g,__createBinding:m,__exportStar:y,__values:_,__read:b,__spread:v,__spreadArrays:E,__spreadArray:S,__await:w,__asyncGenerator:I,__asyncDelegator:T,__asyncValues:O,__makeTemplateObject:C,__importStar:D,__importDefault:A,__classPrivateFieldGet:x,__classPrivateFieldSet:P,__classPrivateFieldIn:k}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.loaded=!0,s.exports}n.c=t,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n(n.s=6010)})();